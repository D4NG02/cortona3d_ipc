{"version":3,"sources":["webpack://Cortona3DSolo/webpack/universalModuleDefinition","webpack://Cortona3DSolo/webpack/bootstrap","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/util.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/solo.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/css-loader/dist/runtime/api.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.drawing.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/util.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/interactivity.metadata.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/create-element.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/events/events.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/interactivity.options.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/color-object.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/xml2json.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/hammerjs/hammer.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/core.css?cc2b","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/core.solo.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/core.base.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/deface.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.base.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.ui.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.util.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/vec3f.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/css-object.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/index.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/es6-promise/auto.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/es6-promise/dist/es6-promise.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/process/browser.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/webpack/buildin/global.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/b64ToBlob.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/XMLNodeData.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/drawing.css?8c6c","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/drawing.css","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/drawing.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/pako/dist/pako.es5.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/core.css","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.ipc.interactivity.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.procedure.interactivity.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-core/src/res/tiramisu.css?b443","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-core/src/res/tiramisu.css","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/tiramisu.css?48b2","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/tiramisu.css","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.procedure.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.ipc.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/app.ipc.dpl.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/rotation.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/touch.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/node_modules/pepjs/dist/pep.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/skin.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/skin/skin.less?c33b","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/skin/skin.less","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/skin/UISkinController.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-mini.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/lib/deepmerge.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-plugin-res.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-plugin-file.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-plugin-css.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-plugin-json.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-plugin-xml.js","webpack://Cortona3DSolo/B:/JSPS-SOLO-JOB1/packages/solo-api/src/require-plugin-raw.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","isFunction","arg","isNumber","isString","isObject","isUndefined","extend","f","G","defineClass","parent","ctor","methods","Inheritance","constructor","superClass","expand","obj","arguments","length","props","Array","isArray","RGB","g","b","fromHTMLColor","color","match","parseInt","RegExp","$1","substr","loadScript","fileName","async","resolve","reject","scriptElement","document","createElement","type","src","onload","onerror","getElementsByTagName","appendChild","loadStyleSheet","linkElement","href","rel","isPromise","toString","then","catch","finally","isHTMLNode","Node","test","detectAMDLoader","requirejs","getBaseURL","url","a","cloneNode","protocol","host","pathname","substring","lastIndexOf","loadResource","overrideMimeType","responseType","Promise","DOMURL","URL","webkitURL","xhr","XMLHttpRequest","errorHandler","e","Cortona3DSolo","dispatch","open","onprogress","loaded","total","lengthComputable","undefined","onabort","onreadystatechange","readyState","DONE","revokeObjectURL","status","Error","statusText","send","toggleClass","element","className","flag","classList","contains","add","remove","util","xmlToJson","m_instanceConfigurationFlags","m_usedModules","addons","m_loaded","app","configureInstance","setFlags","resetFlags","set","reset","core","Module","ccall","runtimeReady","modelInfo","once","_tiramisu_configure","drawing","drawingFeatures","config","features","configure","initialize","canvas","use","attach","show","load","setAttribute","style","touchAction","moduleArguments","Arguments","tag","instanceClass","toUrl","createObjectURL","Blob","contentScaleFactor","devicePixelRatio","toModule","version","isDocumentLoaded","loadCompanionFile","data","json","responseXML","baseURL","options","interactivity","specificationName","SpecID","ipc","metadata","$","SimulationInteractivity","getResourceUrl","baseUrl","bundleURL","createResourceURL","writable","checkConfigureOptions","getInstanceConfigurationFlags","getDocumentURL","res","args","indexOf","usedModules","EventEmitter","setMaxListeners","m_baseUrl","currentScript","replace","memo","isOldIE","Boolean","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","list","idCountMap","identifiers","item","id","base","count","concat","index","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","attributes","nonce","keys","forEach","insert","textStore","replaceText","replacement","filter","join","applyToSingletonTag","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","splice","useSourceMap","this","map","content","cssMapping","sourceMapping","base64","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","m_hoveredHotspot","SVGDrawing","m_isSVGVisible","m_urlDrawing","m_hotspotHighlightColor","m_hotspotSelectionColor","ui","applyStyle","render","stroke","strokeOpacity","strokeWidth","fill","fillOpacity","delegate","onProgress","didClickHotspot","didEnterHotspot","toggleHotspotClass","didLeaveHotspot","didCallContextMenu","offsetX","offsetY","onZoomChange","zoom","getDocumentBaseURL","appExports","imageURL","willStartLoadDrawing","shallBeURL","didCompleteLoad","revokeResourceURL","failedLoadingDocument","unload","visible","isVisible","selectHotspot","unselect","select","highlightHotspot","unhighlight","highlight","hoverHotspot","force","scaleBy","shiftBy","valueX","valueY","hotspotExists","slice","svg","some","getAttribute","defineProperties","maxScale","minScale","hotspotHoverColor","hotspotHighlightColor","hotspotSelectionColor","enableHoverFilling","DRAWING_HOTSPOT_HIGHLIGHT_SOLID","enableDrawingOptimization","DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION","parentElement","createElementNS","beforeElement","body","overflow","getSVGViewer","metaValues","val","$text","$attr","parseSelector","selector","token","re","exec","createElementsFromHTML","syntax","div","innerHTML","el","parsed","hasOptions","addChild","child","append","apply","datakey","dataset","cl","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","init","emitter","errorListener","err","removeListener","resolver","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","w","String","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","addEventListener","wrapListener","removeEventListener","RangeError","getPrototypeOf","getMaxListeners","doError","error","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","position","originalListener","shift","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","valueIterator","SimulationInformation","PublisherVersion","SpecVersion","SpecLang","ModificationDate","DocumentFile","ColorObject","clamp255","Math","round","clamp01","max","min","bound01","abs","parseFloat","hue2rgb","q","millicolor","hex","h","toRgb","toHsl","toUpperCase","toArray","toValue","toHslString","hsl","toRgbString","inverse","rgb","getBrightness","getLuminance","R01","G01","B01","pow","desaturate","amount","saturate","grayscale","lighten","darken","spin","hue","brighten","complement","XMLNodeData","xml","nodeType","nodeName","j","attribute","nodeValue","hasText","hasMultiText","hasNodes","hasCDATA","hasChildNodes","isElement","isText","old","exportName","assign","VENDOR_PREFIXES","TEST_ELEMENT","now","Date","setTimeoutContext","fn","timeout","setTimeout","bindFn","invokeArrayArg","each","iterator","deprecate","method","deprecationMessage","stack","log","output","nextKey","dest","merge","inherit","properties","childP","baseP","_super","boolOrFn","ifUndefined","val1","val2","addEventListeners","types","splitStr","removeEventListeners","hasParent","node","inStr","str","find","trim","split","inArray","findByKey","uniqueArray","sort","results","values","prefixed","prefix","prop","camelProp","_uniqueId","getWindowForElement","doc","ownerDocument","defaultView","parentWindow","SUPPORT_TOUCH","SUPPORT_POINTER_EVENTS","SUPPORT_ONLY_TOUCH","navigator","userAgent","PROPS_XY","PROPS_CLIENT_XY","Input","manager","callback","self","inputTarget","domHandler","ev","enable","inputHandler","eventType","input","pointersLen","pointers","changedPointersLen","changedPointers","isFirst","isFinal","session","pointersLength","firstInput","simpleCloneInputData","firstMultiple","offsetCenter","center","getCenter","timeStamp","deltaTime","angle","getAngle","distance","getDistance","offset","offsetDelta","prevDelta","prevInput","x","deltaX","y","deltaY","computeDeltaXY","offsetDirection","getDirection","overallVelocity","getVelocity","overallVelocityX","overallVelocityY","scale","start","end","rotation","getRotation","maxPointers","velocity","velocityX","velocityY","direction","last","lastInterval","v","computeIntervalInputData","srcEvent","computeInputData","recognize","clientX","clientY","p1","p2","sqrt","atan2","PI","evEl","evTarget","evWin","destroy","MOUSE_INPUT_MAP","mousedown","mousemove","mouseup","MouseInput","pressed","button","which","pointerType","POINTER_INPUT_MAP","pointerdown","pointermove","pointerup","pointercancel","pointerout","IE10_POINTER_TYPE_ENUM","2","3","4","5","POINTER_ELEMENT_EVENTS","POINTER_WINDOW_EVENTS","PointerEventInput","store","pointerEvents","MSPointerEvent","PointerEvent","removePointer","eventTypeNormalized","toLowerCase","isTouch","storeIndex","pointerId","SINGLE_TOUCH_INPUT_MAP","touchstart","touchmove","touchend","touchcancel","SingleTouchInput","started","normalizeSingleTouches","touches","changed","changedTouches","TOUCH_INPUT_MAP","TouchInput","targetIds","getTouches","allTouches","targetTouches","changedTargetTouches","touch","TouchMouseInput","mouse","primaryTouch","lastTouches","recordTouches","eventData","setLastTouch","lastTouch","lts","isSyntheticEvent","dx","dy","inputEvent","inputData","isMouse","sourceCapabilities","firesTouchEvents","PREFIXED_TOUCH_ACTION","NATIVE_TOUCH_ACTION","TOUCH_ACTION_MAP","touchMap","cssSupports","CSS","supports","getTouchActionProps","TouchAction","compute","actions","recognizers","recognizer","getTouchAction","hasPanX","hasPanY","cleanTouchActions","preventDefaults","prevented","preventDefault","hasNone","isTapPointer","isTapMovement","isTapTouchTime","DIRECTION_LEFT","DIRECTION_UP","preventSrc","Recognizer","defaults","simultaneous","requireFail","stateStr","directionStr","getRecognizerByNameIfManager","otherRecognizer","AttrRecognizer","PanRecognizer","pX","pY","PinchRecognizer","PressRecognizer","_timer","_input","RotateRecognizer","SwipeRecognizer","TapRecognizer","pTime","pCenter","Hammer","preset","Manager","recognizeWith","dropRecognizeWith","requireFailure","dropRequireFailure","hasRequireFailures","canRecognizeWith","event","additionalEvent","tryEmit","canEmit","inputDataClone","process","attrTest","optionPointers","isRecognized","isValid","threshold","DIRECTION_HORIZONTAL","directionTest","hasMoved","inOut","time","validPointers","validMovement","validTime","clearTimeout","taps","interval","posThreshold","validTouchTime","failTimeout","validInterval","validMultiTap","tapCount","VERSION","domEvents","inputClass","cssProps","userSelect","touchSelect","touchCallout","contentZooming","userDrag","tapHighlightColor","handlers","oldCssProps","toggleCssProps","stop","stopped","curRecognizer","gestureEvent","createEvent","initEvent","gesture","dispatchEvent","triggerDomEvent","INPUT_START","INPUT_MOVE","INPUT_END","INPUT_CANCEL","STATE_POSSIBLE","STATE_BEGAN","STATE_CHANGED","STATE_ENDED","STATE_RECOGNIZED","STATE_CANCELLED","STATE_FAILED","DIRECTION_NONE","DIRECTION_RIGHT","DIRECTION_DOWN","DIRECTION_VERTICAL","DIRECTION_ALL","Tap","Pan","Swipe","Pinch","Rotate","Press","api","default","locals","Tiramisu","TiramisuLoadingError","coreName","coreURL","ENABLE_VRML_TEXT_NODE","locateFile","script","response","messageOrEvent","lineno","colno","filename","b64toBlob","deface","m_runtimeReady","printErr","text","lastErrorText","print","setStatus","didChangeLayout","pane","clientWidth","clientHeight","resize","isRuntimeReady","onRuntimeInitialized","showCanvas","canvasElement","prefixURL","width","height","coreSolo","dataScript","totalMemory","textContent","blob","isRAContent","isViewpointInScene","isTextInScene","DISABLE_DISCARDABLE_GEOMETRY_DATA","resolveSceneURL","TOTAL_MEMORY","m_doc","_t","NEED_WEBGL2","m_isPressed","m_fitFactorObject","m_fitFactorScene","m_didFinishLoadDocument","m_firstFrameDidArrive","m_hiddenObjects","beforeFirstFrameRender","didDrawScene","PanelService","willDrawScene","Stella","isGeneric","pickerTransparencyThreshold","getChildObjects","setBannerImage","fetchBannerImage","getVec3fValue","getValue","ccallWithObjectHandles","func","handles","animated","objects","sp","stackSave","stackAlloc","setValue","stackRestore","didFinishLoadDocument","eventStopper","stopPropagation","contextmenu","rect","getBoundingClientRect","left","top","pressHandler","doubleTapHandler","pickObject","pickObjectChain","handle","chain","fitObjectsInView","fitSceneInView","getElementsByClassName","popover","isMSGestureEnabled","MSGesture","gestureHandler","detail","translationX","translationY","_tiramisu_microsoftGesture","microsoftPointerUp","_tiramisu_microsoftPointerUp","_tiramisu_microsoftPointerDown","setPointerCapture","addPointer","box","pageXOffset","clientLeft","pageYOffset","clientTop","pageX","pageY","livingOnTheEdge","activeElement","blur","ENABLE_NAVIGATION_FIT_TO_OBJECT","shiftKey","ctrlKey","altKey","srcElement","sceneCoord","z","setRotationCenterToPoint","centerRotationCenterInView","setRotationCenterToObjects","lastTapTime","lastTapPoint","MSGESTURE_FLAG_BEGIN","MSGESTURE_FLAG_END","valueOf","screenX","screenY","mcOptions","pointerEnabled","mc","press","doubletap","attachCanvasListeners","companionFile","getOption","recursiveObjectLookup","edgeColorWeights","isInteractivityXmlEmissionEnabled","DISABLE_INTERACTIVITY_XML_EMISSION","attachInteractivityXML","firstFrameDidArrive","timestamp","didFailLoadDocument","didClickHyperlink","urls","willStartNavigateInScene","wrapStringArray","size","strings","UTF8ToString","wrapSheetArray","sheets","description","indentationLevel","unmarshalObjectArray","unmarshalFloatArray","floats","major","minor","build","BUILD_TIME","_tiramisu_resize","getObjectName","getObjectTypeName","getObjectWithName","isObjectIgnorableByPicker","_tiramisu_isObjectIgnorableByPicker","setObjectIgnorableByPicker","ignorable","_tiramisu_setObjectIgnorableByPicker","needsTopLevelParent","_tiramisu_pickObject","_tiramisu_pickObjectChain","coord","normal","sceneNormal","_free","getPickerTransparencyThreshold","_tiramisu_getPickerTransparencyThreshold","setPickerTransparencyThreshold","_tiramisu_setPickerTransparencyThreshold","addSelectedObjects","_tiramisu_addSelectedObjects","setSelectedObjects","_tiramisu_setSelectedObjects","removeSelectedObjects","_tiramisu_removeSelectedObjects","getSelectedObjects","_tiramisu_getSelectedObjects","addHoveredObjects","_tiramisu_addHoveredObjects","setHoveredObjects","_tiramisu_setHoveredObjects","removeHoveredObjects","_tiramisu_removeHoveredObjects","getHoveredObjects","_tiramisu_getHoveredObjects","setDefaultBackgroundColors","colors","colorArray","_tiramisu_setDefaultBackgroundColors","setMouseDragMode","_tiramisu_setMouseDragMode","setObjectPropertyf","v0","v1","v2","v3","PROPERTY_VISIBILITY","_tiramisu_isObjectVisibile","_tiramisu_setObjectVisibility","_tiramisu_setObjectPropertyf","getObjectPropertyf","buffer","_tiramisu_getObjectPropertyf","restoreObjectProperty","_tiramisu_restoreObjectProperty","getObjectsWithDirtyProperty","_tiramisu_getObjectsWithDirtyProperty","getObjectHighlightParams","_tiramisu_getObjectHighlightParams","diffuseColor","HEAPF32","diffuseBrightnessDelta","emissiveColor","emissiveBrightnessDelta","setObjectHighlightParams","params","mem","_tiramisu_setObjectHighlightParams","brightness","isRotationCenterVisible","_tiramisu_isRotationCenterVisible","setRotationCenterVisibility","_tiramisu_setRotationCenterVisibility","setDefaultView","_tiramisu_setDefaultView","alignHorizon","_tiramisu_alignHorizon","jumpToStandardView","viewName","factor","_tiramisu_fitObjectsInView","fitSelectedObjectsInView","visibleHandles","getObjectVisibility","OBJECT_VISIBILITY_VISIBLE","setRotationCenterToScene","_tiramisu_setRotationCenterToObjects","setRotationCenterToSelectedObjects","centerRotationCenter","_tiramisu_centerRotationCenterInView","_tiramisu_setRotationCenterToPoint","resetRotationCenter","_tiramisu_resetRotationCenter","getDocumentInfo","getOptions","dict","pairs","_tiramisu_getOptions","setObjectName","getHoverColor","_tiramisu_getHoverColor","setHoverColor","_tiramisu_setHoverColor","getSelectionColor","_tiramisu_getSelectionColor","setSelectionColor","_tiramisu_setSelectionColor","getViewpoints","bulk","_tiramisu_getViewpoints","viewpoints","getActiveViewpoint","_tiramisu_getActiveViewpoint","setActiveViewpoint","_tiramisu_setActiveViewpoint","addObjects","parentHandle","_tiramisu_addObject","removeObjects","_tiramisu_removeObject","removeAllObjects","_tiramisu_removeAllObjects","_tiramisu_getChildObjects","setChildObjects","children","objectArray","_tiramisu_setChildObjects","getParentObject","_tiramisu_getParentObject","_tiramisu_getObjectVisibility","getObjectFlags","_tiramisu_getObjectFlags","getObjectBoundingBox","floatArray","bbox","_tiramisu_getObjectBoundingBox","createObjectsFromString","nodes","createObjectsFromURL","byteArray","arrayBuffer","Uint8Array","_malloc","byteLength","writeArrayToMemory","createObjectsFromDocumentBundle","setCameraPosition","orientation","scalarParam","rotationCenter","_location","_orientation","_rotationCenter","_tiramisu_setCameraPosition","setObjectsTransparency","PROPERTY_TRANSPARENCY","getObjectsTransparency","reduce","acc","toggleObjectsVisibility","handlesArray","navigate","action","arg1","arg2","_tiramisu_navigate","_tiramisu_getGlobalEdgeColor","_tiramisu_setGlobalEdgeColor","_tiramisu_getEdgeColorWeights","weights","weightArray","_tiramisu_setEdgeColorWeights","_tiramisu_isAmbientOcclusionEnabled","ENABLE_GLES3","DISABLE_ANTIALIASING_GLES3","info","_tiramisu_enableAmbientOcclusion","_tiramisu_getSelectionMode","_tiramisu_setSelectionMode","_tiramisu_isOutlineHoveredObjectsEnabled","_tiramisu_enableOutlineHoveredObjects","_tiramisu_getAmbientOcclusionParams","kernelSize","HEAP32","radius","intensity","p0","_tiramisu_setAmbientOcclusionParams","lightCount","_tiramisu_getLightingConfig","ambientIntensity","_tiramisu_setLightingConfig","_tiramisu_getOutlineParams","visibleEdgeColor","invisibleEdgeColor","invisibleFillColor","assignColor","_tiramisu_setOutlineParams","isGLES3","_tiramisu_isAntialiasingEnabled","enabled","_tiramisu_enableAntialiasing","_tiramisu_isAmbientOcclusionSupported","_tiramisu_isRecursiveObjectLookupEnabled","_tiramisu_enableRecursiveObjectLookup","_tiramisu_isCoordinateAxesVisible","_tiramisu_setCoordinateAxesVisibility","_tiramisu_getNavigatorOptions","AUTOMATIC_ZOOM_ANCHOR","AUTOMATIC_SPIN_CENTER","_tiramisu_setNavigatorOptions","m_speakerIcon","m_isCanvasVisible","image","display","group","showPanels","isDrawingDisplayMode","isCanvasVisible","toggleSpeakerIcon","opacity","createImageFromData","chunk","autoRevokeTimeout","HEAPU8","subarray","Image","completeHandler","decodeURI","fetchImageFromDocumentBundle","img","_tiramisu_copyBannerImage","frameCount","frameDuration","Vec3f","Rotation","inflate","typedArray","dataSize","BYTES_PER_ELEMENT","dataOffset","marshallTypedArray","_tiramisu_utility_inflate","byteOffset","freeTypedArray","oVec3f","subtract","dot","cross","divide","fValue","multiply","normalize","negate","CSSObject","rules","rule","fullSelector","isMedia","$0","$2","clear","NodeList","Element","Document","DocumentFragment","configurable","argArr","docFrag","createDocumentFragment","argItem","isNode","CharacterData","DocumentType","moduleName","usedModule","usedAddon","tagPromise","Model3D","instance","tooltipOver3D","hide","require","onError","localOptions","requirePromise","xmlToJSON","resourceUrl","req","html","eventName","__trace","polyfill","vertxNext","customSchedulerFn","asap","queue","flush","scheduleFlush","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useSetTimeout","globalSetTimeout","channel","onFulfillment","onRejection","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","promise","nextTick","iterations","observer","observe","characterData","useMutationObserver","port1","onmessage","port2","postMessage","vertx","runOnLoop","runOnContext","attemptVertx","random","handleMaybeThenable","maybeThenable","then$$1","thenable","fulfill","reason","handleOwnThenable","sealed","fulfillmentHandler","rejectionHandler","tryThen","_label","handleForeignThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","hasCallback","succeeded","Enumerator","Constructor","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","resolve$$1","_then","didError","_settledAt","Promise$1","_willSettleAt","enumerator","needsResolver","initializePromise","needsNew","entries","race","_","_setScheduler","scheduleFn","_setAsap","asapFn","_asap","local","global","P","promiseToString","cast","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","array","title","browser","env","argv","versions","binding","cwd","chdir","dir","umask","atobStrict","b64Data","contentType","sliceSize","charAt","workerCode","byteCharacters","byteArrays","byteNumbers","charCodeAt","param","code","worker","Worker","recurs","current","tail","next","path","___CSS_LOADER_API_IMPORT___","m_svgElement","m_svgShadow","m_viewportShadow","m_view","m_viewport","m_viewBox","SVGNS","XLINKNS","pako","m_svgHammerManagers","debounceTimeout","m_zoom","m_originX","m_originY","m_maxScale","m_minScale","m_enableDrawingOptimization","m_textNodesCount","m_disableAutoCalculationScaleLimit","m_enableHoverFilling","m_isDoubleTap","m_isHidden","m_isReady","m_loadingUrl","m_image","m_xhr","arrayBufferToString","encoding","reader","FileReader","evt","readAsText","getHotspotRegion","tagName","nextSibling","getFirstChild","textParentNode","childElementCount","previousElementSibling","getHotspotNodes","hotspotRegion","getSVGAElement","regExp","scope","ClassList","baseVal","toggle","SVGElement","m_lastX","m_lastY","m_lastScale","m_applyTimeout","m_shadowTimeout","m_eventHandlersA","mouseover","mouseout","m_eventHandlers","svgANode","wheel","delta","W","H","dimensions","getViewBoxDimensions","setTransform","dblclick","getBBox","viewBox","A","setOriginBy","maxOriginX","maxOriginY","zoomDeltaX","zoomDeltaY","setOrigin","applyTransform","applyTransformTo","viewport","transform","getItem","setTranslate","setScale","_apply","visibility","anchor","pinch","pan","cursor","detach","__mc","freeShadow","initShadow","svgString","XMLSerializer","serializeToString","getContext","drawImage","png","toDataURL","setAttributeNS","createSVGTransform","appendItem","calculateScaleLimit","svgElement","replaceChild","hotspotName","querySelectorAll","raster","onLoadSvg","cssClass","titleNodes","abort","binData","getSVGSource","checkComplete","checkShown","zero$1","buf","extra_lbits","extra_dbits","extra_blbits","bl_order","static_ltree","static_dtree","D_CODES$1","_dist_code","_length_code","MAX_MATCH$1","base_length","static_l_desc","static_d_desc","static_bl_desc","base_dist","StaticTreeDesc","static_tree","extra_bits","extra_base","elems","max_length","has_stree","TreeDesc","dyn_tree","stat_desc","max_code","d_code","dist","put_short","pending_buf","pending","send_bits","bi_valid","bi_buf","send_code","tree","bi_reverse","gen_codes","bl_count","bits","next_code","MAX_BITS$1","init_block","LITERALS$1","dyn_ltree","dyn_dtree","bl_tree","END_BLOCK","opt_len","static_len","last_lit","matches","bi_windup","smaller","depth","_n2","_m2","pqdownheap","k","heap","heap_len","compress_block","ltree","dtree","lc","extra","lx","d_buf","l_buf","build_tree","desc","stree","heap_max","xbits","gen_bitlen","scan_tree","curlen","prevlen","nextlen","max_count","min_count","REP_3_6","REPZ_3_10","REPZ_11_138","send_tree","static_init_done","_tr_stored_block$1","stored_len","header","copy_block","trees","_tr_init","LENGTH_CODES$1","L_CODES$1","tr_static_init","l_desc","d_desc","bl_desc","_tr_stored_block","_tr_flush_block","opt_lenb","static_lenb","max_blindex","level","strm","data_type","black_mask","detect_data_type","BL_CODES$1","build_bl_tree","strategy","lcodes","dcodes","blcodes","rank","send_all_trees","_tr_tally","lit_bufsize","_tr_align","STATIC_TREES","bi_flush","adler32_1","adler","pos","s1","s2","crcTable","Uint32Array","table","makeTable","crc32_1","crc","messages","1","0","constants$2","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_TREES","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","Z_BINARY","Z_TEXT","Z_UNKNOWN","Z_DEFLATED","Z_NO_FLUSH$2","Z_FULL_FLUSH$1","Z_FINISH$3","Z_BLOCK$1","Z_OK$3","Z_STREAM_END$3","Z_STREAM_ERROR$2","Z_DATA_ERROR$2","Z_BUF_ERROR$1","Z_DEFAULT_COMPRESSION$1","Z_DEFAULT_STRATEGY$1","Z_DEFLATED$2","errorCode","msg","zero","HASH","prev","hash_shift","hash_mask","flush_pending","avail_out","pending_out","next_out","total_out","flush_block_only","block_start","strstart","put_byte","putShortMSB","longest_match","cur_match","chain_length","max_chain_length","scan","best_len","prev_length","nice_match","limit","w_size","MAX_MATCH","_win","wmask","w_mask","strend","scan_end1","scan_end","good_match","lookahead","match_start","fill_window","more","_w_size","window_size","hash_size","avail_in","next_in","wrap","total_in","ins_h","deflate_fast","hash_head","bflush","match_length","max_lazy_match","MIN_MATCH","deflate_slow","max_insert","prev_match","match_available","Config","good_length","max_lazy","nice_length","max_chain","configuration_table","max_block_size","pending_buf_size","max_start","DeflateState","gzhead","gzindex","last_flush","w_bits","hash_bits","Uint16Array","HEAP_SIZE","MAX_BITS","deflateResetKeep","deflateReset","deflateInit2","windowBits","memLevel","deflate_1$2","deflateInit","deflateSetHeader","deflate","beg","old_flush","hcrc","comment","os","bstate","deflate_huff","deflate_rle","deflateEnd","deflateSetDictionary","dictionary","dictLength","tmpDict","avail","deflateInfo","_typeof","_has","common","chunks","_l","STR_APPLY_UIA_OK","fromCharCode","__","_utf8len","TextEncoder","encode","c2","m_pos","str_len","buf_len","out","TextDecoder","decode","utf16buf","c_len","buf2binstring","zstream","toString$1","Z_NO_FLUSH$1","Z_FINISH$2","Z_OK$2","Z_STREAM_END$2","Z_DEFLATED$1","Deflate$1","chunkSize","opt","raw","gzip","ended","_dict_set","deflate$1","deflator","flush_mode","_flush_mode","onData","onEnd","deflate_1$1","Deflate","deflateRaw","constants","inffast","_in","_out","dmax","wsize","whave","wnext","s_window","hold","lcode","dcode","lmask","dmask","here","op","from","from_source","lencode","distcode","lenbits","distbits","dolen","dodist","sane","lbase","lext","dbase","dext","inftrees","lens","lens_index","codes","table_index","work","opts","incr","low","mask","here_bits","here_op","here_val","sym","curr","drop","used","huff","base_index","MAXBITS","offs","extra_index","Z_FINISH$1","Z_OK$1","Z_STREAM_END$1","Z_NEED_DICT$1","Z_STREAM_ERROR$1","Z_DATA_ERROR$1","Z_MEM_ERROR$1","zswap32","InflateState","havedict","check","wbits","ncode","nlen","ndist","have","lendyn","distdyn","back","was","lenfix","distfix","inflateResetKeep","Int32Array","inflateReset","inflateReset2","inflateInit2","virgin","fixedtables","updatewindow","inflate_1$2","inflateInit","put","last_bits","last_op","last_val","hbuf","order","inf_leave","done","xflags","extra_len","inflateEnd","inflateGetHeader","inflateSetDictionary","inflateInfo","gzheader","Inflate$1","to","inflate$1","inflator","last_avail_out","next_out_utf8","utf8str","inflate_1$1","Inflate","inflateRaw","ungzip","Deflate_1","deflate_1","deflateRaw_1","gzip_1","Inflate_1","inflate_1","inflateRaw_1","ungzip_1","constants_1","getMetadata","m_ipcInteractivityMap","dpl","def","preferredViews","dplid","sheetsMap","view","sheet","sh","items","refItem","refmedias","refmedia","mediaId","row","indent","getIndent","asp","getMeta","itemInfo","itemMetaValues","part","partMetaValues","roles","role","sheetId","refview","screentip","tooltip","callout","objectNames","commands","command","normalizeCSN","initializeDPLItemMap","csn","willGetCSNString","declId","getRowByIndex","currentSheetId","getCurrentSheet","getIndexByRow","getRowByItem","getItemByRow","getIndexByItem","getItemByIndex","getRowByObjectName","getObjectsNamesByRow","getDrawingForIPCView","currentSheetInfo","sheetInfo","getSheetInfo","getProjectMetadata","getScreenTip","getItemInfo","getPrefferedSheetId","getParent","getChildren","deep","ch","m_prcInteractivityMap","defs","docitems","procedureItems","DocItem","defInfo","docid","pictures","Picture","procedureId","Simulation","generateId","m_count","findDescription","Step","Substep","processEvent","parentId","Procedure","processItem","steps","step","substep","parentStep","procedure","getProcedureId","getDrawings","getDocIdByObjectName","getObjectNamesByDocId","docId","docItemInfo","getDocItemInfo","getDocItemMetadata","getDocItems","getProcedureItemInfo","didFireEvent","didChangePlayerState","didEnterSubstep","substepPath","didEnterSubstepWithName","substepId","seekToSubstep","seekMode","setPlaybackSpeed","playbackSpeed","freezeCamera","setPlayPosition","playPosition","requestState","backward","forward","play","doNotAutoRewind","pause","setPlayRange","firstPlayable","lastPlayable","_procedure_getPlayableRangeStartTime","_procedure_getPlayableRangeStopTime","getPlayableRangeStartTime","getPlayableRangeStopTime","requestPlayerState","setPlayableItemList","itemArray","allocate","intArrayFromString","ALLOC_STACK","_procedure_setPlayableItemList","_procedure_getDuration","_procedure_getDefaultSeekMode","_procedure_setDefaultSeekMode","m_currentSheet","unmarshalIndexArray","indexArray","itemCount","didSelectSheet","ipcHoverColor","hoverColor","ipcSelectionColor","selectionColor","ENABLE_AUTO_SWITCHING_DISPLAY_MODE","toggleDrawingDisplayMode","didHoverItem","didSelectItem","didChangeItemVisibility","isHidden","rows","willStartSheetTransitionAnimation","didStopSheetTransitionAnimation","setCurrentSheet","toggleItemVisibility","selectItem","hoverItem","resetCurrentSheet","getItemWithHotspot","drawingMode","_ipc_getSheetTransitionAnimationDurations","_ipc_setSheetTransitionAnimationDurations","m_hoverRow","ipcExports","setupTable","dplTableElement","timeoutOut","indexOut","contextMenuHandler","onmouseover","onmouseout","onclick","__debounceTimeout","oncontextmenu","__pointerDown","onpointerdown","isPrimary","__pressTimeout","onpointerout","hoverRow","getElementById","highlightRow","selectRow","toggleRow","setAxis","FLT_EPSILON","axis","multVec","sin","cos","oRotation","Sa","Ca","As","getAxis","Sb","Cb","Bs","Cab","ABs","msq","Sab","m_lastPickInfo","MOUSE_CLICK_THRESHOLD","FEATURE_PICK_TOPMOST","whichToButtons","buttonToButtons","getMouseEventArguments","isMove","buttons","isMouseMoved","mouseArgs1","mouseArgs2","aVec2","aVec1","overObject","lastMouseArguments","lastMouseMove","pointerdownTime","stealthyLayer","isFF","createStealthyLayer","bottom","right","zIndex","onmousemove","eventHandlers","mouseArguments","handleOld","picked","handleNew","pointerenter","lpi","currentLastPickInfo","topMost","soloExports","pickObjectsRightThrough","MOUSE_PROPS","MOUSE_DEFAULTS","inType","inDict","bubbles","cancelable","pressure","tiltX","tiltY","twist","tangentialPressure","hwTimestamp","PointerMap","Map","SparseArrayMap","delete","has","thisArg","CLONE_PROPS","CLONE_DEFAULTS","BOUNDARY_EVENTS","HAS_SVG_INSTANCE","SVGElementInstance","dispatcher","pointermap","eventMap","captureInfo","eventSources","eventSourceList","registerSource","newEvents","register","es","unregister","container","contained","ex","down","inEvent","fireEvent","move","up","enter","leave","over","cancel","leaveOut","propagate","enterOver","eventHandler","_handledByPE","listen","addEvent","unlisten","removeEvent","boundHandler","makeEvent","relatedTarget","_target","cloneEvent","eventCopy","correspondingUseElement","capture","propagateDown","targets","reverse","setCapture","inPointerId","inTarget","skipDispatch","releaseCapture","implicitRelease","asyncDispatchEvent","requestAnimationFrame","targeting","shadow","inEl","shadowRoot","webkitShadowRoot","canTarget","elementFromPoint","targetingShadow","olderShadow","olderShadowRoot","se","allShadows","shadows","searchRoot","inRoot","st","sr","ssr","owner","DOCUMENT_NODE","DOCUMENT_FRAGMENT_NODE","findTarget","MO","OBSERVER_INIT","subtree","childList","attributeOldValue","attributeFilter","Installer","binder","addCallback","removeCallback","changedCallback","mutationWatcher","watchSubtree","enableOnSubtree","installOnLoad","installNewSubtree","findElements","addElement","removeElement","elementChanged","oldValue","concatLists","accum","ELEMENT_NODE","flattenMutationTree","inNodes","mutations","mutationHandler","addedNodes","removedNodes","attrib2css","styles","hasNativePE","hasShadowRoot","ShadowDOMPolyfill","createShadowRoot","BUTTON_TO_BUTTONS","HAS_BUTTONS","MouseEvent","INSTALLER","mouseEvents","POINTER_ID","POINTER_TYPE","isEventSimulatedFromTouch","prepareEvent","pd","webkitForce","WEBKIT_FORCE_AT_MOUSE_DOWN","prepareButtonsForMove","webkitmouseforcechanged","deactivateMouse","pointermap$1","touchEvents","elementAdded","touchActionToScrollType","_scrollType","elementRemoved","evts","oldSt","scrollTypes","UP","includes","DOWN","LEFT","RIGHT","firstTouch","isPrimaryTouch","inTouch","setPrimaryTouch","firstXY","X","Y","scrolling","removePrimaryPointer","inPointer","typeToButtons","touchToPointer","cte","currentTouchEvent","radiusX","webkitRadiusX","radiusY","webkitRadiusY","altitudeAngle","tan","radToDeg","atan","azimuthAngle","touchType","metaKey","processTouches","inFunction","tl","shouldScroll","currentTarget","dya","dxa","findTouch","inTL","inId","vacuumTouches","cancelOut","dedupSynthMouse","overDown","outTarget","touchforcechange","moveOverOut","pointer","outEvent","upOut","cleanUpPointer","lt","pointermap$2","HAS_BITMAP_TYPE","MSPOINTER_TYPE_MOUSE","msEvents","POINTER_TYPES","cleanup","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSLostPointerCapture","MSGotPointerCapture","assertActive","assertConnected","elem","inActiveButtonState","msPointerEnabled","msSetPointerCapture","msReleasePointerCapture","shadowSelector","applyAttributeStyles","tp","msMaxTouchPoints","ontouchstart","applyPolyfill","targetFinding","usedSkins","UISkinController","m_options","skin","baseElement","createTag","attr","isUISkinComponent","UISkinElement","$el","UISkinComponent","rootNode","toUISkinKey","components","component","resolveUISkinComponent","toolbar","panel","buttonImg","span","option","selected","ul","ol","dl","term","label","offsetWidth","offsetHeight","checkHorizontal","nodeRect","thisRect","deepmerge","safeGet","pathName","contexts","lastTask","pendingModule","createContext","contextName","contextOptions","loadDep","shim","_require","deps","exportsFn","loadByShim","deferred","invokeLater","commentRegExp","cjsRequireRegExp","wrapCommonJS","dep","localRequire","errback","currentModule","dependency","newPath","plugin","resolved","fromText","previousModule","loadWithPlugin","predefines","instances","appendJS","bundle","bundles","paths","appendJs","urlArgs","resetContext","specified","dst","link","parse"],"mappings":"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","file":"Cortona3DSolo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Cortona3DSolo\"] = factory();\n\telse\n\t\troot[\"Cortona3DSolo\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 23);\n","// cortona3d/util.js\n\n/**\n * @module cortona3d/util\n */\n\nmodule.exports = {\n    extend: extend,\n    defineClass: defineClass,\n    expand: expand,\n    RGB: RGB,\n    fromHTMLColor: fromHTMLColor,\n    loadScript: loadScript,\n    loadStyleSheet: loadStyleSheet,\n    isFunction: isFunction,\n    isNumber: isNumber,\n    isString: isString,\n    isObject: isObject,\n    isPromise: isPromise,\n    isHTMLNode: isHTMLNode,\n    isUndefined: isUndefined,\n    detectAMDLoader: detectAMDLoader,\n    getBaseURL: getBaseURL,\n    loadResource: loadResource,\n    toggleClass: toggleClass\n};\n\n\n// Array.isArray polyfill\nif (!Array.isArray) {\n    Array.isArray = function (arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n}\n\n/*\n */\nfunction extend(f) {\n    function G() {}\n    G.prototype = f.prototype || f;\n    return new G();\n}\n\n/** \n * Utility function for defining a new class.\n *\n * @param parent {Function} the parent class of the new class or null\n * @param ctor {Function} the constructor of the new class\n * @param methods {Object} an object literal containing the methods of the new class\n * @return {Function} the constructor function of the new class\n */\nfunction defineClass(parent, ctor, methods) {\n    function Inheritance() {}\n    if (parent) {\n        Inheritance.prototype = parent.prototype;\n        ctor.prototype = new Inheritance();\n        ctor.prototype.constructor = ctor;\n        ctor.superClass = parent;\n    }\n    if (methods) {\n        for (var m in methods) {\n            if (methods.hasOwnProperty(m)) {\n                ctor.prototype[m] = methods[m];\n            }\n        }\n    }\n    return ctor;\n}\n\n/**\n * @param obj {Object}\n * @param [props, ...] {Object}\n */\nfunction expand(obj) {\n    for (var i = 1; i < arguments.length; i++) {\n        var props = arguments[i];\n        if (!isObject(props)) continue;\n        for (var key in props) {\n            if (props.hasOwnProperty(key)) {\n                if (key in obj) {\n                    if (isFunction(obj[key]) && isFunction(props[key])) {\n                        obj[key] = props[key];\n                    } else if (Array.isArray(obj[key]) && Array.isArray(props[key])) {\n                        obj[key] = props[key];\n                    } else if (isObject(obj[key]) && isObject(props[key]) && props[key] !== {}) {\n                        expand(obj[key], props[key]);\n                    } else {\n                        obj[key] = props[key];\n                    }\n                } else {\n                    obj[key] = props[key];\n                }\n            }\n        }\n    }\n    return obj;\n}\n\n/**\n * @param r {Number} [0...255]\n * @param g {Number} [0...255]\n * @param b {Number} [0...255]\n * @return {Number} \n */\nfunction RGB(r, g, b) {\n    return (r + g * 256 + b * 65536);\n}\n\n/**\n * @param color {string} HTML HEX color\n * @return {Number} \n */\nfunction fromHTMLColor(color) {\n    if (isNumber(color)) return color;\n    if (isString(color) && color.match(/^#?([0-9A-F]{6})$/i)) {\n        return parseInt(\n            RegExp.$1.substr(4, 2) +\n            RegExp.$1.substr(2, 2) +\n            RegExp.$1.substr(0, 2), 16);\n    }\n    return 0;\n}\n\n/**\n * @callback requestCallback\n */\n\n/**\n * @param fileName {string} url for loading\n * @param [async] {boolean} async attribute\n * @param  resolve {requestCallback}\n * @returns {HTMLElement}\n * @memberof cortona3d\n */\nfunction loadScript(fileName, async, resolve, reject) {\n    var scriptElement = document.createElement('script');\n    scriptElement.type = 'text/javascript';\n    scriptElement.src = fileName;\n    if (!isUndefined(async)) {\n        scriptElement.async = !!async;\n    }\n    scriptElement.onload = resolve;\n    scriptElement.onerror = reject;\n    document.getElementsByTagName('head')[0].appendChild(scriptElement);\n    return scriptElement;\n}\n\n/**\n * @param fileName {string} url for loading\n * @param  resolve {requestCallback}\n * @returns {HTMLElement}\n * @memberof cortona3d\n */\nfunction loadStyleSheet(fileName, resolve, reject) {\n    var linkElement = document.createElement('link');\n    linkElement.href = fileName;\n    linkElement.rel = 'stylesheet';\n    linkElement.type = 'text/css';\n    linkElement.onload = resolve;\n    linkElement.onerror = reject;\n    document.getElementsByTagName('head')[0].appendChild(linkElement);\n    return linkElement;\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isFunction(arg) {\n    return typeof arg === 'function';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isNumber(arg) {\n    return typeof arg === 'number';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isString(arg) {\n    return typeof arg === 'string';\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n * @memberof cortona3d\n */\nfunction isObject(arg) {\n    return typeof arg === 'object' && arg !== null;\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n * @memberof cortona3d\n */\nfunction isPromise(arg) {\n    return Object.prototype.toString.call(arg) === '[object Promise]' || (\n        isObject(arg) && isFunction(arg.then) && isFunction(arg.catch) && isFunction(arg.finally)\n    );\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n * @memberof cortona3d\n */\nfunction isHTMLNode(arg) {\n    return arg instanceof Node || /^\\[object HTML.*Element]$/.test(Object.prototype.toString.call(arg));\n}\n\n/**\n * @param arg {object} \n * @return {boolean} \n */\nfunction isUndefined(arg) {\n    return arg === void 0;\n}\n\n/**\n * @return {boolean}\n */\nfunction detectAMDLoader() {\n    return isFunction(window.requirejs) && (isFunction(window.define) && window.define.amd);\n}\n\n/**\n * @param [url] {string} \n * @return {string} \n * @memberof cortona3d\n */\nfunction getBaseURL(url) {\n    if (typeof url !== 'string') {\n        url = '#';\n    }\n    // check is data URI\n    if (!/^[a-z]+\\:\\/\\//i.test(url) && !/^\\/\\//.test(url) && /^[a-z]+\\:/i.test(url)) {\n        return \"\";\n    }\n    var a = document.createElement('a');\n    a.href = url;\n    a = a.cloneNode(false);\n    url = a.protocol + '//' + a.host + (a.pathname[0] === '/' ? '' : '/') + a.pathname;\n    return url.substring(0, url.lastIndexOf('/') + 1);\n}\n\n\n/**\n * Loads a resource from url using XMLHttpRequest\n * @param {string} url \n * @param {string} [overrideMimeType]\n * @param {string} [responseType]\n * @return promise<xhr>\n */\nfunction loadResource(url, overrideMimeType, responseType) {\n    return new Promise(function (resolve, reject) {\n        var DOMURL = window.URL || window.webkitURL || window,\n            xhr = new XMLHttpRequest();\n\n        if (overrideMimeType && xhr.overrideMimeType) {\n            xhr.overrideMimeType(overrideMimeType);\n        }\n\n        xhr.open(\"GET\", url, true);\n\n        if (responseType) {\n            xhr.responseType = responseType;\n        }\n\n        function errorHandler(e) {\n            if (window.Cortona3DSolo) window.Cortona3DSolo.dispatch('app.onProgress', 0, -1, e.type);\n        }\n\n        xhr.onprogress = function (e) {\n            var loaded = e.loaded,\n                total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\n            if (window.Cortona3DSolo) window.Cortona3DSolo.dispatch('app.onProgress', loaded, total, e.type);\n        };\n        xhr.onabort = errorHandler;\n        xhr.onerror = errorHandler;\n        xhr.onload = errorHandler;\n        xhr.onreadystatechange = function (e) {\n            if (xhr.readyState === XMLHttpRequest.DONE) {\n\n                if (/^blob:/i.test(url)) {\n                    DOMURL.revokeObjectURL(url);\n                }\n\n                var data;\n                if (xhr.status === 200 || xhr.status === 0) {\n                    resolve(xhr);\n                } else {\n                    reject(new Error(url + \" \" + xhr.status + \" \" + xhr.statusText));\n                }\n            }\n        };\n        try {\n            xhr.send(null);\n        } catch (e) {\n            reject(e);\n        }\n    });\n}\n\n/**\n * @param element {HTMLElement} \n * @param className {string} \n * @param flag [{boolean}]\n */\nfunction toggleClass(element, className, flag) {\n    if (element) {\n        flag = isUndefined(flag) ? !element.classList.contains(className) : flag;\n        if (flag) {\n            element.classList.add(className);\n        } else {\n            element.classList.remove(className);\n        }\n    }\n}","var util = require('lib/util');\nvar expand = util.expand;\nvar xmlToJson = require('xml2json');\n\nvar m_instanceConfigurationFlags = 0;\nvar m_usedModules = {\n    addons: {}\n};\nvar m_loaded = false;\n\n/**\n * The namespace represents the main application interface for Cortona3D Solo.\n * \n * @namespace \n * @memberof module:solo\n * @property {number} DISABLE_DOCUMENT_INTERACTIVITY=0x000001 Disables the selection and highlighting of parts in the 3D window for catalog.\n * @property {number} DISABLE_PROCEDURE_TEXT_EMISSION=0x000002 Disables parsing and delivery text comments when loading procedure.\n * @property {number} DISABLE_AUDIO=0x000004 Disables audio in the procedure.\n * @property {number} DISABLE_VERTEX_ARRAY_OBJECT_OES=0x000008 Disables the OES_vertex_array_object extension (part of the WebGL API)  \n * @property {number} DISABLE_DISCARDABLE_GEOMETRY_DATA=0x000010 The flag must be set to enable geometry pick.<br>See {@link module:solo.app.pickObjectChain app.pickObjectChain()}.<br>See {@link NavigatorOptionsFlags NavigatorOptionsFlags}\n * @property {number} DISABLE_PROPERTY_VALUE_ANIMATIONS=0x000020 The flag must be set to turn off the animated color transition when objects are selected in the interactive catalog.\n * @property {number} ENABLE_GLES3=0x000040 The flag must be set to enable WebGL 2.0.\n * @property {number} DISABLE_ANTIALIASING_GLES3=0x000080 The flag must be set to disable MSAA anti-aliasing in the WebGL 2.0.\n * @property {number} TRANSPARENT_BACKGROUND=0x000100 The flag must be set to enable transparent background in the scene without VRML Background node.\n * @property {number} DISABLE_OBJECT_HOVERING=0x000200 Disables highlighting of parts in the 3D window for catalog.\n * @property {number} DISABLE_GEOMETRY_PREWARMING=0x000400 Prohibits the forced creation of all render objects.\n * @property {number} DEFAULT_WHELL_ACTION_ZOOM_MAC=0x000800 Enables zoom by default (without modifiers) for Mac.\n * @property {number} ENABLE_NAVIGATION_FIT_TO_OBJECT=0x008000 Enables fit to object and change center of rotation in the 3D window.\n * @property {number} DISABLE_INTERACTIVITY_XML_EMISSION=0x010000 Disables access to the interactivity.xml as JSON object.\n * @property {number} DRAWING_HOTSPOT_HIGHLIGHT_SOLID=0x020000 Determines whether to use the frame selection representation for selected hotspot area on the SVG image (default value), or to fill with another color.\n * @property {number} ENABLE_AUTO_SWITCHING_DISPLAY_MODE=0x040000 Enables automatic switching of display modes (2D and 3D) in the catalog.\n * @property {number} ENABLE_VRML_TEXT_NODE=0x080000 Enables VRML Text node support.\n * @property {number} DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION=0x100000 Disables optimization for the large drawing (more than 5000 text nodes).\n */\nvar app = {\n    /**\n     * Configures the Cortona3D Solo instance.\n     * See {@link module:solo.app app} properties.\n     * \n     * @param {number} setFlags - Flags bitmask \n     * @param {number} resetFlags - Flags bitmask\n     */\n    configureInstance: function (setFlags, resetFlags) {\n        var set = setFlags || 0,\n            reset = resetFlags || 0,\n            TIRAMISU_FLAGS_MASK = 0x7FFF;\n        m_instanceConfigurationFlags |= set;\n        m_instanceConfigurationFlags &= ~reset;\n        if (m_usedModules.core) {\n            if (!Module.ccall || (Module.runtimeReady && !app.modelInfo)) {\n                var Cortona3DSolo = require('solo');\n                Cortona3DSolo.once('app.didFinishLoadDocument', function () {\n                    app.configureInstance(set, reset);\n                });\n            } else {\n                Module._tiramisu_configure(set & TIRAMISU_FLAGS_MASK, reset & TIRAMISU_FLAGS_MASK);\n            }\n        }\n        if (m_usedModules.drawing) {\n            var drawingFeatures = m_usedModules.drawing.config.features || 0;\n            drawingFeatures |= set;\n            drawingFeatures &= ~reset;\n            m_usedModules.drawing.config.features = drawingFeatures;\n            require('app.drawing').configure(m_usedModules.drawing.config);\n        }\n        return m_instanceConfigurationFlags;\n    },\n\n    /**\n     * Initializes the Cortona3D Solo instance.\n     * \n     * @memberof module:solo.app\n     * @async\n     * @function initialize\n     * @param {string} [url] - The optional argument specifies the URL of the external file:\n     * - companion file *.interactivity.xml*\n     * - VRML file *.wrl*\n     * - compressed (zip) package file containing the RapidAuthor publication *.cortona3d* *.vmb* *.zip*\n     * - SVG file *.svg* \n     * - image file *.png* *.jpg* *.gif*\n     * \n     * If omitted, the value specified in the `src` property is used.\n     * @returns {Promise<DocumentInfo>} `Promise` whose fulfillment handler receives an {@link DocumentInfo} object when the requested file has successfully been loaded.\n     * @see external:Promise\n     * @see {@link module:solo.use use()}\n     */\n    initialize: function (canvas, url) {\n        var src = url;\n        var Cortona3DSolo = require('solo');\n\n        if (typeof canvas === \"string\") {\n            // initialize(src)\n            src = canvas;\n\n            if (!m_usedModules.drawing && !m_usedModules.core) {\n                Cortona3DSolo.use('core', {\n                    src: src,\n                    features: m_instanceConfigurationFlags\n                });\n            }\n        } else if (canvas && url) {\n            // initialize(canvas, src)\n\n            if (m_usedModules.core) {\n                if (canvas) Cortona3DSolo.core.canvas = canvas;\n            }\n\n            Cortona3DSolo.use('core', {\n                canvas: canvas,\n                src: url,\n                features: m_instanceConfigurationFlags\n            });\n\n            /*\n            if (!app.drawing) {\n                var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n                canvas.parentNode.insertBefore(svg, canvas);\n                Cortona3DSolo.use('drawing', {\n                    svg: svg,\n                    features: m_instanceConfigurationFlags\n                });\n            }\n            */\n        }\n\n        function loaded() {\n            m_loaded = true;\n        }\n\n        Cortona3DSolo.once('app.didFinishLoadDocument', loaded);\n        Cortona3DSolo.once('app.didFailLoadDocument', loaded);\n\n        if (m_usedModules.drawing) {\n            require('app.drawing').attach(Cortona3DSolo.core && Cortona3DSolo.core.canvas);\n            if (!m_usedModules.core) {\n                src = src || m_usedModules.drawing.config.src;\n                if (src) {\n                    Cortona3DSolo.app.drawing.show(true);\n                    return new Promise(function (resolve, reject) {\n                        Cortona3DSolo.once('app.didFinishLoadDocument', resolve);\n                        Cortona3DSolo.app.drawing.load(src).catch(reject);\n                    });\n                }\n                return Promise.resolve({});\n            }\n        }\n\n        if (m_usedModules.core) {\n            if (Cortona3DSolo.core.canvas) {\n                Cortona3DSolo.core.canvas.setAttribute('touch-action', 'none');\n                Cortona3DSolo.core.canvas.style.touchAction = 'none';\n            }\n\n            var moduleArguments = require('core.solo').Arguments;\n\n            if (m_usedModules.tag) {\n                moduleArguments.instanceClass = 'stella';\n            } else {\n                src = src || moduleArguments.document;\n\n                if (src) {\n                    moduleArguments.document = Cortona3DSolo.app.util.toUrl(src);\n                } else {\n                    moduleArguments.document = URL.createObjectURL(new Blob([\"#VRML V2.0 utf8\"], {\n                        type: \"model/vrml\"\n                    }));\n                }\n            }\n\n            moduleArguments.features = (m_instanceConfigurationFlags & 32767);\n            moduleArguments.contentScaleFactor = window.devicePixelRatio || 1;\n            moduleArguments.toModule();\n\n            if (m_usedModules.tag) {\n                return new Promise(function (resolve, reject) {\n                    Cortona3DSolo.once('app.firstFrameDidArrive', resolve);\n                });\n            }\n            \n            return new Promise(function (resolve, reject) {\n                Cortona3DSolo.once(\"core.onError\", reject);\n                Cortona3DSolo.once('app.didFinishLoadDocument', resolve);\n                Cortona3DSolo.once('app.didFailLoadDocument', reject);\n            });\n        }\n\n        return Promise.reject(new Error('Solo initialize: nothing to do'));\n    },\n\n    version: function () {\n        return VERSION;\n    },\n\n    /**\n     * Returns true if the library has already been initialized and the document has already been loaded.\n     * \n     * @memberof module:solo.app\n     * @function isDocumentLoaded\n     * @returns {boolean} \n     * @since 1.4.3\n     */\n    isDocumentLoaded: function () {\n        return m_loaded;\n    },\n\n    /**\n     * _Asynchronous method_. Loads the companion file.\n     * \n     * @async\n     * @memberof module:solo.app\n     * @function loadCompanionFile\n     * @param {string} url - An URL to load the external companion file *.interactivity.xml*\n     * @returns {Promise<CompanionFileInfo>} `Promise` whose fulfillment handler receives an {@link CompanionFileInfo} object when the requested file has successfully been loaded.\n     * @fires \"app.onProgress\"\n     * @see external:Promise\n     * @since 1.4.0\n     */\n    loadCompanionFile: function (url) {\n        return util.loadResource(url, 'text/xml').then(function (xhr) {\n            var data,\n                json,\n                type = '',\n                meta = [];\n\n            if (xhr.responseXML) {\n                json = xmlToJson(xhr.responseXML);\n\n                data = {\n                    baseURL: util.getBaseURL(url),\n                    options: require('interactivity.options.js')(json),\n                    interactivity: {\n                        json: json\n                    }\n                };\n\n                data.specificationName = data.options.SpecID;\n\n                if (json.ipc) {\n                    expand(data, {\n                            type: 'ipc',\n                            metadata: require('interactivity.metadata.js')(json.$('ipc/figure/metadata/value'))\n                        },\n                        require('app.ipc.interactivity.js')(data.interactivity, data.baseURL));\n                } else if (json.SimulationInteractivity) {\n                    expand(data, {\n                            type: 'procedure',\n                            metadata: require('interactivity.metadata.js')(json.$('SimulationInteractivity/SimulationInformation/metadata/value'))\n                        },\n                        require('app.procedure.interactivity.js')(data.interactivity, data.baseURL));\n                }\n\n                return Promise.resolve(data);\n            } else {\n                return Promise.reject(new Error(url + \" empty content\"));\n            }\n        });\n    },\n    /**\n     * Returns the absolute URL or data URL of the resource file for the loaded interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {string} url\n     * @param {string} [baseUrl]\n     * @returns {string}\n     * @since 1.7.0\n     */\n    getResourceUrl: function (url, baseUrl) {\n        var res;\n        if (baseUrl && !/^(data|blob)/i.test(baseUrl)) {\n            // using baseUrl\n            res = app.util.toUrl(url, baseUrl);\n        } else  if (app.modelInfo && app.modelInfo.bundleURL) {\n            // using bundle\n            res = app.util.createResourceURL(url) || app.util.toUrl(url, app.modelInfo.bundleURL);\n        } else {\n            // using interactivity\n            res = app.util.toUrl(url, app.modelInfo && app.modelInfo.baseURL);\n        }\n        return res;\n    }\n};\n\nObject.defineProperty(app, 'DISABLE_DOCUMENT_INTERACTIVITY', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_PROCEDURE_TEXT_EMISSION', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_AUDIO', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_VERTEX_ARRAY_OBJECT_OES', {\n    value: 8,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_DISCARDABLE_GEOMETRY_DATA', {\n    value: 16,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_PROPERTY_VALUE_ANIMATIONS', {\n    value: 32,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_GLES3', {\n    value: 64,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_ANTIALIASING_GLES3', {\n    value: 128,\n    writable: false\n});\nObject.defineProperty(app, 'TRANSPARENT_BACKGROUND', {\n    value: 256,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_OBJECT_HOVERING', {\n    value: 512,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_GEOMETRY_PREWARMING', {\n    value: 1024,\n    writable: false\n});\nObject.defineProperty(app, 'DEFAULT_WHELL_ACTION_ZOOM_MAC', {\n    value: 2048,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_NAVIGATION_FIT_TO_OBJECT', {\n    value: 32768,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_INTERACTIVITY_XML_EMISSION', {\n    value: 32768 * 2,\n    writable: false\n});\nObject.defineProperty(app, 'DRAWING_HOTSPOT_HIGHLIGHT_SOLID', {\n    value: 32768 * 4,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_AUTO_SWITCHING_DISPLAY_MODE', {\n    value: 32768 * 8,\n    writable: false\n});\nObject.defineProperty(app, 'ENABLE_VRML_TEXT_NODE', {\n    value: 32768 * 16,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION', {\n    value: 32768 * 32,\n    writable: false\n});\n\n\nmodule.exports = {\n    app: app,\n    checkConfigureOptions: function (options) {\n        return (m_instanceConfigurationFlags & options) === options;\n    },\n    getInstanceConfigurationFlags: function () {\n        return m_instanceConfigurationFlags;\n    },\n    getDocumentURL: function () {\n        var res = \"\";\n        if (m_usedModules.core) {\n            var args = Module.arguments;\n            if (args) {\n                var i = args.indexOf('document');\n                if (i >= 0) {\n                    res = args[i + 1];\n                }\n            }\n        }\n        return res;\n    },\n    usedModules: m_usedModules\n};\n\n/**\n * Information from the loaded companion file, for example:\n * ```\n * {\n *      type: 'ipc',\n *      metadata: {\n *          TITLE: \"Pump IPC - Complete\",\n *          ...\n *      },\n *      options: {\n *          SpecID: \"GENERIC_IPC\",\n *          SpecLang: \"en\",\n *          ...\n *      },\n *      specificationName: \"GENERIC_IPC\",\n *      interactivity: { ... }\n * }\n * ```\n * @prop {string} type - Name of the companion file type:\n * - `\"ipc\"`\n * - `\"procedure\"`\n * @prop {KeyValuePairs} metadata - An object represents project metadata from the companion file.\n * @prop {KeyValuePairs} options - An object represents published options from the companion file.\n * @prop {string} specificationName - Identifier of the specification component.\n * @prop {object} interactivity - The namespace corresponding to the type of companion file. See {@link module:solo.app.ipc.interactivity app.ipc.interactivity} and {@link module:solo.app.procedure.interactivity app.procedure.interactivity}.\n * @prop {string} baseURL - A base path to the loaded companion file or the empty string if the model loaded from the bundle file.\n * @typedef {object} CompanionFileInfo\n * @see {@link module:solo.app.loadCompanionFile app.loadCompanionFile()}\n */","/**\n * The Cortona3D Solo module. The main interface of the Cortona3D Solo API:\n *\n * - Uses the Universal Module Definition (UMD) interface;\n * - Exports {@link Cortona3DSolo} global object;\n * - The exported object is an instance of the {@link external:EventEmitter EventEmitter} class;\n * - Exports namespaces {@link module:solo.core core}, {@link module:solo.app app}.\n *  \n * **Configuration:**\n * ```\n * Cortona3DSolo.use('core');\n * ```\n * See the {@link module:solo.use use()} method for more details.\n * \n * @module solo\n * @implements {@link external:EventEmitter EventEmitter}\n */\n\nvar expand = require('lib/util').expand,\n    EventEmitter = require('events').EventEmitter;\n\nvar Cortona3DSolo = expand(new EventEmitter(), window.Cortona3DSolo || {});\n\nCortona3DSolo.setMaxListeners(0); // Infinity\n\n/**\n * @memberof module:solo\n * @member {string} baseUrl The relative base URL of a Cortona3D Solo library.\n * @since 1.4.0\n */\n\nvar m_baseUrl = Cortona3DSolo.baseUrl || Cortona3DSolo.baseURL || (document.currentScript && document.currentScript.src.replace(/[^\\\\\\/]+$/, '')) || '';\n\nObject.defineProperty(Cortona3DSolo, 'baseURL', {\n    get: function () { return m_baseUrl; },\n    set: function (value) { m_baseUrl = value; },\n    enumerable: true\n});\n\nObject.defineProperty(Cortona3DSolo, 'baseUrl', {\n    get: function () { return m_baseUrl; },\n    set: function (value) { m_baseUrl = value; },\n    enumerable: true\n});\n\n\nmodule.exports = Cortona3DSolo;\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","var Cortona3DSolo = require('solo');\nvar app = require('app').app;\nvar expand = require('lib/util').expand;\n\nrequire('drawing.css');\nvar SVGDrawing = require('drawing');\n\nvar usedModules = require('app').usedModules;\n\nvar m_isSVGVisible = false;\nvar m_urlDrawing = '';\n\nvar m_hotspotHighlightColor = '#FF0000';\nvar m_hotspotSelectionColor = '#FF0000';\n\nvar m_hoveredHotspot;\n\nvar css = Cortona3DSolo.app.ui.css();\n\n// SVGDrawing hooks\nexpand(SVGDrawing, {\n    delegate: {\n        onProgress: function (loaded, total) {\n            Cortona3DSolo.dispatch('app.onProgress', loaded, total);\n        },\n        didClickHotspot: function (name, keys) {\n            Cortona3DSolo.dispatch('app.drawing.didSelectHotspot', name, keys);\n        },\n        didEnterHotspot: function (name) {\n            SVGDrawing.toggleHotspotClass(name, 'hover', true);\n            Cortona3DSolo.dispatch('app.drawing.didEnterHotspot', name);\n            Cortona3DSolo.dispatch('app.drawing.didHoverHotspot', name, true);\n        },\n        didLeaveHotspot: function (name) {\n            SVGDrawing.toggleHotspotClass(name, 'hover', false);\n            Cortona3DSolo.dispatch('app.drawing.didLeaveHotspot', name);\n            Cortona3DSolo.dispatch('app.drawing.didHoverHotspot', name, false);\n        },\n        didCallContextMenu: function (name, offsetX, offsetY, target) {\n            Cortona3DSolo.dispatch('app.drawing.didCallContextMenu', name, offsetX, offsetY, target);\n        },\n        onZoomChange: function (zoom) {\n            Cortona3DSolo.dispatch('app.drawing.didChangeScale', zoom);\n        }\n    }\n});\n\n/**\n * @private\n */\nfunction attachSVGViewer(canvas) {\n    if (!SVGDrawing.svg) {\n        var svg = usedModules.drawing.config.element || usedModules.drawing.config.svg || (function () {\n            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            var beforeElement = canvas,\n                parentElement;\n            if (!canvas) {\n                require('core.css');\n                beforeElement = document.body.firstChild;\n                parentElement = document.body;\n            } else {\n                parentElement = canvas.parentNode;\n            }\n            parentElement.insertBefore(svg, beforeElement);\n            return svg;\n        })();\n\n        svg.parentNode.style.overflow = 'hidden';\n\n        SVGDrawing.initialize(svg);\n    }\n}\n\nfunction applyStyle() {\n    css.render({\n        '.cortona3dsolo-svg svg a[name]': {\n            '& .hover': {\n                stroke: m_hotspotHighlightColor,\n                strokeOpacity: 1\n            },\n            '& path.hover': {\n                strokeWidth: '2px',\n            },\n            '& text.hover': {\n                strokeWidth: '.1em',\n            },\n            '& path.selected': {\n                fill: m_hotspotSelectionColor,\n                fillOpacity: 0.8\n            }\n        }\n    });\n}\n\nvar getDocumentBaseURL = require('./util').getDocumentBaseURL;\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage interactive 2D graphics.\n     * \n     * Requires the use of the internal module `\"drawing\"`.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     * @example\nCortona3DSolo.use('drawing', {\n    src: 'sample.svg'\n});\nCortona3DSolo.app.initialize();\n     */\n    drawing: {\n        /**\n         * Loads the 2D illustration file.\n         * Supported formats are SVG, JPG, PNG, GIF.\n         * \n         * @async\n         * @fires \"app.drawing.didStartLoadDrawing\"\n         * @fires \"app.drawing.didFinishLoadDrawing\"\n         * @fires \"app.drawing.didFailLoadDrawing\"\n         * @param {string} imageURL\n         * @returns {Promise} A promise \n         * @see external:Promise\n         */\n        load: function (imageURL) {\n            Cortona3DSolo.dispatch('app.drawing.didStartLoadDrawing', imageURL);\n            if (typeof app.drawing.willStartLoadDrawing === 'function') {\n                var shallBeURL = app.drawing.willStartLoadDrawing.call(app, imageURL);\n                if (typeof shallBeURL == 'string') imageURL = shallBeURL;\n            }\n            imageURL = imageURL.replace(/\\.(cgm|tiff?)$/i, '.svg');\n            if (imageURL == m_urlDrawing) {\n                Cortona3DSolo.dispatch('app.drawing.didFinishLoadDrawing', imageURL);\n                return Promise.resolve();\n            }\n            var url;\n            if (app.util && app.util.createResourceURL) url = app.util.createResourceURL(imageURL);\n            if (!url) {\n                url = imageURL;\n                if (!/^[^\\/]+:/.test(url)) {\n                    url = getDocumentBaseURL() + url;\n                }\n            }\n            return new Promise(function (resolve, reject) {\n                SVGDrawing.delegate.didCompleteLoad = function (url) {\n                    if (app.util && app.util.revokeResourceURL) app.util.revokeResourceURL(url);\n                    m_urlDrawing = imageURL;\n                    m_hoveredHotspot = null;\n                    Cortona3DSolo.dispatch('app.drawing.didFinishLoadDrawing', imageURL);\n                    if (!usedModules.core) {\n                        var arg = {\n                            type: 'drawing',\n                            baseURL: require('./util').getBaseURL(imageURL)\n                        };\n                        Cortona3DSolo.dispatch('app.didFinishLoadDocument', arg);\n                    }\n                    resolve();\n                };\n                SVGDrawing.delegate.failedLoadingDocument = function (url, status) {\n                    if (app.util && app.util.revokeResourceURL) app.util.revokeResourceURL(url);\n                    m_urlDrawing = imageURL;\n                    m_hoveredHotspot = null;\n                    SVGDrawing.unload();\n                    Cortona3DSolo.dispatch('app.drawing.didFailLoadDrawing', imageURL, status);\n                    if (!usedModules.core) {\n                        Cortona3DSolo.dispatch('app.didFailLoadDocument', status);\n                    }\n                    reject(new Error('Image loading failed: status ' + status));\n                };\n                SVGDrawing.load(url, /\\.(png|jpe?g|jpe|gif)$/i.test(imageURL));\n            });\n        },\n\n        /**\n         * Show or hides the 2D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        show: function (visible) {\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            SVGDrawing[visible ? 'show' : 'hide']();\n            m_isSVGVisible = !!visible;\n        },\n\n        /**\n         * Checks if the 2D window visible\n         * \n         * @returns {boolean}\n         */\n        isVisible: function () {\n            return m_isSVGVisible;\n        },\n\n        /**\n         * Selects the hotspot by its name.\n         * \n         * @param {string} name\n         * @param {HexColorString} [color] A string representing the color. Specify empty string to clear the selection. If omitted, the value specified in the options statement is used. See {@link module:solo.use use()} properties\n         */\n        selectHotspot: function (name, color) {\n            color = typeof color === 'undefined' ? m_hotspotSelectionColor : color;\n            if (color === '') {\n                SVGDrawing.unselect(name);\n            } else {\n                SVGDrawing.select(name, color);\n            }\n        },\n\n        /**\n         * Highlights the hotspot by its name.\n         * \n         * @param {string} name\n         * @param {HexColorString} [color] A string representing the color. Specify empty string to clear the selection. If omitted, the value specified in the options statement is used. See {@link module:solo.use use()} properties\n         */\n        highlightHotspot: function (name, color) {\n            color = typeof color === 'undefined' ? m_hotspotHighlightColor : color;\n            if (color === '') {\n                SVGDrawing.unhighlight(name);\n            } else {\n                SVGDrawing.highlight(name, color);\n            }\n        },\n\n        /**\n         * Highlights the hotspot by its name using the color specified in the options statement. See {@link module:solo.use use()} properties.\n         * Unlike of the method {@link module:solo.app.drawing.highlightHotspot app.drawing.highlightHotspot()}, this method clears the last selection.\n         * \n         * @param {string} name\n         */\n        hoverHotspot: function (name) {\n            if (m_hoveredHotspot) {\n                SVGDrawing.toggleHotspotClass(m_hoveredHotspot, 'hover', false);\n            }\n            if (name) {\n                SVGDrawing.toggleHotspotClass(name, 'hover', true);\n            }\n            m_hoveredHotspot = name;\n        },\n\n        /**\n         * Toggle the class value for all `SVGPathElement` and `SVGTextElement` inside a hotspot node; i.e., if the class exists then remove it and return `false`, if not, then add it and return `true`.\n         * When the `force` argument is present: If the `force` argument evaluates to `true`, add the specified class value, and if it evaluates to `false`, remove it.\n         * \n         * @param {string} name\n         * @param {string} className\n         * @param {boolean} [force]\n         * @returns {boolean}\n         */\n        toggleHotspotClass: function (name, className, force) {\n            return SVGDrawing.toggleHotspotClass(name, className, force);\n        },\n\n        /**\n         * Restores the default view.\n         * @since 1.4.3\n         */\n        reset: function () {\n            SVGDrawing.reset();\n        },\n\n        /**\n         * Change the scale to the specified value.\n         * @param {number} value \n         * @since 1.4.3\n         */\n        scaleBy: function (value) {\n            SVGDrawing.scaleBy(value);\n        },\n\n        /**\n         * Shifts the image along the X and Y axes by the number of pixels specified in the arguments.\n         * @param {number} valueX \n         * @param {number} valueY \n         * @since 1.7.0\n         */\n        shiftBy: function (valueX, valueY) {\n            SVGDrawing.shiftBy(valueX, valueY);\n        },\n\n        /**\n         * Checks if hotspot with specified name exists in the 2D illustration.\n         * \n         * @param {string} name\n         * @since 1.5.0\n         */\n        hotspotExists: function (name) {\n            return Array.prototype.slice.call(SVGDrawing.svg.getElementsByTagName('a')).some(function (n) {\n                return (n.getAttribute('name') === name);\n            });\n        }\n    }\n};\n\n/**\n * The HTML `<svg>` element.\n * \n * @static\n * @member {SVGSVGElement} svg\n * @memberof module:solo.app.drawing\n * @since 1.4.3\n */\n\n/**\n * Gets or sets the color of the hovered hotspot in the 2D illustration.\n * \n * @static\n * @member {HexColorString} hoverColor\n * @memberof module:solo.app.drawing\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the color of the selected hotspot in the 2D illustration.\n * \n * @static\n * @member {HexColorString} selectionColor\n * @memberof module:solo.app.drawing\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the maximum scaling limit for the drawing.\n * \n * @static\n * @member {number} maxScale\n * @memberof module:solo.app.drawing\n * @since 1.6.0\n */\n\n/**\n * Gets or sets the minimum scaling limit for the drawing.\n * \n * @static\n * @member {number} minScale\n * @memberof module:solo.app.drawing\n * @since 1.6.0\n */\n\nObject.defineProperties(appExports.drawing, {\n    'svg': {\n        get: function () {\n            return SVGDrawing.svg;\n        },\n        enumerable: true\n    },\n    'hoverColor': {\n        get: function () {\n            return m_hotspotHighlightColor;\n        },\n        set: function (color) {\n            m_hotspotHighlightColor = color;\n            applyStyle();\n        },\n        enumerable: true\n    },\n    'selectionColor': {\n        get: function () {\n            return m_hotspotSelectionColor;\n        },\n        set: function (color) {\n            m_hotspotSelectionColor = color;\n            applyStyle();\n        },\n        enumerable: true\n    },\n    'maxScale': {\n        get: function () {\n            return SVGDrawing.maxScale;\n        },\n        set: function (value) {\n            SVGDrawing.maxScale = value;\n        },\n        enumerable: true\n    },\n    'minScale': {\n        get: function () {\n            return SVGDrawing.minScale;\n        },\n        set: function (value) {\n            SVGDrawing.minScale = value;\n        },\n        enumerable: true\n    }\n});\n\nmodule.exports = {\n    configure: function (options) {\n        options = options || {};\n        m_hotspotHighlightColor = options.hotspotHoverColor || options.hotspotHighlightColor || m_hotspotHighlightColor;\n        m_hotspotSelectionColor = options.hotspotSelectionColor || m_hotspotSelectionColor;\n        SVGDrawing.enableHoverFilling = (options.features || 0) & app.DRAWING_HOTSPOT_HIGHLIGHT_SOLID;\n        SVGDrawing.enableDrawingOptimization = !((options.features || 0) & app.DISABLE_DRAWING_INTERACTIVITY_OPTIMIZATION);\n        if (options.maxScale) SVGDrawing.maxScale = +options.maxScale;\n        if (options.minScale) SVGDrawing.minScale = +options.minScale;\n        applyStyle();\n        return appExports;\n    },\n\n    attach: attachSVGViewer,\n\n    getSVGViewer: function () {\n        return SVGDrawing;\n    }\n};\n\n/**\n * The hook method is invoked before loading the 2D illustration file. \n * Must return the URL to the 2D illustration file that should be loaded.\n * \n * @function willStartLoadDrawing  \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} imageURL Request URL to load 2D illustration\n * @returns {string} Returns URL to load 2D illustration\n */\n\n/**\n * The hook method is invoked before loading the 2D illustration.\n * \n * @function didStartLoadDrawing\n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @see The corresponding event {@link event:\"app.drawing.didStartLoadDrawing\" \"app.drawing.didStartLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didStartLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didStartLoadDrawing app.drawing.didStartLoadDrawing()}\n */\n\n/**\n * The hook method is invoked when the 2D illustration is failed to load.\n * \n * @function didFailLoadDrawing\n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @param {string} status Status code\n * @see The corresponding event {@link event:\"app.drawing.didFailLoadDrawing\" \"app.drawing.didFailLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didFailLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didFailLoadDrawing app.drawing.didFailLoadDrawing()}\n */\n\n/**\n * The hook method is invoked when the 2D illustration is loaded.\n * \n * @function didFinishLoadDrawing \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} url Request URL to load 2D illustration\n * @see The corresponding event {@link event:\"app.drawing.didFinishLoadDrawing\" \"app.drawing.didFinishLoadDrawing\"}\n */\n/**\n * @event \"app.drawing.didFinishLoadDrawing\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didFinishLoadDrawing app.drawing.didFinishLoadDrawing()}\n */\n\n/**\n * The hook is invoked when the hotspot is selected.\n * \n * @function didSelectHotspot \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the selected hotspot\n * @param {number} keys \n * @see The corresponding event {@link event:\"app.drawing.didSelectHotspot\" \"app.drawing.didSelectHotspot\"}\n */\n/**\n * @event \"app.drawing.didSelectHotspot\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didSelectHotspot app.drawing.didSelectHotspot()}\n */\n\n/**\n * The hook is invoked when the hotspot is highlighted.\n * \n * @function didHoverHotspot \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the selected hotspot\n * @param {boolean} hover -\n * - true - Hotspot is highlighted\n * - false - Hotspot is not highlighted\n * @see The corresponding event {@link event:\"app.drawing.didHoverHotspot\" \"app.drawing.didHoverHotspot\"}\n */\n/**\n * @event \"app.drawing.didHoverHotspot\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didHoverHotspot app.drawing.didHoverHotspot()}\n */\n\n/**\n * The hook method is invoked when the context menu is called in the 2D window. \n * The mouse uses secondary button click. The touch device uses long tap.\n * \n * @function didCallContextMenu \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {string} name Name of the clicked hotspot or empty string\n * @param {number} offsetX The X coordinate relative to the target element \n * @param {number} offsetY The Y coordinate relative to the target element\n * @param {HTMLElement} target Target element (parent of the element `<svg>`)\n * @see The corresponding event {@link event:\"app.drawing.didCallContextMenu\" \"app.drawing.didCallContextMenu\"}\n */\n/**\n * @event \"app.drawing.didCallContextMenu\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didCallContextMenu app.drawing.didCallContextMenu()}\n */\n\n/**\n * The hook method is invoked when the scale of 2D illustration is changed.\n * \n * @function didChangeScale \n * @abstract \n * @memberof module:solo.app.drawing\n * @param {number} zoom The value of the scale\n * @see The corresponding event {@link event:\"app.drawing.didChangeScale\" \"app.drawing.didChangeScale\"}\n */\n/**\n * @event \"app.drawing.didChangeScale\"\n * @see The corresponding hook method {@link module:solo.app.drawing.didChangeScale app.drawing.didChangeScale()}\n */","var getBaseURL = require('lib/util').getBaseURL;\n\n/**\n * Return base URL.\n * \n * @private\n * @returns {string}\n */\nmodule.exports = {\n    getBaseURL: getBaseURL,\n    getDocumentBaseURL: function () {\n        return getBaseURL(require('app').getDocumentURL());\n    },\n};","module.exports = function (metaValues) {\r\n    var metadata = {};\r\n    metaValues.forEach(function (value) {\r\n        var val = value.$text();\r\n        if (/^(Yes|No)$/.test(val)) {\r\n            val = (val == 'Yes');\r\n        }\r\n        metadata[value.$attr('decl-id')] = val;\r\n    });\r\n    return metadata;\r\n};","var util = require('lib/util');\r\n\r\n/**\r\n * @module create-element\r\n * @private\r\n */\r\n\r\n/**\r\n * Parse CSS selector and returns object with tag name, ID and array of class names.\r\n * \r\n * @private\r\n * @param {string} selector \r\n * @returns {object} \r\n */\r\nfunction parseSelector(selector) {\r\n    var token,\r\n        classList = [],\r\n        id,\r\n        tag,\r\n        re = /(^[^.#]+|\\.[^.#]+|#[^.#]+)/g;\r\n    while (re.exec(selector)) {\r\n        token = RegExp.$1;\r\n        switch (token.substring(0, 1)) {\r\n            case '.':\r\n                classList.push(token.substr(1));\r\n                break;\r\n            case '#':\r\n                id = token.substr(1);\r\n                break;\r\n            default:\r\n                tag = token;\r\n        }\r\n    }\r\n    return {\r\n        id: id,\r\n        classList: classList,\r\n        tag: tag || 'div'\r\n    };\r\n}\r\n\r\n\r\n/**\r\n * Create HTML elements from string.\r\n *\r\n * @param {string} syntax\r\n * @returns {HTMLElement[]}\r\n */\r\nfunction createElementsFromHTML(syntax) {\r\n    var div = document.createElement('div');\r\n    div.innerHTML = syntax;\r\n    return Array.prototype.slice.call(div.childNodes);\r\n}\r\n\r\n\r\n/**\r\n * Creates HTML element with given tag name, list of attributes and array of children.\r\n *\r\n * @param {string} name\r\n * @param {object} [options]\r\n * @param {*} [content]\r\n * @returns {HTMLElement}\r\n */\r\nfunction createElement(name, options, content) {\r\n    var el,\r\n        parsed = {},\r\n        isArray = function (o) { return util.isObject(o) && util.isFunction(o.forEach); },\r\n        hasOptions = util.isObject(options) && !isArray(options) && !(options instanceof Node);\r\n\r\n    parsed = parseSelector(name);\r\n    el = document.createElement(parsed.tag);\r\n\r\n    function addChild(child) {\r\n        if (util.isString(child)) {\r\n            el.append.apply(el, createElementsFromHTML(child));\r\n        } else if (isArray(child)) {\r\n            child.forEach(addChild);\r\n        } else {\r\n            el.append(child || '');\r\n        }\r\n    }\r\n\r\n    Array.prototype.slice.call(arguments, hasOptions ? 2 : 1).forEach(addChild);\r\n    \r\n    if (hasOptions) {\r\n        for (var key in options) {\r\n            if (!util.isUndefined(options[key])) {\r\n                if (options.hasOwnProperty(key)) {\r\n                    if (key === 'dataset' && util.isObject(options[key])) {\r\n                        for (var datakey in options.dataset) {\r\n                            if (!util.isUndefined(options.dataset[datakey])) {\r\n                                if (options.dataset.hasOwnProperty(datakey)) {\r\n                                    el.dataset[datakey] = options.dataset[datakey];\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    el[key] = options[key];\r\n                } else {\r\n                    el.setAttribute(key, options[key]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (parsed.id) {\r\n        el.id = parsed.id;\r\n    }\r\n    parsed.classList.forEach(function (cl) {\r\n        el.classList.add(cl);\r\n    });\r\n    return el;\r\n}\r\n\r\nmodule.exports = {\r\n    parseSelector: parseSelector,    \r\n    createElement: createElement,\r\n    createElementsFromHTML: createElementsFromHTML\r\n};\r\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","module.exports = function (json) {\r\n    var options = {};\r\n\r\n    function valueIterator(value) {\r\n        var val = value.$text();\r\n        if (/^(Yes|No)$/.test(val)) {\r\n            val = (val == 'Yes');\r\n        }\r\n        options[value.$attr('name')] = val;\r\n    }\r\n\r\n    if (json.ipc) {\r\n        json.$('ipc/figure/media').filter(function (media) {\r\n            return media.$attr('id') == 1;\r\n        })[0].$('value').forEach(valueIterator);\r\n    } else if (json.SimulationInteractivity) {\r\n        json.$('SimulationInteractivity/SimulationInformation/Options/Value').forEach(valueIterator);\r\n\r\n        var SimulationInformation = json.SimulationInteractivity.SimulationInformation;\r\n        options.PublisherVersion = SimulationInformation.$text('ExporterVersionNumber');\r\n        options.SpecID = SimulationInformation.$text('SpecID');\r\n        options.SpecVersion = SimulationInformation.$text('SpecVersion');\r\n        options.SpecLang = SimulationInformation.$text('SpecLang');\r\n        options.ModificationDate = SimulationInformation.$text('ModificationDate');\r\n        options.DocumentFile = SimulationInformation.$text('DocumentFile');\r\n    }\r\n\r\n    return options;\r\n};","/*\r\n    millicolor('#FF0000') :color\r\n    millicolor({r: 10, g: 200, b: 2}) :color\r\n    millicolor({h: 60, s: 50, l: 20}) :color\r\n    millicolor([r, g, b]) 0...1 :color\r\n    millicolor(0x00RRGGBB) :color\r\n\r\n    color.toString() -> #...\r\n    color.toHSVString() -> hsv(...)\r\n    color.toRgbString() -> rgb(...)\r\n    color.toArray() -> [r, g, b] 0...1\r\n    color.toValue() -> 0x00RRGGGBB\r\n\r\n    color.toRgb() -> { r:, g:, b: }\r\n    color.toHsl() -> { h:, s:, l: } \r\n    color.getBrightness()\r\n    color.getLuminance()\r\n\r\n    color.desaturate(amount)\r\n    color.saturate(amount)\r\n    color.grayscale()\r\n    color.lighten(amount)\r\n    color.brighten(amount)\r\n    color.darken(amount)\r\n    color.spin(amount)\r\n    color.complement()\r\n\r\n    millicolor('#FF0000').darken().desaturate()\r\n*/\r\n\r\n/**\r\n * @classdesc A helper object to manipulate the HTML color.\r\n * @class\r\n * @hideconstructor\r\n * @param {number} r 0...255\r\n * @param {number} g 0...255\r\n * @param {number} b 0...255\r\n */\r\nfunction ColorObject(r, g, b) {\r\n\r\n    /**\r\n     * The red component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.r = clamp255(Math.round(r || 0));\r\n    /**\r\n     * The blue component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.b = clamp255(Math.round(b || 0));\r\n    /**\r\n     * The green component, a number from 0 to 255.\r\n     * @type {number}\r\n     */\r\n    this.g = clamp255(Math.round(g || 0));\r\n}\r\n\r\n/**\r\n * @returns {object} RGB object. The value of each RGB component is a number between 0 and 255.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toRgb() // { r: 255, g: 0, b: 0 }\r\n */\r\nColorObject.prototype.toRgb = function () {\r\n    return {\r\n        r: this.r,\r\n        g: this.g,\r\n        b: this.b\r\n    };\r\n};\r\n\r\n/**\r\n * @returns {object} HSL object. The value of each HSL component is a number between 0 and 1.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toHsl() // { h: 0, s: 1, l: 0.5 }\r\n */\r\nColorObject.prototype.toHsl = function () {\r\n    var r = bound01(this.r, 255),\r\n        g = bound01(this.g, 255),\r\n        b = bound01(this.b, 255),\r\n        max = Math.max(r, g, b),\r\n        min = Math.min(r, g, b);\r\n\r\n    var h = 0,\r\n        s = 0,\r\n        l = (max + min) / 2;\r\n\r\n    if (max !== min) {\r\n        var d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r:\r\n                h = (g - b) / d + (g < b ? 6 : 0);\r\n                break;\r\n            case g:\r\n                h = (b - r) / d + 2;\r\n                break;\r\n            case b:\r\n                h = (r - g) / d + 4;\r\n                break;\r\n        }\r\n\r\n        h /= 6;\r\n    }\r\n\r\n    return {\r\n        h: h * 360,\r\n        s: s * 100,\r\n        l: l * 100\r\n    };\r\n};\r\n\r\n/**\r\n * @returns {string} HTML hex string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toString() // \"#FF0000\"\r\n */\r\nColorObject.prototype.toString = function () {\r\n    var hex = '000000' + ((this.r << 16) + (this.g << 8) + this.b).toString(16).toUpperCase();\r\n    return '#' + hex.substring(hex.length - 6);\r\n};\r\n\r\n/**\r\n * @returns {number[]} [r, g, b] r,g,b := [0...1]\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toArray() // [1, 0, 0]\r\n */\r\nColorObject.prototype.toArray = function () {\r\n    return [this.r / 255, this.g / 255, this.b / 255];\r\n};\r\n\r\n/**\r\n * @returns {number} 0x00RRGGBB\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toValue() // 0x00FF0000\r\n */\r\nColorObject.prototype.toValue = function () {\r\n    return (this.r << 16) | (this.g << 8) | this.b;\r\n};\r\n\r\n/**\r\n * @returns {string} HTML hsl string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toHslString() // \"hsl(0, 100, 50)\"\r\n */\r\nColorObject.prototype.toHslString = function () {\r\n    var hsl = this.toHsl();\r\n    return 'hsl(' + Math.round(hsl.h) + ',' + Math.round(hsl.s) + ',' + Math.round(hsl.l) + ')';\r\n};\r\n\r\n/**\r\n * @returns {string} HTML rgb string.\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.toRgbString() // \"rgb(255, 0, 0)\"\r\n */\r\nColorObject.prototype.toRgbString = function () {\r\n    return 'rgb(' + this.r + ',' + this.g + ',' + this.b + ')';\r\n};\r\n\r\n/**\r\n * Returns the inverse color.\r\n * \r\n * @returns {ColorObject} \r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.inverse().toRgbString() // \"rgb(0, 255, 255)\"\r\n */\r\nColorObject.prototype.inverse = function () {\r\n    var rgb = this.toRgb();\r\n    rgb.r = 255 - rgb.r;\r\n    rgb.g = 255 - rgb.g;\r\n    rgb.b = 255 - rgb.b;\r\n    return millicolor(rgb);\r\n};\r\n\r\n/**\r\n * Returns the perceived brightness of a color, from 0 to 255.\r\n * \r\n * @returns {number} \r\n * @see {@link http://www.w3.org/TR/AERT#color-contrast}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.getBrightness() // 76.245\r\n */\r\nColorObject.prototype.getBrightness = function () {\r\n    var rgb = this.toRgb();\r\n    return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;\r\n};\r\n\r\n/**\r\n * Returns the perceived luminance of a color, from 0 to 1.\r\n * \r\n * @returns {number} \r\n * @see {@link http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.getLuminance() // 0.2126\r\n */\r\nColorObject.prototype.getLuminance = function () {\r\n    var rgb = this.toRgb(),\r\n        R01 = rgb.r / 255,\r\n        G01 = rgb.g / 255,\r\n        B01 = rgb.b / 255,\r\n        R, G, B;\r\n\r\n    if (R01 <= 0.03928) {\r\n        R = R01 / 12.92;\r\n    } else {\r\n        R = Math.pow(((R01 + 0.055) / 1.055), 2.4);\r\n    }\r\n    if (G01 <= 0.03928) {\r\n        G = G01 / 12.92;\r\n    } else {\r\n        G = Math.pow(((G01 + 0.055) / 1.055), 2.4);\r\n    }\r\n    if (B01 <= 0.03928) {\r\n        B = B01 / 12.92;\r\n    } else {\r\n        B = Math.pow(((B01 + 0.055) / 1.055), 2.4);\r\n    }\r\n\r\n    return (0.2126 * R) + (0.7152 * G) + (0.0722 * B);\r\n};\r\n\r\n/**\r\n * Desaturate the color by the specified value, from 0 to 100. Setting 100 is equivalent to calling greyscale.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.desaturate().toRgbString() // \"rgb(242, 13, 13)\"\r\n */\r\nColorObject.prototype.desaturate = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.s -= amount;\r\n    hsl.s = clamp01(hsl.s / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Saturate the color by the specified value, from 0 to 100.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(242, 13, 13);\r\ncolor.saturate().toRgbString() // \"rgb(255, 0, 0)\"\r\n */\r\nColorObject.prototype.saturate = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.s += amount;\r\n    hsl.s = clamp01(hsl.s / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Completely desaturates a color into greyscale. This is equivalent to calling desaturate(100).\r\n * \r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.grayscale().toRgbString() // \"rgb(128, 128, 128)\"\r\n */\r\nColorObject.prototype.grayscale = function () {\r\n    return this.desaturate(100);\r\n};\r\n\r\n/**\r\n * Returns a lighter by the specified value, from 0 to 100 (in percent). Use the value of 100 for the white color.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.lighten().toRgbString() // \"rgb(255, 51, 51)\"\r\n */\r\nColorObject.prototype.lighten = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.l += amount;\r\n    hsl.l = clamp01(hsl.l / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Returns a darker color by the specified value, from 0 to 100 (in percent). Use the value of 100 for the black color.\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.darken().toRgbString() // \"rgb(204, 0, 0)\"\r\n */\r\nColorObject.prototype.darken = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var hsl = this.toHsl();\r\n    hsl.l -= amount;\r\n    hsl.l = clamp01(hsl.l / 100) * 100;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Spin the hue by the specified value, from -360 to 360. \r\n * Calling with 0, 360, or -360 will do nothing (since it sets the hue back to what it was before).\r\n * \r\n * @param {number} amount --360...360\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.spin(90).toHslString() // \"hsl(90, 100, 50)\"\r\n */\r\nColorObject.prototype.spin = function (amount) {\r\n    var hsl = this.toHsl();\r\n    var hue = (hsl.h + amount) % 360;\r\n    hsl.h = hue < 0 ? 360 + hue : hue;\r\n    return millicolor(hsl);\r\n};\r\n\r\n/**\r\n * Returns a brighter color by the specified value, from 0 to 100 (in percent).\r\n * \r\n * @param {number} [amount=10] 0...100\r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.brighten().toRgbString() // \"rgb(255, 25, 25)\"\r\n */\r\nColorObject.prototype.brighten = function (amount) {\r\n    amount = (amount === 0) ? 0 : (amount || 10);\r\n    var rgb = this.toRgb();\r\n    rgb.r = clamp255(rgb.r - Math.round(-255 * (amount / 100)));\r\n    rgb.g = clamp255(rgb.g - Math.round(-255 * (amount / 100)));\r\n    rgb.b = clamp255(rgb.b - Math.round(-255 * (amount / 100)));\r\n    return millicolor(rgb);\r\n};\r\n\r\n/**\r\n * Returns the complement color. This is equivalent to calling spin(180).\r\n * \r\n * @returns {ColorObject}\r\n * @example\r\nvar color = new ColorObject(255, 0, 0); // red\r\ncolor.complement().toHslString() // \"hsl(180, 100, 50)\"\r\n */\r\nColorObject.prototype.complement = function () {\r\n    var hsl = this.toHsl();\r\n    hsl.h = (hsl.h + 180) % 360;\r\n    return millicolor(hsl);\r\n};\r\n\r\nfunction clamp01(value) {\r\n    return Math.max(0, Math.min(1, value));\r\n}\r\n\r\nfunction clamp255(value) {\r\n    return Math.max(0, Math.min(255, value));\r\n}\r\n\r\nfunction bound01(n, max) {\r\n    if ((Math.abs(n - max) < 0.000001)) {\r\n        return 1;\r\n    }\r\n    return (n % max) / parseFloat(max);\r\n}\r\n\r\nfunction hue2rgb(p, q, t) {\r\n    if (t < 0) t += 1;\r\n    if (t > 1) t -= 1;\r\n    if (t < 1 / 6) return p + (q - p) * 6 * t;\r\n    if (t < 1 / 2) return q;\r\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\r\n    return p;\r\n}\r\n\r\n/**\r\n * Returns a new instance of ColorObject\r\n *\r\n * @private\r\n * @param {*} color\r\n * @returns {ColorObject}\r\n */\r\nfunction millicolor(color) {\r\n    var hex, r, g, b, a;\r\n    if (typeof color === 'string') {\r\n        a = color.match(/^#?([0-9A-F]{6})$/i);\r\n        if (a) {\r\n            hex = a[1];\r\n            r = parseInt(hex.substr(0, 2), 16);\r\n            g = parseInt(hex.substr(2, 2), 16);\r\n            b = parseInt(hex.substr(4, 2), 16);\r\n            return new ColorObject(r, g, b);\r\n        }\r\n        a = color.match(/^#?([0-9A-F]{3})$/i);\r\n        if (a) {\r\n            hex = a[1];\r\n            r = parseInt(hex.substr(0, 1) + hex.substr(0, 1), 16);\r\n            g = parseInt(hex.substr(1, 1) + hex.substr(1, 1), 16);\r\n            b = parseInt(hex.substr(2, 1) + hex.substr(2, 1), 16);\r\n            return new ColorObject(r, g, b);\r\n        }\r\n        throw new Error('Not a hex color: ' + color);\r\n    }\r\n\r\n    if (Array.isArray(color)) {\r\n        if (color.length > 2) {\r\n            return new ColorObject(clamp01(color[0]) * 255, clamp01(color[1]) * 255, clamp01(color[2]) * 255);\r\n        }\r\n        throw new Error('Can not recognize color array');\r\n    }\r\n\r\n    if (typeof color === 'object') {\r\n        if (color.r !== void 0 && color.g !== void 0 && color.b !== void 0) {\r\n            return new ColorObject(color.r, color.g, color.b);\r\n        }\r\n        if (color.h !== void 0 && color.s !== void 0 && color.l !== void 0) {\r\n            var h = bound01(color.h, 360),\r\n                s = bound01(color.s, 100),\r\n                l = bound01(color.l, 100);\r\n\r\n            if (s === 0) {\r\n                r = g = b = l; // achromatic\r\n            } else {\r\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n                var p = 2 * l - q;\r\n                r = hue2rgb(p, q, h + 1 / 3);\r\n                g = hue2rgb(p, q, h);\r\n                b = hue2rgb(p, q, h - 1 / 3);\r\n            }\r\n\r\n            return new ColorObject(r * 255, g * 255, b * 255);\r\n        }\r\n        throw new Error('Can not recognize color object');\r\n    }\r\n\r\n    if (typeof color === 'number') {\r\n        b = color & 0xFF;\r\n        g = (color >> 8) & 0xFF;\r\n        r = (color >> 16) & 0xFF;\r\n        return new ColorObject(r, g, b);\r\n    }\r\n\r\n    return new ColorObject();\r\n}\r\n\r\nmodule.exports = millicolor;","/**\n * XML to JSON converter\n *\n * @module xml2json\n * @author timduck@cortona3d.com\n */\n\nvar XMLNodeData = require('XMLNodeData');\n\n/**\n * Convert XML tree to JSON object\n * \n * <node att1=\"att1-value\" att2=\"att2-value\">\n *      <foo>Foo</foo>\n *      <bar>\n *          <![CDATA[Bar]]>\n *      </bar>\n *      <items>\n *          <item>i1</item>\n *          <item>i2</item>\n *          <item>i3</item>\n *          <item>i4</item>\n *      </items>\n * </node>\n * \n * {\n *  node: {\n *      \"@attributes\": {\n *          att1: \"att1-value\",\n *          att2: \"att2-value\"\n *      },\n *      foo: { \"#text\": \"Foo\" },\n *      bar: { \"#text\": \"Bar\" },\n *      items: {\n *          item: [\n *              { \"#text\": \"i1\" },\n *              { \"#text\": \"i2\" },\n *              { \"#text\": \"i3\" },\n *              { \"#text\": \"i4\" }\n *          ]\n *      }\n *  }\n * }\n * \n * @param {DOMNode} xml The XML DOMNode\n * @returns {XMLNodeData} The JavaScript object\n */\n\n/*\n * var json = xmlToJson(xmlNode);\n * /node/foo/text() --> json.node.foo['#text'] --> json.node.foo.$text()\n * /node/bar --> json.node.bar['#text'] --> json.node.bar.$text()\n * count(/node/children/item) --> json.$(json.node.children.item).length --> json.$('node/children/item').length\n * /node/children/item[2] --> json.node.children.item[1] --> json.$('node.children.item')[1]\n * /node/@att1 --> json.node['@attributes'].att1 --> json.node.$attr('att1')\n * \n */ \n\nfunction xmlToJson(xml) {\n    var obj = new XMLNodeData();\n\n    if (xml.nodeType == 1) { // element\n        // node name\n        obj[\"@name\"] = xml.nodeName;\n        // attributes\n        if (xml.attributes.length > 0) {\n            obj[\"@attributes\"] = {};\n            for (var j = 0; j < xml.attributes.length; j++) {\n                var attribute = xml.attributes.item(j);\n                obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\n            }\n        }\n    }\n\n    // children\n    var hasText = false;\n    var hasMultiText = false;\n    var hasNodes = false;\n    var hasCDATA = false;\n    if (xml.hasChildNodes()) {\n        obj['@children'] = [];\n        for (var i = 0; i < xml.childNodes.length; i++) {\n            var item = xml.childNodes.item(i);\n            var nodeName = item.nodeName;\n            var isElement = item.nodeType === 1;\n            var isText = item.nodeType === 3;\n            var child = xmlToJson(item);\n            hasText = hasText || isText;\n            hasNodes = hasNodes || !isText;\n            hasCDATA = hasCDATA || item.nodeType === 4;\n            if (typeof obj[nodeName] === \"undefined\") {\n                obj[nodeName] = child;\n            } else {\n                if (typeof obj[nodeName].push === \"undefined\") {\n                    hasMultiText = hasMultiText || isText;\n                    var old = obj[nodeName];\n                    obj[nodeName] = [];\n                    obj[nodeName].push(old);\n                }\n                obj[nodeName].push(child);\n            }\n            if (isElement || (isText && child)) obj['@children'].push(child);\n        }\n\n        if (hasMultiText) {\n            obj['#text'] = obj['#text'].join('').replace(/^[\\s\\r\\n]*$/, '');\n        }\n        if (hasText && hasNodes) {\n            delete obj['#text'];\n        }\n        if (hasCDATA) {\n            obj['#text'] = obj['#cdata-section'];\n            delete obj['#cdata-section'];\n        }\n    } else if (typeof xml.nodeValue === \"string\") {\n        obj = xml.nodeValue.replace(/^[\\s\\r\\n]*$/, '');\n    }\n\n    return obj;\n}\n\nmodule.exports = xmlToJson;","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!./core.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","var Cortona3DSolo = require('solo');\r\nvar checkConfigureOptions = require('app').checkConfigureOptions;\r\nvar expand = require('lib/util').expand;\r\n\r\nwindow.Module = expand(window.Module || {}, Cortona3DSolo.core || {});\r\nif (typeof Module.Tiramisu !== 'object') Module.Tiramisu = {};\r\n\r\nvar Arguments = {\r\n    toModule: function () {\r\n        Module.arguments = [];\r\n        for (var key in this) {\r\n            if (this.hasOwnProperty(key) && typeof this[key] !== 'function') {\r\n                Module.arguments.push(key);\r\n                Module.arguments.push(String(this[key]));\r\n            }\r\n        }\r\n    },\r\n    features: 0\r\n};\r\n\r\nfunction TiramisuLoadingError(message) {\r\n    this.name = 'TiramisuLoadingError';\r\n    this.message = message || '';\r\n}\r\nTiramisuLoadingError.prototype = Object.create(Error.prototype);\r\nTiramisuLoadingError.prototype.constructor = TiramisuLoadingError;\r\n\r\nfunction load(coreName) {\r\n    try {\r\n        var xhr = new window.XMLHttpRequest();\r\n\r\n        if (xhr.overrideMimeType) {\r\n            xhr.overrideMimeType('text/javascript');\r\n        }\r\n\r\n        var coreURL = coreName || (checkConfigureOptions(Cortona3DSolo.app.ENABLE_VRML_TEXT_NODE) ? 'Cortona3DSoloCoreText.js' : 'Cortona3DSoloCore.js');\r\n\r\n        coreURL = Module.locateFile(coreURL);        \r\n\r\n        xhr.open(\"GET\", coreURL, true);\r\n        xhr.onerror = function (e) {\r\n            if (Module.onprogress) {\r\n                Module.onprogress({\r\n                    loaded: 0,\r\n                    total: -1,\r\n                    type: e.type\r\n                });\r\n            }\r\n            Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + xhr.statusText));\r\n        };\r\n        xhr.onprogress = function (e) {\r\n            if(Module.onprogress) {\r\n                Module.onprogress(e);\r\n            }\r\n        };\r\n        xhr.onload = function (e) {\r\n            if (Module.onprogress) {\r\n                Module.onprogress({\r\n                    loaded: 0,\r\n                    total: -1,\r\n                    type: e.type\r\n                });\r\n            }\r\n\r\n            if (xhr.status === 200 || xhr.status === 0) {\r\n                var script = document.createElement('script');\r\n                var DOMURL = window.URL || window.webkitURL || window;\r\n                var url = DOMURL.createObjectURL(new Blob([xhr.response]));\r\n                script.onload = function () {\r\n                    DOMURL.revokeObjectURL(url);\r\n                    Cortona3DSolo.emit('core.onLoad');\r\n                    window.addEventListener('error', function (messageOrEvent, source, lineno, colno, error) {\r\n                        if (source == url || messageOrEvent.filename == url) {\r\n                            Cortona3DSolo.emit('core.onError', error || messageOrEvent);\r\n                        }\r\n                    });\r\n                };\r\n                script.onerror = function (e) {\r\n                    DOMURL.revokeObjectURL(url);\r\n                    Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + e));\r\n                };\r\n                script.src = url;\r\n                document.body.appendChild(script);\r\n            } else {\r\n                Cortona3DSolo.emit('core.onError', new Error(coreURL + ' ' + xhr.statusText));\r\n            }\r\n        };\r\n        xhr.send(null);\r\n    } catch (e) {\r\n        throw new TiramisuLoadingError(e.message || e);\r\n    }\r\n}\r\n\r\nmodule.exports = {\r\n    Arguments: Arguments,\r\n    load: load\r\n};","var Cortona3DSolo = require('solo');\r\n\r\nvar app = require('app').app;\r\nvar util = require('lib/util'),\r\n    expand = util.expand,\r\n    isFunction = util.isFunction,\r\n    isNumber = util.isNumber;\r\nvar b64toBlob = Cortona3DSolo.app.util.b64toBlob;\r\nvar deface = require('lib/deface');\r\n\r\nrequire('@cortona3d/solo-core/src/res/tiramisu.css');\r\nrequire('tiramisu.css');\r\n\r\nvar m_runtimeReady = false;\r\n\r\nCortona3DSolo.core = expand(Cortona3DSolo.core || {}, Cortona3DSolo.config || {});\r\n\r\n/**\r\n * The namespace corresponds to the Emscripten {@link external:Module Module object} of core application.\r\n * \r\n * Requires the use of the internal module `\"core\"`.\r\n * \r\n * @namespace\r\n * @memberof module:solo\r\n * @see {@link external:Module Module object}\r\n * @example\r\nCortona3DSolo.use('core', {\r\n    features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA,\r\n    src: 'sample.wrl'\r\n});\r\nCortona3DSolo.app.initialize();\r\n */\r\nvar core = Cortona3DSolo.core = expand({\r\n    /**\r\n     * The hook method is called when core application prints to standard error.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @param {string} text\r\n     * @see {@link http://kripken.github.io/emscripten-site/docs/api_reference/module.html#Module.printErr Module.printErr()}\r\n     */\r\n    printErr: function (text) {\r\n        text = deface(Array.prototype.slice.call(arguments).join(' '));\r\n        console.error(text);\r\n        Cortona3DSolo.core.lastErrorText = text;\r\n    },\r\n\r\n    /**\r\n     * The hook method is called when core application prints to standard output.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @param {string} text\r\n     * @see {@link http://kripken.github.io/emscripten-site/docs/api_reference/module.html#Module.print Module.print()}\r\n     */\r\n    print: function () {\r\n        text = deface(Array.prototype.slice.call(arguments).join(' '));\r\n        console.log(text);\r\n    },\r\n\r\n    /**\r\n     * The HTML `<canvas>` element.\r\n     * \r\n     * @static\r\n     * @member {HTMLCanvasElement} canvas\r\n     * @memberof module:solo.core\r\n     * @see external:HTMLCanvasElement\r\n     */\r\n\r\n    /**\r\n     * The property is true when the Emscripten Module is initialized.\r\n     * \r\n     * @static\r\n     * @member {boolean} runtimeReady\r\n     * @memberof module:solo.core\r\n     * @since 1.5.6\r\n     */\r\n\r\n    /**\r\n     * The hook method is called when core application sets a message in the status bar.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @method\r\n     * @param {string} text - Message text\r\n     */\r\n    setStatus: function (text) {},\r\n\r\n    /**\r\n     * The hook method is invoked when layout is changed to resize the 3D window (the `<canvas>` element).\r\n     * \r\n     * *This method can be overridden if necessary.*\r\n     * \r\n     * @memberof module:solo.core\r\n     * @function didChangeLayout\r\n     * @see {@link module:solo.app.resize app.resize()}\r\n     * @see The corresponding event {@link event:\"core.didChangeLayout\" \"core.didChangeLayout\"}\r\n     */\r\n    /**\r\n     * @event \"core.didChangeLayout\"\r\n     * @see The corresponding hook method {@link module:solo.core.didChangeLayout core.didChangeLayout()}\r\n     */\r\n    didChangeLayout: function () {\r\n        if (m_runtimeReady) {\r\n            var pane = Cortona3DSolo.core.canvas,\r\n                w = pane.clientWidth,\r\n                h = pane.clientHeight;\r\n            Cortona3DSolo.app.resize(w, h);\r\n        }\r\n    }\r\n}, Cortona3DSolo.core);\r\n\r\nexpand(Cortona3DSolo.core, {\r\n    /**\r\n     * The hook method is invoked to indicate that loading operation is in progress.\r\n     * \r\n     * @private \r\n     * @param {ProgressEvent} e XMLHttpRequest onprogress event\r\n     */\r\n    onprogress: function (e) {\r\n        var total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\r\n        var loaded = e.loaded;\r\n        Cortona3DSolo.dispatch(\"app.onProgress\", loaded, total, e.type);\r\n    },\r\n\r\n    /**\r\n     * Check if the Emscripten Module is initialized.\r\n     * \r\n     * @memberof module:solo.core\r\n     * @returns {boolean}\r\n     * @deprecated since version 1.5.6, use {@link module:solo.core.runtimeReady core.runtimeReady} instead\r\n     */\r\n    isRuntimeReady: function () {\r\n        return m_runtimeReady;\r\n    },\r\n    /**\r\n     * @private\r\n     */\r\n    onRuntimeInitialized: function () {\r\n        m_runtimeReady = true;\r\n\r\n        Object.defineProperty(Module, 'runtimeReady', {\r\n            get: function () { return m_runtimeReady },\r\n            enumerable: true\r\n        });\r\n\r\n        Object.defineProperty(Module, 'canvas', {\r\n            value: Module.canvas,\r\n            writable: false,\r\n            enumerable: true\r\n        });\r\n\r\n        if (isFunction(core.didChangeLayout)) {\r\n            window.addEventListener('resize', function () {\r\n                Cortona3DSolo.dispatch(\"core.didChangeLayout\");\r\n            }, false);\r\n        }\r\n        if (app.ui) {\r\n            app.ui.showCanvas(false);\r\n        }\r\n        Cortona3DSolo.emit(\"core.onRuntimeInitialized\");\r\n        Cortona3DSolo.dispatch(\"app.onReady\");\r\n    }\r\n});\r\n\r\nvar DEFAULT_TOTAL_MEMORY = 64;\r\n\r\nfunction resolveSceneURL(options) {\r\n    options = options || {};\r\n    options.features = options.features || 0;\r\n\r\n    var DOMURL = window.URL || window.webkitURL || window,\r\n        syntax,\r\n        src = options.src,\r\n        dataScript;\r\n\r\n    if (!src) {\r\n        dataScript = document.querySelector(\"script[type^='application/solo']\");\r\n        if (dataScript) {\r\n            options.totalMemory = +dataScript.getAttribute('data-total-memory') || options.totalMemory || DEFAULT_TOTAL_MEMORY;\r\n            options.features = options.features | +dataScript.getAttribute('data-features');\r\n            src = dataScript.getAttribute('src');\r\n            if (src) {\r\n                options.src = src;\r\n                dataScript.parentNode.removeChild(dataScript);\r\n            } else {\r\n                return b64toBlob(dataScript.textContent, 'application/zip')\r\n                    .then(function (blob) {\r\n                        options.src = DOMURL.createObjectURL(blob);\r\n                        dataScript.parentNode.removeChild(dataScript);\r\n                        return options;\r\n                    });\r\n            }\r\n        } else {\r\n            dataScript = document.querySelector(\"script[type='model/vrml']\");\r\n            if (dataScript) {\r\n                src = dataScript.getAttribute('src');\r\n                if (src) {\r\n                    options.src = src;\r\n                } else {\r\n                    syntax = dataScript.textContent.replace(/^\\s+/, '');\r\n                    if (syntax.indexOf('#VRML V2.0 utf8') !== 0) {\r\n                        syntax = '#VRML V2.0 utf8\\n' + syntax;\r\n                    }\r\n                    options.isRAContent = /PROTO\\s+ObjectVM/.test(syntax);\r\n                    options.isViewpointInScene = /Viewpoint\\s*{/.test(syntax);\r\n                    options.isTextInScene = /Text\\s*{/.test(syntax);\r\n                    options.src = DOMURL.createObjectURL(new Blob([syntax], {\r\n                        type: \"model/vrml\"\r\n                    }));\r\n                }\r\n                options.totalMemory = +dataScript.getAttribute('data-total-memory') || options.totalMemory || DEFAULT_TOTAL_MEMORY;\r\n                options.features = options.features | +dataScript.getAttribute('data-features');\r\n                if (!options.isRAContent) {\r\n                    options.features |= +Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA;\r\n                }\r\n                if (options.isTextInScene) {\r\n                    options.features |= +Cortona3DSolo.app.ENABLE_VRML_TEXT_NODE;\r\n                }\r\n                dataScript.parentNode.removeChild(dataScript);\r\n            }\r\n        }\r\n    }\r\n    return Promise.resolve(options);\r\n}\r\n\r\nmodule.exports = {\r\n    configure: function (options) {\r\n        // Module configuration\r\n        options = options || {};\r\n        var config = {},\r\n            canvasElement;\r\n\r\n        if (options.prefixURL) {\r\n            Cortona3DSolo.baseUrl = options.prefixURL;\r\n        }\r\n\r\n        canvasElement = options.element || options.canvas || (function () {\r\n            var canvas = document.createElement('canvas');\r\n            require('core.css');\r\n            document.body.insertBefore(canvas, document.body.firstChild);\r\n            return canvas;\r\n        })();\r\n\r\n        canvasElement.classList.add('cortona3dsolo-canvas');\r\n        \r\n        if (!canvasElement.id) {\r\n            canvasElement.id = 'canvas';\r\n        }\r\n\r\n        var w = canvasElement.clientWidth,\r\n            h = canvasElement.clientHeight;\r\n\r\n        canvasElement.width = w;\r\n        canvasElement.height = h;\r\n\r\n        var coreSolo = require('core.solo'),\r\n            moduleArguments = coreSolo.Arguments;\r\n\r\n        moduleArguments.canvas = '#' + canvasElement.id;\r\n\r\n        Module.canvas = canvasElement;\r\n        Module.runtimeReady = m_runtimeReady;\r\n\r\n        resolveSceneURL(options)\r\n            .then(function (options) {\r\n                if (!Cortona3DSolo.core.locateFile) {\r\n                    config.locateFile = function (url) {\r\n                        return Cortona3DSolo.baseUrl + url;\r\n                    }\r\n                }\r\n        \r\n                if (isNumber(options.totalMemory)) {\r\n                    config.TOTAL_MEMORY = options.totalMemory * 1024 * 1024;\r\n                }\r\n\r\n                if (options.features) {\r\n                    app.configureInstance(options.features);\r\n                }\r\n\r\n                expand(Cortona3DSolo.core, config);\r\n\r\n                if (options.src) {\r\n                    moduleArguments.document = Cortona3DSolo.app.util.toUrl(options.src);\r\n                }\r\n\r\n                if (options.features) {\r\n                    moduleArguments.features = options.features & 32767;\r\n                }\r\n\r\n                moduleArguments.toModule();\r\n\r\n                coreSolo.load(options.coreURL);\r\n            })\r\n            .catch(function (e) {\r\n                Cortona3DSolo.emit('core.onError', e);\r\n            });\r\n\r\n        return Module;\r\n    }\r\n};\r\n\r\n/**\r\n *  The hook method is invoked when animation frame is drawn on the canvas.\r\n * \r\n * @memberof module:solo.core\r\n * @abstract \r\n * @function didDrawAnimationFrame\r\n * @since 1.4.0\r\n * @see The corresponding event {@link event:\"core.didDrawAnimationFrame\" \"core.didDrawAnimationFrame\"}\r\n */\r\n/**\r\n * @event \"core.didDrawAnimationFrame\"\r\n * @see The corresponding hook method {@link module:solo.core.didDrawAnimationFrame core.didDrawAnimationFrame()}\r\n */\r\n//didDrawAnimationFrame: nop, // ()","function deface(s) {\r\n    return s.replace(/Tiramis(\\s+Emstrangen)?/g, 'Cortona3D Solo core');\r\n}\r\nmodule.exports = deface;","var Cortona3DSolo = require('solo');\nvar Tiramisu = Module.Tiramisu;\nvar app = require('app').app;\nvar checkConfigureOptions = require('app').checkConfigureOptions;\nvar util = require('lib/util');\nvar expand = util.expand;\nvar getBaseURL = require('./util').getBaseURL;\nvar deface = require('lib/deface');\nvar millicolor = require('lib/color-object');\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);\n\nvar NEED_WEBGL2 = ', you must set ENABLE_GLES3 and DISABLE_ANTIALIASING_GLES3 flags before the library is initialized.'\n\nvar Hammer = require('hammerjs');\n\nvar PRESS_TIME = 750;\nvar DOUBLE_TAP_TIME = 250;\nvar m_isPressed = false;\n\nvar MIN_PICKER_TRANSPARENCY_THRESHOLD = 1.1755e-38;\nvar m_fitFactorObject = 0.5;\nvar m_fitFactorScene = 0.95;\n\nvar m_didFinishLoadDocument = false;\nvar m_firstFrameDidArrive = false;\nvar m_doc;\nvar m_hiddenObjects = {};\n\nfunction beforeFirstFrameRender() {\n    var didDrawScene = PanelService.didDrawScene;\n    if (typeof didDrawScene === 'function') {\n        PanelService.didDrawScene = function () {\n            Cortona3DSolo.dispatch(\"core.didDrawAnimationFrame\");\n            didDrawScene.call(PanelService);\n        };\n    }\n    var willDrawScene = PanelService.willDrawScene;\n    if (typeof willDrawScene === 'function') {\n        PanelService.willDrawScene = function () {\n            Cortona3DSolo.dispatch(\"core.willDrawAnimationFrame\");\n            willDrawScene.call(PanelService);\n        };\n    }\n    if (Module.Stella) {\n        m_doc = {\n            type: 'generic'\n        };\n    }\n    var isGeneric = m_doc.type === 'generic';\n    if (!isGeneric) {\n        app.pickerTransparencyThreshold = 0;\n    }\n    app.ui.showCanvas(isGeneric || app.getChildObjects().length > 0);\n    Cortona3DSolo.dispatch(\"core.didChangeLayout\");\n    app.ui.setBannerImage(app.util.fetchBannerImage());\n}\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    didFinishLoadDocument: function (doc) {\n        m_doc = doc;\n        attachCanvasListeners();\n\n        doc.baseURL = \"\";\n        if (!doc.bundleURL) {\n            doc.baseURL = getBaseURL(doc.companionFile || require('app').getDocumentURL());\n        }\n\n        if (app.getOption('keep3DStructure') === 'Yes') {\n            app.recursiveObjectLookup = true;\n        }\n\n        if (app.getOption('KeepSurfaceEdges') === 'Yes') {\n            app.edgeColorWeights = [1, 0, 0];\n        }\n\n        attachInteractivityXML(doc).then(function () {\n            var type = doc.type;\n            m_didFinishLoadDocument = true;\n            Cortona3DSolo.dispatch('app.didFinishLoadDocument', doc);\n            Cortona3DSolo.dispatch('app.didAttachDocument', doc);\n            if (m_firstFrameDidArrive) {\n                beforeFirstFrameRender();\n                setTimeout(function () {\n                    Cortona3DSolo.dispatch('app.firstFrameDidArrive');\n                }, 0);\n            }\n        }).catch(function (error) {\n            Cortona3DSolo.dispatch('app.didFailLoadDocument', error);\n            console.error(error);\n        });\n    },\n    firstFrameDidArrive: function (timestamp) {\n        m_firstFrameDidArrive = true;\n        if (m_didFinishLoadDocument || Module.Stella) {\n            beforeFirstFrameRender();\n            Cortona3DSolo.dispatch('app.firstFrameDidArrive', timestamp);\n        }\n    },\n    didFailLoadDocument: function (message) {\n        Cortona3DSolo.dispatch('app.didFailLoadDocument', deface(message));\n    },\n    didClickHyperlink: function (urls) {\n        Cortona3DSolo.dispatch('app.didClickHyperlink', urls);\n    },\n    willStartNavigateInScene: function () {\n        Cortona3DSolo.dispatch('app.willStartNavigateInScene');\n    }\n});\n\n// Tiramisu util\nexpand(Tiramisu, {\n    util: {\n        /*\n        unmarshalItemList: function (data) {\n            var count, items, item, i, list = data;\n            if (!data) return;\n            count = getValue(list, \"i32\");\n            list += 4;\n            items = [];\n            for (i = 0; i < count; ++i, list += 44) {\n                item = {\n                    id: getValue(list, \"i32\"),\n                    refPartId: getValue(list + 4, \"i32\"),\n                    quantity: getValue(list + 8, \"i32\"),\n                    item: UTF8ToString(getValue(list + 12, \"*\")),\n                    variant: UTF8ToString(getValue(list + 16, \"*\")),\n                    hotspotId: UTF8ToString(getValue(list + 20, \"*\")),\n                    indent: getValue(list + 24, \"i32\"),\n                    visualIndent: getValue(list + 28, \"i32\"),\n                    attach: getValue(list + 32, \"i32\"),\n                    revised: getValue(list + 36, \"i32\") !== 0,\n                    notIllustrated: getValue(list + 40, \"i32\") !== 0\n                };\n                items.push(item);\n            }\n            Module._free(data);\n            return items;\n        },\n        */\n\n        /**\n         * Wrap string array\n         * \n         * @private\n         * @param {number} data - Emscripten pointer to data buffer\n         * @param {number} size - sets the total number of elements of data buffer \n         * @returns {string[]} Array of string\n         */\n        wrapStringArray: function (data, size) {\n            var strings = new Array(size);\n            for (var i = 0; i < size; ++i)\n                strings[i] = UTF8ToString(getValue(data + i * 4, 'i32'));\n            return strings;\n        },\n        /**\n         * Wrap sheet array\n         * \n         * @private\n         * @param {number} data - Emscripten pointer\n         * @param {number} size - Array length\n         * @returns {object[]} Array of object\n         * ```\n         * {\n         *     id: <string>,\n         *     description: <string>,\n         *     indentationLevel: <number>\n         * }\n         * ```\n         */\n        wrapSheetArray: function (data, size) {\n            if (!size) return [];\n\n            var sheets = new Array(size);\n            for (var i = 0; i < size; ++i, data += 12) {\n                sheets[i] = {\n                    id: UTF8ToString(getValue(data, 'i32')),\n                    description: UTF8ToString(getValue(data + 4, 'i32')),\n                    indentationLevel: getValue(data + 8, 'i32')\n                };\n            }\n            return sheets;\n        },\n\n        /**\n         * Unmarshal array of the 3D object.\n         * \n         * @private\n         * @param {Handle[]} handles - an array of 3D object handles\n         * @returns {Handle[]} an array of 3D objects\n         */\n        unmarshalObjectArray: function (handles) {\n            if (!handles) return [];\n            var i, handle,\n                objects = [];\n            for (i = 0;\n                (handle = getValue(handles + i * 4, 'i32')); ++i)\n                objects[i] = handle;\n            return objects;\n        },\n\n        /**\n         * Unmarshal array of the floats.\n         * \n         * @private\n         * @param {number} floats - Emscripten pointer\n         * @param {number} count - Array length\n         * @returns {number|number[]|null} \n         */\n        unmarshalFloatArray: function (floats, count) {\n            switch (count) {\n                case 0:\n                    return null;\n                case 1:\n                    return getValue(floats, 'float');\n                default:\n                    var a = new Array(count);\n                    for (var i = 0; i < count; i++) {\n                        a[i] = getValue(floats + 4 * i, 'float');\n                    }\n                    return a;\n            }\n        }\n    }\n});\n\n/**\n * \n * @private\n * @param {any} doc\n * @returns {Promise}\n * @see external:Promise\n */\nfunction attachInteractivityXML(doc) {\n    var src = doc.companionFile;\n    var isInteractivityXmlEmissionEnabled = !checkConfigureOptions(app.DISABLE_INTERACTIVITY_XML_EMISSION);\n    isInteractivityXmlEmissionEnabled = isInteractivityXmlEmissionEnabled && !!src;\n    isInteractivityXmlEmissionEnabled = isInteractivityXmlEmissionEnabled && (doc.type == 'ipc' || doc.type == 'procedure');\n\n    if (isInteractivityXmlEmissionEnabled) {\n        var url = app.util.createResourceURL(src) || src;\n        if (url) {\n            return app.loadCompanionFile(url).then(function (data) {\n                if (data && data.type) {\n                    var add = {};\n                    add[data.type] = {\n                        interactivity: data.interactivity\n                    };\n                    expand(app, add);\n                }\n            });\n        }\n    }\n    return Promise.resolve();\n}\n\n/**\n * @private\n * @param {any} p \n */\nfunction getVec3fValue(p) {\n    return [getValue(p, 'float'), getValue(p + 4, 'float'), getValue(p + 8, 'float')];\n}\n\n/**\n * (description)\n * \n * @private\n * @param {function} func - Emscripten function\n * @param {Handle[]} handles - an array of 3D object handles\n * @param {AnimatedMode} animated\n */\nfunction ccallWithObjectHandles(func, handles, animated) {\n    var count = 0,\n        objects = 0,\n        sp = stackSave();\n    if (handles) {\n        if (typeof handles === 'number')\n            handles = [handles];\n        objects = stackAlloc(handles.length * 4);\n        count = handles.length;\n        for (var i = 0; i < count; ++i)\n            setValue(objects + i * 4, handles[i], 'i32');\n    }\n    func(objects, count, animated);\n    stackRestore(sp);\n}\n\n/**\n * Attaching some additional `<canvas>` listeners. \n * \n * @private\n */\nvar _t;\n\nfunction attachCanvasListeners() {\n    function eventStopper(event) {\n        event.stopPropagation();\n    }\n\n    Array.prototype.slice.call(document.getElementsByClassName('cortona3dsolo-popover')).forEach(function (popover) {\n        popover.addEventListener('contextmenu', function (event) {\n            event.preventDefault();\n        }, false);\n        popover.addEventListener('pointerdown', eventStopper, false);\n        popover.addEventListener('pointerup', eventStopper, false);\n    });\n\n    function contextmenu(e) {\n        if (m_isPressed) return;\n        var target = e.target,\n            rect = target.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n\n        Cortona3DSolo.dispatch('app.didCallContextMenu', offsetX, offsetY, target);\n        if (e.preventDefault) e.preventDefault();\n        if (e.stopPropagation) e.stopPropagation();\n    }\n\n    function pressHandler(e) {\n        if (e.pointerType === 'mouse') return;\n        contextmenu(e);\n    }\n\n    function doubleTapHandler(e) {\n        var target = e.target,\n            rect = target.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n        obj = app.pickObject(offsetX, offsetY);\n        clearTimeout(_t);\n        if (!obj && checkConfigureOptions(app.DISABLE_DISCARDABLE_GEOMETRY_DATA)) {\n            obj = app.pickObjectChain(offsetX, offsetY);\n            if (obj) {\n                obj = {\n                    handle: obj.chain[obj.chain.length - 2]\n                };\n            }\n        }\n        if (obj) {\n            app.fitObjectsInView([obj.handle], true);\n        } else {\n            app.fitSceneInView(true);\n        }\n        if (e.preventDefault) e.preventDefault();\n        if (e.stopPropagation) e.stopPropagation();\n    }\n\n    var isMSGestureEnabled = livingOnTheEdge();\n\n    Module.canvas.addEventListener('contextmenu', contextmenu);\n    Module.canvas.addEventListener('pointerdown', function () {\n        if (document.activeElement && document.activeElement.blur) {\n            document.activeElement.blur();\n        }\n    });\n\n    if (checkConfigureOptions(app.ENABLE_NAVIGATION_FIT_TO_OBJECT)) {\n\n        Module.canvas.addEventListener('click', function (event) {\n            var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\n            if (keys & 4) { // Alt\n                var target = event.target || event.srcElement,\n                    rect = target.getBoundingClientRect(),\n                    offsetX = event.clientX - rect.left,\n                    offsetY = event.clientY - rect.top,\n                    obj = app.pickObject(offsetX, offsetY);\n\n                if ((!obj || !(keys & 2)) && checkConfigureOptions(app.DISABLE_DISCARDABLE_GEOMETRY_DATA)) {\n                    obj = app.pickObjectChain(offsetX, offsetY);\n                    if (obj) {\n                        if (keys & 2) { // Ctrl\n                            obj = {\n                                handle: obj.chain[obj.chain.length - 2]\n                            };\n                        } else {\n                            var x = obj.sceneCoord[0],\n                                y = obj.sceneCoord[1],\n                                z = obj.sceneCoord[2];\n                            clearTimeout(_t);\n                            _t = setTimeout(function () {\n                                app.setRotationCenterToPoint(x, y, z);\n                                app.centerRotationCenterInView(true);\n                            }, 100);\n                            return;\n                        }\n                    }\n                }\n\n                if (obj) {\n                    var handle = obj.handle;\n                    clearTimeout(_t);\n                    _t = setTimeout(function () {\n                        app.setRotationCenterToObjects(handle);\n                        app.centerRotationCenterInView(true);\n                    }, 100);\n                }\n            }\n        }, false);\n\n        var lastTapTime = 0,\n            lastTapPoint = {};\n\n        var distance = function (p1, p2) {\n            return Math.sqrt((p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y));\n        };\n\n        if (isMSGestureEnabled) {\n            Module.canvas.addEventListener('dblclick', doubleTapHandler);\n            Module.canvas.addEventListener('MSGestureTap', function (e) {\n                if (e.detail === (e.MSGESTURE_FLAG_BEGIN + e.MSGESTURE_FLAG_END)) {\n                    if (!lastTapTime) {\n                        lastTapTime = new Date().valueOf();\n                        lastTapPoint.x = e.screenX;\n                        lastTapPoint.y = e.screenY;\n                    } else if ((new Date().valueOf() - lastTapTime) <= DOUBLE_TAP_TIME) {\n                        lastTapTime = 0;\n                        if (distance(lastTapPoint, {\n                            x: e.screenX,\n                            y: e.screenY\n                        }) < 100) { // posThreshold\n                            doubleTapHandler(e);\n                        }\n                    } else {\n                        lastTapTime = 0;\n                    }\n                }\n            });\n            Module.canvas.addEventListener('MSGestureHold', function (e) {\n                if (e.detail & e.MSGESTURE_FLAG_BEGIN) {\n                    pressHandler(e);\n                    m_isPressed = true;\n                } else if (e.detail & e.MSGESTURE_FLAG_END) {\n                    setTimeout(function () {\n                        m_isPressed = false;\n                    }, 250);\n                }\n            });\n\n        } else {\n            var mcOptions = {};\n            if (navigator.pointerEnabled === false) {\n                if (SUPPORT_ONLY_TOUCH) {\n                    mcOptions.inputClass = Hammer.TouchInput;\n                } else if (!SUPPORT_TOUCH) {\n                    mcOptions.inputClass = Hammer.MouseInput;\n                } else {\n                    mcOptions.inputClass = Hammer.TouchMouseInput;\n                }\n            }\n            var mc = new Hammer.Manager(Module.canvas, mcOptions);\n            var press = new Hammer.Press({\n                time: PRESS_TIME\n            });\n            var doubletap = new Hammer.Tap({\n                event: 'doubletap',\n                taps: 2,\n                threshold: 5,\n                posThreshold: 100,\n                interval: DOUBLE_TAP_TIME\n            });\n            doubletap.recognizeWith(press);\n            press.requireFailure(doubletap);\n            mc.add(press);\n            mc.add(doubletap);\n            mc.set({\n                touchAction: 'none'\n            });\n            mc.on('press', function (e) {\n                pressHandler({\n                    pointerType: e.pointerType,\n                    target: e.target,\n                    clientX: e.center.x,\n                    clientY: e.center.y\n                });\n                m_isPressed = true;\n            });\n            mc.on('pressup', function () {\n                setTimeout(function () {\n                    m_isPressed = false;\n                }, 250);\n            });\n            mc.on('doubletap', function (e) {\n                doubleTapHandler({\n                    target: e.target,\n                    clientX: e.center.x,\n                    clientY: e.center.y\n                });\n            });\n        }\n    }\n}\n\n/**\n * Adapting to survive in Microsoft's neighborhood. \n * \n * @private\n */\nfunction livingOnTheEdge() {\n    if (typeof window.MSGesture !== 'function')\n        return false;\n\n    var canvas = Module.canvas,\n        recognizer = new MSGesture();\n\n    recognizer.target = canvas;\n\n    function gestureHandler(event) {\n        microsoftGesture(event.translationX, event.translationY, event.scale, event.rotation, event.detail);\n    }\n\n    function microsoftGesture(x, y, scale, rotation, detail) {\n        Module._tiramisu_microsoftGesture(x, y, scale, rotation, detail);\n    }\n\n    function microsoftPointerUp(pointerId, offsetX, offsetY) {\n        return Module._tiramisu_microsoftPointerUp(pointerId, offsetX, offsetY);\n    }\n\n    function microsoftPointerDown(pointerId, offsetX, offsetY) {\n        return Module._tiramisu_microsoftPointerDown(pointerId, offsetX, offsetY);\n    }\n\n    canvas.addEventListener('MSHoldVisual', function (event) {\n        event.preventDefault();\n    }, false);\n    canvas.addEventListener('MSGestureStart', gestureHandler, false);\n    canvas.addEventListener('MSGestureEnd', gestureHandler, false);\n    canvas.addEventListener('MSGestureChange', gestureHandler, false);\n    canvas.addEventListener('MSInertiaStart', gestureHandler, false);\n    canvas.addEventListener('MSGestureTap', gestureHandler, false);\n    canvas.addEventListener('MSGestureHold', gestureHandler, false);\n    canvas.addEventListener('pointerdown', function (event) {\n        if (event.pointerType == 'mouse') {\n            canvas.setPointerCapture(event.pointerId);\n            return;\n        }\n        if (microsoftPointerDown(event.pointerId, event.offsetX, event.offsetY)) {\n            canvas.setPointerCapture(event.pointerId);\n            if (!recognizer.target) {\n                recognizer.target = canvas;\n            }\n            recognizer.addPointer(event.pointerId);\n        }\n    }, false);\n    canvas.addEventListener('pointerup', function (event) {\n        if (event.pointerType == 'mouse') return;\n        event.stopPropagation();\n        microsoftPointerUp(event.pointerId, event.offsetX, event.offsetY);\n    }, false);\n    window.addEventListener('pointerup', function (event) {\n        if (event.pointerType == 'mouse') return;\n        var box = canvas.getBoundingClientRect(),\n            left = box.left + window.pageXOffset - document.body.clientLeft,\n            top = box.top + window.pageYOffset - document.body.clientTop;\n        microsoftPointerUp(event.pointerId, event.pageX - left, event.pageY - top);\n    }, false);\n\n    return true;\n}\n\nvar appExports = {\n    /**\n     * Returns Cortona3D Solo version string.\n     * \n     * @memberof module:solo.app\n     * @returns {string} Version string \n     */\n    version: function () {\n        var major = (Tiramisu.VERSION >> 24),\n            minor = (Tiramisu.VERSION >> 16) & 0xFF,\n            build = Tiramisu.VERSION & 0xFFFF,\n            buildTime = new Date(Tiramisu.BUILD_TIME * 1000);\n        return VERSION + \" (core: \" + [major, minor, build].join('.') + \")\";\n    },\n\n    /**\n     * Changes the `<canvas>` element size. This function must be called to resize 3D window.\n     * \n     * @memberof module:solo.app\n     * @param {number} width - pixels\n     * @param {number} height - pixels\n     * @see {@link module:solo.core.canvas core.canvas}\n     */\n    resize: function (width, height) {\n        if (!m_doc) return;\n        Module._tiramisu_resize(width, height);\n    },\n\n    /**\n     * Returns name of 3D object by its handle.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object \n     * @returns {string} Name of 3D object \n     */\n    getObjectName: function (handle) {\n        return Module.ccall('tiramisu_getObjectName', 'string', ['number'], arguments);\n    },\n\n    /**\n     * Returns type of 3D object by its handle.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object \n     * @returns {string} Type of 3D object \n     * @since 1.4.0\n     */\n    getObjectTypeName: function (handle) {\n        return Module.ccall('tiramisu_getObjectTypeName', 'string', ['number'], arguments);\n    },\n\n    /**\n     * Returns handle of 3D object by its name.\n     * \n     * @memberof module:solo.app\n     * @param {string} name - Name of 3D object\n     * @returns {Handle} Handle of 3D object\n     */\n    getObjectWithName: function (name) {\n        return Module.ccall('tiramisu_getObjectWithName', 'number', ['string'], arguments);\n    },\n\n    /**\n     * Checks whether a 3D object is ignored by the picker. \n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @returns {boolean}\n     */\n    isObjectIgnorableByPicker: function (handle) {\n        return Module._tiramisu_isObjectIgnorableByPicker(handle) !== 0;\n    },\n\n    /**\n     * Sets whether a 3D object is ignored by picker.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {boolean} ignorable\n     */\n    setObjectIgnorableByPicker: function (handle, ignorable) {\n        Module._tiramisu_setObjectIgnorableByPicker(handle, ignorable);\n    },\n\n    /**\n     * Sends a ray from the picked point in the 3D window and returns 3D object that was hit by the ray.\n     * \n     * @memberof module:solo.app\n     * @param {number} x - The X coordinate relative to the element `<canvas>`\n     * @param {number} y - The Y coordinate relative to the element `<canvas>`\n     * @param {boolean} [needsTopLevelParent] - \n     * - true - returns the topmost element in a picked chain of 3D objects\n     * - false - returns a 3D object that was hit by the ray\n     * @returns {PickedObjectInfo|null} Information about the picked 3D object or null if there are no picked 3D objects\n     */\n    pickObject: function (x, y, needsTopLevelParent) {\n        var mode = typeof needsTopLevelParent == 'undefined' ? 0 : needsTopLevelParent ? 512 : 256;\n        node = Module._tiramisu_pickObject(x, y, mode);\n        return node ? {\n            handle: node,\n            name: Module.ccall('tiramisu_getObjectName', 'string', ['number'], [node])\n        } : null;\n    },\n\n    /**\n     * Sends a ray from the picked point in the 3D window and returns information about picked point and a chain of 3D objects.\n     * The method works with generic VRML file.\n     * \n     * > #### __NOTE__\n     * >\n     * > Required use of the {@link module:solo.app DISABLE_DISCARDABLE_GEOMETRY_DATA} flag when initializing the library.\n     * >```\n     * >    Cortona3DSolo.use('core', { \n     * >        features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA\n     * >    });\n     * >```\n     * \n     * @memberof module:solo.app\n     * @param {number} x - The X coordinate relative to the element `<canvas>`\n     * @param {number} y - The Y coordinate relative to the element `<canvas>`\n     * @param {number} [options=0] - Reserved for the future\n     * @returns {PickedObjectChain|null} The object with result structure or null if there are no picked 3D objects\n     * @see {@link module:solo.use use()}\n     * @since 1.4.0\n     */\n    pickObjectChain: function (x, y, options) {\n        var result = Module._tiramisu_pickObjectChain(x, y, options || 0),\n            obj = null;\n\n        if (result) {\n            // Fields of the result structure\n            //     Vec3f coord;\n            //     Vec3f normal;\n            //     Vec3f sceneCoord;\n            //     Vec3f sceneNormal;\n            //     Node* chain[];\n\n            obj = {\n                coord: getVec3fValue(result),\n                normal: getVec3fValue(result + 12),\n                sceneCoord: getVec3fValue(result + 24),\n                sceneNormal: getVec3fValue(result + 36),\n                chain: Tiramisu.util.unmarshalObjectArray(result + 48)\n            };\n\n            Module._free(result);\n        }\n\n        return obj;\n    },\n\n    /**\n     * Returns the transparency threshold used by picker.\n     * \n     * @memberof module:solo.app\n     * @returns {number} The transparency threshold\n     * @deprecated since version 1.5.0, use {@link module:solo.app.pickerTransparencyThreshold app.pickerTransparencyThreshold} instead\n     */\n    getPickerTransparencyThreshold: function () {\n        var value = Module._tiramisu_getPickerTransparencyThreshold();\n        if (value < 0) value = -1;\n        return (value >= 0 && value <= MIN_PICKER_TRANSPARENCY_THRESHOLD) ? 0 : value;\n    },\n\n    /**\n     * Sets transparency threshold used by picker.\n     * \n     * @memberof module:solo.app\n     * @param {number} threshold - [0..1]\n     * @deprecated since version 1.5.0, use {@link module:solo.app.pickerTransparencyThreshold app.pickerTransparencyThreshold} instead\n     */\n    setPickerTransparencyThreshold: function (threshold) {\n        return Module._tiramisu_setPickerTransparencyThreshold(threshold || MIN_PICKER_TRANSPARENCY_THRESHOLD);\n    },\n\n    /**\n     * Adds 3D objects to selected objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelectedObjects\"\n     */\n    addSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles(Module._tiramisu_addSelectedObjects, handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelectedObjects');\n    },\n\n    /**\n     * Sets 3D objects to selected state.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelectedObjects\"\n     */\n    setSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles(Module._tiramisu_setSelectedObjects, handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelectedObjects');\n    },\n\n    /**\n     * Removes 3D objects from selected objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeSelectedObjects\"\n     * @since 2.0.0\n     */\n    removeSelectedObjects: function (handles, animated) {\n        ccallWithObjectHandles(Module._tiramisu_removeSelectedObjects, handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeSelectedObjects');\n    },\n\n    /**\n     * Returns an array of selected 3D objects.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle[]} An array of 3D object handles\n     */\n    getSelectedObjects: function () {\n        var handles = Module._tiramisu_getSelectedObjects(),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Adds 3D objects to hovered objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeHoveredObjects\"\n     * @since 2.0.0\n     */\n    addHoveredObjects: function (handles, animated) {\n        ccallWithObjectHandles(Module._tiramisu_addHoveredObjects, handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeHoveredObjects');\n    },\n\n    /**\n     * Sets 3D objects to hovered state.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeHoveredObjects\"\n     * @since 2.0.0\n     */\n    setHoveredObjects: function (handles, animated) {\n        ccallWithObjectHandles(Module._tiramisu_setHoveredObjects, handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeHoveredObjects');\n    },\n\n    /**\n     * Removes 3D objects from hovered objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @fires \"app.didChangeHoveredObjects\"\n     * @since 2.0.0\n     */\n    removeHoveredObjects: function (handles, animated) {\n        ccallWithObjectHandles(Module._tiramisu_removeHoveredObjects, handles, animated);\n        Cortona3DSolo.dispatch('app.didChangeHoveredObjects');\n    },\n\n    /**\n     * Returns an array of hovered 3D objects.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 2.0.0\n     */\n    getHoveredObjects: function () {\n        var handles = Module._tiramisu_getHoveredObjects(),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Sets the default background color in the 3D scene.\n     * An array of color defines the gradient fill. \n     * \n     * @memberof module:solo.app\n     * @param {HexColorString|HexColorString[]} colors - A string representing the color or an array of colors\n     */\n    setDefaultBackgroundColors: function (colors) {\n        var count = 0,\n            colorArray = 0,\n            i,\n            sp = stackSave();\n        if (colors) {\n            if (typeof colors === 'string') {\n                colors = [colors];\n            }\n            count = colors.length;\n            colorArray = stackAlloc(count * 4);\n            for (i = 0; i < count; ++i) {\n                setValue(colorArray + i * 4, millicolor(colors[i]).toValue(), 'i32');\n            }\n        }\n        Module._tiramisu_setDefaultBackgroundColors(colorArray, count);\n        stackRestore(sp);\n    },\n\n    /**\n     * Sets the mouse navigation mode.\n     * \n     * @memberof module:solo.app\n     * @param {MouseDragMode} mode - Mouse drag mode \n     */\n    setMouseDragMode: function (mode) {\n        Module._tiramisu_setMouseDragMode(mode);\n    },\n\n    /**\n     * Sets property for the 3D object.\n     * Optional arguments `v0`, `v1`, `v2` and `v3` define the necessary parameters depending on the property type:\n     * \n     * - app.PROPERTY_DIFFUSE_COLOR    = 0, `v0` = r, `v1` = g, `v2` = b \n     * - app.PROPERTY_EMISSIVE_COLOR   = 1, `v0` = r, `v1` = g, `v2` = b\n     * - app.PROPERTY_TRANSPARENCY     = 2, `v0` = transparency \n     * - app.PROPERTY_VISIBILITY       = 3, `v0` = visibility\n     * - app.PROPERTY_TRANSLATION      = 4, `v0` = x, `v1` = y, `v2` = z\n     * - app.PROPERTY_ROTATION         = 5, `v0` = x, `v1` = y, `v2` = z, `v3` = angle\n     * - app.PROPERTY_SCALE            = 6, `v0` = x, `v1` = y, `v2` = z\n     * \n     * where,\n     * - r, g, b - number [0 ... 1]\n     * - transparency - number [-1 ... 1]\n     * - visibility - boolean\n     * - x, y, z - number\n     * - angle - number in radians\n     * \n     * > #### __NOTE__\n     * >\n     * > The transparency level is set by a number from -1 to 1, \n     * > where 0 is the current transparency level of the object's material in the scene, \n     * > -1 is the opaque material, \n     * > and 1 is the transparent material.\n     *\n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of the 3D object\n     * @param {ObjectProperty} property - Property type code\n     * @param {AnimatedMode} animated\n     * @param {number} v0 - Parameter depending on the property type\n     * @param {number} [v1] - Parameter depending on the property type\n     * @param {number} [v2] - Parameter depending on the property type\n     * @param {number} [v3] - Parameter depending on the property type\n     * @returns {boolean} Return true if changed\n     * @see {@link module:solo.app.restoreObjectProperty app.restoreObjectProperty()}\n     */\n    setObjectPropertyf: function (handle, property, animated, v0, v1, v2, v3) {\n        if (property === app.PROPERTY_VISIBILITY && m_doc.type === 'generic') {\n            var visible = Module._tiramisu_isObjectVisibile(handle) !== 0,\n                render = !!v0;\n            if (!(handle in m_hiddenObjects)) {\n                m_hiddenObjects[handle] = visible;\n            }\n            if (visible !== render) {\n                Module._tiramisu_setObjectVisibility(handle, render);\n                return true;\n            }\n            return false;\n        }\n        return Module._tiramisu_setObjectPropertyf(handle, property, animated, v0, v1, v2, v3) !== 0;\n    },\n\n    /**\n     * Gets property for the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of the 3D object\n     * @param {ObjectProperty} property - Property code\n     * @returns {number|number[]|null} Value of the requested property\n     * @see {@link module:solo.app.setObjectProperty app.setObjectProperty()}\n     * @since 1.6.3\n     */\n    getObjectPropertyf: function (handle, property) {\n        var sp = stackSave(),\n            buffer = stackAlloc(4 * 4),\n            count = Module._tiramisu_getObjectPropertyf(handle, property, buffer),\n            value = Tiramisu.util.unmarshalFloatArray(buffer, count);\n        stackRestore(sp);\n        return value;\n    },\n\n    /**\n     * Restores property value for the 3D object.\n     * Pass handle = 0 to restore property of all dirty objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {ObjectProperty} property - Property\n     * @param {AnimatedMode} animated\n     * @returns {boolean} Returns true if changed\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n     */\n    restoreObjectProperty: function (handle, property, animated) {\n        if (property === app.PROPERTY_VISIBILITY) {\n            if (m_doc.type === 'generic') {\n                if (handle) {\n                    if (handle in m_hiddenObjects) {\n                        var visible = Module._tiramisu_isObjectVisibile(handle) !== 0,\n                            render = m_hiddenObjects[handle];\n                        delete m_hiddenObjects[handle];\n                        if (visible !== render) {\n                            Module._tiramisu_setObjectVisibility(handle, render);\n                            return true;\n                        }\n                    }\n                    return false;\n                }\n                for (var h in m_hiddenObjects) {\n                    Module._tiramisu_setObjectVisibility(h, m_hiddenObjects[h]);\n                }\n                m_hiddenObjects = {};\n            }\n        }\n        return Module._tiramisu_restoreObjectProperty(handle || 0, property, animated) !== 0;\n    },\n\n    /**\n     * Returns array of 3D objects with dirty property. \n     * \n     * @memberof module:solo.app\n     * @param {ObjectProperty} property - Property\n     * @returns {Handle[]} Array of 3D objects\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n     */\n    getObjectsWithDirtyProperty: function (property) {\n        if (property === app.PROPERTY_VISIBILITY) {\n            if (m_doc.type === 'generic') {\n                var res = [];\n                for (var h in m_hiddenObjects) {\n                    res.push(h);\n                }\n                return res;\n            }\n        }\n        var handles = Module._tiramisu_getObjectsWithDirtyProperty(property),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Gets the 3D object highlight parameters.\n     * \n     * @memberof module:solo.app\n     * @param {ObjectHighlightEnum} type \n     * @returns {ObjectHighlightParams|null}\n     * @since 2.0.0\n     */\n    getObjectHighlightParams: function (type) {\n        var p = Module._tiramisu_getObjectHighlightParams(type) >> 2;\n        return p ? {\n            diffuseColor: millicolor([Module.HEAPF32[p], Module.HEAPF32[p + 1], Module.HEAPF32[p + 2]]).toString(),\n            diffuseBrightnessDelta: Module.HEAPF32[p + 3],\n            emissiveColor: millicolor([Module.HEAPF32[p + 4], Module.HEAPF32[p + 5], Module.HEAPF32[p + 6]]).toString(),\n            emissiveBrightnessDelta: Module.HEAPF32[p + 7]\n        } : null;\n    },\n\n    /**\n     * Sets the 3D object highlight parameters.\n     * \n     * @memberof module:solo.app\n     * @param {ObjectHighlightEnum} type \n     * @param {ObjectHighlightParams|null} params \n     * @since 2.0.0\n     */\n    setObjectHighlightParams: function (type, params) {\n        if (!params) {\n            Module._tiramisu_setObjectHighlightParams(type, 0);\n            return;\n        }\n\n        var sp = stackSave(),\n            mem = stackAlloc(32),\n            p = mem >> 2;\n\n        function assign(offset, color, brightness) {\n            if (color && color.length > 2) {\n                Module.HEAPF32[p + offset] = color[0];\n                Module.HEAPF32[p + offset + 1] = color[1];\n                Module.HEAPF32[p + offset + 2] = color[2];\n                Module.HEAPF32[p + offset + 3] = typeof (brightness) !== 'undefined' ? brightness : 0;\n            } else {\n                Module.HEAPF32[p + offset] = 0;\n                Module.HEAPF32[p + offset + 1] = 0;\n                Module.HEAPF32[p + offset + 2] = 0;\n                Module.HEAPF32[p + offset + 3] = typeof (brightness) !== 'undefined' ? brightness : 1;\n            }\n        }\n\n        assign(0, millicolor(params.diffuseColor).toArray(), params.diffuseBrightnessDelta);\n        assign(4, millicolor(params.emissiveColor).toArray(), params.emissiveBrightnessDelta);\n        Module._tiramisu_setObjectHighlightParams(type, mem);\n        stackRestore(sp);\n    },\n\n    /**\n     * Checks if the center of rotation is visible.\n     * \n     * @memberof module:solo.app\n     * @returns {boolean} \n     */\n    isRotationCenterVisible: function () {\n        return _tiramisu_isRotationCenterVisible() !== 0;\n    },\n\n    /**\n     * Toggles the visibility of the center of rotation.\n     * \n     * @memberof module:solo.app\n     * @param {boolean} visible - Flag\n     */\n    setRotationCenterVisibility: function (visible) {\n        Module._tiramisu_setRotationCenterVisibility(visible);\n    },\n\n    /**\n     * Restores the default camera position.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} [animated]\n     */\n    setDefaultView: function (animated) {\n        Module._tiramisu_setDefaultView(animated);\n    },\n\n    /**\n     * Aligns the camera horizon.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} [animated]\n     * @since 1.6.2\n     */\n    alignHorizon: function (animated) {\n        Module._tiramisu_alignHorizon(animated);\n    },\n\n    /**\n     * Sets standard view by name.\n     * \n     * @memberof module:solo.app\n     * @param {StandardViewName} viewName Name of standard view\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     * @see {@link module:solo.app.defaultFitFactorScene app.defaultFitFactorScene}\n     */\n    jumpToStandardView: function (viewName, animated, factor) {\n        Module.ccall('tiramisu_jumpToStandardView', 'null', ['string', 'number', 'number'], [viewName, animated, factor || m_fitFactorScene]);\n    },\n\n    /**\n     * Fit to visible part of the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.95]\n     * @see {@link module:solo.app.defaultFitFactorScene app.defaultFitFactorScene}\n     */\n    fitSceneInView: function (animated, factor) {\n        Module._tiramisu_fitObjectsInView(0, -1, animated, factor || m_fitFactorScene);\n    },\n\n    /**\n     * Fit to selected 3D objects in the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.5]\n     * @see {@link module:solo.app.defaultFitFactorObject app.defaultFitFactorObject}\n     */\n    fitSelectedObjectsInView: function (animated, factor) {\n        Module._tiramisu_fitObjectsInView(0, -2, animated, factor || m_fitFactorObject);\n    },\n\n    /**\n     * Fit to multiple 3D objects assigned in the array.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {AnimatedMode} animated\n     * @param {number} [factor=0.5]\n     * @see {@link module:solo.app.defaultFitFactorObject app.defaultFitFactorObject}\n     */\n    fitObjectsInView: function (handles, animated, factor) {\n        var handlesArray = Array.isArray(handles) ? handles : [handles],\n            visibleHandles = handlesArray.filter(function (handle) {\n                return app.getObjectVisibility(handle) === app.OBJECT_VISIBILITY_VISIBLE;\n            });\n        ccallWithObjectHandles(Module._tiramisu_fitObjectsInView, visibleHandles, animated, factor || m_fitFactorObject);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of visible part of the 3D scene.\n     * \n     * @memberof module:solo.app\n     */\n    setRotationCenterToScene: function () {\n        Module._tiramisu_setRotationCenterToObjects(0, -1, 0);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of selected 3D objects.\n     * \n     * @memberof module:solo.app\n     */\n    setRotationCenterToSelectedObjects: function () {\n        Module._tiramisu_setRotationCenterToObjects(0, -2, 0);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the bounding box of 3D objects assigned in the array.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {boolean} [centerRotationCenter=false]\n     */\n    setRotationCenterToObjects: function (handles, centerRotationCenter) {\n        ccallWithObjectHandles(Module._tiramisu_setRotationCenterToObjects, handles, 0);\n        if (centerRotationCenter) {\n            Module._tiramisu_centerRotationCenterInView(centerRotationCenter);\n        }\n    },\n\n    /**\n     * Sets the center of rotation in the point of the screen.\n     * \n     * @memberof module:solo.app\n     * @param {number} x\n     * @param {number} y\n     * @param {number} z\n     * @since 1.8.3\n     */\n    setRotationCenterToPoint: function (x, y, z) {\n        Module._tiramisu_setRotationCenterToPoint(x, y, z);\n    },\n\n    /**\n     * Sets the center of rotation in the center of the screen.\n     * \n     * @memberof module:solo.app\n     * @param {AnimatedMode} animated\n     */\n    centerRotationCenterInView: function (animated) {\n        Module._tiramisu_centerRotationCenterInView(animated);\n    },\n\n    /**\n     * Sets the center of rotation to default position.\n     * \n     * @memberof module:solo.app\n     */\n    resetRotationCenter: function () {\n        Module._tiramisu_resetRotationCenter();\n    },\n\n    /**\n     * Gets a description of the loaded interactive model.\n     * Returns an object depending on the type of interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {DocumentInfo}\n     * @deprecated since version 1.5.0, use {@link module:solo.app.modelInfo app.modelInfo} instead\n     */\n    getDocumentInfo: function () {\n        return m_doc && expand({}, m_doc);\n    },\n\n    /**\n     * Returns options of the interactive model from the companion file *.interactivity.xml* in the form of an object with key/value pairs.\n     * \n     * @memberof module:solo.app\n     * @returns {KeyValuePairs}\n     * @since 1.4.0\n     */\n    getOptions: function () {\n        var pairs = Module._tiramisu_getOptions(),\n            dict,\n            name,\n            i = 0;\n        if (!pairs)\n            return;\n        dict = {};\n        for (i = 0;\n            (name = getValue(pairs + i, 'i32')); i += 8)\n            dict[UTF8ToString(name)] = UTF8ToString(getValue(pairs + i + 4, 'i32'));\n        Module._free(pairs);\n        return dict;\n    },\n\n    /**\n     * Returns the value of the option of the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {string} name - The name of the option\n     * @returns {string} The value of the option\n     * @since 1.4.0\n     */\n    getOption: function (name) {\n        var value = Module.ccall('tiramisu_getOption', 'number', ['string'], [name]);\n        if (!value)\n            return;\n        return UTF8ToString(value);\n    },\n\n    /**\n     * Sets the name of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - A handle of 3D object \n     * @param {string} name - A name of 3D object\n     * @since 1.4.0\n     */\n    setObjectName: function (handle, name) {\n        Module.ccall('tiramisu_setObjectName', 'null', ['number', 'string'], arguments);\n    },\n\n    /**\n     * Returns the current color of the hovered 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.hoverColor app.hoverColor} instead\n     */\n    getHoverColor: function () {\n        return millicolor(Module._tiramisu_getHoverColor()).toString()\n    },\n\n    /**\n     * Sets the color of the hovered 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.hoverColor app.hoverColor} instead\n     */\n    setHoverColor: function (color) {\n        return Module._tiramisu_setHoverColor(millicolor(color).toValue());\n    },\n\n    /**\n     * Returns the current color of the selected 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @returns {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.selectionColor app.selectionColor} instead\n     */\n    getSelectionColor: function () {\n        return millicolor(Module._tiramisu_getSelectionColor()).toString();\n    },\n\n    /**\n     * Sets the color of the selected 3D object in the interactive model.\n     * \n     * @memberof module:solo.app\n     * @param {HexColorString}\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.selectionColor app.selectionColor} instead\n     */\n    setSelectionColor: function (color) {\n        return Module._tiramisu_setSelectionColor(millicolor(color).toValue());\n    },\n\n    /**\n     * Gets list of the viewpoints in the VRML scene.\n     * \n     * @memberof module:solo.app\n     * @returns {ViewpointInfo[]} An array of viewpoints\n     * @since 1.4.0\n     */\n    getViewpoints: function () {\n        var bulk = Module._tiramisu_getViewpoints(),\n            viewpoints = [],\n            handle,\n            i;\n        if (bulk) {\n            for (i = 0;\n                (handle = getValue(bulk + i, 'i32')); i += 12) {\n                viewpoints.push({\n                    handle: handle,\n                    name: UTF8ToString(getValue(bulk + i + 4, 'i32')),\n                    description: UTF8ToString(getValue(bulk + i + 8, 'i32'))\n                });\n            }\n            Module._free(bulk);\n        }\n        return viewpoints;\n    },\n\n    /**\n     * Returns active viewpoint.\n     * \n     * @memberof module:solo.app\n     * @returns {Handle} A handle of the 3D object \"viewpoint\"\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.activeViewpoint app.activeViewpoint} instead\n     */\n    getActiveViewpoint: function () {\n        return Module._tiramisu_getActiveViewpoint();\n    },\n\n    /**\n     * Sets active viewpoint.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - A handle of the 3D object \"viewpoint\"\n     * @since 1.4.0\n     * @deprecated since version 1.5.0, use {@link module:solo.app.activeViewpoint app.activeViewpoint} instead\n     */\n    setActiveViewpoint: function (handle) {\n        Module._tiramisu_setActiveViewpoint(handle);\n    },\n\n    /**\n     * Adds new objects in the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {Handle} [parentHandle] - A handle of the parent 3D object\n     * @since 1.4.0\n     */\n    addObjects: function (handles, parentHandle) {\n        var handlesArray = util.isUndefined(handles) ? [] : (Array.isArray(handles) ? handles : [handles]);\n        handlesArray.forEach(function (handle) {\n            Module._tiramisu_addObject(handle, parentHandle);\n        });\n    },\n\n    /**\n     * Removes objects from the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {Handle} [parentHandle] - A handle of the parent 3D object\n     * @since 1.4.0\n     */\n    removeObjects: function (handles, parentHandle) {\n        var handlesArray = util.isUndefined(handles) ? [] : (Array.isArray(handles) ? handles : [handles]);\n        handlesArray.forEach(function (handle) {\n            Module._tiramisu_removeObject(handle, parentHandle);\n        });\n    },\n\n    /**\n     * Remove all objects from the 3D scene.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [parentHandle] - Parent handle\n     * @since 1.4.0\n     */\n    removeAllObjects: function (parentHandle) {\n        Module._tiramisu_removeAllObjects(parentHandle);\n    },\n\n    /**\n     * Gets child objects for the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [parentHandle] - Parent handle\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.5.0\n     */\n    getChildObjects: function (parentHandle) {\n        var handles = Module._tiramisu_getChildObjects(parentHandle),\n            objects = Tiramisu.util.unmarshalObjectArray(handles);\n        Module._free(handles);\n        return objects;\n    },\n\n    /**\n     * Sets child objects for the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]} children - An array of 3D object handles\n     * @param {Handle} [parentHandle] - Parent handle\n     * @returns {boolean}\n     * @since 1.5.0\n     */\n    setChildObjects: function (children, parentHandle) {\n        var count = 0,\n            result,\n            sp = stackSave();\n        if (children) {\n            if (typeof children === 'number')\n                children = [children];\n            objectArray = stackAlloc(children.length * 4);\n            count = children.length;\n            for (var i = 0; i < count; ++i)\n                setValue(objectArray + i * 4, children[i], 'i32');\n        }\n        result = Module._tiramisu_setChildObjects(parentHandle, objectArray, count) !== 0;\n        stackRestore(sp);\n        return result;\n    },\n\n    /**\n     * Returns handle of the parent object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} [handle] - Parent handle\n     * @returns {Handle} Handle of 3D object\n     * @since 1.5.1\n     */\n    getParentObject: function (handle) {\n        return Module._tiramisu_getParentObject(handle);\n    },\n\n    /**\n     * Returns the object visibility code.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {number} [flags=0] -\n     * @returns {ObjectVisibilityEnum} The object visibility code\n     * @since 1.5.2\n     */\n    getObjectVisibility: function (handle, flags) {\n        return Module._tiramisu_getObjectVisibility(handle, flags);\n    },\n\n    /**\n     * Returns flags of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @returns {number} Flags of 3D object\n     * @since 1.5.2\n     */\n    getObjectFlags: function (handle) {\n        return Module._tiramisu_getObjectFlags(handle);\n    },\n\n    /**\n     * Returns bounding box of the 3D object.\n     * \n     * @memberof module:solo.app\n     * @param {Handle} handle - Handle of 3D object\n     * @param {ObjectBoundingBoxEnum} type\n     * @returns {ObjectBoundingBox|null} Bounding box information for 3D object\n     * @since 1.8.3\n     */\n    getObjectBoundingBox: function (handle, type) {\n        var sp = stackSave(),\n            floatArray = stackAlloc(24),\n            success = Module._tiramisu_getObjectBoundingBox(handle, type, floatArray),\n            bbox = success ? {\n                center: getVec3fValue(floatArray),\n                size: getVec3fValue(floatArray + 12)\n            } : null;\n        stackRestore(sp);\n        return bbox;\n    },\n\n    /**\n     * Creates 3D objects from the string.\n     * \n     * @memberof module:solo.app\n     * @param {string} syntax - VRML syntax string\n     * @param {string} [baseUrl] - Base URL to load external resources\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.4.0\n     */\n    createObjectsFromString: function (syntax, baseUrl) {\n        var nodes = Module.ccall('tiramisu_createObjects', 'number', ['string', 'number', 'string'], [syntax, 0, baseUrl || null]),\n            handles = Tiramisu.util.unmarshalObjectArray(nodes);\n        if (nodes) {\n            Module._free(nodes);\n        } else {\n            Module.printErr('createObjectsFromString() failed: \"' + syntax + '\"');\n        }\n        return handles;\n    },\n\n    /**\n     * _Asynchronous method_. Creates 3D objects from url.\n     * \n     * @async\n     * @memberof module:solo.app\n     * @param {string} url - URl to load VRML file\n     * @returns {Promise<Handle[]>} `Promise` whose fulfillment handler receives an array of 3D object handles\n     * @see external:Promise\n     * @since 1.4.0\n     */\n    createObjectsFromURL: function (url) {\n        return util.loadResource(url, '', 'arraybuffer').then(function (xhr) {\n            var arrayBuffer = xhr.response,\n                byteArray,\n                buffer,\n                nodes;\n            if (arrayBuffer) {\n                byteArray = new Uint8Array(arrayBuffer);\n                buffer = Module._malloc(byteArray.byteLength);\n                writeArrayToMemory(byteArray, buffer);\n                nodes = Module.ccall('tiramisu_createObjects', 'number', ['number', 'number', 'string'], [buffer, byteArray.byteLength, url]);\n                handles = Tiramisu.util.unmarshalObjectArray(nodes);\n                Module._free(buffer);\n                if (nodes) {\n                    Module._free(nodes);\n                    return Promise.resolve(handles);\n                }\n            }\n            return Promise.reject(new Error('createObjectsFromURL() failed: \"' + url + '\"'));\n        });\n    },\n\n    /**\n     * Creates 3D objects from the VRML file in the *.cortona3d* bundle.\n     * \n     * @memberof module:solo.app\n     * @param {string} itemName - The name of the VRML file in the document bundle\n     * @returns {Handle[]} An array of 3D object handles\n     * @since 1.4.0\n     */\n    createObjectsFromDocumentBundle: function (fileName) {\n        var nodes = Module.ccall('tiramisu_createObjectsFromBundleItem', 'number', ['string'], [fileName]),\n            handles = Tiramisu.util.unmarshalObjectArray(nodes);\n        if (nodes) {\n            Module._free(nodes);\n        } else {\n            Module.printErr('createObjectsFromDocumentBundle() failed: \"' + fileName + '\"');\n        }\n        return handles;\n    },\n\n    /**\n     * Sets camera position, orientation, field of view and center of rotation.\n     * \n     * @param {number[]} position Array of 3 float \n     * @param {number[]} orientation Array of 4 float\n     * @param {number} scalarParam Field of view. If <0 preserve current value\n     * @param {number[]|null} rotationCenter Array of 3 float\n     * @param {boolean} animated\n     * @memberof module:solo.app\n     * @private\n     * @since 1.5.3\n     */\n    setCameraPosition: function (position, orientation, scalarParam, rotationCenter, animated) {\n        var sp = stackSave(),\n            _location = stackAlloc(3 * 4),\n            _orientation = stackAlloc(4 * 4),\n            _rotationCenter = rotationCenter ? stackAlloc(3 * 4) : 0;\n\n        setValue(_location, position[0], 'float');\n        setValue(_location + 4, position[1], 'float');\n        setValue(_location + 8, position[2], 'float');\n        setValue(_orientation, orientation[0], 'float');\n        setValue(_orientation + 4, orientation[1], 'float');\n        setValue(_orientation + 8, orientation[2], 'float');\n        setValue(_orientation + 12, orientation[3], 'float');\n        if (rotationCenter) {\n            setValue(_rotationCenter, rotationCenter[0], 'float');\n            setValue(_rotationCenter + 4, rotationCenter[1], 'float');\n            setValue(_rotationCenter + 8, rotationCenter[2], 'float');\n        }\n        Module._tiramisu_setCameraPosition(_location, _orientation, scalarParam, _rotationCenter, animated);\n        stackRestore(sp);\n    },\n\n    /**\n     * Sets the transparency for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {number} value [-1 ... 1]\n     * @param {AnimatedMode} [animated=false]\n     * @since 1.6.4\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf} about the value of the transparency level\n     */\n    setObjectsTransparency: function (handles, value, animated) {\n        var handlesArray = util.isUndefined(handles) ? [] : (Array.isArray(handles) ? handles : [handles]);\n        handlesArray.forEach(function (handle) {\n            app.setObjectPropertyf(handle, app.PROPERTY_TRANSPARENCY, animated, value);\n        });\n    },\n\n    /**\n     * Gets the transparency value for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @returns {number}\n     * @since 1.6.4\n     * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf} about the value of the transparency level\n     */\n    getObjectsTransparency: function (handles) {\n        var handlesArray = util.isUndefined(handles) ? [] : (Array.isArray(handles) ? handles : [handles]);\n        return handlesArray.reduce(function (acc, handle) {\n            return Math.max(app.getObjectPropertyf(handle, app.PROPERTY_TRANSPARENCY), acc);\n        }, 0);\n    },\n\n    /**\n     * Toggles the visibility state for objects.\n     * \n     * @memberof module:solo.app\n     * @param {Handle[]|Handle} handles - Array of 3D object handles or a single handle\n     * @param {boolean} [force]\n     * @returns {boolean}\n     * @since 1.6.4\n     */\n    toggleObjectsVisibility: function (handles, force) {\n        var handlesArray = util.isUndefined(handles) ? [] : (Array.isArray(handles) ? handles : [handles]);\n        var isVisible = !force;\n\n        if (typeof force === 'undefined') {\n            isVisible = !handlesArray.some(function (handle) {\n                return !!app.getObjectVisibility(handle);\n            });\n        }\n\n        handlesArray.forEach(function (handle) {\n            if (isVisible) {\n                app.setObjectPropertyf(handle, app.PROPERTY_VISIBILITY, false, -1);\n            } else {\n                app.restoreObjectProperty(handle, app.PROPERTY_VISIBILITY, false);\n            }\n        });\n\n        return !isVisible;\n    },\n\n    /**\n     * Performs single step of navigation in the 3D window according to the type specified in the `action` argument.\n     * Optional arguments `arg1` and `arg2` define the necessary parameters depending on the navigation type:\n     * - app.NAVIGATOR_ACTION_SPIN   = 0,  `arg1` = offsetX, `arg2` = offsetY\n     * - app.NAVIGATOR_ACTION_PAN    = 1,  `arg1` = translationX, `arg2` = translationY\n     * - app.NAVIGATOR_ACTION_ZOOM   = 2,  `arg1` = zoomScale\n     * - app.NAVIGATOR_ACTION_ROTATE = 3,  `arg1` = angle\n     * @memberof module:solo.app\n     * @param {NavigatorActionEnum} action\n     * @param {number} arg1\n     * @param {number} [arg2]\n     * @returns {boolean}\n     * @since 1.7.0\n     */\n    navigate: function (action, arg1, arg2) {\n        return Module._tiramisu_navigate(action, arg1, arg2);\n    }\n};\n\n/**\n * Gets or sets the object selection mode.\n * \n * @static\n * @member {SelectionModeEnum} selectionMode\n * @memberof module:solo.app\n * @since 2.0.0\n * @see {@link module:solo.app.selectionColor app.selectionColor}\n * @see {@link module:solo.app.setSelectedObjects app.setSelectedObjects}\n * @see {@link module:solo.app.addSelectedObjects app.addSelectedObjects}\n * @see {@link module:solo.app.ipc.selectItem app.ipc.selectItem}\n */\n\n/**\n * Gets or sets the mode for drawing the outline of highlighted (hovered) objects.\n * \n * @static\n * @member {boolean} outlineHoveredObjects\n * @memberof module:solo.app\n * @since 2.0.0\n * @see {@link module:solo.app.outlineParams app.outlineParams}\n */\n\n/**\n * Gets or sets outline parameters for the hovered objects.\n * \n * @static\n * @member {object} outlineParams\n * @memberof module:solo.app\n * @property {number[]} visibleEdgeColor [r, g, b, a], where r,g,b,a := [0...1]\n * @property {number[]} invisibleEdgeColor [r, g, b, a]\n * @property {number[]} invisibleFillColor [r, g, b, a]\n * @property {number} pixelSize\n * @since 2.0.0\n */\n\n/**\n * Gets or sets the lighting configuration.\n * \n * @static\n * @member {LightConfig[]} lightingConfig\n * @memberof module:solo.app\n * @since 2.0.0\n */\n\n/**\n * Enables or disables the use of the ambient occlusion in the scene.\n * \n * > #### __NOTE__\n * >\n * > To use the ambient occlusion, you must set the {@link module:solo.app ENABLE_GLES3} and {@link module:solo.app DISABLE_ANTIALIASING_GLES3} flags before the library is initialized.\n * >```\n * >    Cortona3DSolo.use('core', { \n * >        features: Cortona3DSolo.app.ENABLE_GLES3 | Cortona3DSolo.app.DISABLE_ANTIALIASING_GLES3\n * >    });\n * >    Cortona3DSolo.app.initialize('scene.wrl');\n * >```\n *\n * @static\n * @member {boolean} ambientOcclusion\n * @memberof module:solo.app\n * @since 2.0.0\n */\n\n/**\n * Checks if the ambient occlusion available for use.\n * \n * @static\n * @member {boolean} ambientOcclusionSupported\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Enables or disables the use of FXAA anti-aliasing in the scene (disabled by default).\n * \n * > #### __NOTE__\n * >\n * > To use FXAA anti-aliasing, you must set the {@link module:solo.app ENABLE_GLES3} and {@link module:solo.app DISABLE_ANTIALIASING_GLES3} flags before the library is initialized.\n * >```\n * >    Cortona3DSolo.use('core', { \n * >        features: Cortona3DSolo.app.ENABLE_GLES3 | Cortona3DSolo.app.DISABLE_ANTIALIASING_GLES3\n * >    });\n * >    Cortona3DSolo.app.initialize('scene.wrl');\n * >```\n *\n * @static\n * @member {boolean} antialiasing\n * @memberof module:solo.app\n * @since 2.0.0\n */\n\n/**\n * Gets or sets the global color for drawing edges.\n * \n * @static\n * @member {HexColorString} globalEdgeColor\n * @memberof module:solo.app\n * @since 1.5.7\n */\n\n/**\n * Gets or sets the weights for the drawing edges as an array of three float numbers. Default value is `[0, 0, 0]`.\n * \n * The color is calculated by the formula:\n * \n * `edgeColor = globalEdgeColor * weights[0] + material.diffuseColor * weights[1] + material.emissiveColor * weights[2]`\n * \n * If the value is `[0, 0, 0]` then edge drawing will be disabled.\n * \n * @static\n * @member {number[]} edgeColorWeights\n * @memberof module:solo.app\n * @since 1.5.7\n * @see {@link module:solo.app.globalEdgeColor app.globalEdgeColor}\n */\n\n/**\n * Gets or sets the color of the hovered 3D object in the interactive model.\n * \n * @static\n * @member {HexColorString} hoverColor\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the color of the selected 3D object in the interactive model.\n * \n * @static\n * @member {HexColorString} selectionColor\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the transparency threshold used by the picker. The value is [0..1].\n * \n * The picker ignores shapes with transparency level greater or equal than threshold value.\n * \n * Except:\n * - 0 - shapes with any transparency level are ignored, except of fully opaque shapes;\n * - -1 - disables filtering of objects based on transparency.\n * \n * Default value:\n * - 0 - for catalog and procedure;\n * - -1 - for generic VRML.\n * \n * @static\n * @member {number} pickerTransparencyThreshold\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets a description of the loaded interactive model.\n * \n * @static\n * @member {DocumentInfo} modelInfo\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets the active viewpoint in the 3D scene.\n * \n * @static\n * @member {Handle} activeViewpoint\n * @memberof module:solo.app\n * @since 1.5.0\n */\n\n/**\n * Gets or sets a flag for recursive object lookup. \n * It must be set to `true` if the hierarchy of 3D objects is kept in VRML.\n * Default value is `false` for the catalog and `true` for the procedure or the catalog with `keep3DStructure` feature.\n * \n * @static\n * @member {boolean} recursiveObjectLookup\n * @memberof module:solo.app\n * @since 1.6.0\n */\n\n/**\n * Gets or sets the visibility flag for the coordinate axes.\n * \n * @static\n * @member {boolean} coordinateAxesVisible\n * @memberof module:solo.app\n * @since 1.8.1\n */\n\n/**\n * Gets or sets the visibility flag for the center of rotation.\n * \n * @static\n * @member {boolean} rotationCenterVisible\n * @memberof module:solo.app\n * @since 1.8.1\n */\n\n/**\n * Gets or sets options for the navigation mode.\n * \n * @static\n * @member {NavigatorOptionsFlags} navigatorOptions\n * @memberof module:solo.app\n * @since 1.8.2\n */\n\n\n/**\n * Gets or sets the default value for the fit factor to the object.\n * \n * @static\n * @member {number} defaultFitFactorObject=0.5\n * @memberof module:solo.app\n * @since 1.8.3\n * @see {@link module:solo.app.fitSelectedObjectsInView app.fitSelectedObjectsInView()}\n * @see {@link module:solo.app.fitObjectsInView app.fitObjectsInView()}\n */\n\n/**\n * Gets or sets the default value for the fit factor to the scene.\n * \n * @static\n * @member {number} defaultFitFactorScene=0.95\n * @memberof module:solo.app\n * @since 1.8.3\n * @see {@link module:solo.app.jumpToStandardView app.jumpToStandardView()}\n * @see {@link module:solo.app.fitSceneInView app.fitSceneInView()}\n */\n\nObject.defineProperties(app, {\n    'globalEdgeColor': {\n        get: function () {\n            return millicolor(Module._tiramisu_getGlobalEdgeColor()).toString()\n        },\n        set: function (color) {\n            Module._tiramisu_setGlobalEdgeColor(millicolor(color).toValue());\n        },\n        enumerable: true\n    },\n    'edgeColorWeights': {\n        get: function () {\n            return getVec3fValue(Module._tiramisu_getEdgeColorWeights());\n        },\n        set: function (weights) {\n            var sp = stackSave(),\n                weightArray = stackAlloc(3 * 4),\n                i;\n            for (i = 0; i < 3; ++i)\n                setValue(weightArray + i * 4, weights[i], 'float');\n            Module._tiramisu_setEdgeColorWeights(weightArray);\n            stackRestore(sp);\n        },\n        enumerable: true\n    },\n    'ambientOcclusion': {\n        get: function () {\n            return !!Module._tiramisu_isAmbientOcclusionEnabled();\n        },\n        set: function (enable) {\n            if (enable && !checkConfigureOptions(app.ENABLE_GLES3 + app.DISABLE_ANTIALIASING_GLES3)) {\n                console.info('To use the ambient occlusion' + NEED_WEBGL2);\n            }\n            Module._tiramisu_enableAmbientOcclusion(enable);\n        },\n        enumerable: true\n    },\n    'selectionMode': {\n        get: function () {\n            return Module._tiramisu_getSelectionMode();\n        },\n        set: function (mode) {\n            var m = +mode || 0;\n            if (m === 2 && !checkConfigureOptions(app.ENABLE_GLES3 + app.DISABLE_ANTIALIASING_GLES3)) {\n                console.info('To use the \"translucent shell\" object selection mode' + NEED_WEBGL2);\n                return;\n            }\n            Module._tiramisu_setSelectionMode(m);\n        },\n        enumerable: true\n    },\n    'outlineHoveredObjects': {\n        get: function () {\n            return !!Module._tiramisu_isOutlineHoveredObjectsEnabled();\n        },\n        set: function (enable) {\n            Module._tiramisu_enableOutlineHoveredObjects(enable);\n        },\n        enumerable: true\n    },\n    'ambientOcclusionParams': {\n        get: function () {\n            var p = Module._tiramisu_getAmbientOcclusionParams() >> 2;\n            return {\n                kernelSize: Module.HEAP32[p],\n                radius: Module.HEAPF32[p + 1],\n                intensity: Module.HEAPF32[p + 2]\n            };\n        },\n        set: function (params) {\n            var p0 = Module._tiramisu_getAmbientOcclusionParams() >> 2,\n                sp = stackSave(),\n                mem = stackAlloc(12),\n                p = mem >> 2;\n\n            Module.HEAP32[p] = params.kernelSize ? params.kernelSize : Module.HEAP32[p0];\n            Module.HEAPF32[p + 1] = params.radius ? params.radius : Module.HEAPF32[p0 + 1];\n            Module.HEAPF32[p + 2] = params.intensity ? params.intensity : Module.HEAPF32[p0 + 2];\n\n            Module._tiramisu_setAmbientOcclusionParams(mem);\n\n            stackRestore(sp);\n        }\n    },\n    'lightingConfig': {\n        get: function () {\n            var lightCount = Module._tiramisu_getLightingConfig(0, 0),\n                sp = stackSave(),\n                mem = stackAlloc(lightCount * 32),\n                p = mem >> 2,\n                config = [], i;\n            lightCount = Module._tiramisu_getLightingConfig(mem, lightCount);\n            for (i = 0; i < lightCount; ++i) {\n                config.push({\n                    color: millicolor([Module.HEAPF32[p + 0], Module.HEAPF32[p + 1], Module.HEAPF32[p + 2]]).toString(),\n                    direction: [Module.HEAPF32[p + 3], Module.HEAPF32[p + 4], Module.HEAPF32[p + 5]],\n                    intensity: Module.HEAPF32[p + 6],\n                    ambientIntensity: Module.HEAPF32[p + 7]\n                });\n                p += 8;\n            }\n            stackRestore(sp);\n            return config;\n        },\n        set: function (config) {\n            var sp = stackSave(),\n                mem = stackAlloc(config.length * 32),\n                p = mem >> 2, i, l, color;\n            for (i = 0; i < config.length; ++i) {\n                l = config[i];\n                color = typeof l.color !== 'undefined' ? millicolor(l.color).toArray() : [1, 1, 1];\n                Module.HEAPF32[p] = color[0];\n                Module.HEAPF32[p + 1] = color[1];\n                Module.HEAPF32[p + 2] = color[2];\n                Module.HEAPF32[p + 3] = l.direction ? l.direction[0] : 0;\n                Module.HEAPF32[p + 4] = l.direction ? l.direction[1] : 0;\n                Module.HEAPF32[p + 5] = l.direction ? l.direction[2] : -1;\n                Module.HEAPF32[p + 6] = l.intensity ? l.intensity : 1;\n                Module.HEAPF32[p + 7] = l.ambientIntensity ? l.ambientIntensity : 0;\n                p += 8;\n            }\n            Module._tiramisu_setLightingConfig(mem, config.length);\n            stackRestore(sp);\n        }\n    },\n    'outlineParams': {\n        get: function () {\n            var p = Module._tiramisu_getOutlineParams() >> 2;\n            return {\n                visibleEdgeColor: [Module.HEAPF32[p], Module.HEAPF32[p + 1], Module.HEAPF32[p + 2], Module.HEAPF32[p + 3]],\n                invisibleEdgeColor: [Module.HEAPF32[p + 4], Module.HEAPF32[p + 5], Module.HEAPF32[p + 6], Module.HEAPF32[p + 7]],\n                invisibleFillColor: [Module.HEAPF32[p + 8], Module.HEAPF32[p + 9], Module.HEAPF32[p + 10], Module.HEAPF32[p + 11]],\n                size: Module.HEAP32[p + 12]\n            };\n        },\n        set: function (params) {\n            var p0 = Module._tiramisu_getOutlineParams() >> 2,\n                sp = stackSave(),\n                mem = stackAlloc(52),\n                p = mem >> 2;\n\n            function assignColor(offset, value) {\n                if (value && value.length > 3) {\n                    Module.HEAPF32[p + offset] = value[0];\n                    Module.HEAPF32[p + offset + 1] = value[1];\n                    Module.HEAPF32[p + offset + 2] = value[2];\n                    Module.HEAPF32[p + offset + 3] = value[3];\n                }\n                else {\n                    Module.HEAPF32[p + offset] = Module.HEAPF32[p0 + offset];\n                    Module.HEAPF32[p + offset + 1] = Module.HEAPF32[p0 + offset + 1];\n                    Module.HEAPF32[p + offset + 2] = Module.HEAPF32[p0 + offset + 2];\n                    Module.HEAPF32[p + offset + 3] = Module.HEAPF32[p0 + offset + 3];\n                }\n            }\n\n            assignColor(0, params.visibleEdgeColor);\n            assignColor(4, params.invisibleEdgeColor);\n            assignColor(8, params.invisibleFillColor);\n            Module.HEAP32[p + 12] = params.size ? params.size : Module.HEAP32[p0 + 12];\n\n            Module._tiramisu_setOutlineParams(mem);\n\n            stackRestore(sp);\n        }\n    },\n    'antialiasing': {\n        get: function () {\n            var isGLES3 = checkConfigureOptions(app.ENABLE_GLES3),\n                noMSAA = isGLES3 && checkConfigureOptions(app.DISABLE_ANTIALIASING_GLES3);\n            return noMSAA ? !!Module._tiramisu_isAntialiasingEnabled() : !isGLES3;\n        },\n        set: function (enabled) {\n            if (!checkConfigureOptions(app.ENABLE_GLES3 + app.DISABLE_ANTIALIASING_GLES3)) {\n                console.info('To use FXAA anti-aliasing' + NEED_WEBGL2);\n            }\n            Module._tiramisu_enableAntialiasing(enabled);\n        },\n        enumerable: true\n    },\n    'ambientOcclusionSupported': {\n        get: function () {\n            return !!Module._tiramisu_isAmbientOcclusionSupported();\n        },\n        enumerable: true\n    },\n    'hoverColor': {\n        get: function () {\n            return millicolor(Module._tiramisu_getHoverColor()).toString()\n        },\n        set: function (color) {\n            Module._tiramisu_setHoverColor(millicolor(color).toValue());\n        },\n        enumerable: true\n    },\n    'selectionColor': {\n        get: function () {\n            return millicolor(Module._tiramisu_getSelectionColor()).toString();\n        },\n        set: function (color) {\n            Module._tiramisu_setSelectionColor(millicolor(color).toValue());\n        },\n        enumerable: true\n    },\n    'pickerTransparencyThreshold': {\n        get: function () {\n            value = Module._tiramisu_getPickerTransparencyThreshold();\n            if (value < 0) value = -1;\n            return (value >= 0 && value <= MIN_PICKER_TRANSPARENCY_THRESHOLD) ? 0 : value;\n        },\n        set: function (value) {\n            Module._tiramisu_setPickerTransparencyThreshold(value || MIN_PICKER_TRANSPARENCY_THRESHOLD);\n        },\n        enumerable: true\n    },\n    'modelInfo': {\n        get: function () {\n            return m_doc && expand({}, m_doc);\n        },\n        enumerable: true\n    },\n    'activeViewpoint': {\n        get: function () {\n            return Module._tiramisu_getActiveViewpoint();\n        },\n        set: function (handle) {\n            Module._tiramisu_setActiveViewpoint(handle);\n        },\n        enumerable: true\n    },\n    'recursiveObjectLookup': {\n        get: function () {\n            return !!Module._tiramisu_isRecursiveObjectLookupEnabled();\n        },\n        set: function (enabled) {\n            Module._tiramisu_enableRecursiveObjectLookup(enabled);\n        },\n        enumerable: true\n    },\n    'coordinateAxesVisible': {\n        get: function () {\n            return !!Module._tiramisu_isCoordinateAxesVisible();\n        },\n        set: function (enabled) {\n            Module._tiramisu_setCoordinateAxesVisibility(enabled);\n        },\n        enumerable: true\n    },\n    'rotationCenterVisible': {\n        get: function () {\n            return !!Module._tiramisu_isRotationCenterVisible();\n        },\n        set: function (enabled) {\n            Module._tiramisu_setRotationCenterVisibility(enabled);\n        },\n        enumerable: true\n    },\n    'navigatorOptions': {\n        get: function () {\n            var value = Module._tiramisu_getNavigatorOptions();\n            if (!checkConfigureOptions(app.DISABLE_DISCARDABLE_GEOMETRY_DATA)) {\n                value &= ~(app.AUTOMATIC_ZOOM_ANCHOR + app.AUTOMATIC_SPIN_CENTER);\n            }\n            return value;\n        },\n        set: function (options) {\n            Module._tiramisu_setNavigatorOptions(options);\n        },\n        enumerable: true\n    },\n    'defaultFitFactorObject': {\n        get: function () {\n            return m_fitFactorObject;\n        },\n        set: function (value) {\n            m_fitFactorObject = value;\n        },\n        enumerable: true\n    },\n    'defaultFitFactorScene': {\n        get: function () {\n            return m_fitFactorScene;\n        },\n        set: function (value) {\n            m_fitFactorScene = value;\n        },\n        enumerable: true\n    }\n});\n\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_SPIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_PAN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_ZOOM', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'MOUSE_DRAG_MODE_DEFAULT', {\n    value: 0,\n    writable: false\n});\n\nObject.defineProperty(app, 'PROPERTY_DIFFUSE_COLOR', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_EMISSIVE_COLOR', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_TRANSPARENCY', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_VISIBILITY', {\n    value: 3,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_TRANSLATION', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_ROTATION', {\n    value: 5,\n    writable: false\n});\nObject.defineProperty(app, 'PROPERTY_SCALE', {\n    value: 6,\n    writable: false\n});\n\nObject.defineProperty(app, 'MR_PARTNUMBER', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'MR_PARTDESC', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'MR_ITEM', {\n    value: 3,\n    writable: false\n});\nObject.defineProperty(app, 'MR_ITEMVAR', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(app, 'MR_INDENT', {\n    value: 5,\n    writable: false\n});\nObject.defineProperty(app, 'MR_UPA', {\n    value: 6,\n    writable: false\n});\nObject.defineProperty(app, 'MR_TOTALQTY', {\n    value: 7,\n    writable: false\n});\n\nObject.defineProperty(app, 'OBJECT_VISIBILITY_VISIBLE', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_HIDDEN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_TRANSPARENT', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_VISIBILITY_IMPLICITLY_HIDDEN', {\n    value: 3,\n    writable: false\n});\n\nObject.defineProperty(app, 'NAVIGATOR_ACTION_SPIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'NAVIGATOR_ACTION_PAN', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'NAVIGATOR_ACTION_ZOOM', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'NAVIGATOR_ACTION_ROTATE', {\n    value: 3,\n    writable: false\n});\n\nObject.defineProperty(app, 'AUTOMATIC_ZOOM_ANCHOR', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'AUTOMATIC_SPIN_CENTER', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(app, 'DISABLE_ZOOM_SCALE_LIMITS', {\n    value: 4,\n    writable: false\n});\n\nObject.defineProperty(app, 'OBJECT_BOUNDING_BOX_LOCAL', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_BOUNDING_BOX_GLOBAL', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_BOUNDING_BOX_EXACT', {\n    value: 2,\n    writable: false\n});\n\nObject.defineProperty(app, 'SELECTION_MODE_DEFAULT', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'SELECTION_MODE_XRAY', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'SELECTION_MODE_TRANSLUCENT_SHELL', {\n    value: 2,\n    writable: false\n});\n\nObject.defineProperty(app, 'OBJECT_HIGHLIGHT_HOVERED', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_HIGHLIGHT_SELECTED', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(app, 'OBJECT_HIGHLIGHT_SELECTED_HOVERED', {\n    value: 2,\n    writable: false\n});\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * Unique identifier of the 3D object in the core.\n * @typedef {number} Handle\n */\n\n/**\n * Object bounding box type.\n * \n * > #### __NOTE__\n * >\n * > Only the {@link ObjectBoundingBoxEnum OBJECT_BOUNDING_BOX_LOCAL} flag is implemented. Other flags are reserved for the future.\n * \n * @prop {number} app.OBJECT_BOUNDING_BOX_LOCAL=0\n * @prop {number} app.OBJECT_BOUNDING_BOX_GLOBAL=1\n * @prop {number} app.OBJECT_BOUNDING_BOX_EXACT=2\n * @typedef {number} ObjectBoundingBoxEnum\n * @see {@link module:solo.app.getObjectBoundingBox app.getObjectBoundingBox()}\n */\n\n/**\n * Selection mode type.\n * \n * @prop {number} app.SELECTION_MODE_DEFAULT=0 The default selection mode in which the selected object is displayed in the selection color.\n * @prop {number} app.SELECTION_MODE_XRAY=1 The X-Ray rendering mode, in which all objects except the selected ones are rendered translucent and monochrome.\n * @prop {number} app.SELECTION_MODE_TRANSLUCENT_SHELL=2 The \"translucent shell\" object selection mode, in which the selected object is drawn with its own material, and the rest of the assembly is translucent. Internal objects are not displayed.\n * > #### __NOTE__\n  * >\n  * > To use the \"translucent shell\" object selection mode, you must set the {@link module:solo.app ENABLE_GLES3} and {@link module:solo.app DISABLE_ANTIALIASING_GLES3} flags before the library is initialized.\n  * >```\n  * >    Cortona3DSolo.use('core', { \n  * >        features: Cortona3DSolo.app.ENABLE_GLES3 | Cortona3DSolo.app.DISABLE_ANTIALIASING_GLES3\n  * >    });\n  * >    Cortona3DSolo.app.initialize('scene.wrl');\n  * >```\n  * @typedef {number} SelectionModeEnum\n * @see {@link module:solo.app.selectionMode app.selectionMode}\n */\n\n/**\n * Object property code.\n * @prop {number} app.PROPERTY_DIFFUSE_COLOR=0\n * @prop {number} app.PROPERTY_EMISSIVE_COLOR=1\n * @prop {number} app.PROPERTY_TRANSPARENCY=2\n * @prop {number} app.PROPERTY_VISIBILITY=3\n * @prop {number} app.PROPERTY_TRANSLATION=4\n * @prop {number} app.PROPERTY_ROTATION=5\n * @prop {number} app.PROPERTY_SCALE=6\n * @typedef {number} ObjectProperty\n * @see {@link module:solo.app.setObjectPropertyf app.setObjectPropertyf()}\n */\n\n/**\n * Metadata role code.\n * @prop {number} app.MR_PARTNUMBER=1\n * @prop {number} app.MR_PARTDESC=2\n * @prop {number} app.MR_ITEM=3\n * @prop {number} app.MR_ITEMVAR=4\n * @prop {number} app.MR_INDENT=5\n * @prop {number} app.MR_UPA=6\n * @prop {number} app.MR_TOTALQTY=7\n * @typedef {number} MetadataRoleCode\n * @see CatalogItemInfo\n */\n\n/**\n * Mouse drag mode.\n * @prop {number} app.MOUSE_DRAG_MODE_SPIN=0\n * @prop {number} app.MOUSE_DRAG_MODE_PAN=1\n * @prop {number} app.MOUSE_DRAG_MODE_ZOOM=2\n * @prop {number} app.MOUSE_DRAG_MODE_DEFAULT=0 MOUSE_DRAG_MODE_SPIN\n * @typedef {number} MouseDragMode\n * @see {@link module:solo.app.setMouseDragMode app.setMouseDragMode()}\n */\n\n/**\n * A hexadecimal html-color string \"#RRGGBB\".\n * @typedef {string} HexColorString\n */\n\n/**\n * A method parameter that sets the Animated transition mode.\n * - `true` - transition effect is on\n * - `false` - transition effect is off\n * @typedef {boolean} AnimatedMode\n */\n\n/**\n * Name of standard view:\n * - `\"front\"`\n * - `\"back\"`\n * - `\"left\"`\n * - `\"right\"`\n * - `\"top\"`\n * - `\"bottom\"`\n * - `\"isometric\"`\n * @typedef {string} StandardViewName\n * @see {@link module:solo.app.jumpToStandardView app.jumpToStandardView()}\n */\n\n/**\n * Information about the picked 3D object, for example:\n * ```\n * { \n *     handle: 7210488, \n *     name: \"PPM005350_46\" \n * }\n * ```\n * @typedef {object} PickedObjectInfo\n * @prop {Handle} handle A handle of the picked 3D object.\n * @prop {string} name DEF name of the picked 3D object.\n * @see {@link module:solo.app.\n *  app.pickObject()}\n */\n\n/**\n * Information about the picked chain of 3D objects, for example:\n * ```\n * { \n *      coord: [\n *          -0.027441510930657387,\n *          -0.7154514789581299,\n *          -0.03601783514022827\n *      ], \n *      normal: [\n *          -0.21847587823867798,\n *          -0.000531829718966037,\n *          -0.09742648154497146\n *      ],\n *      sceneCoord: [\n *          1.715429425239563,\n *          -0.028011199086904526,\n *          -0.03601783514022827\n *      ],\n *      sceneNormal: [\n *          0.0014959870604798197,\n *          -0.9133041501045227,\n *          -0.4072754681110382\n *      ],\n *      chain: [\n *          5698800, 6100248, 6100664, 6101200, 6101848\n *      ]\n * }\n * ```\n * @typedef {object} PickedObjectChain\n * @prop {number[]} coord The point on the surface of the picked geometry. An array of three numbers [x, y, z].\n * @prop {number[]} normal The vector of the normal to the surface of the picked geometry. An array of three numbers [x, y, z].\n * @prop {number[]} sceneCoord The point on the surface of the picked geometry in the global coordinates. An array of three numbers [x, y, z].\n * @prop {number[]} sceneNormal The vector of the normal to the surface of the picked geometry in the global coordinates. An array of three numbers [x, y, z].\n * @prop {Handle[]} chain An array of picked 3D objects. Starting with the root element of the scene.\n * @see {@link module:solo.app.pickObjectChain app.pickObjectChain()}\n */\n\n/**\n * Information about of the 3D object bounding box, for example:\n * ```\n * {\n *      center: [\n *          0.0024996697902679443,\n *          0.0038053393363952637,\n *          -0.21515682339668274\n *      ],\n *      size: [\n *          0.5102912783622742,\n *          0.5106911063194275,\n *          0.33653467893600464\n *      ]\n * }\n * ```\n * @typedef {object} ObjectBoundingBox\n * @prop {number[]} center Bounding box center. An array of three numbers [x, y, z].\n * @prop {number[]} size Bounding box size. An array of three numbers [x, y, z].\n * @see {@link module:solo.app.getObjectBoundingBox app.getObjectBoundingBox()}\n */\n\n/**\n * Information about the 3D object \"viewpoint\", for example:\n * ```\n * { \n *     handle: 5670488, \n *     name: \"\",\n *     description: \"Top\"\n * }\n * ```\n * @typedef {object} ViewpointInfo\n * @prop {Handle} handle A handle of the 3D object \"viewpoint\".\n * @prop {string} name DEF name of the 3D object \"viewpoint\".\n * @prop {string} description Description string from the 3D object \"viewpoint\".\n * @see {@link module:solo.app.getViewpoints app.getViewpoints()}\n */\n\n/**\n * Information about loaded document, for example:\n * ```\n * { \n *      type: \"ipc\", \n *      baseURL\t\"\",\n *      companionFile: \"pump-catalog.interactivity.xml\",\n *      bundleURL: \"http://.../pump-catalog.cortona3d\",\n *      specificationName: \"GENERIC_IPC\",\n *      ...\n * }\n * ```\n * @typedef {DocumentCatalogInfo|DocumentProcedureInfo|DocumentGenericInfo|DocumentDrawingInfo} DocumentInfo\n * @prop {string} type - The type of the 3D model: \n * - `\"procedure\"`\n * - `\"ipc\"`\n * - `\"generic\"`\n * - `\"drawing\"`\n * @prop {string} baseURL - A base path to the loaded file or the empty string if the model loaded from the bundle file.\n * @prop {string|null} bundleURL - The URL to the loaded bundle file *.cortona3d* or __null__ if the model is loaded not from the bundle. \n * @prop {string} companionFile - The filename of the companion file *.interactivity.xml* in the loaded bundle or the URL if the model is loaded not from the bundle.\n * @prop {string} specificationName - Identifier of the specification component.\n * @see {@link module:solo.app.didFinishLoadDocument app.didFinishLoadDocument()}\n * @see {@link module:solo.app.modelInfo app.modelInfo}\n */\n\n/**\n * Catalog information object, for example:\n * ```\n * {\n *      type: \"ipc\",\n *      baseURL: \"http://.../\",\n *      bundleURL: null,\n *      companionFile: \"http://.../pump-catalog.interactivity.xml\"\n *      specificationName: \"GENERIC_IPC\",\n *      sheet: {\n *          description: \"Assembled View\",\n *          dplTable: \"<table id=\\\"dpl-table\\\" class=\\\"dpl-table\\\">..</table>\",\n *          dplTableWidth: 69,\n *          drawing: \"http://.../pump-catalog-1.svg\",\n *          id: \"view_0\"\n *      },\n *      sheets: [\n *          {\n *              description: \"Assembled View\",\n *              drawing: \"http://.../pump-catalog-1.svg\"\n *              id: \"view_0\",\n *              indentationLevel: 0\n *          },\n *          ...\n *      ]\n * }\n * ```\n * @prop {string} type=ipc - See {@link DocumentInfo}\n * @prop {string} baseURL - See {@link DocumentInfo}\n * @prop {string|null} bundleURL - See {@link DocumentInfo}\n * @prop {string} companionFile - See {@link DocumentInfo}\n * @prop {string} specificationName - See {@link DocumentInfo}\n * @prop {CatalogCurrentSheetInfo} sheet - The object represents information about the first IPC sheet.\n * @prop {CatalogSheetInfo[]} sheets - An array of objects represents information about IPC sheets.\n * @typedef {object} DocumentCatalogInfo\n * @see DocumentInfo\n */\n\n/**\n * Drawing information object, for example:\n * ```\n * {\n *      type:\t\"drawing\",\n *      baseURL: \"http://.../\"\n * }\n * ```\n * @prop {string} type=drawing - See {@link DocumentInfo}\n * @prop {string} baseURL - A base path to the loaded image file. See {@link DocumentInfo}.\n * @typedef {object} DocumentDrawingInfo\n * @see DocumentInfo\n */\n\n/**\n * Generic VRML information object, for example:\n * ```\n * {\n *      type:\t\"generic\"\n *      baseURL: \"http://.../\",\n * }\n * ```\n * @prop {string} type=generic - See {@link DocumentInfo}.\n * @prop {string} baseURL - A base path to the loaded VRML file. See {@link DocumentInfo}.\n * @typedef {object} DocumentGenericInfo\n * @see DocumentInfo\n */\n\n/**\n * Procedure information object, for example:\n * ```\n * doc = {\n *      type: \"procedure\",\n *      baseURL: \"\",\n *      bundleURL\t\"http://.../pump-catalog.cortona3d\",\n *      companionFile: \"pump-procedure.interactivity.xml\",\n *      specificationName: \"GENERIC_PRC\",\n *      duration: 71.45999908447265,\n *      autoStartPlayback: 0,\n *      comments: \"<div class=\\\"tiramisu-proc-title\\\">...</div>\"\n * }\n * ```\n * @prop {string} type=procedure - See {@link DocumentInfo}.\n * @prop {string} baseURL - See {@link DocumentInfo}.\n * @prop {string|null} bundleURL - See {@link DocumentInfo}.\n * @prop {string} companionFile - See {@link DocumentInfo}.\n * @prop {string} specificationName - See {@link DocumentInfo}.\n * @prop {number} duration - The duration of the interactive procedure in seconds.\n * @prop {number} autoStartPlayback - Automatic start of the procedure playback:\n * - `0` - auto start is off\n * - `1` - auto start is on\n * @prop {string} comments - The HTML string represents a textual description of the procedure steps.\n * @typedef {object} DocumentProcedureInfo\n * @see DocumentInfo\n */\n\n/**\n * The hook method is invoked when the Cortona3D Solo core will be loaded and initialized.\n * \n * @memberof module:solo.app\n * @abstract \n * @function onReady\n * @see The corresponding event {@link event:\"app.onReady\" \"app.onReady\"}\n */\n/**\n * @event \"app.onReady\"\n * @see The corresponding hook method {@link module:solo.app.onReady app.onReady()}\n */\n\n/**\n *  The hook method is invoked when the 3D scene is loaded.\n *  \n * @memberof module:solo.app\n * @abstract \n * @function didFinishLoadDocument\n * @param {DocumentInfo} doc - Information object depending on the type of loaded interactive scene. \n * @see The corresponding event {@link event:\"app.didFinishLoadDocument\" \"app.didFinishLoadDocument\"}\n */\n/**\n * @event \"app.didFinishLoadDocument\"\n * @see The corresponding hook method {@link module:solo.app.didFinishLoadDocument app.didFinishLoadDocument()}\n */\n\n/**\n *  The hook method is invoked when 3D scene is ready for rendering the first frame.\n * \n * @memberof module:solo.app\n * @abstract \n * @function firstFrameDidArrive\n * @param {number} timestamp\n * @see The corresponding event {@link event:\"app.firstFrameDidArrive\" \"app.firstFrameDidArrive\"}\n */\n/**\n * @event \"app.firstFrameDidArrive\"\n * @see The corresponding hook method {@link module:solo.app.firstFrameDidArrive app.firstFrameDidArrive()}\n */\n\n/**\n *  The hook method is invoked when 3D scene is failed to load.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didFailLoadDocument\n * @param {string} message Reason\n * @see The corresponding event {@link event:\"app.didFailLoadDocument\" \"app.didFailLoadDocument\"}\n */\n/**\n * @event \"app.didFailLoadDocument\"\n * @see The corresponding hook method {@link module:solo.app.didFailLoadDocument app.didFailLoadDocument()}\n */\n\n/**\n * The hook method is invoked when anchor in the 3D scene is clicked.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didClickHyperlink\n * @param {string[]} urls - Array of strings \n * @see The corresponding event {@link event:\"app.didClickHyperlink\" \"app.didClickHyperlink\"}\n */\n/**\n * @event \"app.didClickHyperlink\"\n * @see The corresponding hook method {@link module:solo.app.didClickHyperlink app.didClickHyperlink()}\n */\n\n/**\n * The hook method is invoked when the navigation in the 3D window is started.\n * \n * @memberof module:solo.app\n * @abstract \n * @function willStartNavigateInScene\n * @see The corresponding event {@link event:\"app.willStartNavigateInScene\" \"app.willStartNavigateInScene\"}\n */\n/**\n * @event \"app.willStartNavigateInScene\"\n * @see The corresponding hook method {@link module:solo.app.willStartNavigateInScene app.willStartNavigateInScene()}\n */\n\n/**\n * The hook method is invoked to indicate that loading operation is in progress.\n * When the download is complete, the parameter `total` is -1.\n * \n * @memberof module:solo.app\n * @abstract \n * @function onProgress \n * @param {number} position The amount of data currently transferred\n * @param {number} total The total amount of data to be transferred\n * @param {string} type The event's type:\n * - \"progress\"\n * - \"load\"\n * - \"error\"\n * - \"abort\"\n * @see The corresponding event {@link event:\"app.onProgress\" \"app.onProgress\"}\n */\n/**\n * @event \"app.onProgress\"\n * @see The corresponding hook method {@link module:solo.app.onProgress app.onProgress()}\n */\n\n/**\n * The hook method is invoked when context menu is called in the 3D window. \n * The mouse uses secondary button click. The touch device uses long tap.\n * \n * @memberof module:solo.app\n * @abstract \n * @function didCallContextMenu\n * @param {number} offsetX The X coordinate relative to the target element \n * @param {number} offsetY The Y coordinate relative to the target element \n * @param {HTMLElement} target  Target element (`<canvas>`)\n * @see {@link module:solo.core.canvas core.canvas}\n * @see The corresponding event {@link event:\"app.didCallContextMenu\" \"app.didCallContextMenu\"}\n */\n/**\n * @event \"app.didCallContextMenu\"\n * @see The corresponding hook method {@link module:solo.app.didCallContextMenu app.didCallContextMenu()}\n */\n\n/**\n * The hook method is invoked when selection of 3D objects is changed in the 3D window. \n * \n * @memberof module:solo.app\n * @abstract \n * @function didChangeSelectedObjects\n * @see {@link module:solo.core.app.setSelectedObjects app.setSelectedObjects()}\n * @see {@link module:solo.core.app.addSelectedObjects app.addSelectedObjects()}\n * @see The corresponding event {@link event:\"app.didChangeSelectedObjects\" \"app.didChangeSelectedObjects\"}\n * @since 2.0.0\n */\n/**\n * @event \"app.didChangeSelectedObjects\"\n * @see The corresponding hook method {@link module:solo.app.didChangeSelectedObjects app.didChangeSelectedObjects()}\n */\n\n/**\n * The hook method is invoked when changing 3D objects under the cursor in the 3D window. \n * \n * @memberof module:solo.app\n * @abstract \n * @function didChangeHoveredObjects\n * @see {@link module:solo.core.app.setHoveredObjects app.setHoveredObjects()}\n * @see {@link module:solo.core.app.addHoveredObjects app.addHoveredObjects()}\n * @see The corresponding event {@link event:\"app.didChangeHoveredObjects\" \"app.didChangeHoveredObjects\"}\n * @since 2.0.0\n */\n/**\n * @event \"app.didChangeHoveredObjects\"\n * @see The corresponding hook method {@link module:solo.app.didChangeHoveredObjects app.didChangeHoveredObjects()}\n */\n\n/**\n * The object with key/value pairs, for example:\n * ```\n * {\n *     C3DCOLLECTION: \"Generic IPC\",\n *     TITLE: \"Pump IPC - Complete\"\n * }\n * ```\n * @typedef {object} KeyValuePairs\n */\n\n/**\n * The object visibility code.\n * @prop {number} app.OBJECT_VISIBILITY_VISIBLE=0\n * @prop {number} app.OBJECT_VISIBILITY_HIDDEN=1\n * @prop {number} app.OBJECT_VISIBILITY_TRANSPARENT=2\n * @prop {number} app.OBJECT_VISIBILITY_IMPLICITLY_HIDDEN=3\n * @typedef {number} ObjectVisibilityEnum\n * @see {@link module:solo.app.getObjectVisibility app.getObjectVisibility()}\n */\n\n/**\n * The navigator action code.\n * @prop {number} app.NAVIGATOR_ACTION_SPIN=0\n * @prop {number} app.NAVIGATOR_ACTION_PAN=1\n * @prop {number} app.NAVIGATOR_ACTION_ZOOM=2\n * @prop {number} app.NAVIGATOR_ACTION_ROTATE=3\n * @typedef {number} NavigatorActionEnum\n * @see {@link module:solo.app.navigate app.navigate()}\n */\n\n/**\n * The navigator options flags.\n * \n * > #### __NOTE__\n * >\n * > Using flags {@link NavigatorOptionsFlags AUTOMATIC_ZOOM_ANCHOR} and {@link NavigatorOptionsFlags AUTOMATIC_SPIN_CENTER} requires using of the {@link module:solo.app DISABLE_DISCARDABLE_GEOMETRY_DATA} flag when initializing the library.\n * >```\n * >    Cortona3DSolo.use('core', { \n * >        features: Cortona3DSolo.app.DISABLE_DISCARDABLE_GEOMETRY_DATA\n * >    });\n * >```\n * \n * @prop {number} app.AUTOMATIC_ZOOM_ANCHOR=1 - The point under the mouse cursor is used as the zoom anchor. See note.\n * @prop {number} app.AUTOMATIC_SPIN_CENTER=2 - The point under the mouse cursor is used as the spin center. See note.\n * @prop {number} app.DISABLE_ZOOM_SCALE_LIMITS=4 - Disables zoom scale limits.\n * @typedef {number} NavigatorOptionsFlags\n * @see {@link module:solo.app.navigatorOptions app.navigatorOptions}\n */\n\n/**\n * The type of the highlighted object.\n * @prop {number} app.OBJECT_HIGHLIGHT_HOVERED=0\n * @prop {number} app.OBJECT_HIGHLIGHT_SELECTED=1\n * @prop {number} app.OBJECT_HIGHLIGHT_SELECTED_HOVERED=2\n * @typedef {number} ObjectHighlightEnum\n * @see {@link module:solo.app.setObjectHighlightParams app.setObjectHighlightParams()}\n * @see {@link module:solo.app.getObjectHighlightParams app.getObjectHighlightParams()}\n */\n\n/**\n * 3D object highlight parameters, for example:\n * ```\n * {\n *      diffuseColor: '#808000',\n *      diffuseBrightnessDelta: 0.5,\n *      emissiveColor: '#888888',\n *      emissiveBrightnessDelta: -1\n * }\n * ```\n * @prop {HexColorString} diffuseColor \n * @prop {number} diffuseBrightnessDelta - [-1...1]\n * @prop {HexColorString} emissiveColor \n * @prop {number} emissiveBrightnessDelta - [-1...1]\n * @typedef {object} ObjectHighlightParams\n * @see {@link module:solo.app.setObjectHighlightParams app.setObjectHighlightParams()}\n * @see {@link module:solo.app.getObjectHighlightParams app.getObjectHighlightParams()}\n */\n\n/**\n * Light source configuration:\n * ```\n * {\n *      color: '#FFFFFF',\n *      direction: [0, 0, -1],\n *      intensity: 0.8,\n *      ambientIntensity: 0\n * }\n * ```\n * @prop {HexColorString} color\n * @prop {number[]} direction - [x, y, z]\n * @prop {number} intensity - [0...1]\n * @prop {number} ambientIntensity - [0...1]\n * @typedef {object} LightConfig\n * @see {@link module:solo.app.lightingConfig app.lightingConfig}\n */\n\n","var m_speakerIcon = null;\nvar app = require('app').app;\n\nvar m_isCanvasVisible = false;\n\nvar appExports = {\n    /**\n     * The namespace represents an auxiliary interface.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     */\n    ui: {\n        /**\n         * Set banner image over the 3D window.\n         * \n         * @param {BannerImageInfo|HTMLImageElement} image - Banner image data (see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}) or Image object\n         * @see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}\n         * @see external:HTMLImageElement\n         */\n        setBannerImage: function (image) {\n            if (!window.PanelService) return;\n            if (image) window.PanelService.setBannerImage(image);\n        },\n\n        /**\n         * Shows or hides the 3D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        showCanvas: function (visible) {\n            if (!Module.canvas) return;\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            Module.canvas.style.display = visible ? 'block' : 'none';\n            var group = Module.canvas.parentNode.querySelector('#tiramisu-panel-group');\n            if (group) {\n                group.style.display = visible ? '' : 'none';\n            }\n            app.ui.showPanels(visible);\n            m_isCanvasVisible = visible;\n            if (visible) Cortona3DSolo.dispatch(\"core.didChangeLayout\");\n        },\n\n        /**\n         * Shows or hides the HTML panels in the 3D window.\n         * \n         * @param {boolean} [visible=true]\n         */\n        showPanels: function (visible) {\n            if (!window.PanelService) return;\n            visible = (typeof visible == 'undefined') ? true : !!visible;\n            window.PanelService.showPanels(visible);\n        },\n\n        /**\n         * Checks the 2D illustration display mode.\n         * \n         * @returns {boolean}\n         */\n        isDrawingDisplayMode: function () {\n            var result = false;\n            if (app.drawing) {\n                result = app.drawing.isVisible() && !m_isCanvasVisible;\n            }\n            return result;\n        },\n\n        /**\n         * Checks if the 3D window visible.\n         * \n         * @returns {boolean}\n         */\n        isCanvasVisible: function () {\n            return m_isCanvasVisible;\n        },\n\n        /**\n         * Shows or hides the speaker icon.\n         * \n         * @param {boolean} [visible]\n         * @returns {boolean}\n         */\n        toggleSpeakerIcon: function (visible) {\n            if (!window.PanelService) return;\n            var div;\n            visible = (typeof visible === 'undefined') ? !m_speakerIcon : visible;\n            if (visible) {\n                if (m_speakerIcon) return;\n                div = document.createElement('div');\n                div.className = 'tiramisu-speaker';\n                div.appendChild(document.createElement('div'));\n                div.appendChild(document.createElement('span'));\n                div.appendChild(document.createElement('span'));\n                div.appendChild(document.createElement('span'));\n                window.PanelService.appendChild(div);\n                m_speakerIcon = div;\n                window.setTimeout(function () {\n                    div.style.opacity = 1;\n                }, 300);\n            } else {\n                div = m_speakerIcon;\n                if (div) {\n                    div.style.opacity = 0;\n                    window.setTimeout(function () {\n                        div.parentNode.removeChild(div);\n                    }, 300);\n                }\n                m_speakerIcon = null;\n            }\n            return visible;\n        }\n    }\n};\n\nmodule.exports = {\n    app: appExports\n};","/* global unescape */\n\nvar baseURL = require('./util').getBaseURL();\n\n/**\n * (description)\n * \n * @private\n * @param {number} chunk - Emscripten pointer\n * @param {Image} image - Image object\n * @param {object} options\n * @param {number} [autoRevokeTimeout=0]\n * @returns {HTMLImageElement} Image object\n */\nfunction createImageFromData(chunk, image, options, autoRevokeTimeout) {\n    if (chunk === 0) return;\n\n    if (typeof autoRevokeTimeout === 'undefined') {\n        autoRevokeTimeout = !image ? -1 : 0;\n    }\n\n    var size = getValue(chunk, 'i32'),\n        data = Module.HEAPU8.subarray(chunk + 4, chunk + size + 4),\n        DOMURL = window.URL || window.webkitURL || window,\n        options = options || {},\n        url = DOMURL.createObjectURL(new Blob([data], options));\n\n    Module._free(chunk);\n\n    if (!image) image = new Image();\n\n    if (autoRevokeTimeout >= 0) {\n        function completeHandler() {\n            if (!autoRevokeTimeout) {\n                DOMURL.revokeObjectURL(url);\n            } else {\n                setTimeout(function () {\n                    try {\n                        DOMURL.revokeObjectURL(url);\n                    } catch (e) {}\n                }, autoRevokeTimeout);\n            }\n            image.removeEventListener('load', completeHandler, false);\n            image.removeEventListener('error', completeHandler, false);\n        }\n        image.addEventListener('load', completeHandler, false);\n        image.addEventListener('error', completeHandler, false);\n    }\n\n    image.src = url;\n    return image;\n}\n\n/**\n * @private\n * @param {*} typedArray\n * @returns TypedArray\n */\nfunction marshallTypedArray(typedArray)\n{\n    var dataSize = typedArray.BYTES_PER_ELEMENT * typedArray.length,\n        dataOffset = Module._malloc(dataSize),\n        result = new Uint8Array(Module.HEAPU8.buffer, dataOffset, dataSize);\n    result.set(new Uint8Array(typedArray.buffer));\n    return result;\n}\n\nvar appExports = {\n    /**\n     * The namespace represents an auxiliary interface.\n     * \n     * @namespace\n     * @memberof module:solo.app\n     */\n    util: {\n        /**\n         * Fetches resource from the *.cortona3d* bundle using {@link https://developer.mozilla.org/en-US/docs/Web/API/URL URL API} and returns a string containing an object URL representing given resource.\n         * You must explicitly release the object URL after its use by calling {@link module:solo.app.util.revokeResourceURL app.util.revokeResourceURL()}.\n         * \n         * @param {string} name - Name of resource in the *.cortona3d* bundle\n         * @returns {string} An object URL\n         * @see external:URL\n         * @see {@link module:solo.app.util.revokeResourceURL app.util.revokeResourceURL()}\n         */\n        createResourceURL: function (name) {\n            if (!Module.ccall) return;\n\n            var src = decodeURI(name);\n            var chunk = Module.ccall('tiramisu_copyResourceFromBundle', 'number', ['string'], [src]);\n\n            if (chunk === 0) return;\n\n            var size = getValue(chunk, 'i32'),\n                data = Module.HEAPU8.subarray(chunk + 4, chunk + size + 4),\n                DOMURL = window.URL || window.webkitURL || window,\n                options = /\\.svg$/i.test(src) ? {\n                    type: 'image/svg+xml'\n                } : {},\n                url = DOMURL.createObjectURL(new Blob([data], options));\n\n            Module._free(chunk);\n\n            return url;\n        },\n\n        /**\n         * Releases the existing object URL, which was previously created by calling {@link module:solo.app.util.createResourceURL}.\n         * \n         * @param {URL} url - The object URL\n         * @see external:URL\n         * @see {@link module:solo.app.util.createResourceURL app.util.createResourceURL()}\n         */\n        revokeResourceURL: function (url) {\n            if (!url || !/^blob:/i.test(url)) return;\n            var DOMURL = window.URL || window.webkitURL || window;\n            DOMURL.revokeObjectURL(url);\n        },\n\n        /**\n         * Fetches an image from the *.cortona3d* bundle and returns an Image object.\n         * \n         * @param {HTMLImageElement|string} image - The HTML image element with 'src' attribute equals to the name of the image in the bundle or the name of the image itself\n         * @param {number} [autoRevokeTimeout=0] - The lifetime of an object URL in milliseconds. A value less than zero disables auto revoke\n         * @returns {HTMLImageElement} Image object\n         */\n        fetchImageFromDocumentBundle: function (image, autoRevokeTimeout) {\n            var img,\n                name,\n                options;\n\n            if (typeof image === 'string') {\n                img = new Image();\n                name = image;\n            } else {\n                img = image;\n                name = img.getAttribute('src');\n                if (name.lastIndexOf(baseURL, 0) === 0) {\n                    name = name.slice(baseURL.length);\n                }\n            }\n\n            name = decodeURI(name).replace(/\\.cgm$/i, '.svg');\n            options = /\\.svg$/i.test(name) ? {\n                type: 'image/svg+xml'\n            } : {};\n\n            return createImageFromData(Module.ccall('tiramisu_copyResourceFromBundle', 'number', ['string'], [name]), img, options, autoRevokeTimeout);\n        },\n\n        /**\n         * Fetch banner image from the VRML file.\n         *\n         * @returns {BannerImageInfo} An object that represents the information for the banner image\n         */\n        fetchBannerImage: function () {\n            var sp = stackSave(),\n                params = stackAlloc(8),\n                image = createImageFromData(Module._tiramisu_copyBannerImage(params)),\n                result;\n            if (image) {\n                result = {\n                    image: image,\n                    frameCount: getValue(params, 'i32'),\n                    frameDuration: getValue(params + 4, 'i32') / 1000\n                };\n            }\n            stackRestore(sp);\n            return result;\n        },\n        /**\n         * @class The constructor creates an instance of {@link Vec3f} object corresponds to a VRML SFVec3f field.\n         * @see Vec3f\n         * @since 1.4.0\n         */\n        Vec3f: require('lib/vec3f'),\n        /**\n         * @class The constructor creates an instance of {@link Rotation} object corresponds to a VRML SFRotation field.\n         * @see Rotation\n         * @since 1.4.0\n         */\n        Rotation: require('lib/rotation'),\n        /**\n         * Decompress typedArray with inflate/ungzip.\n         * \n         * @param {Uint8Array} typedArray\n         * @returns {Uint8Array|null} Decompressed data or null\n         * @see {@link module:solo.app.util.freeTypedArray app.util.freeTypedArray()}\n         * @since 1.6.6\n         */\n        inflate: function (typedArray) {\n            var data = marshallTypedArray(typedArray),\n                chunk = Module._tiramisu_utility_inflate(data.byteOffset, data.length);\n            Module._free(data.byteOffset);\n            return chunk ? HEAPU8.subarray(chunk + 4, chunk + 4 + getValue(chunk, 'i32')) : null;\n        },\n        /**\n         * Free the existing TypedArray data, which was previously created by calling {@link module:solo.app.util.inflate app.util.inflate()}.\n         * \n         * @param {Uint8Array} typedArray\n         * @see {@link module:solo.app.util.inflate app.util.inflate()}\n         * @since 1.6.6\n         */\n        freeTypedArray: function (typedArray) {\n            if (typedArray) {\n                Module._free(typedArray.byteOffset - 4);\n            }\n        }\n    },\n};\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The object represents a banner image from a VRML file, for example:\n * ```\n * {\n *      image: <Image object>,\n *      frameCount: 0,\n *      frameDuration: 0\n * }\n * ```\n * @prop {HTMLImageElement} image - An image object. \n * @prop {number} frameCount - Number of frames for animation. \n * @prop {number} frameDuration - Duration of animation of one frame.\n * @typedef {object} BannerImageInfo\n * @see {@link module:solo.app.util.fetchBannerImage app.util.fetchBannerImage()}\n */","/**\r\n * Construct a new Vec3f object.<br><br>\r\n * \r\n * #### new Vec3f(x, y, z)\r\n * #### new Vec3f([x, y, z])\r\n * \r\n * where x, y, and z are the components of the vector.\r\n * \r\n * @class The Vec3f object corresponds to a VRML SFVec3f field. Each component of the vector can be accessed using the x, y, and z properties.\r\n */\r\nfunction Vec3f(/*x, y, z*/) {\r\n    if (arguments.length == 3 && typeof arguments[0] == 'number') {\r\n        /**\r\n         * First value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.x = arguments[0];\r\n        /**\r\n         * Second value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.y = arguments[1];\r\n        /**\r\n         * Third value of the vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.z = arguments[2];\r\n    } else if (arguments.length == 1 && typeof arguments[0] == 'object' && arguments[0] !== null  && arguments[0].length == 3) {\r\n        this.x = arguments[0][0];\r\n        this.y = arguments[0][1];\r\n        this.z = arguments[0][2];\r\n    } else {\r\n        this.x = 0;\r\n        this.y = 0;\r\n        this.z = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns array represents vectors fields [x, y, z]\r\n * @returns {number[]} Array of three float\r\n */\r\nVec3f.prototype.toArray =\r\n    function () {\r\n        return [this.x, this.y, this.z];\r\n    };\r\n\r\n /**\r\n * Returns a string containing the value of x, y, z separated by spaces.\r\n * @returns {string} \r\n */\r\nVec3f.prototype.toString =\r\n    function () {\r\n        return this.toArray().join(' ');\r\n    };\r\n\r\n/**\r\n * Returns the value of the passed value added, component-wise, to the object.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.add =\r\n    function (oVec3f) {\r\n        return new Vec3f(oVec3f.x + this.x, oVec3f.y + this.y, oVec3f.z + this.z);\r\n    };\r\n\r\n/**\r\n * Returns the value of the passed value subtracted, component-wise, from the object.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.subtract =\r\n    function (oVec3f) {\r\n        return new Vec3f(this.x - oVec3f.x, this.y - oVec3f.y, this.z - oVec3f.z);\r\n    };\r\n\r\n/**\r\n * Returns the dot product of this vector and the passed value.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {number}\r\n */\r\nVec3f.prototype.dot =\r\n    function (oVec3f) {\r\n        return (oVec3f.x * this.x + oVec3f.y * this.y + oVec3f.z * this.z);\r\n    };\r\n\r\n/**\r\n * Returns the cross product of the object and the passed value.\r\n * @param {Vec3f} oVec3f The Vec3f object\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.cross =\r\n    function (oVec3f) {\r\n        return new Vec3f(this.y * oVec3f.z - oVec3f.y * this.z, this.z * oVec3f.x - oVec3f.z * this.x, this.x * oVec3f.y - oVec3f.x * this.y);\r\n    };\r\n\r\n/**\r\n * Returns the value of the object divided by the passed value.\r\n * @param {number} fValue\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.divide =\r\n    function (fValue) {\r\n        return new Vec3f(this.x / fValue, this.y / fValue, this.z / fValue);\r\n    };\r\n\r\n/**\r\n * Returns the value of the object multiplied by the passed value.\r\n * @param {number} fValue\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.multiply =\r\n    function (fValue) {\r\n        return new Vec3f(this.x * fValue, this.y * fValue, this.z * fValue);\r\n    };\r\n\r\n/**\r\n * Returns the geometric length of this vector.\r\n * @returns {number}\r\n */\r\nVec3f.prototype.length =\r\n    function () {\r\n        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    };\r\n\r\n/**\r\n * Returns the object converted to unit length .\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.normalize =\r\n    function () {\r\n        var m = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n        return m === 0 ? this : this.divide(m);\r\n    };\r\n\r\n/**\r\n * Returns the value of the component-wise negation of the object.\r\n * @returns {Vec3f}\r\n */\r\nVec3f.prototype.negate =\r\n    function () {\r\n        return new Vec3f(-this.x, -this.y, -this.z);\r\n    };\r\n\r\nmodule.exports = Vec3f;","var util = require('lib/util');\r\n\r\nfunction camelToKebab(s) {\r\n    return s.replace(/(\\S)([A-Z])/g, function ($0, $1, $2) {\r\n        return $1 + '-' + $2.toLowerCase();\r\n    });\r\n}\r\n\r\n/*\r\n    css({\r\n        'selector': {                   // selector {}\r\n            backgroundColor: \"#FFF\"\r\n            '&': {\r\n                'child_selector': {},   // selector child_selector {}\r\n                '& > selector': {}      // selector > selector {}\r\n            },\r\n            '&:first-child': {}         // selector:first-child {}\r\n        },\r\n        '@media print': {               // @media print { selector {} }\r\n            'selector': {}\r\n        }\r\n    })\r\n*/\r\n\r\n/**\r\n * @classdesc A helper object for managing CSS rules.\r\n * @class\r\n * @hideconstructor\r\n * @param {object} [rules] An object with CSS rules.\r\n * @param {*} [parent]\r\n */\r\nfunction CSSObject(options, parent) {\r\n    if (parent) {\r\n        this.parent = parent;\r\n    }\r\n    /**\r\n     * The rules property contains the CSS rules as a JavaScript object. \r\n     * \r\n     * The CSS property name should be written as camelCased name instead of kebab-cased (hyphen-delimited) name.\r\n     * \r\n     * You can use '&' in CSS selector to indicate the selector of the parent rule.\r\n     * \r\n     * @type {object}\r\n     * @example\r\n{\r\n    body: {\r\n        color: 'darkgray',\r\n        backgroundColor: '#EDFFFF'\r\n        '& > div': {\r\n            fontWeight: 'bold',\r\n            opacity: 0.5\r\n        }\r\n    }\r\n}\r\n     * @example <caption>CSS</caption>\r\nbody {\r\n    color: darkgray;\r\n    background-color: #EDFFFF;\r\n}\r\nbody > div {\r\n    font-weight: bold;\r\n    opacity: 0.5;\r\n}\r\n     */\r\n    this.rules = options || {};\r\n    /**\r\n     * Reference to `<style>` element in which CSS rules are rendered.\r\n     * @type {HTMLElement}\r\n     */\r\n    this.style = null;\r\n}\r\n\r\n/**\r\n * Returns string representation for the CSS object.\r\n * \r\n * @return {string} CSS syntax\r\n * @example\r\nCortona3DSolo.app.ui.css({body: { backgroundColor: 'red' } }).toString()\r\n// -> \"body { background-color: red; }\"\r\n */\r\nCSSObject.prototype.toString = function () {\r\n    var syntax = '',\r\n        rule,\r\n        selector,\r\n        prop,\r\n        fullSelector,\r\n        parent = this.parent,\r\n        trim = /(^\\s+|\\s+$)/,\r\n        children;\r\n    for (selector in this.rules) {\r\n        var isMedia = selector.indexOf('@media') === 0 && !parent;\r\n        if (this.rules.hasOwnProperty(selector)) {\r\n            if (syntax) {\r\n                syntax += '\\n';\r\n            }\r\n            if (parent) {\r\n                fullSelector = selector.split(/\\s*,\\s*/).map(function (s) {\r\n                    s = s.replace(trim, '');\r\n                    return (s.indexOf('&') < 0) ? (parent + ' ' + s) : s.replace(/&/, parent);\r\n                }).join(',');\r\n            } else {\r\n                fullSelector = selector.replace(trim, '');\r\n            }\r\n            syntax += fullSelector + ' {';\r\n            if (isMedia) {\r\n                syntax += '\\n' + new CSSObject(this.rules[selector]);\r\n            } else {\r\n                children = [];\r\n                rule = this.rules[selector];\r\n                if (util.isObject(rule)) {\r\n                    for (prop in rule) {\r\n                        if (rule.hasOwnProperty(prop)) {\r\n                            if (prop.indexOf('&') < 0) {\r\n                                syntax += '\\n' + camelToKebab(prop) + ': ' + rule[prop] + ';';\r\n                            } else if (prop !== '&') {\r\n                                children.push(prop);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            syntax += '\\n}';\r\n            if (!isMedia) {\r\n                children.forEach(function (prop) {\r\n                    var o = {};\r\n                    o[prop] = rule[prop];\r\n                    syntax += '\\n' + new CSSObject(o, fullSelector);\r\n                });\r\n                if (util.isObject(rule['&'])) {\r\n                    syntax += '\\n' + new CSSObject(rule['&'], fullSelector);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return syntax;\r\n};\r\n\r\n/**\r\n * Apply CSS rules to an HTML page.\r\n * \r\n * @param {object} [rules] Additional rules for merging with existing ones. \r\n * @return {CSSObject}\r\n * @example\r\nvar css = Cortona3DSolo.app.ui.css({body: { backgroundColor: 'red' } });\r\ncss.render({ body: { color: 'white' } });\r\n// -> body { background-color: red; color: white; }\r\n */\r\nCSSObject.prototype.render = function (options) {\r\n    if (!this.style) {\r\n        this.style = document.head.appendChild(document.createElement('style'));\r\n        this.style.type = 'text/css';\r\n    }\r\n    if (options) {\r\n        util.expand(this.rules, options);\r\n    }\r\n    this.style.innerHTML = this.toString();\r\n    return this;\r\n};\r\n\r\n/**\r\n * Clears all CSS rules.\r\n * \r\n * @return {CSSObject}\r\n */\r\nCSSObject.prototype.clear = function () {\r\n    this.rules = {};\r\n    return this;\r\n};\r\n\r\n/**\r\n * Returns new instance of CSSObject.\r\n * \r\n * @private\r\n * @param {object} [rules]\r\n * @return {CSSObject}\r\n */\r\nfunction css(options) {\r\n    return new CSSObject(options);\r\n}\r\n\r\nmodule.exports = css;","require('es6-promise/auto'); // require Promise polyfill for IE\n\nvar util = require('lib/util');\n\n// NodeList.prototype.forEach polyfill\nif (window.NodeList && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n}\n\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/append()/append().md\n(function (arr) {\n    arr.forEach(function (item) {\n        if (item.hasOwnProperty('append')) {\n            return;\n        }\n        Object.defineProperty(item, 'append', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function append() {\n                var argArr = Array.prototype.slice.call(arguments),\n                    docFrag = document.createDocumentFragment();\n\n                argArr.forEach(function (argItem) {\n                    var isNode = util.isHTMLNode(argItem);\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\n                });\n\n                this.appendChild(docFrag);\n            }\n        });\n    });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n\n(function () {\n    var arr = [window.Element, window.CharacterData, window.DocumentType];\n    var args = [];\n\n    arr.forEach(function (item) {\n        if (item) {\n            args.push(item.prototype);\n        }\n    });\n\n    // from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\n    (function (arr) {\n        arr.forEach(function (item) {\n            if (item.hasOwnProperty('remove')) {\n                return;\n            }\n            Object.defineProperty(item, 'remove', {\n                configurable: true,\n                enumerable: true,\n                writable: true,\n                value: function remove() {\n                    this.parentNode.removeChild(this);\n                }\n            });\n        });\n    })(args);\n})();\n\n\nElement.prototype.remove = (function (remove) {\n    return function () {\n        if (arguments.length) {\n            // polyfill for solo 1.5.0 Element.remove(child, ...)\n            // this form of remove method call should not be used anywhere else\n            // and must be removed in the future\n            Array.prototype.slice.call(arguments).forEach(function (el) {\n                this.removeChild(el);\n            }, this);\n            return;\n        }\n        remove.call(this);\n    }\n})(Element.prototype.remove);\n\n\n/**\n * The global object that is exposed by the Cortona3D Solo library.\n * \n * @global\n * @implements module:solo\n * @implements external:EventEmitter\n * @tutorial event-handling\n */\n\nvar Cortona3DSolo = require('solo');\n\nif (!window.Cortona3DSolo) window.Cortona3DSolo = Cortona3DSolo;\n\nvar util = require('lib/util');\nvar expand = util.expand;\nvar b64toBlob = require('lib/b64ToBlob');\n\nvar usedModules = require('app').usedModules;\n\nconsole.log('Cortona3D Solo v' + VERSION);\n\nmodule.exports = expand(Cortona3DSolo, {\n    /**\n     * _Asynchronous method_. Enables the use of functional modules in API.\n     * \n     * @memberof module:solo\n     * @async\n     * @param {string} moduleName -\n     * - `\"core\"` - the internal module to manage the 3D illustration without usage of the Cortona3D Viewer component. See namespaces {@link module:solo.core core}, {@link module:solo.app app};\n     * - `\"tag\"` - the internal module that implements the Cortona3D Tag API. See namespaces {@link module:solo.core tag}, {@link module:solo.core core}, {@link module:solo.app app};\n     * - `\"drawing\"` - the internal module to manage the 2D illustration. See namespace {@link module:solo.app.drawing app.drawing};\n     * - `\"touch\"` - the internal module to manage pointer events in the 3D window. See namespace {@link module:solo.touch touch};\n     * - `\"skin\"` - the internal module that provides the UI framework. See namespace {@link module:solo.skin skin};\n     * - `\"require\"` - the internal module implements the functionality of the {@link https://github.com/amdjs/amdjs-api/blob/master/AMD.md AMD} module loader similar to {@link http://requirejs.org/ RequireJS}. Adds three global functions:\n     *     - `require()`\n     *     - `requirejs()`\n     *     - `define()`\n     * - The name of the external add-on that is used to extend the functionality of the standard API and use the format of the AMD module. It is required to use external or built-in loader of AMD modules.\n     * @param {object} [options] - Module options\n     * @param {string} options.src - The src property specifies the URL of the external file:\n     * - companion file *.interactivity.xml*\n     * - VRML file *.wrl*\n     * - compressed (zip) package file containing the RapidAuthor publication *.cortona3d* *.vmb* *.zip*\n     * - SVG file *.svg* \n     * - image file *.png* *.jpg* *.gif*\n     * @param {number} options.features - A features bitmask of the Cortona3D Solo instance. See the {@link module:solo.app app} properties.\n     * @param {HTMLElement} options.element \n     * - The `<canvas>` element for the `\"core\"` or `\"tag\"` module\n     * - The `<svg>` element for the `\"drawing\"` module\n     * @param {string} options.prefixURL -  The URL prefix to loading the Corona3D Solo files.\n     * It is preferable to use {@link module:solo.baseUrl solo.baseUrl} property instead of this option.\n     * @param {number} options.totalMemory=64 - Total memory used by the Cortona3D Solo core in MB (deprecated since 2.0.0).\n     * @param {HexColorString} options.hotspotHoverColor=#FF0000 - The color to the hovered hotspot area on the 2D illustration.\n     * @param {HexColorString} options.hotspotSelectionColor=#FF0000 - The color to the selected hotspot area on the 2D illustration.\n     * @param {HexColorString} options.ipcHoverColor=#808080 - The color to the hovered 3D object in the interactive parts catalog.\n     * @param {HexColorString} options.ipcSelectionColor=#FFD133 - The color to the selected 3D object in the interactive parts catalog.\n     * @returns {Promise<object>} `Promise` whose fulfillment handler receives an object with exports and options of the loaded functional module\n     * @see external:Promise\n     */\n    use: function (moduleName, options) {\n        if (moduleName === 'Cortona3DSoloSkin') {\n            moduleName = 'skin';\n        } else if (moduleName === 'Cortona3DSoloTouch') {\n            moduleName = 'touch';\n        }\n        var usedModule = usedModules[moduleName],\n            usedAddon = usedModules.addons[moduleName];\n        switch (moduleName) {\n            case 'core':\n                if (!usedModule) {\n                    return new Promise(function (resolve, reject) {\n                        usedModules[moduleName] = usedModule = {\n                            config: expand({}, options)\n                        };\n                        Cortona3DSolo.core = require('core.base').configure(options);\n                        expand(Cortona3DSolo.app, require('app.base').app);\n                        expand(Cortona3DSolo.app, require('app.procedure').app);\n                        expand(Cortona3DSolo.app, require('app.ipc').app);\n                        expand(Cortona3DSolo.app, require('app.ui').app);\n                        expand(Cortona3DSolo.app, require('app.util').app);\n                        Cortona3DSolo.once(\"core.onRuntimeInitialized\", function () {\n                            resolve(usedModule);\n                        });\n                        Cortona3DSolo.once(\"core.onError\", reject);\n                    });\n                }\n                break;\n            case 'tag':\n                if (!usedModule) {\n                    if (usedModules.core) return Promise.reject(new Error('The \"core\" and \"tag\" modules cannot be used simultaneously'));\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    usedModules.core = usedModule;\n                    var tagPromise = Cortona3DSolo.use('Cortona3DSoloTag');\n                    return new Promise(function (resolve, reject) {\n                        Cortona3DSolo.core = require('core.base').configure(expand({\n                            coreURL: 'Cortona3DSoloCoreTag.js'\n                        }, options));\n                        expand(Cortona3DSolo.app, require('app.base').app);\n                        expand(Cortona3DSolo.app, require('app.ui').app);\n                        expand(Cortona3DSolo.app, require('app.util').app);\n                        Cortona3DSolo.once(\"core.onRuntimeInitialized\", function () {\n                            tagPromise\n                                .then(function () {\n                                    Cortona3DSolo.core.Stella = Cortona3DSolo.tag;\n                                    Cortona3DSolo.on('app.willStartNavigateInScene', function () {\n                                        if (Cortona3DSolo.tag.Model3D.instance.tooltipOver3D) {\n                                            Cortona3DSolo.tag.Model3D.instance.tooltipOver3D.hide();\n                                        }\n                                    });\n                                    resolve(usedModule);\n                                })\n                                .catch(reject);\n                        });\n                        Cortona3DSolo.once(\"core.onError\", reject);\n                    });\n                }\n                break;\n            case 'drawing':\n                if (!usedModule) {\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo.app, require('app.drawing').configure(options));\n                }\n                break;\n            case 'touch':\n                if (!usedModule) {\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo, require('touch').configure(options));\n                }\n                break;\n            case 'skin':\n                if (!usedModule) {\n                    Cortona3DSolo.use('require');\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options)\n                    };\n                    expand(Cortona3DSolo, require('skin').configure(options));\n                }\n                break;\n            case 'require':\n                if (!usedModule) {\n                    if (util.detectAMDLoader()) {\n                        console.log('The AMD loader is already on the page.');\n                    } else {\n                        expand(window, require('./require-mini'));\n                    }\n                    usedModules[moduleName] = usedModule = {\n                        config: expand({}, options) // require global config\n                    };\n                    window.require.onError = function () { };\n                    window.require.config(usedModule.config);\n                    require('./require-plugin-res');\n                    require('./require-plugin-file');\n                    require('./require-plugin-css');\n                    require('./require-plugin-json');\n                    require('./require-plugin-xml');\n                    require('./require-plugin-raw');\n                }\n                break;\n            default: // addon\n                if (usedAddon) {\n                    return Promise.resolve(usedAddon);\n                } else {\n                    return Cortona3DSolo\n                        .use('require')\n                        .then(function () {\n                            // module options\n                            var localOptions = expand({}, options),\n                                config = usedModules.require && usedModules.require.config || {},\n                                prefixURL = localOptions.prefixURL || Cortona3DSolo.baseUrl;\n\n                            usedModules.addons[moduleName] = usedAddon = {\n                                config: localOptions\n                            };\n\n                            if (!prefixURL) {\n                                if (usedModules.core) {\n                                    prefixURL = Module.locateFile('');\n                                }\n                            }\n\n                            config = expand({}, config, {\n                                context: 'Cortona3DSolo',\n                                baseUrl: prefixURL,\n                                config: {}\n                            });\n\n                            config.config[moduleName] = localOptions;\n\n                            return Cortona3DSolo.app.util.requirePromise(moduleName, window.requirejs.config(config))\n                                .then(function (exports) {\n                                    usedAddon.exports = exports;\n                                    return usedAddon;\n                                });\n                        });\n                }\n        }\n        return Promise.resolve(usedModule);\n    },\n    app: expand(require('app').app, {\n        util: {\n            /**\n             * A helper method.\n             * Convert DOM XML tree to JavaScript object:\n             * ```xml\n             * <node att1=\"value1\" att2=\"value2\">\n             *      <foo>Foo</foo>\n             *      <bar>\n             *          <![CDATA[Bar]]>\n             *      </bar>\n             *      <items>\n             *          <item>i1</item>\n             *          <item>i2</item>\n             *          <item>i3</item>\n             *          <item>i4</item>\n             *      </items>\n             * </node>\n             * ```\n             * ```\n             * {\n             *  node: {\n             *      \"@name\": \"node\",\n             *      \"@attributes\": {\n             *          att1: \"value1\",\n             *          att2: \"value2\"\n             *      },\n             *      \"@children\": [\n             *          { \"@name\": \"foo\", \"#text\": \"Foo\" },\n             *          { \"@name\": \"bar\", \"#text\": \"Bar\" },\n             *          { \"@name\": \"items\", ... }\n             *      ],\n             *      foo: { \"@name\": \"foo\", \"#text\": \"Foo\" },\n             *      bar: { \"@name\": \"bar\", \"#text\": \"Bar\" },\n             *      items: {\n             *          \"@name\": \"items\",\n             *          \"@children\": [ ... ],\n             *          item: [\n             *              { \"@name\": \"item\", \"#text\": \"i1\" },\n             *              { \"@name\": \"item\", \"#text\": \"i2\" },\n             *              { \"@name\": \"item\", \"#text\": \"i3\" },\n             *              { \"@name\": \"item\", \"#text\": \"i4\" }\n             *          ]\n             *      }\n             *  }\n             * }\n             * ```\n             * @memberof module:solo.app.util\n             * @method\n             * @param {Document} xml The XML document\n             * @returns {XMLNodeData} The JavaScript object\n             */\n            xmlToJSON: require('xml2json.js'),\n            /**\n             * Loads a resource file from URL using XMLHttpRequest\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} url An URL to load the resource\n             * @param {string} [overrideMimeType]\n             * @param {string} [responseType]\n             * @returns {Promise<XMLHttpRequest>} `Promise` whose fulfillment handler receives an XMLHttpRequest object when the requested resource has successfully been loaded.\n             * @see {@link https://developer.mozilla.org/ru/docs/Web/API/XMLHttpRequest XMLHttpRequest}\n             * @see external:Promise\n             * @fires \"app.onProgress\"\n             * @since 1.4.3\n             */\n            loadResource: util.loadResource,\n            /**\n             * Converts the path specified by the first argument to the absolute path relative to the base path specified by the second argument.\n             * If the second argument is omitted, the absolute path is generated relative to the URL of the loaded HTML document.\n             * \n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} resourceUrl\n             * @param {string} [baseUrl]\n             * @return {string} \n             * @since 1.4.3\n             */\n            toUrl: function (resourceUrl, baseUrl) {\n                var url = (typeof resourceUrl !== 'string') ? '' : resourceUrl;\n                if (url.match(/^[a-z]+\\:\\/\\//i)) {\n                    return url; // absolute url\n                } else if (url.match(/^\\/\\//)) {\n                    return 'http:' + url; // absolute url\n                } else if (url.match(/^[a-z]+\\:/i)) {\n                    return url; // data URI\n                }\n\n                var a = document.createElement('a');\n                if (url[0] === '/') {\n                    a.href = util.getBaseURL(baseUrl);\n                    a.href = a.protocol + '//' + a.host + url;\n                } else {\n                    a.href = util.getBaseURL(baseUrl) + url;\n                }\n                url = a.href;\n                if (url.match(/^file\\:\\/\\//i)) {\n                    url = decodeURI(url);\n                }\n                return url.replace(/(\\/\\.\\/|\\/[^/]+\\/\\.\\.\\/)/g, '/').replace(/([^:/])\\/{2,}/g, '$1/');\n            },\n            /**\n             * Converts base64-encoded data to a Blob object.\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} b64Data A string containing base64 encoded data or data URL\n             * @param {string} [contentType] The content type to assign to the new Blob\n             * @param {number} [sliceSize=1048576]\n             * @returns {Promise<Blob>} `Promise` whose fulfillment handler receives a Blob object when base64-encoded data has successfully been decoded\n             * @see external:Blob\n             * @see external:Promise\n             * @since 1.5.6\n             */\n            b64toBlob: b64toBlob,\n\n            /** \n             * The method defines a new class that can be inherited from parent class.\n             *\n             * @memberof module:solo.app.util\n             * @method\n             * @param parent {?Function} The parent class of the new class or null\n             * @param ctor {Function} The constructor of the new class\n             * @param methods {Object} An object literal containing the methods of the new class\n             * @return {Function} The constructor function of the new class\n             * @since 1.6.0\n             */\n            defineClass: util.defineClass,\n\n            /**\n             * Wrap `requirejs()` call with Promise.\n             * \n             * @async\n             * @memberof module:solo.app.util\n             * @method\n             * @param {string} name The name of module to load\n             * @param {function} [requirejs=window.requirejs] An `requirejs` function\n             * @returns {Promise<exports>} `Promise` whose fulfillment handler receives the export object of a successfully loaded AMD module\n             * @see external:Promise\n             * @since 1.6.0\n             */\n            requirePromise: function (name, req) {\n                return new Promise(function (resolve, reject) {\n                    req = req || window.requirejs;\n                    Promise.all([req([name], resolve, reject)]).catch(function () { });\n                });\n            }\n        },\n        ui: {\n            /** \n             * Creates HTML element with given tag name, list of attributes and array of children.\n             *\n             * @memberof module:solo.app.ui\n             * @method\n             * @param {CSSSelector} name The name of the new element. Class and ID selectors can be used. If the element type name is omitted, `<div>` is created by default. \n             * @param {object} [options] The properties of the new element. \n             * @param {...*} [content] The contents of the new element. It can be plain text, HTMLElement or an array.\n             * @return {HTMLElement}\n             * @since 1.6.0\n             * @example\nvar h = Cortona3DSolo.app.ui.createElement;\n\nh('img#img-001.graphic', { src: 'image.png' }); \n// -> <img id=\"img-001\" class=\"graphic\" src=\"image.png\"/>\n\nh('span#msg', 'A text'); \n// -> <span id=\"msg\">A text</span>\n\nh('#id-001', h('ul', [h('li', 'a'), h('li', 'b')]); \n// -> <div id=\"id-001\"><ul><li>a</li><li>b</li></ul></div>\n             */\n            createElement: require('lib/create-element').createElement,\n            /** \n             * Create HTML elements from string.\n             *\n             * @memberof module:solo.app.ui\n             * @method\n             * @param {string} syntax HTML string\n             * @return {HTMLElement[]}\n             * @since 1.6.0\n             * @example\nCortona3DSolo.app.ui.html('<img src=\"image.png\"/><span>A text</span>');\n// -> [ <img src=\"image.png\"/>, <span>A text</span> ]\n             */\n            html: require('lib/create-element').createElementsFromHTML,\n            /**\n             * Returns a new instance of CSSObject.\n             *  \n             * @memberof module:solo.app.ui\n             * @method\n             * @param {object} [rules]\n             * @return {CSSObject}\n             * @since 1.6.0\n             * @example\nCortona3DSolo.app.ui.css({ body: { backgroundColor: 'red' }});\n// -> body { background-color: red; }\n            */\n            css: require('lib/css-object'),\n            /** \n             * Returns new instance of ColorObject.\n             * \n             * @memberof module:solo.app.ui\n             * @method\n             * @param {string|object|number} [color] \n             * - HTML hex string\n             * - RGB object\n             * - HSL object\n             * - an 32-bit integer specifies RGB color in the following hexadecimal form `0x00RRGGBB`.\n             * @return {ColorObject}\n             * @since 1.6.0\n             * @example\nvar color = Cortona3DSolo.app.ui.color;\ncolor('#FF8800');\ncolor('#F80');\ncolor({r: 255, g: 136, b: 0});\ncolor({h: 32, s: 100, l: 50});\ncolor(0xFF8800);\n             */\n            color: require('lib/color-object')\n        }\n    }),\n    /**\n     * A helper method.\n     * Recursively combines the properties of objects. If a property with the name already exists, it will be overwritten.\n     * @memberof module:solo\n     * @method\n     * @param {object} obj Destination object\n     * @param {...object} [src] Source objects\n     * @returns {object} Destination object\n     */\n    expand: expand,\n    /**\n     * Dispatches the event by emit the event object into event flow from the main object {@link Cortona3DSolo} or by calling appropriate hook method.\n     * @memberof module:solo\n     * @param {string} eventName Event name\n     * @param {...any} [arg] Arguments of the event\n     * @since 1.4.0\n     */\n    dispatch: function (eventName, arg) {\n        if (!PRODUCTION || Cortona3DSolo.__trace === true) {\n            if (eventName.indexOf(\"AnimationFrame\") === -1) {\n                console.log(\"EVENT(\" + eventName + \"): \", Array.prototype.slice.call(arguments, 1));\n            }\n        }\n        Cortona3DSolo.emit.apply(Cortona3DSolo, arguments);\n        var ns = eventName.split('.');\n        var method = ns.pop();\n        var context = Cortona3DSolo;\n        while (ns.length && context) {\n            context = context[ns.shift()];\n        }\n        if (context && typeof context[method] == 'function') {\n            switch (arguments.length) {\n                case 1:\n                    context[method].call(Cortona3DSolo);\n                    break;\n                case 2:\n                    context[method].call(Cortona3DSolo, arguments[1]);\n                    break;\n                case 3:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2]);\n                    break;\n                case 4:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2], arguments[3]);\n                    break;\n                case 5:\n                    context[method].call(Cortona3DSolo, arguments[1], arguments[2], arguments[3], arguments[3]);\n                    break;\n                default:\n                    // slow method\n                    context[method].apply(Cortona3DSolo, Array.prototype.slice.call(arguments, 1));\n            }\n        }\n    }\n});\n\n/**\n * Gets a semantic version string of the library.\n * \n * @static\n * @member {SemVer} version\n * @memberof module:solo\n * @since 1.5.0\n * @see http://semver.org/\n */\n\nObject.defineProperty(Cortona3DSolo, 'version', {\n    get: function () {\n        return VERSION;\n    },\n    enumerable: true\n});\n\n/**\n * The EventEmitter class in the event standard module Node.js.\n * @external EventEmitter\n * @see https://nodejs.org/api/events.html#events_class_eventemitter\n */\n\n/**\n * The Promise object represents the eventual completion (or failure) of an asynchronous operation, and its resulting value.\n * @external Promise\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n */\n\n/**\n * The HTMLTableRowElement interface provides special properties and methods for manipulating the layout and presentation of rows in an HTML table.\n * @external HTMLTableRowElement\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement\n */\n\n/**\n * The HTMLTableElement interface provides special properties and methods for manipulating the layout and presentation of tables in an HTML document.\n * @external HTMLTableElement\n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement\n */\n\n/**\n * The HTMLImageElement interface provides special properties and methods for manipulating the layout and presentation of <img> elements.\n * @external HTMLImageElement \n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement \n */\n\n/**\n * The HTMLCanvasElement interface provides properties and methods for manipulating the layout and presentation of canvas elements.\n * @external HTMLCanvasElement \n * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement \n */\n\n/**\n * The URLinterface represents an object providing static methods used for creating object URLs.\n * @external URL \n * @see https://developer.mozilla.org/en-US/docs/Web/API/URL\n */\n\n/**\n * Module is a global JavaScript object with attributes that Emscripten-generated code calls at various points in its execution.\n * @external Module\n * @see http://kripken.github.io/emscripten-site/docs/api_reference/module.html#module-object\n */\n\n/**\n * A Blob object represents a file-like object of immutable, raw data.\n * @external Blob \n * @see https://developer.mozilla.org/en-US/docs/Web/API/Blob\n */","// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n'use strict';\nmodule.exports = require('./').polyfill();\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\r\n * Convert base64 encoded data into the Blob object\r\n * \r\n * @param {string} b64Data Base 64 encoded data or data URL\r\n * @param {string} contentType \r\n * @param {number} [sliceSize=1048576]\r\n * @returns Promise\r\n */\r\nvar defaultSliceSize = 1048576;\r\n\r\nvar atobStrict = false;\r\n\r\ntry {\r\n    void atob(' ');\r\n} catch (e) {\r\n    atobStrict = true;\r\n}\r\n\r\nfunction b64toBlob(b64Data, contentType, sliceSize) {\r\n    var s = b64Data,\r\n        type = '',\r\n        start = 0;\r\n    if (b64Data.substr(0, 5) === 'data:') {\r\n        start = 5;\r\n        while (b64Data.charAt(start++) !== ',') {\r\n            if (b64Data.charAt(start) !== ';') {\r\n                if (!type) {\r\n                    type = b64Data.substring(5, start);\r\n                }\r\n            }\r\n        }\r\n        s = b64Data.substring(start);\r\n        if (b64Data.substring(5, start).indexOf(';base64') === -1) {\r\n            return Promise.resolve(new Blob([s], {\r\n                type: contentType || type\r\n            }));\r\n        }\r\n    }\r\n    return new Promise(function (resolve, reject) {\r\n        function callback(result) {\r\n            resolve(new Blob(result, {\r\n                type: contentType || type\r\n            }));\r\n        }\r\n        function workerCode() {\r\n            var self = this;\r\n            self.onmessage = function (e) {\r\n                var byteCharacters = e.data[0],\r\n                    sliceSize = e.data[1],\r\n                    byteArrays = [];\r\n                for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {\r\n                    var slice = byteCharacters.slice(offset, offset + sliceSize),\r\n                        byteNumbers = new Array(slice.length);\r\n                    for (var i = 0; i < slice.length; i++) {\r\n                        byteNumbers[i] = slice.charCodeAt(i);\r\n                    }\r\n                    byteArrays.push(new Uint8Array(byteNumbers));\r\n                }\r\n                self.postMessage(byteArrays);\r\n            };\r\n        }\r\n\r\n        var param;\r\n                \r\n        try {\r\n            param = [atob(atobStrict ? s.replace(/\\s/g, '') : s), sliceSize || defaultSliceSize];\r\n        } catch (e) {\r\n            reject(e);\r\n            return;\r\n        }\r\n    \r\n        try {\r\n            var code = ('(' + workerCode + ')();').replace('\"use strict\";', ''),\r\n                src = URL.createObjectURL(new Blob([code], {\r\n                    type: 'application/javascript'\r\n                })),\r\n                worker = new Worker(src);\r\n            worker.onmessage = function (e) {\r\n                URL.revokeObjectURL(src);\r\n                callback(e.data);\r\n            };\r\n            worker.postMessage(param);\r\n        } catch (e) {\r\n            try {\r\n                var self = {\r\n                    postMessage: callback\r\n                };\r\n                workerCode.call(self);\r\n                self.onmessage({\r\n                    data: param\r\n                });\r\n            } catch (e) {\r\n                reject(e);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = b64toBlob;","/**\n * XMLNodeData class\n *\n * @author timduck@cortona3d.com\n */\n\n/**\n * Creates a new data element for the XML element.\n * \n * @class\n * @classdesc A helper class for representing XML data, for example:\n * ```xml\n * <node att1=\"value1\" att2=\"value2\">\n *      <foo>Foo</foo>\n *      <bar>\n *          <![CDATA[Bar]]>\n *      </bar>\n *      <items>\n *          <item>i1</item>\n *          <item>i2</item>\n *          <item>i3</item>\n *          <item>i4</item>\n *      </items>\n * </node>\n * ```\n * ```\n * {\n *  node: {\n *      \"@name\": \"node\",\n *      \"@attributes\": {\n *          att1: \"value1\",\n *          att2: \"value2\"\n *      },\n *      \"@children\": [\n *          { \"@name\": \"foo\", \"#text\": \"Foo\" },\n *          { \"@name\": \"bar\", \"#text\": \"Bar\" },\n *          { \"@name\": \"items\", ... }\n *      ],\n *      foo: { \"@name\": \"foo\", \"#text\": \"Foo\" },\n *      bar: { \"@name\": \"bar\", \"#text\": \"Bar\" },\n *      items: {\n *          \"@name\": \"items\",\n *          \"@children\": [ ... ],\n *          item: [\n *              { \"@name\": \"item\", \"#text\": \"i1\" },\n *              { \"@name\": \"item\", \"#text\": \"i2\" },\n *              { \"@name\": \"item\", \"#text\": \"i3\" },\n *              { \"@name\": \"item\", \"#text\": \"i4\" }\n *          ]\n *      }\n *  }\n * }\n * ```\n * @prop {string} #text The text content of a node.\n * @prop {KeyValuePairs} @attributes Node attributes.\n * @prop {XMLNodeData|string[]} @children Node children, including not empty strings.\n */\nfunction XMLNodeData() {}\n\n/**\n * Returns the array of {@link XMLNodeData} objects depending on the argument:\n * \n * - If type of the argument is the {@link XMLNodeData} object, the method returns an array of one element to the object;\n * - If type of the argument is _array_, the method returns the array itself;\n * - If type of the argument is _string_, the argument value is interpreted as simple XPath expression to select XML elements, If the elements are not found, an empty array is returned;\n * - If argument is omitted, the method returns the array element containing the object itself.\n * \n * Examples of supported XPath expressions: \n * - \"root/some/path/child\" - exact name;\n * - \"root//child\" - recursive descent; searches for the specified element at any depth;\n * - \"root/some/path/*\" - wildcard; selects all elements regardless of the element name.\n * \n * @param {XMLNodeData|string} [obj]\n * @returns {XMLNodeData[]} The array of the {@link XMLNodeData} objects\n */\nXMLNodeData.prototype.$ = function (obj, recurs) {\n    var current = obj || this;\n    if (typeof obj === 'string' && obj) {\n        if (obj === '*') {\n            current = (this['@children'] || []).filter(function (node) {\n                return typeof node !== 'string';\n            });\n            if (recurs) {\n                current = current.reduce(function (a, node) {\n                    return a.concat(node, node.$(obj, recurs));\n                }, []);\n            }\n        } else {\n            // nodes path: \"root/children/child\" --> child = [...]\n            // \"root//child\"\n            // \"root/*/child\" \n\n            var index = obj.indexOf('/'),\n                head = obj.substring(0, index),\n                tail = obj.substring(index + 1),\n                next = tail.indexOf('/');\n\n            // 'head//some/path'\n            if (index >= 0 && next === 0) {\n                tail = tail.substring(1);\n                current = this.$(head, recurs).reduce(function (a, node) {\n                    return a.concat(node.$(tail, true));\n                }, []);\n            } else {\n                if (recurs) {\n                    current = this.$('*').reduce(function (a, node) {\n                        return a.concat(node.$(obj, true));\n                    }, this.$(obj));\n                } else {\n                    current = (index < 0) ? this[obj] : this.$(head).reduce(function (a, node) {\n                        return a.concat(node.$(tail));\n                    }, []);\n                }\n            }\n        }\n    }\n    return !current ? [] : !current.map ? [current] : current;\n};\n\n/**\n * Returns the text content of the element itself or defined by an XPath expression.\n * \n * @param {string} [path] Simple XPath expression, i.e. \"SimulationInteractivity/SimulationInformation/ExporterVersionNumber\"\n * @returns {string}\n */\nXMLNodeData.prototype.$text = function (path) {\n    if (!path) {\n        return this['#text'] || (this['@children'] || []).reduce(function (s, child) {\n            if (typeof child === 'string') return s + child;\n            return s + child.$text();\n        }, '');\n    }\n    return this.$(path).reduce(function (s, node) {\n        return s + node.$text();\n    }, '');\n};\n\n/**\n * Returns the value of a specified attribute on the element.\n * \n * @param {string} name The name of an attribute\n * @returns {string} Tha value of an attribute\n */\nXMLNodeData.prototype.$attr = function (name) {\n    if (!this['@attributes']) return null;\n    return this['@attributes'][name];\n};\n\nmodule.exports = XMLNodeData;","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!./drawing.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".cortona3dsolo-svg {\\n    width: 100%;\\n    height: 100%;\\n    display: block;\\n    position: absolute;\\n}\\n\\n.cortona3dsolo-svg a:hover {\\n\\tcursor: pointer;\\n\\ttext-decoration: none;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","/**\n * SVG Drawing module.\n *\n * @module drawing\n * @author timduck@cortona3d.com\n * @copyright (C) 2015-2016 Paragraphics, Ltd. All rights reserved.\n */\n\nvar expand = require('lib/util').expand;\nvar EventEmitter = require('events').EventEmitter;\n\nvar SVGNS = \"http://www.w3.org/2000/svg\";\nvar XLINKNS = \"http://www.w3.org/1999/xlink\";\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && /mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);\n\nvar Hammer = require('hammerjs');\nvar pako = require('pako/dist/pako.es5');\n\nvar PRESS_TIME = 750;\nvar DOUBLE_TAP_TIME = 250;\n\nvar m_svgHammerManagers = [];\nvar debounceTimeout = {};\n\n/*\n    Members\n */\n\nvar m_svgElement,\n    m_svgShadow,\n    m_viewportShadow,\n    m_view,\n    m_viewport,\n    m_viewBox,\n    m_zoom = 1,\n    m_originX = 0,\n    m_originY = 0,\n    m_maxScale = 50,\n    m_minScale = 1,\n    m_enableDrawingOptimization = false,\n    m_textNodesCount = 0,\n    m_disableAutoCalculationScaleLimit = false,\n    m_enableHoverFilling = false,\n    m_isPressed = false,\n    m_isDoubleTap = false,\n    m_isHidden = true,\n    m_isReady = false,\n    m_loadingUrl = '',\n    m_image = null,\n    m_xhr = null,\n    m_delegate = {\n        didCompleteLoad: function (url) {\n            m_isReady = true;\n            if (this.delegate.didCompleteLoad) {\n                this.delegate.didCompleteLoad.call(this, url);\n            }\n        },\n        didClickHotspot: function (name, keys) {\n            if (this.delegate.didClickHotspot) {\n                this.delegate.didClickHotspot.call(this, name, keys);\n            }\n        },\n        didEnterHotspot: function (name) {\n            if (this.delegate.didEnterHotspot) {\n                this.delegate.didEnterHotspot.call(this, name);\n            }\n        },\n        didLeaveHotspot: function (name) {\n            if (this.delegate.didLeaveHotspot) {\n                this.delegate.didLeaveHotspot.call(this, name);\n            }\n        },\n        didCallContextMenu: function (name, offsetX, offsetY, target) {\n            if (this.delegate.didCallContextMenu) {\n                this.delegate.didCallContextMenu.call(this, name, offsetX, offsetY, target);\n            }\n        },\n        failedLoadingDocument: function (url, message) {\n            if (this.delegate.failedLoadingDocument) {\n                this.delegate.failedLoadingDocument.call(this, url, message);\n            }\n        },\n        onProgress: function (loaded, total) {\n            if (this.delegate.onProgress) {\n                this.delegate.onProgress.call(this, loaded, total);\n            }\n        },\n        onZoomChange: function (zoom) {\n            if (this.delegate.onZoomChange) {\n                this.delegate.onZoomChange.call(this, zoom);\n            }\n        }\n    };\n\n// IE11 SVGElement.classList polyfill\n(function () {\n    // helpers\n    var regExp = function (name) {\n        return new RegExp('(^| )' + name + '( |$)');\n    };\n    var forEach = function (list, fn, scope) {\n        for (var i = 0; i < list.length; i++) {\n            fn.call(scope, list[i]);\n        }\n    };\n\n    // class list object with basic methods\n    function ClassList(element) {\n        this.element = element;\n    }\n\n    ClassList.prototype = {\n        add: function () {\n            forEach(arguments, function (name) {\n                if (!this.contains(name)) {\n                    this.element.className.baseVal += ' ' + name;\n                }\n            }, this);\n        },\n        remove: function () {\n            forEach(arguments, function (name) {\n                this.element.className.baseVal =\n                    this.element.className.baseVal.replace(regExp(name), '');\n            }, this);\n        },\n        toggle: function (name, flag) {\n            flag = typeof flag === 'undefined' ? !this.contains(name) : flag;\n            return (flag ? this.add(name) : this.remove(name)), flag;\n        },\n        contains: function (name) {\n            return regExp(name).test(this.element.className.baseVal);\n        }\n    };\n\n    if (!('classList' in SVGElement.prototype)) {\n        Object.defineProperty(SVGElement.prototype, 'classList', {\n            get: function () {\n                return new ClassList(this);\n            }\n        });\n    }\n})();\n\n/**\n * @private\n * @async\n */\nfunction arrayBufferToString(buffer, encoding) {\n    return new Promise(function (resolve, reject) {\n        var blob = new Blob([buffer], {\n            type: 'text/plain'\n        });\n        var reader = new FileReader();\n        reader.onload = function (evt) {\n            resolve(evt.target.result);\n        };\n        reader.readAsText(blob, encoding);\n    });\n}\n\n/**\n * @private\n */\nfunction getFirstChild(n) {\n    var child = n.firstChild;\n    while (child && !child.tagName) {\n        child = child.nextSibling;\n    }\n    return child;\n}\n\n/**\n * @private\n */\nfunction getHotspotRegion(n) {\n    var firstChild,\n        res = Array.prototype.slice.call(n.getElementsByTagName('path')).filter(function (path) {\n            return path.classList.contains('hotspot-region');\n        })[0];\n\n    if (!res) {\n        // changing the order of nodes in SVG <a> element\n        // 1. g/path (geometry)\n        // 2. path (hotspot region)\n        // 3. g/text\n        firstChild = getFirstChild(n);\n        if (firstChild && firstChild.tagName === 'path') {\n            res = firstChild;\n            firstChild.classList.add('hotspot-region');\n            n.appendChild(firstChild);\n\n            Array.prototype.slice.call(n.getElementsByTagName('text')).forEach(function (text) {\n                var textParentNode = text.parentNode;\n                if (textParentNode !== n) {\n                    if (textParentNode.parentNode === n) {\n                        n.appendChild(textParentNode.cloneNode()).appendChild(text);\n                        if (!textParentNode.childElementCount) {\n                            textParentNode.parentNode.removeChild(textParentNode);\n                        }\n                    }\n                } else {\n                    n.appendChild(text);\n                }\n            });\n\n            // fix: RT-7921\n            // move all text nodes from previous sibling group to the anchor\n            var previousElementSibling = n.previousElementSibling;\n            if (previousElementSibling && (n.getAttribute('vm2d:name') === previousElementSibling.textContent.trim())) {\n                Array.prototype.slice.call(previousElementSibling.getElementsByTagName('text')).forEach(function (text) {\n                    var textParentNode = text.parentNode;\n                    n.appendChild(textParentNode.cloneNode()).appendChild(text);\n                    if (!textParentNode.childElementCount) {\n                        textParentNode.parentNode.removeChild(textParentNode);\n                    }\n                });\n            }\n        }\n    }\n\n    return res;\n}\n\n/**\n * @private\n */\nfunction getHotspotNodes(n) {\n    var el = [],\n        hotspotRegion = getHotspotRegion(n);\n    if (hotspotRegion) {\n        el.push(hotspotRegion);\n    } else {\n        el = el.concat(\n            Array.prototype.slice.call(n.getElementsByTagName('path')),\n            Array.prototype.slice.call(n.getElementsByTagName('text'))\n        );\n    }\n    return el;\n}\n\n/**\n * \n * @private\n * @param {any} node\n * @returns {SVGAElement}\n */\nfunction getSVGAElement(node) {\n    var res = node;\n    while (res && res.nodeName.toLowerCase() != 'a') res = res.parentNode;\n    return res;\n}\n\nvar m_eventHandlersA = {\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    mouseover: function (e) {\n        e = e || window.event;\n        var target = getSVGAElement(e.target || e.srcElement),\n            name = target ? target.getAttribute('name') : '';\n        SVGDrawing.dispatch(\"didEnterHotspot\", name);\n        e.preventDefault();\n    },\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    mouseout: function (e) {\n        e = e || window.event;\n        var target = getSVGAElement(e.target || e.srcElement),\n            name = target ? target.getAttribute('name') : '';\n        SVGDrawing.dispatch(\"didLeaveHotspot\", name);\n        e.preventDefault();\n    }\n};\n\nvar m_lastX,\n    m_lastY,\n    m_lastScale;\n\nvar m_eventHandlers = {\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     */\n    contextmenu: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (m_isPressed) return;\n        e = e || window.event;\n        var target = e.target || e.srcElement,\n            svgANode = getSVGAElement(target),\n            name = svgANode ? svgANode.getAttribute('name') : '',\n            rect = m_view.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top;\n        SVGDrawing.dispatch(\"didCallContextMenu\", name, offsetX, offsetY, m_view);\n    },\n\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     * @returns {any}\n     */\n    wheel: function (e) {\n        e = e || window.event;\n        var delta = e.deltaY < 0 ? -0.1 : 0.1;\n\n        var W = m_view.clientWidth,\n            H = m_view.clientHeight,\n            dimensions = getViewBoxDimensions(),\n            w = dimensions.w,\n            h = dimensions.h;\n\n        var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - delta) * m_zoom)) / m_zoom,\n            rect = m_view.getBoundingClientRect(),\n            offsetX = e.clientX - rect.left,\n            offsetY = e.clientY - rect.top,\n            x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n            y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n            originX = m_originX + x * (1 - scale) * m_zoom,\n            originY = m_originY + y * (1 - scale) * m_zoom;\n\n        setTransform(originX, originY, m_zoom * scale);\n\n        e.preventDefault();\n        return false;\n    },\n    /**\n     * \n     * \n     * @private\n     * @param {any} e\n     * @returns {any}\n     */\n    dblclick: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        if (m_isDoubleTap) return;\n        var scale = (m_maxScale - m_minScale) * 0.4 + m_minScale;\n        if (Math.abs(m_zoom - scale) < 0.001) {\n            reset();\n        } else {\n            scale = scale / m_zoom;\n            var W = m_view.clientWidth,\n                H = m_view.clientHeight,\n                dimensions = getViewBoxDimensions(),\n                w = dimensions.w,\n                h = dimensions.h;\n            var rect = m_view.getBoundingClientRect(),\n                offsetX = e.clientX - rect.left,\n                offsetY = e.clientY - rect.top,\n                x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n                y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n                originX = m_originX + x * (1 - scale) * m_zoom,\n                originY = m_originY + y * (1 - scale) * m_zoom;\n            setTransform(originX, originY, m_zoom * scale);\n        }\n    }\n};\n\n/**\n * \n * \n * @private\n * @returns {object}\n */\nfunction getViewBoxDimensions() {\n    if (m_zoom === 1) {\n        m_viewBox = (m_enableDrawingOptimization && m_viewportShadow) ? m_svgShadow.getBBox() : m_svgElement.getBBox();\n    }\n    var viewBox = m_viewBox,\n        W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        w = viewBox.width,\n        h = viewBox.height,\n        A = W / H,\n        a = w / h;\n\n    if (A > a) {\n        // width\n        h = H;\n        w = h * a;\n    } else if (A < a) {\n        // height\n        w = W;\n        h = w / a;\n    } else {\n        h = H;\n        w = W;\n    }\n    return {\n        h: h,\n        w: w,\n        scale: viewBox.width / w\n    };\n}\n\n/**\n * \n * \n * @private\n * @param {any} dx\n * @param {any} dy\n */\nfunction setOriginBy(dx, dy) {\n    var dimensions = getViewBoxDimensions();\n    setOrigin(m_originX + dx * dimensions.scale, m_originY + dy * dimensions.scale);\n}\n\n/**\n * \n * \n * @private\n * @param {any} x\n * @param {any} y\n */\nfunction setOrigin(x, y) {\n    var W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        dimensions = getViewBoxDimensions(),\n        w = dimensions.w,\n        h = dimensions.h,\n        scale = dimensions.scale,\n        viewW = w * m_zoom,\n        viewH = h * m_zoom;\n\n        var maxOriginX = (W * 0.8 + viewW) * scale / 2,\n            maxOriginY = (H * 0.8 + viewH) * scale / 2,\n            zoomDeltaX = w * (m_zoom - 1) * scale / 2,\n            zoomDeltaY = h * (m_zoom - 1) * scale / 2;\n\n    m_originX = Math.max(Math.min(x, maxOriginX - zoomDeltaX), -maxOriginX - zoomDeltaX);\n    m_originY = Math.max(Math.min(y, maxOriginY - zoomDeltaY), -maxOriginY - zoomDeltaY);\n}\n\n/**\n * \n * \n * @param {any} x\n * @param {any} y\n * @param {any} zoom\n */\nfunction setTransform(x, y, zoom) {\n    m_originX = x;\n    m_originY = y;\n    m_zoom = zoom;\n    SVGDrawing.dispatch(\"onZoomChange\", m_zoom);\n    applyTransform();\n}\n\n/**\n * \n * @private\n */\nvar m_applyTimeout,\n    m_shadowTimeout;\n\nfunction applyTransformTo(viewport) {\n    if (!viewport) return;\n    var m = viewport.transform.baseVal;\n    if (isNaN(m_originX) || isNaN(m_originY) || isNaN(m_zoom)) {\n        m_originX = 0;\n        m_originY = 0;\n        m_zoom = 1;\n    }\n    m.getItem(0).setTranslate(m_originX, m_originY);\n    m.getItem(1).setScale(m_zoom, m_zoom);\n}\n\nfunction applyTransform() {\n    if (!m_viewport) return;\n    clearTimeout(m_applyTimeout);\n    m_applyTimeout = setTimeout(function () {\n        function _apply() {\n            m_shadowTimeout = null;\n            m_svgElement.style.display = 'block';\n            m_svgShadow.style.visibility = 'hidden';\n            applyTransformTo(m_viewport);\n        }\n        clearTimeout(m_shadowTimeout);\n        if (!m_enableDrawingOptimization || !m_viewportShadow) {\n            _apply();\n        } else {\n            if (!m_shadowTimeout) {\n                m_svgShadow.style.visibility = 'visible';\n                m_svgElement.style.display = 'none';\n            }\n            m_shadowTimeout = setTimeout(_apply, 1000);\n            applyTransformTo(m_viewportShadow);\n        }\n    }, 0);\n}\n\n/**\n * \n * @memberof module:drawing\n * @returns {SVGElement} \n */\nfunction getSVGSource() {\n    var div = document.createElement('div');\n    div.appendChild(m_svgElement.cloneNode(true));\n    div.firstChild.removeAttribute('id');\n    div.firstChild.removeAttribute('style');\n    return div.innerHTML;\n}\n\n/**\n * @memberof module:drawing\n */\nfunction attach() {\n    var eventName,\n        mc,\n        mcOptions = {},\n        i,\n        a = m_svgElement.getElementsByTagName('a');\n\n    if (!m_isReady) return;\n    if (m_svgHammerManagers.length) return;\n\n    if (navigator.pointerEnabled === false) {\n        if (SUPPORT_ONLY_TOUCH) {\n            mcOptions.inputClass = Hammer.TouchInput;\n        } else if (!SUPPORT_TOUCH) {\n            mcOptions.inputClass = Hammer.MouseInput;\n        } else {\n            mcOptions.inputClass = Hammer.TouchMouseInput;\n        }\n    }\n\n    for (i = 0; i < a.length; i++) {\n        (function (anchor) {\n            var href = anchor.getAttribute('xlink:href');\n\n            if (href === '#' || href === '') {\n                anchor.removeAttribute('xlink:href');\n            }\n\n            // In an HTML5 document the attribute has to be accessed with vm2d:name since namespaces are not supported.\n            // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Examples\n            var name = anchor.getAttribute('vm2d:name');\n\n            if (name) {\n                anchor.setAttribute('name', name);\n            }\n\n            name = anchor.getAttribute('name');\n            if (!name) {\n                name = anchor.textContent.replace(/[\\r\\n\\s]+/g, ' ').trim();\n                if (name) {\n                    anchor.setAttribute('name', name);\n                }\n                console.log('WARNING: Element \"' + anchor.tagName + '\" has no \"name\" attribute. Uses text content instead: \"' + name + '\"');\n            }\n            if (name) {\n                mc = new Hammer.Manager(anchor, expand({\n                    recognizers: [\n                        [Hammer.Tap]\n                    ]\n                }, mcOptions));\n                mc.on('tap', function (e) {\n                    var event = e.srcEvent || e;\n                    var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\n                    if (!debounceTimeout[name]) {\n                        debounceTimeout[name] = setTimeout(function () {\n                            delete debounceTimeout[name];\n                            SVGDrawing.dispatch(\"didClickHotspot\", name, keys);\n                        }, DOUBLE_TAP_TIME);\n                    } else {\n                        clearTimeout(debounceTimeout[name]);\n                        delete debounceTimeout[name];\n                    }\n                });\n                m_svgHammerManagers.push(mc);\n\n                for (eventName in m_eventHandlersA) {\n                    anchor.addEventListener(eventName, m_eventHandlersA[eventName], false);\n                }\n\n                if (getHotspotRegion(anchor)) {\n                    var n = anchor.firstChild;\n                    while (n) {\n                        if (n.classList && !n.classList.contains('hotspot-region')) {\n                            n.setAttribute('pointer-events', 'none');\n                        }\n                        n = n.nextSibling;\n                    }\n                }\n            }\n        })(a[i]);\n    }\n\n    mc = new Hammer.Manager(m_view, mcOptions);\n\n    var press = new Hammer.Press({\n        time: PRESS_TIME\n    });\n\n    var doubletap = new Hammer.Tap({\n        event: 'doubletap',\n        taps: 2,\n        threshold: 5,\n        posThreshold: 100,\n        interval: DOUBLE_TAP_TIME\n    });\n\n    var pinch = new Hammer.Pinch({\n        enable: true\n    });\n\n    var pan = new Hammer.Pan({\n        pointers: 0,\n        threshold: 1\n    });\n\n    pinch.recognizeWith(pan);\n\n    mc.add(press);\n    mc.add(doubletap);\n    mc.add(pinch);\n    mc.add(pan);\n    mc.set({\n        touchAction: 'none'\n    });\n\n    mc.on('press', function (e) {\n        if (e.pointerType === 'mouse') return;\n        m_eventHandlers.contextmenu(e.srcEvent);\n        m_isPressed = true;\n    });\n\n    mc.on('pressup', function (e) {\n        if (e.pointerType === 'mouse') return;\n        setTimeout(function () {\n            m_isPressed = false;\n        }, 250);\n    });\n\n    mc.on('doubletap', function (e) {\n        m_eventHandlers.dblclick(e.srcEvent);\n        m_isDoubleTap = true;\n        setTimeout(function () {\n            m_isDoubleTap = false;\n        }, 250);\n    });\n\n    mc.on('pinchstart', function (e) {\n        m_lastScale = 1;\n    });\n\n    mc.on('pinch', function (e) {\n        var W = m_view.clientWidth,\n            H = m_view.clientHeight,\n            dimensions = getViewBoxDimensions(),\n            w = dimensions.w,\n            h = dimensions.h;\n\n        var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - (m_lastScale - e.scale)) * m_zoom)) / m_zoom,\n            rect = m_view.getBoundingClientRect(),\n            clientX = e.center.x,\n            clientY = e.center.y,\n            offsetX = clientX - rect.left,\n            offsetY = clientY - rect.top,\n            x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n            y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n            originX = m_originX + x * (1 - scale) * m_zoom,\n            originY = m_originY + y * (1 - scale) * m_zoom;\n\n        setTransform(originX, originY, m_zoom * scale);\n\n        m_lastScale = e.scale;\n    });\n\n    mc.on('panstart', function (e) {\n        m_view.style.cursor = 'move';\n        m_lastX = e.deltaX;\n        m_lastY = e.deltaY;\n    });\n\n    mc.on('pan', function (e) {\n        setOriginBy(e.deltaX - m_lastX, e.deltaY - m_lastY);\n        m_lastX = e.deltaX;\n        m_lastY = e.deltaY;\n        applyTransform();\n    });\n\n    mc.on('panend', function (e) {\n        m_view.style.cursor = 'default';\n    });\n\n    m_svgHammerManagers.push(mc);\n\n    for (eventName in m_eventHandlers) {\n        m_view.addEventListener(eventName, m_eventHandlers[eventName], false);\n    }\n}\n\n/**\n * @memberof module:drawing\n */\nfunction detach() {\n    var eventName,\n        name,\n        anchor,\n        i,\n        a = m_svgElement.getElementsByTagName('a');\n    for (i = 0; i < a.length; i++) {\n        anchor = a[i];\n        if (anchor.__mc) anchor.__mc.destroy();\n        delete anchor.__mc;\n        for (eventName in m_eventHandlersA) {\n            anchor.removeEventListener(eventName, m_eventHandlersA[eventName], false);\n        }\n    }\n    for (eventName in m_eventHandlers) {\n        m_view.removeEventListener(eventName, m_eventHandlers[eventName], false);\n    }\n    m_svgHammerManagers.forEach(function (mc) {\n        mc.destroy();\n    });\n    m_svgHammerManagers.length = 0;\n    for (name in debounceTimeout) {\n        clearTimeout(debounceTimeout[name]);\n    }\n    debounceTimeout = {};\n    m_zoom = 1;\n    m_originX = 0;\n    m_originY = 0;\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {string} url\n * @param {boolean} raster\n */\nfunction load(url, raster) {\n    /** \n     * @private\n     */\n    function onLoadSvg(syntax) {\n        var svg,\n            div = document.createElement('div');\n\n        div.innerHTML = syntax;\n        svg = div.querySelector('svg');\n\n        if (!svg) throw new Error('No SVG data.');\n\n        if (svg) {\n            detach();\n\n            var cssText = m_svgElement.style.cssText;\n            var cssClass = m_svgElement.getAttribute('class') || '';\n\n            m_svgElement.parentNode.replaceChild(svg, m_svgElement);\n            m_svgElement = svg;\n            m_svgElement.setAttribute('touch-action', 'none');\n            m_svgElement.style.touchAction = 'none';\n\n            var titleNodes = svg.getElementsByTagName('title');\n            for (var i = 0; i < titleNodes.length; i++) {\n                titleNodes[i].parentNode.removeChild(titleNodes[i]);\n            }\n\n            var childNodes = Array.prototype.slice.call(svg.childNodes || svg.children).filter(function (el) {\n                var n = el.nodeName;\n                return n !== '#text' && n !== 'title' && n !== 'defs' && n !== 'desc';\n            });\n\n            m_viewport = document.createElementNS(SVGNS, 'g');\n\n            var v = m_viewport.transform.baseVal;\n            v.initialize(svg.createSVGTransform());\n            v.appendItem(svg.createSVGTransform());\n\n            childNodes.forEach(function (node) {\n                m_viewport.appendChild(node);\n            });\n            svg.appendChild(m_viewport);\n\n            if (!svg.getAttribute('viewBox')) {\n                svg.setAttribute('viewBox', '0 0 ' + svg.getAttribute('width') + ' ' + svg.getAttribute('height'));\n            }\n\n            var viewBox = (svg.getAttribute('viewBox') || '0 0 0 0').split(' ');\n\n            if (!svg.getAttribute('width')) {\n                svg.setAttribute('width', viewBox[2]);\n            }\n\n            if (!svg.getAttribute('height')) {\n                svg.setAttribute('height', viewBox[3]);\n            }\n\n            svg.style.cssText = cssText;\n            svg.setAttribute('class', cssClass);\n\n            m_isReady = true;\n            SVGDrawing.dispatch(\"didCompleteLoad\", url);\n\n            if (!m_isHidden) attach();\n            m_loadingUrl = url;\n\n            m_textNodesCount = svg.getElementsByTagName('text').length;\n\n            initShadow();\n            calculateScaleLimit();\n        }\n    }\n    if (url == m_loadingUrl) return;\n    if (m_xhr) {\n        m_xhr.abort();\n        m_xhr = null;\n    }\n    if (m_image) {\n        m_image.onload = null;\n        m_image = null;\n    }\n    if (raster || /\\.(png|jpe?g|jpe|gif)$/i.test(url)) {\n        // PNG, JPEG, GIF\n        var img = new Image();\n        img.onload = function () {\n            unload();\n\n            var image = document.createElementNS(SVGNS, 'image');\n            image.setAttribute('image-rendering', 'optimizeQuality');\n            image.setAttribute('width', img.width);\n            image.setAttribute('height', img.height);\n            m_svgElement.setAttribute('viewBox', '0 0 ' + img.width + ' ' + img.height);\n            image.setAttributeNS(XLINKNS, 'href', img.src);\n\n            m_viewport = document.createElementNS(SVGNS, 'g');\n            var v = m_viewport.transform.baseVal;\n            v.initialize(m_svgElement.createSVGTransform());\n            v.appendItem(m_svgElement.createSVGTransform());\n            m_viewport.appendChild(image);\n            m_svgElement.appendChild(m_viewport);\n\n            calculateScaleLimit();\n\n            m_isReady = true;\n            SVGDrawing.dispatch(\"didCompleteLoad\", img.src);\n\n            if (!m_isHidden) attach();\n            m_loadingUrl = url;\n        };\n        img.src = url;\n        m_image = img;\n    } else {\n        // SVG(Z)\n        var xhr = new window.XMLHttpRequest();\n        if (xhr.overrideMimeType) {\n            xhr.overrideMimeType('application/octet-stream'); //application/xhtml+xml\n        }\n        try {\n            var self = this;\n            xhr.open(\"GET\", url, true);\n            xhr.responseType = 'arraybuffer';\n            /**\n             * \n             * @private\n             */\n            xhr.onerror = function () {\n                SVGDrawing.dispatch(\"onProgress\", 0, -1);\n                SVGDrawing.dispatch(\"failedLoadingDocument\", url, xhr.status);\n            };\n            /**\n             * \n             * @private\n             */\n            xhr.onprogress = function (e) {\n                var loaded = e.loaded;\n                var total = e.lengthComputable || e.lengthComputable === undefined ? e.total : 0;\n                SVGDrawing.dispatch(\"onProgress\", loaded, total);\n            };\n            /**\n             * \n             * @private\n             */\n            xhr.onload = function () {\n                SVGDrawing.dispatch(\"onProgress\", 0, -1);\n                var binData = new Uint8Array(xhr.response);\n\n                Promise\n                    .resolve()\n                    .then(function () {\n                        /*\n                        if (Cortona3DSolo && Cortona3DSolo.app.util.inflate) {\n                            var data = Cortona3DSolo.app.util.inflate(binData);\n                            if (!data) throw new Error();\n                            return arrayBufferToString(new Uint8Array(data))\n                                .then(function (str) {\n                                    Cortona3DSolo.app.util.freeTypedArray(data);\n                                    return str;\n                                });\n                        }\n                        */\n                        return arrayBufferToString(new Uint8Array(pako.inflate(binData)));\n                    })\n                    .catch(function () {\n                        return arrayBufferToString(binData);\n                    })\n                    .then(onLoadSvg)\n                    .catch(function () {\n                        SVGDrawing.dispatch(\"failedLoadingDocument\", url, xhr.status);\n                        m_loadingUrl = '';\n                    });\n            };\n            xhr.send(null);\n            m_xhr = xhr;\n        } catch (e) {\n            SVGDrawing.dispatch(\"failedLoadingDocument\", url, e.message);\n            m_loadingUrl = '';\n        }\n    }\n}\n\n/**\n * @memberof module:drawing\n */\nfunction unload() {\n    detach();\n    while (m_svgElement.firstChild) {\n        m_svgElement.removeChild(m_svgElement.firstChild);\n    }\n    freeShadow();\n    m_isReady = false;\n}\n\nfunction freeShadow() {\n    while (m_svgShadow.firstChild) {\n        m_svgShadow.removeChild(m_svgShadow.firstChild);\n    }\n    m_viewportShadow = null;\n}\n\nfunction initShadow() {\n    freeShadow();\n\n    if (m_textNodesCount < 5000 || !m_enableDrawingOptimization) return;\n\n    var svgString = new XMLSerializer().serializeToString(m_svgElement);\n\n    var DOMURL = self.URL || self.webkitURL || self,\n        img = new Image(),\n        svg = new Blob([svgString], {\n            type: \"image/svg+xml;charset=utf-8\"\n        }),\n        url = DOMURL.createObjectURL(svg);\n\n    img.onload = function () {\n        DOMURL.revokeObjectURL(url);\n\n        if (!img.width && !img.height) {\n            m_enableDrawingOptimization = false;\n            return;\n        }\n\n        var canvas = m_view.appendChild(document.createElement('canvas'));\n\n        canvas.style.display = 'none';\n\n        canvas.width = img.width;\n        canvas.height = img.height;\n\n        var ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0, img.width, img.height);\n\n        var png = canvas.toDataURL(\"image/png\");\n        var image = document.createElementNS(SVGNS, 'image');\n\n        image.setAttribute('image-rendering', 'optimizeQuality');\n        image.setAttribute('width', img.width);\n        image.setAttribute('height', img.height);\n        m_svgShadow.setAttribute('viewBox', '0 0 ' + img.width + ' ' + img.height);\n        image.setAttributeNS(XLINKNS, 'href', png);\n\n        m_viewportShadow = document.createElementNS(SVGNS, 'g');\n        var v = m_viewportShadow.transform.baseVal;\n        v.initialize(m_svgShadow.createSVGTransform());\n        v.appendItem(m_svgShadow.createSVGTransform());\n        m_viewportShadow.appendChild(image);\n        m_svgShadow.appendChild(m_viewportShadow);\n        applyTransformTo(m_viewportShadow);\n\n        m_view.removeChild(canvas);\n    };\n\n    img.src = url;\n}\n\nfunction calculateScaleLimit() {\n    if (m_disableAutoCalculationScaleLimit) return;\n    try {\n        var viewBox = m_svgElement.getBBox();\n        m_maxScale = Math.sqrt(viewBox.width * viewBox.width + viewBox.height * viewBox.height) / 50 || 50;\n    } catch (e) {}\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} className\n * @param {any} flag\n * @returns {boolean}\n */\nfunction toggleHotspotClass(hotspotName, className, flag) {\n    var res = flag;\n    m_svgElement.querySelectorAll('a[name=\"' + hotspotName + '\"]').forEach(function (n) {\n        getHotspotNodes(n).forEach(function (path) {\n            if (path.classList) {\n                res = path.classList.toggle(className, flag);\n            }\n        });\n    });\n    return res;\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} color\n */\nfunction highlight(hotspotName, color) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    if (path.tagName !== 'text') {\n                        path.style.fill = color;\n                        path.style.fillOpacity = 0.5;\n                    }\n                } else {\n                    path.style.stroke = color;\n                    path.style.strokeWidth = path.tagName === 'text' ? '.1em' : '.5px';\n                    path.style.strokeOpacity = 1;\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n */\nfunction unhighlight(hotspotName) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    if (path.tagName !== 'text') {\n                        path.style.fill = path.style.stroke;\n                        path.style.fillOpacity = path.style.strokeOpacity;\n                    }\n                } else {\n                    path.style.stroke = '';\n                    path.style.strokeWidth = '';\n                    path.style.strokeOpacity = '';\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n * @param {any} color\n */\nfunction select(hotspotName, color) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    path.style.stroke = color;\n                    path.style.strokeWidth = path.tagName === 'text' ? '.1em' : '.5px';\n                    path.style.strokeOpacity = 1;\n                }\n                if (path.tagName !== 'text') {\n                    path.style.fill = color;\n                    path.style.fillOpacity = 0.8;\n                }\n            });\n        }\n    });\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} hotspotName\n */\nfunction unselect(hotspotName) {\n    Array.prototype.slice.call(m_svgElement.getElementsByTagName('a')).forEach(function (n) {\n        if (n.getAttribute('name') === hotspotName) {\n            getHotspotNodes(n).forEach(function (path) {\n                if (m_enableHoverFilling) {\n                    path.style.stroke = '';\n                    path.style.strokeWidth = '';\n                    path.style.strokeOpacity = '';\n                }\n                if (path.tagName !== 'text') {\n                    path.style.fill = '';\n                    path.style.fillOpacity = '';\n                }\n            });\n        }\n    });\n}\n\n/**\n * @memberof module:drawing\n */\nfunction reset() {\n    setTransform(0, 0, 1);\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} delta\n */\nfunction scaleBy(delta) {\n    if (m_zoom === 1) {\n        m_viewBox = m_svgElement.getBBox();\n    }\n    var W = m_view.clientWidth,\n        H = m_view.clientHeight,\n        dimensions = getViewBoxDimensions(),\n        w = dimensions.w,\n        h = dimensions.h;\n\n    var scale = Math.max(m_minScale, Math.min(m_maxScale, (1 - delta) * m_zoom)) / m_zoom,\n        rect = m_view.getBoundingClientRect(),\n        offsetX = rect.width / 2,\n        offsetY = rect.height / 2,\n        x = (offsetX - (W - w) / 2 - m_originX / dimensions.scale) / m_zoom * dimensions.scale,\n        y = (offsetY - (H - h) / 2 - m_originY / dimensions.scale) / m_zoom * dimensions.scale,\n        originX = m_originX + x * (1 - scale) * m_zoom,\n        originY = m_originY + y * (1 - scale) * m_zoom;\n\n    setTransform(originX, originY, m_zoom * scale);\n}\n\n/**\n * \n * @memberof module:drawing\n * @param {any} deltaX\n * @param {any} deltaY\n */\nfunction shiftBy(deltaX, deltaY) {\n    setOriginBy(deltaX, deltaY);\n    applyTransform();\n}\n\n/**\n * @memberof module:drawing\n */\nfunction hide() {\n    detach();\n    m_view.style.visibility = 'hidden';\n    m_isHidden = true;\n}\n\n/**\n * @memberof module:drawing\n */\nfunction show() {\n    attach();\n    m_view.style.visibility = 'visible';\n    m_isHidden = false;\n    calculateScaleLimit();\n}\n\n/**\n * @memberof module:drawing\n * @param {HTMLElement} svgElement\n * @param {object} [options]\n */\nfunction initialize(svgElement, options) {\n    svgElement.setAttribute('touch-action', 'none');\n    svgElement.style.touchAction = 'none';\n    svgElement.style.width = '100%';\n    svgElement.style.height = '100%';\n    svgElement.style.position = 'absolute';\n    svgElement.style.display = 'block';\n    svgElement.style.overflow = 'hidden';\n    m_svgElement = svgElement;\n    m_view = document.createElement('div');\n    m_view.classList.add('cortona3dsolo-svg');\n    svgElement.parentNode.replaceChild(m_view, svgElement);\n    m_view.appendChild(svgElement);\n    m_svgShadow = m_view.appendChild(document.createElementNS(SVGNS, 'svg'));\n    m_svgShadow.setAttribute('touch-action', 'none');\n    m_svgShadow.style.touchAction = 'none';\n    m_svgShadow.style.pointerEvents = 'none';\n    m_svgShadow.style.width = '100%';\n    m_svgShadow.style.height = '100%';\n    m_svgShadow.style.position = 'absolute';\n    svgElement.style.display = 'block';\n    m_svgShadow.style.overflow = 'hidden';\n    m_svgShadow.style.visibility = 'hidden';\n    hide();\n}\n\nvar SVGDrawing = expand(new EventEmitter(), {\n    dispatch: function (eventName) {\n        SVGDrawing.emit.apply(SVGDrawing, arguments);\n        if (typeof SVGDrawing.delegate[eventName] == 'function') {\n            SVGDrawing.delegate[eventName].apply(SVGDrawing, Array.prototype.slice.call(arguments, 1));\n        }\n    },\n    initialize: initialize, // initialize(svgElement, options)\n    hide: hide,\n    show: show,\n    reset: reset,\n    scaleBy: scaleBy,\n    shiftBy: shiftBy,\n    toggleHotspotClass: toggleHotspotClass,\n    select: select,\n    unselect: unselect,\n    highlight: highlight,\n    unhighlight: unhighlight,\n    load: load,\n    unload: unload,\n    attach: attach,\n    detach: detach,\n    getSVGSource: getSVGSource,\n    /**\n     * @returns {boolean}\n     */\n    checkComplete: function () {\n        return m_isReady;\n    },\n    /**\n     * @returns {boolean}\n     */\n    checkShown: function () {\n        return !m_isHidden;\n    },\n    /**\n     * Hooks\n     */\n    delegate: {} // hooks\n    /*\n     didClickHotspot(name) \n     didEnterHotspot(name)\n     didLeaveHotspot(name)\n     didCompleteLoad(url)\n     didCallContextMenu(name, offsetX, offsetY, target)\n     failedLoadingDocument()\n     onProgress(loaded, total)\n     onZoomChange(zoom)\n     */\n});\n\nObject.defineProperties(SVGDrawing, {\n    'svg': {\n        get: function () {\n            return m_svgElement;\n        },\n        enumerable: true\n    },\n    'enableDrawingOptimization': {\n        get: function () {\n            return m_enableDrawingOptimization;\n        },\n        set: function (value) {\n            m_enableDrawingOptimization = !!value;\n        },\n        enumerable: true\n    },\n    'enableHoverFilling': {\n        get: function () {\n            return m_enableHoverFilling;\n        },\n        set: function (value) {\n            m_enableHoverFilling = !!value;\n        },\n        enumerable: true\n    },\n    'maxScale': {\n        get: function () {\n            return m_maxScale;\n        },\n        set: function (scale) {\n            m_disableAutoCalculationScaleLimit = !!scale;\n            m_maxScale = Math.max(+scale > 0 ? scale : 50, m_minScale);\n        },\n        enumerable: true\n    },\n    'minScale': {\n        get: function () {\n            return m_minScale;\n        },\n        set: function (scale) {\n            m_minScale = Math.min(+scale > 0 ? scale : 1, m_maxScale);\n        },\n        enumerable: true\n    }\n});\n\nmodule.exports = SVGDrawing;","\n/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.pako = {}));\n}(this, (function (exports) { 'use strict';\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  /* eslint-disable space-unary-ops */\n\n  /* Public constants ==========================================================*/\n\n  /* ===========================================================================*/\n  //const Z_FILTERED          = 1;\n  //const Z_HUFFMAN_ONLY      = 2;\n  //const Z_RLE               = 3;\n\n  var Z_FIXED$1 = 4; //const Z_DEFAULT_STRATEGY  = 0;\n\n  /* Possible values of the data_type field (though see inflate()) */\n\n  var Z_BINARY = 0;\n  var Z_TEXT = 1; //const Z_ASCII             = 1; // = Z_TEXT\n\n  var Z_UNKNOWN$1 = 2;\n  /*============================================================================*/\n\n  function zero$1(buf) {\n    var len = buf.length;\n\n    while (--len >= 0) {\n      buf[len] = 0;\n    }\n  } // From zutil.h\n\n\n  var STORED_BLOCK = 0;\n  var STATIC_TREES = 1;\n  var DYN_TREES = 2;\n  /* The three kinds of block type */\n\n  var MIN_MATCH$1 = 3;\n  var MAX_MATCH$1 = 258;\n  /* The minimum and maximum match lengths */\n  // From deflate.h\n\n  /* ===========================================================================\n   * Internal compression state.\n   */\n\n  var LENGTH_CODES$1 = 29;\n  /* number of length codes, not counting the special END_BLOCK code */\n\n  var LITERALS$1 = 256;\n  /* number of literal bytes 0..255 */\n\n  var L_CODES$1 = LITERALS$1 + 1 + LENGTH_CODES$1;\n  /* number of Literal or Length codes, including the END_BLOCK code */\n\n  var D_CODES$1 = 30;\n  /* number of distance codes */\n\n  var BL_CODES$1 = 19;\n  /* number of codes used to transfer the bit lengths */\n\n  var HEAP_SIZE$1 = 2 * L_CODES$1 + 1;\n  /* maximum heap size */\n\n  var MAX_BITS$1 = 15;\n  /* All codes must not exceed MAX_BITS bits */\n\n  var Buf_size = 16;\n  /* size of bit buffer in bi_buf */\n\n  /* ===========================================================================\n   * Constants\n   */\n\n  var MAX_BL_BITS = 7;\n  /* Bit length codes must not exceed MAX_BL_BITS bits */\n\n  var END_BLOCK = 256;\n  /* end of block literal code */\n\n  var REP_3_6 = 16;\n  /* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\n  var REPZ_3_10 = 17;\n  /* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\n  var REPZ_11_138 = 18;\n  /* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n  /* eslint-disable comma-spacing,array-bracket-spacing */\n\n  var extra_lbits =\n  /* extra bits for each length code */\n  new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]);\n  var extra_dbits =\n  /* extra bits for each distance code */\n  new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]);\n  var extra_blbits =\n  /* extra bits for each bit length code */\n  new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]);\n  var bl_order = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n  /* eslint-enable comma-spacing,array-bracket-spacing */\n\n  /* The lengths of the bit length codes are sent in order of decreasing\n   * probability, to avoid transmitting the lengths for unused bit length codes.\n   */\n\n  /* ===========================================================================\n   * Local data. These are initialized only once.\n   */\n  // We pre-fill arrays with 0 to avoid uninitialized gaps\n\n  var DIST_CODE_LEN = 512;\n  /* see definition of array dist_code below */\n  // !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\n\n  var static_ltree = new Array((L_CODES$1 + 2) * 2);\n  zero$1(static_ltree);\n  /* The static literal tree. Since the bit lengths are imposed, there is no\n   * need for the L_CODES extra codes used during heap construction. However\n   * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n   * below).\n   */\n\n  var static_dtree = new Array(D_CODES$1 * 2);\n  zero$1(static_dtree);\n  /* The static distance tree. (Actually a trivial tree since all codes use\n   * 5 bits.)\n   */\n\n  var _dist_code = new Array(DIST_CODE_LEN);\n\n  zero$1(_dist_code);\n  /* Distance codes. The first 256 values correspond to the distances\n   * 3 .. 258, the last 256 values correspond to the top 8 bits of\n   * the 15 bit distances.\n   */\n\n  var _length_code = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);\n\n  zero$1(_length_code);\n  /* length code for each normalized match length (0 == MIN_MATCH) */\n\n  var base_length = new Array(LENGTH_CODES$1);\n  zero$1(base_length);\n  /* First normalized length for each code (0 = MIN_MATCH) */\n\n  var base_dist = new Array(D_CODES$1);\n  zero$1(base_dist);\n  /* First normalized distance for each code (0 = distance of 1) */\n\n  function StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n    this.static_tree = static_tree;\n    /* static tree or NULL */\n\n    this.extra_bits = extra_bits;\n    /* extra bits for each code or NULL */\n\n    this.extra_base = extra_base;\n    /* base index for extra_bits */\n\n    this.elems = elems;\n    /* max number of elements in the tree */\n\n    this.max_length = max_length;\n    /* max bit length for the codes */\n    // show if `static_tree` has data or dummy - needed for monomorphic objects\n\n    this.has_stree = static_tree && static_tree.length;\n  }\n\n  var static_l_desc;\n  var static_d_desc;\n  var static_bl_desc;\n\n  function TreeDesc(dyn_tree, stat_desc) {\n    this.dyn_tree = dyn_tree;\n    /* the dynamic tree */\n\n    this.max_code = 0;\n    /* largest code with non zero frequency */\n\n    this.stat_desc = stat_desc;\n    /* the corresponding static tree */\n  }\n\n  var d_code = function d_code(dist) {\n    return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n  };\n  /* ===========================================================================\n   * Output a short LSB first on the stream.\n   * IN assertion: there is enough room in pendingBuf.\n   */\n\n\n  var put_short = function put_short(s, w) {\n    //    put_byte(s, (uch)((w) & 0xff));\n    //    put_byte(s, (uch)((ush)(w) >> 8));\n    s.pending_buf[s.pending++] = w & 0xff;\n    s.pending_buf[s.pending++] = w >>> 8 & 0xff;\n  };\n  /* ===========================================================================\n   * Send a value on a given number of bits.\n   * IN assertion: length <= 16 and value fits in length bits.\n   */\n\n\n  var send_bits = function send_bits(s, value, length) {\n    if (s.bi_valid > Buf_size - length) {\n      s.bi_buf |= value << s.bi_valid & 0xffff;\n      put_short(s, s.bi_buf);\n      s.bi_buf = value >> Buf_size - s.bi_valid;\n      s.bi_valid += length - Buf_size;\n    } else {\n      s.bi_buf |= value << s.bi_valid & 0xffff;\n      s.bi_valid += length;\n    }\n  };\n\n  var send_code = function send_code(s, c, tree) {\n    send_bits(s, tree[c * 2]\n    /*.Code*/\n    , tree[c * 2 + 1]\n    /*.Len*/\n    );\n  };\n  /* ===========================================================================\n   * Reverse the first len bits of a code, using straightforward code (a faster\n   * method would use a table)\n   * IN assertion: 1 <= len <= 15\n   */\n\n\n  var bi_reverse = function bi_reverse(code, len) {\n    var res = 0;\n\n    do {\n      res |= code & 1;\n      code >>>= 1;\n      res <<= 1;\n    } while (--len > 0);\n\n    return res >>> 1;\n  };\n  /* ===========================================================================\n   * Flush the bit buffer, keeping at most 7 bits in it.\n   */\n\n\n  var bi_flush = function bi_flush(s) {\n    if (s.bi_valid === 16) {\n      put_short(s, s.bi_buf);\n      s.bi_buf = 0;\n      s.bi_valid = 0;\n    } else if (s.bi_valid >= 8) {\n      s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n      s.bi_buf >>= 8;\n      s.bi_valid -= 8;\n    }\n  };\n  /* ===========================================================================\n   * Compute the optimal bit lengths for a tree and update the total bit length\n   * for the current block.\n   * IN assertion: the fields freq and dad are set, heap[heap_max] and\n   *    above are the tree nodes sorted by increasing frequency.\n   * OUT assertions: the field len is set to the optimal bit length, the\n   *     array bl_count contains the frequencies for each bit length.\n   *     The length opt_len is updated; static_len is also updated if stree is\n   *     not null.\n   */\n\n\n  var gen_bitlen = function gen_bitlen(s, desc) //    deflate_state *s;\n  //    tree_desc *desc;    /* the tree descriptor */\n  {\n    var tree = desc.dyn_tree;\n    var max_code = desc.max_code;\n    var stree = desc.stat_desc.static_tree;\n    var has_stree = desc.stat_desc.has_stree;\n    var extra = desc.stat_desc.extra_bits;\n    var base = desc.stat_desc.extra_base;\n    var max_length = desc.stat_desc.max_length;\n    var h;\n    /* heap index */\n\n    var n, m;\n    /* iterate over the tree elements */\n\n    var bits;\n    /* bit length */\n\n    var xbits;\n    /* extra bits */\n\n    var f;\n    /* frequency */\n\n    var overflow = 0;\n    /* number of elements with bit length too large */\n\n    for (bits = 0; bits <= MAX_BITS$1; bits++) {\n      s.bl_count[bits] = 0;\n    }\n    /* In a first pass, compute the optimal bit lengths (which may\n     * overflow in the case of the bit length tree).\n     */\n\n\n    tree[s.heap[s.heap_max] * 2 + 1]\n    /*.Len*/\n    = 0;\n    /* root of the heap */\n\n    for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {\n      n = s.heap[h];\n      bits = tree[tree[n * 2 + 1]\n      /*.Dad*/\n      * 2 + 1]\n      /*.Len*/\n      + 1;\n\n      if (bits > max_length) {\n        bits = max_length;\n        overflow++;\n      }\n\n      tree[n * 2 + 1]\n      /*.Len*/\n      = bits;\n      /* We overwrite tree[n].Dad which is no longer needed */\n\n      if (n > max_code) {\n        continue;\n      }\n      /* not a leaf node */\n\n\n      s.bl_count[bits]++;\n      xbits = 0;\n\n      if (n >= base) {\n        xbits = extra[n - base];\n      }\n\n      f = tree[n * 2]\n      /*.Freq*/\n      ;\n      s.opt_len += f * (bits + xbits);\n\n      if (has_stree) {\n        s.static_len += f * (stree[n * 2 + 1]\n        /*.Len*/\n        + xbits);\n      }\n    }\n\n    if (overflow === 0) {\n      return;\n    } // Trace((stderr,\"\\nbit length overflow\\n\"));\n\n    /* This happens for example on obj2 and pic of the Calgary corpus */\n\n    /* Find the first bit length which could increase: */\n\n\n    do {\n      bits = max_length - 1;\n\n      while (s.bl_count[bits] === 0) {\n        bits--;\n      }\n\n      s.bl_count[bits]--;\n      /* move one leaf down the tree */\n\n      s.bl_count[bits + 1] += 2;\n      /* move one overflow item as its brother */\n\n      s.bl_count[max_length]--;\n      /* The brother of the overflow item also moves one step up,\n       * but this does not affect bl_count[max_length]\n       */\n\n      overflow -= 2;\n    } while (overflow > 0);\n    /* Now recompute all bit lengths, scanning in increasing frequency.\n     * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n     * lengths instead of fixing only the wrong ones. This idea is taken\n     * from 'ar' written by Haruhiko Okumura.)\n     */\n\n\n    for (bits = max_length; bits !== 0; bits--) {\n      n = s.bl_count[bits];\n\n      while (n !== 0) {\n        m = s.heap[--h];\n\n        if (m > max_code) {\n          continue;\n        }\n\n        if (tree[m * 2 + 1]\n        /*.Len*/\n        !== bits) {\n          // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n          s.opt_len += (bits - tree[m * 2 + 1]\n          /*.Len*/\n          ) * tree[m * 2]\n          /*.Freq*/\n          ;\n          tree[m * 2 + 1]\n          /*.Len*/\n          = bits;\n        }\n\n        n--;\n      }\n    }\n  };\n  /* ===========================================================================\n   * Generate the codes for a given tree and bit counts (which need not be\n   * optimal).\n   * IN assertion: the array bl_count contains the bit length statistics for\n   * the given tree and the field len is set for all tree elements.\n   * OUT assertion: the field code is set for all tree elements of non\n   *     zero code length.\n   */\n\n\n  var gen_codes = function gen_codes(tree, max_code, bl_count) //    ct_data *tree;             /* the tree to decorate */\n  //    int max_code;              /* largest code with non zero frequency */\n  //    ushf *bl_count;            /* number of codes at each bit length */\n  {\n    var next_code = new Array(MAX_BITS$1 + 1);\n    /* next code value for each bit length */\n\n    var code = 0;\n    /* running code value */\n\n    var bits;\n    /* bit index */\n\n    var n;\n    /* code index */\n\n    /* The distribution counts are first used to generate the code values\n     * without bit reversal.\n     */\n\n    for (bits = 1; bits <= MAX_BITS$1; bits++) {\n      next_code[bits] = code = code + bl_count[bits - 1] << 1;\n    }\n    /* Check that the bit counts in bl_count are consistent. The last code\n     * must be all ones.\n     */\n    //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n    //        \"inconsistent bit counts\");\n    //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n\n    for (n = 0; n <= max_code; n++) {\n      var len = tree[n * 2 + 1]\n      /*.Len*/\n      ;\n\n      if (len === 0) {\n        continue;\n      }\n      /* Now reverse the bits */\n\n\n      tree[n * 2]\n      /*.Code*/\n      = bi_reverse(next_code[len]++, len); //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n      //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n    }\n  };\n  /* ===========================================================================\n   * Initialize the various 'constant' tables.\n   */\n\n\n  var tr_static_init = function tr_static_init() {\n    var n;\n    /* iterates over tree elements */\n\n    var bits;\n    /* bit counter */\n\n    var length;\n    /* length value */\n\n    var code;\n    /* code value */\n\n    var dist;\n    /* distance index */\n\n    var bl_count = new Array(MAX_BITS$1 + 1);\n    /* number of codes at each bit length for an optimal tree */\n    // do check in _tr_init()\n    //if (static_init_done) return;\n\n    /* For some embedded targets, global variables are not initialized: */\n\n    /*#ifdef NO_INIT_GLOBAL_POINTERS\n      static_l_desc.static_tree = static_ltree;\n      static_l_desc.extra_bits = extra_lbits;\n      static_d_desc.static_tree = static_dtree;\n      static_d_desc.extra_bits = extra_dbits;\n      static_bl_desc.extra_bits = extra_blbits;\n    #endif*/\n\n    /* Initialize the mapping length (0..255) -> length code (0..28) */\n\n    length = 0;\n\n    for (code = 0; code < LENGTH_CODES$1 - 1; code++) {\n      base_length[code] = length;\n\n      for (n = 0; n < 1 << extra_lbits[code]; n++) {\n        _length_code[length++] = code;\n      }\n    } //Assert (length == 256, \"tr_static_init: length != 256\");\n\n    /* Note that the length 255 (match length 258) can be represented\n     * in two different ways: code 284 + 5 bits or code 285, so we\n     * overwrite length_code[255] to use the best encoding:\n     */\n\n\n    _length_code[length - 1] = code;\n    /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n\n    dist = 0;\n\n    for (code = 0; code < 16; code++) {\n      base_dist[code] = dist;\n\n      for (n = 0; n < 1 << extra_dbits[code]; n++) {\n        _dist_code[dist++] = code;\n      }\n    } //Assert (dist == 256, \"tr_static_init: dist != 256\");\n\n\n    dist >>= 7;\n    /* from now on, all distances are divided by 128 */\n\n    for (; code < D_CODES$1; code++) {\n      base_dist[code] = dist << 7;\n\n      for (n = 0; n < 1 << extra_dbits[code] - 7; n++) {\n        _dist_code[256 + dist++] = code;\n      }\n    } //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n    /* Construct the codes of the static literal tree */\n\n\n    for (bits = 0; bits <= MAX_BITS$1; bits++) {\n      bl_count[bits] = 0;\n    }\n\n    n = 0;\n\n    while (n <= 143) {\n      static_ltree[n * 2 + 1]\n      /*.Len*/\n      = 8;\n      n++;\n      bl_count[8]++;\n    }\n\n    while (n <= 255) {\n      static_ltree[n * 2 + 1]\n      /*.Len*/\n      = 9;\n      n++;\n      bl_count[9]++;\n    }\n\n    while (n <= 279) {\n      static_ltree[n * 2 + 1]\n      /*.Len*/\n      = 7;\n      n++;\n      bl_count[7]++;\n    }\n\n    while (n <= 287) {\n      static_ltree[n * 2 + 1]\n      /*.Len*/\n      = 8;\n      n++;\n      bl_count[8]++;\n    }\n    /* Codes 286 and 287 do not exist, but we must include them in the\n     * tree construction to get a canonical Huffman tree (longest code\n     * all ones)\n     */\n\n\n    gen_codes(static_ltree, L_CODES$1 + 1, bl_count);\n    /* The static distance tree is trivial: */\n\n    for (n = 0; n < D_CODES$1; n++) {\n      static_dtree[n * 2 + 1]\n      /*.Len*/\n      = 5;\n      static_dtree[n * 2]\n      /*.Code*/\n      = bi_reverse(n, 5);\n    } // Now data ready and we can init static trees\n\n\n    static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);\n    static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0, D_CODES$1, MAX_BITS$1);\n    static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0, BL_CODES$1, MAX_BL_BITS); //static_init_done = true;\n  };\n  /* ===========================================================================\n   * Initialize a new block.\n   */\n\n\n  var init_block = function init_block(s) {\n    var n;\n    /* iterates over tree elements */\n\n    /* Initialize the trees. */\n\n    for (n = 0; n < L_CODES$1; n++) {\n      s.dyn_ltree[n * 2]\n      /*.Freq*/\n      = 0;\n    }\n\n    for (n = 0; n < D_CODES$1; n++) {\n      s.dyn_dtree[n * 2]\n      /*.Freq*/\n      = 0;\n    }\n\n    for (n = 0; n < BL_CODES$1; n++) {\n      s.bl_tree[n * 2]\n      /*.Freq*/\n      = 0;\n    }\n\n    s.dyn_ltree[END_BLOCK * 2]\n    /*.Freq*/\n    = 1;\n    s.opt_len = s.static_len = 0;\n    s.last_lit = s.matches = 0;\n  };\n  /* ===========================================================================\n   * Flush the bit buffer and align the output on a byte boundary\n   */\n\n\n  var bi_windup = function bi_windup(s) {\n    if (s.bi_valid > 8) {\n      put_short(s, s.bi_buf);\n    } else if (s.bi_valid > 0) {\n      //put_byte(s, (Byte)s->bi_buf);\n      s.pending_buf[s.pending++] = s.bi_buf;\n    }\n\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n  };\n  /* ===========================================================================\n   * Copy a stored block, storing first the length and its\n   * one's complement if requested.\n   */\n\n\n  var copy_block = function copy_block(s, buf, len, header) //DeflateState *s;\n  //charf    *buf;    /* the input data */\n  //unsigned len;     /* its length */\n  //int      header;  /* true if block header must be written */\n  {\n    bi_windup(s);\n    /* align on byte boundary */\n\n    if (header) {\n      put_short(s, len);\n      put_short(s, ~len);\n    } //  while (len--) {\n    //    put_byte(s, *buf++);\n    //  }\n\n\n    s.pending_buf.set(s.window.subarray(buf, buf + len), s.pending);\n    s.pending += len;\n  };\n  /* ===========================================================================\n   * Compares to subtrees, using the tree depth as tie breaker when\n   * the subtrees have equal frequency. This minimizes the worst case length.\n   */\n\n\n  var smaller = function smaller(tree, n, m, depth) {\n    var _n2 = n * 2;\n\n    var _m2 = m * 2;\n\n    return tree[_n2]\n    /*.Freq*/\n    < tree[_m2]\n    /*.Freq*/\n    || tree[_n2]\n    /*.Freq*/\n    === tree[_m2]\n    /*.Freq*/\n    && depth[n] <= depth[m];\n  };\n  /* ===========================================================================\n   * Restore the heap property by moving down the tree starting at node k,\n   * exchanging a node with the smallest of its two sons if necessary, stopping\n   * when the heap property is re-established (each father smaller than its\n   * two sons).\n   */\n\n\n  var pqdownheap = function pqdownheap(s, tree, k) //    deflate_state *s;\n  //    ct_data *tree;  /* the tree to restore */\n  //    int k;               /* node to move down */\n  {\n    var v = s.heap[k];\n    var j = k << 1;\n    /* left son of k */\n\n    while (j <= s.heap_len) {\n      /* Set j to the smallest of the two sons: */\n      if (j < s.heap_len && smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n        j++;\n      }\n      /* Exit if v is smaller than both sons */\n\n\n      if (smaller(tree, v, s.heap[j], s.depth)) {\n        break;\n      }\n      /* Exchange v with the smallest son */\n\n\n      s.heap[k] = s.heap[j];\n      k = j;\n      /* And continue down the tree, setting j to the left son of k */\n\n      j <<= 1;\n    }\n\n    s.heap[k] = v;\n  }; // inlined manually\n  // const SMALLEST = 1;\n\n  /* ===========================================================================\n   * Send the block data compressed using the given Huffman trees\n   */\n\n\n  var compress_block = function compress_block(s, ltree, dtree) //    deflate_state *s;\n  //    const ct_data *ltree; /* literal tree */\n  //    const ct_data *dtree; /* distance tree */\n  {\n    var dist;\n    /* distance of matched string */\n\n    var lc;\n    /* match length or unmatched char (if dist == 0) */\n\n    var lx = 0;\n    /* running index in l_buf */\n\n    var code;\n    /* the code to send */\n\n    var extra;\n    /* number of extra bits to send */\n\n    if (s.last_lit !== 0) {\n      do {\n        dist = s.pending_buf[s.d_buf + lx * 2] << 8 | s.pending_buf[s.d_buf + lx * 2 + 1];\n        lc = s.pending_buf[s.l_buf + lx];\n        lx++;\n\n        if (dist === 0) {\n          send_code(s, lc, ltree);\n          /* send a literal byte */\n          //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n        } else {\n          /* Here, lc is the match length - MIN_MATCH */\n          code = _length_code[lc];\n          send_code(s, code + LITERALS$1 + 1, ltree);\n          /* send the length code */\n\n          extra = extra_lbits[code];\n\n          if (extra !== 0) {\n            lc -= base_length[code];\n            send_bits(s, lc, extra);\n            /* send the extra length bits */\n          }\n\n          dist--;\n          /* dist is now the match distance - 1 */\n\n          code = d_code(dist); //Assert (code < D_CODES, \"bad d_code\");\n\n          send_code(s, code, dtree);\n          /* send the distance code */\n\n          extra = extra_dbits[code];\n\n          if (extra !== 0) {\n            dist -= base_dist[code];\n            send_bits(s, dist, extra);\n            /* send the extra distance bits */\n          }\n        }\n        /* literal or match pair ? */\n\n        /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n        //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n        //       \"pendingBuf overflow\");\n\n      } while (lx < s.last_lit);\n    }\n\n    send_code(s, END_BLOCK, ltree);\n  };\n  /* ===========================================================================\n   * Construct one Huffman tree and assigns the code bit strings and lengths.\n   * Update the total bit length for the current block.\n   * IN assertion: the field freq is set for all tree elements.\n   * OUT assertions: the fields len and code are set to the optimal bit length\n   *     and corresponding code. The length opt_len is updated; static_len is\n   *     also updated if stree is not null. The field max_code is set.\n   */\n\n\n  var build_tree = function build_tree(s, desc) //    deflate_state *s;\n  //    tree_desc *desc; /* the tree descriptor */\n  {\n    var tree = desc.dyn_tree;\n    var stree = desc.stat_desc.static_tree;\n    var has_stree = desc.stat_desc.has_stree;\n    var elems = desc.stat_desc.elems;\n    var n, m;\n    /* iterate over heap elements */\n\n    var max_code = -1;\n    /* largest code with non zero frequency */\n\n    var node;\n    /* new node being created */\n\n    /* Construct the initial heap, with least frequent element in\n     * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n     * heap[0] is not used.\n     */\n\n    s.heap_len = 0;\n    s.heap_max = HEAP_SIZE$1;\n\n    for (n = 0; n < elems; n++) {\n      if (tree[n * 2]\n      /*.Freq*/\n      !== 0) {\n        s.heap[++s.heap_len] = max_code = n;\n        s.depth[n] = 0;\n      } else {\n        tree[n * 2 + 1]\n        /*.Len*/\n        = 0;\n      }\n    }\n    /* The pkzip format requires that at least one distance code exists,\n     * and that at least one bit should be sent even if there is only one\n     * possible code. So to avoid special checks later on we force at least\n     * two codes of non zero frequency.\n     */\n\n\n    while (s.heap_len < 2) {\n      node = s.heap[++s.heap_len] = max_code < 2 ? ++max_code : 0;\n      tree[node * 2]\n      /*.Freq*/\n      = 1;\n      s.depth[node] = 0;\n      s.opt_len--;\n\n      if (has_stree) {\n        s.static_len -= stree[node * 2 + 1]\n        /*.Len*/\n        ;\n      }\n      /* node is 0 or 1 so it does not have extra bits */\n\n    }\n\n    desc.max_code = max_code;\n    /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n     * establish sub-heaps of increasing lengths:\n     */\n\n    for (n = s.heap_len >> 1\n    /*int /2*/\n    ; n >= 1; n--) {\n      pqdownheap(s, tree, n);\n    }\n    /* Construct the Huffman tree by repeatedly combining the least two\n     * frequent nodes.\n     */\n\n\n    node = elems;\n    /* next internal node of the tree */\n\n    do {\n      //pqremove(s, tree, n);  /* n = node of least frequency */\n\n      /*** pqremove ***/\n      n = s.heap[1\n      /*SMALLEST*/\n      ];\n      s.heap[1\n      /*SMALLEST*/\n      ] = s.heap[s.heap_len--];\n      pqdownheap(s, tree, 1\n      /*SMALLEST*/\n      );\n      /***/\n\n      m = s.heap[1\n      /*SMALLEST*/\n      ];\n      /* m = node of next least frequency */\n\n      s.heap[--s.heap_max] = n;\n      /* keep the nodes sorted by frequency */\n\n      s.heap[--s.heap_max] = m;\n      /* Create a new node father of n and m */\n\n      tree[node * 2]\n      /*.Freq*/\n      = tree[n * 2]\n      /*.Freq*/\n      + tree[m * 2]\n      /*.Freq*/\n      ;\n      s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n      tree[n * 2 + 1]\n      /*.Dad*/\n      = tree[m * 2 + 1]\n      /*.Dad*/\n      = node;\n      /* and insert the new node in the heap */\n\n      s.heap[1\n      /*SMALLEST*/\n      ] = node++;\n      pqdownheap(s, tree, 1\n      /*SMALLEST*/\n      );\n    } while (s.heap_len >= 2);\n\n    s.heap[--s.heap_max] = s.heap[1\n    /*SMALLEST*/\n    ];\n    /* At this point, the fields freq and dad are set. We can now\n     * generate the bit lengths.\n     */\n\n    gen_bitlen(s, desc);\n    /* The field len is now set, we can generate the bit codes */\n\n    gen_codes(tree, max_code, s.bl_count);\n  };\n  /* ===========================================================================\n   * Scan a literal or distance tree to determine the frequencies of the codes\n   * in the bit length tree.\n   */\n\n\n  var scan_tree = function scan_tree(s, tree, max_code) //    deflate_state *s;\n  //    ct_data *tree;   /* the tree to be scanned */\n  //    int max_code;    /* and its largest code of non zero frequency */\n  {\n    var n;\n    /* iterates over all tree elements */\n\n    var prevlen = -1;\n    /* last emitted length */\n\n    var curlen;\n    /* length of current code */\n\n    var nextlen = tree[0 * 2 + 1]\n    /*.Len*/\n    ;\n    /* length of next code */\n\n    var count = 0;\n    /* repeat count of the current code */\n\n    var max_count = 7;\n    /* max repeat count */\n\n    var min_count = 4;\n    /* min repeat count */\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n    }\n\n    tree[(max_code + 1) * 2 + 1]\n    /*.Len*/\n    = 0xffff;\n    /* guard */\n\n    for (n = 0; n <= max_code; n++) {\n      curlen = nextlen;\n      nextlen = tree[(n + 1) * 2 + 1]\n      /*.Len*/\n      ;\n\n      if (++count < max_count && curlen === nextlen) {\n        continue;\n      } else if (count < min_count) {\n        s.bl_tree[curlen * 2]\n        /*.Freq*/\n        += count;\n      } else if (curlen !== 0) {\n        if (curlen !== prevlen) {\n          s.bl_tree[curlen * 2] /*.Freq*/++;\n        }\n\n        s.bl_tree[REP_3_6 * 2] /*.Freq*/++;\n      } else if (count <= 10) {\n        s.bl_tree[REPZ_3_10 * 2] /*.Freq*/++;\n      } else {\n        s.bl_tree[REPZ_11_138 * 2] /*.Freq*/++;\n      }\n\n      count = 0;\n      prevlen = curlen;\n\n      if (nextlen === 0) {\n        max_count = 138;\n        min_count = 3;\n      } else if (curlen === nextlen) {\n        max_count = 6;\n        min_count = 3;\n      } else {\n        max_count = 7;\n        min_count = 4;\n      }\n    }\n  };\n  /* ===========================================================================\n   * Send a literal or distance tree in compressed form, using the codes in\n   * bl_tree.\n   */\n\n\n  var send_tree = function send_tree(s, tree, max_code) //    deflate_state *s;\n  //    ct_data *tree; /* the tree to be scanned */\n  //    int max_code;       /* and its largest code of non zero frequency */\n  {\n    var n;\n    /* iterates over all tree elements */\n\n    var prevlen = -1;\n    /* last emitted length */\n\n    var curlen;\n    /* length of current code */\n\n    var nextlen = tree[0 * 2 + 1]\n    /*.Len*/\n    ;\n    /* length of next code */\n\n    var count = 0;\n    /* repeat count of the current code */\n\n    var max_count = 7;\n    /* max repeat count */\n\n    var min_count = 4;\n    /* min repeat count */\n\n    /* tree[max_code+1].Len = -1; */\n\n    /* guard already set */\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n    }\n\n    for (n = 0; n <= max_code; n++) {\n      curlen = nextlen;\n      nextlen = tree[(n + 1) * 2 + 1]\n      /*.Len*/\n      ;\n\n      if (++count < max_count && curlen === nextlen) {\n        continue;\n      } else if (count < min_count) {\n        do {\n          send_code(s, curlen, s.bl_tree);\n        } while (--count !== 0);\n      } else if (curlen !== 0) {\n        if (curlen !== prevlen) {\n          send_code(s, curlen, s.bl_tree);\n          count--;\n        } //Assert(count >= 3 && count <= 6, \" 3_6?\");\n\n\n        send_code(s, REP_3_6, s.bl_tree);\n        send_bits(s, count - 3, 2);\n      } else if (count <= 10) {\n        send_code(s, REPZ_3_10, s.bl_tree);\n        send_bits(s, count - 3, 3);\n      } else {\n        send_code(s, REPZ_11_138, s.bl_tree);\n        send_bits(s, count - 11, 7);\n      }\n\n      count = 0;\n      prevlen = curlen;\n\n      if (nextlen === 0) {\n        max_count = 138;\n        min_count = 3;\n      } else if (curlen === nextlen) {\n        max_count = 6;\n        min_count = 3;\n      } else {\n        max_count = 7;\n        min_count = 4;\n      }\n    }\n  };\n  /* ===========================================================================\n   * Construct the Huffman tree for the bit lengths and return the index in\n   * bl_order of the last bit length code to send.\n   */\n\n\n  var build_bl_tree = function build_bl_tree(s) {\n    var max_blindex;\n    /* index of last bit length code of non zero freq */\n\n    /* Determine the bit length frequencies for literal and distance trees */\n\n    scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n    scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n    /* Build the bit length tree: */\n\n    build_tree(s, s.bl_desc);\n    /* opt_len now includes the length of the tree representations, except\n     * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n     */\n\n    /* Determine the number of bit length codes to send. The pkzip format\n     * requires that at least 4 bit length codes be sent. (appnote.txt says\n     * 3 but the actual value used is 4.)\n     */\n\n    for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {\n      if (s.bl_tree[bl_order[max_blindex] * 2 + 1]\n      /*.Len*/\n      !== 0) {\n        break;\n      }\n    }\n    /* Update opt_len to include the bit length tree and counts */\n\n\n    s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4; //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n    //        s->opt_len, s->static_len));\n\n    return max_blindex;\n  };\n  /* ===========================================================================\n   * Send the header for a block using dynamic Huffman trees: the counts, the\n   * lengths of the bit length codes, the literal tree and the distance tree.\n   * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n   */\n\n\n  var send_all_trees = function send_all_trees(s, lcodes, dcodes, blcodes) //    deflate_state *s;\n  //    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n  {\n    var rank;\n    /* index in bl_order */\n    //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n    //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n    //        \"too many codes\");\n    //Tracev((stderr, \"\\nbl counts: \"));\n\n    send_bits(s, lcodes - 257, 5);\n    /* not +255 as stated in appnote.txt */\n\n    send_bits(s, dcodes - 1, 5);\n    send_bits(s, blcodes - 4, 4);\n    /* not -3 as stated in appnote.txt */\n\n    for (rank = 0; rank < blcodes; rank++) {\n      //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n      send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]\n      /*.Len*/\n      , 3);\n    } //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n\n    send_tree(s, s.dyn_ltree, lcodes - 1);\n    /* literal tree */\n    //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n    send_tree(s, s.dyn_dtree, dcodes - 1);\n    /* distance tree */\n    //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n  };\n  /* ===========================================================================\n   * Check if the data type is TEXT or BINARY, using the following algorithm:\n   * - TEXT if the two conditions below are satisfied:\n   *    a) There are no non-portable control characters belonging to the\n   *       \"black list\" (0..6, 14..25, 28..31).\n   *    b) There is at least one printable character belonging to the\n   *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n   * - BINARY otherwise.\n   * - The following partially-portable control characters form a\n   *   \"gray list\" that is ignored in this detection algorithm:\n   *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n   * IN assertion: the fields Freq of dyn_ltree are set.\n   */\n\n\n  var detect_data_type = function detect_data_type(s) {\n    /* black_mask is the bit mask of black-listed bytes\n     * set bits 0..6, 14..25, and 28..31\n     * 0xf3ffc07f = binary 11110011111111111100000001111111\n     */\n    var black_mask = 0xf3ffc07f;\n    var n;\n    /* Check for non-textual (\"black-listed\") bytes. */\n\n    for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n      if (black_mask & 1 && s.dyn_ltree[n * 2]\n      /*.Freq*/\n      !== 0) {\n        return Z_BINARY;\n      }\n    }\n    /* Check for textual (\"white-listed\") bytes. */\n\n\n    if (s.dyn_ltree[9 * 2]\n    /*.Freq*/\n    !== 0 || s.dyn_ltree[10 * 2]\n    /*.Freq*/\n    !== 0 || s.dyn_ltree[13 * 2]\n    /*.Freq*/\n    !== 0) {\n      return Z_TEXT;\n    }\n\n    for (n = 32; n < LITERALS$1; n++) {\n      if (s.dyn_ltree[n * 2]\n      /*.Freq*/\n      !== 0) {\n        return Z_TEXT;\n      }\n    }\n    /* There are no \"black-listed\" or \"white-listed\" bytes:\n     * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n     */\n\n\n    return Z_BINARY;\n  };\n\n  var static_init_done = false;\n  /* ===========================================================================\n   * Initialize the tree data structures for a new zlib stream.\n   */\n\n  var _tr_init$1 = function _tr_init(s) {\n    if (!static_init_done) {\n      tr_static_init();\n      static_init_done = true;\n    }\n\n    s.l_desc = new TreeDesc(s.dyn_ltree, static_l_desc);\n    s.d_desc = new TreeDesc(s.dyn_dtree, static_d_desc);\n    s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n    /* Initialize the first block of the first file: */\n\n    init_block(s);\n  };\n  /* ===========================================================================\n   * Send a stored block\n   */\n\n\n  var _tr_stored_block$1 = function _tr_stored_block(s, buf, stored_len, last) //DeflateState *s;\n  //charf *buf;       /* input block */\n  //ulg stored_len;   /* length of input block */\n  //int last;         /* one if this is the last block for a file */\n  {\n    send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);\n    /* send block type */\n\n    copy_block(s, buf, stored_len, true);\n    /* with header */\n  };\n  /* ===========================================================================\n   * Send one empty static block to give enough lookahead for inflate.\n   * This takes 10 bits, of which 7 may remain in the bit buffer.\n   */\n\n\n  var _tr_align$1 = function _tr_align(s) {\n    send_bits(s, STATIC_TREES << 1, 3);\n    send_code(s, END_BLOCK, static_ltree);\n    bi_flush(s);\n  };\n  /* ===========================================================================\n   * Determine the best encoding for the current block: dynamic trees, static\n   * trees or store, and output the encoded block to the zip file.\n   */\n\n\n  var _tr_flush_block$1 = function _tr_flush_block(s, buf, stored_len, last) //DeflateState *s;\n  //charf *buf;       /* input block, or NULL if too old */\n  //ulg stored_len;   /* length of input block */\n  //int last;         /* one if this is the last block for a file */\n  {\n    var opt_lenb, static_lenb;\n    /* opt_len and static_len in bytes */\n\n    var max_blindex = 0;\n    /* index of last bit length code of non zero freq */\n\n    /* Build the Huffman trees unless a stored block is forced */\n\n    if (s.level > 0) {\n      /* Check if the file is binary or text */\n      if (s.strm.data_type === Z_UNKNOWN$1) {\n        s.strm.data_type = detect_data_type(s);\n      }\n      /* Construct the literal and distance trees */\n\n\n      build_tree(s, s.l_desc); // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n      //        s->static_len));\n\n      build_tree(s, s.d_desc); // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n      //        s->static_len));\n\n      /* At this point, opt_len and static_len are the total bit lengths of\n       * the compressed block data, excluding the tree representations.\n       */\n\n      /* Build the bit length tree for the above two trees, and get the index\n       * in bl_order of the last bit length code to send.\n       */\n\n      max_blindex = build_bl_tree(s);\n      /* Determine the best encoding. Compute the block lengths in bytes. */\n\n      opt_lenb = s.opt_len + 3 + 7 >>> 3;\n      static_lenb = s.static_len + 3 + 7 >>> 3; // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n      //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n      //        s->last_lit));\n\n      if (static_lenb <= opt_lenb) {\n        opt_lenb = static_lenb;\n      }\n    } else {\n      // Assert(buf != (char*)0, \"lost buf\");\n      opt_lenb = static_lenb = stored_len + 5;\n      /* force a stored block */\n    }\n\n    if (stored_len + 4 <= opt_lenb && buf !== -1) {\n      /* 4: two words for the lengths */\n\n      /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n       * Otherwise we can't have processed more than WSIZE input bytes since\n       * the last block flush, because compression would have been\n       * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n       * transform a block into a stored block.\n       */\n      _tr_stored_block$1(s, buf, stored_len, last);\n    } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {\n      send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n      compress_block(s, static_ltree, static_dtree);\n    } else {\n      send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n      send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n      compress_block(s, s.dyn_ltree, s.dyn_dtree);\n    } // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n\n    /* The above check is made mod 2^32, for files larger than 512 MB\n     * and uLong implemented on 32 bits.\n     */\n\n\n    init_block(s);\n\n    if (last) {\n      bi_windup(s);\n    } // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n    //       s->compressed_len-7*last));\n\n  };\n  /* ===========================================================================\n   * Save the match info and tally the frequency counts. Return true if\n   * the current block must be flushed.\n   */\n\n\n  var _tr_tally$1 = function _tr_tally(s, dist, lc) //    deflate_state *s;\n  //    unsigned dist;  /* distance of matched string */\n  //    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n  {\n    //let out_length, in_length, dcode;\n    s.pending_buf[s.d_buf + s.last_lit * 2] = dist >>> 8 & 0xff;\n    s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n    s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n    s.last_lit++;\n\n    if (dist === 0) {\n      /* lc is the unmatched char */\n      s.dyn_ltree[lc * 2] /*.Freq*/++;\n    } else {\n      s.matches++;\n      /* Here, lc is the match length - MIN_MATCH */\n\n      dist--;\n      /* dist = match distance - 1 */\n      //Assert((ush)dist < (ush)MAX_DIST(s) &&\n      //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n      //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n      s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2] /*.Freq*/++;\n      s.dyn_dtree[d_code(dist) * 2] /*.Freq*/++;\n    } // (!) This block is disabled in zlib defaults,\n    // don't enable it for binary compatibility\n    //#ifdef TRUNCATE_BLOCK\n    //  /* Try to guess if it is profitable to stop the current block here */\n    //  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n    //    /* Compute an upper bound for the compressed length */\n    //    out_length = s.last_lit*8;\n    //    in_length = s.strstart - s.block_start;\n    //\n    //    for (dcode = 0; dcode < D_CODES; dcode++) {\n    //      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n    //    }\n    //    out_length >>>= 3;\n    //    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n    //    //       s->last_lit, in_length, out_length,\n    //    //       100L - out_length*100L/in_length));\n    //    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n    //      return true;\n    //    }\n    //  }\n    //#endif\n\n\n    return s.last_lit === s.lit_bufsize - 1;\n    /* We avoid equality with lit_bufsize because of wraparound at 64K\n     * on 16 bit machines and because stored blocks are restricted to\n     * 64K-1 bytes.\n     */\n  };\n\n  var _tr_init_1 = _tr_init$1;\n  var _tr_stored_block_1 = _tr_stored_block$1;\n  var _tr_flush_block_1 = _tr_flush_block$1;\n  var _tr_tally_1 = _tr_tally$1;\n  var _tr_align_1 = _tr_align$1;\n  var trees = {\n    _tr_init: _tr_init_1,\n    _tr_stored_block: _tr_stored_block_1,\n    _tr_flush_block: _tr_flush_block_1,\n    _tr_tally: _tr_tally_1,\n    _tr_align: _tr_align_1\n  };\n\n  // It isn't worth it to make additional optimizations as in original.\n  // Small size is preferable.\n  // (C) 1995-2013 Jean-loup Gailly and Mark Adler\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  var adler32 = function adler32(adler, buf, len, pos) {\n    var s1 = adler & 0xffff | 0,\n        s2 = adler >>> 16 & 0xffff | 0,\n        n = 0;\n\n    while (len !== 0) {\n      // Set limit ~ twice less than 5552, to keep\n      // s2 in 31-bits, because we force signed ints.\n      // in other case %= will fail.\n      n = len > 2000 ? 2000 : len;\n      len -= n;\n\n      do {\n        s1 = s1 + buf[pos++] | 0;\n        s2 = s2 + s1 | 0;\n      } while (--n);\n\n      s1 %= 65521;\n      s2 %= 65521;\n    }\n\n    return s1 | s2 << 16 | 0;\n  };\n\n  var adler32_1 = adler32;\n\n  // So write code to minimize size - no pregenerated tables\n  // and array tools dependencies.\n  // (C) 1995-2013 Jean-loup Gailly and Mark Adler\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n  // Use ordinary array, since untyped makes no boost here\n\n  var makeTable = function makeTable() {\n    var c,\n        table = [];\n\n    for (var n = 0; n < 256; n++) {\n      c = n;\n\n      for (var k = 0; k < 8; k++) {\n        c = c & 1 ? 0xEDB88320 ^ c >>> 1 : c >>> 1;\n      }\n\n      table[n] = c;\n    }\n\n    return table;\n  }; // Create table on load. Just 255 signed longs. Not a problem.\n\n\n  var crcTable = new Uint32Array(makeTable());\n\n  var crc32 = function crc32(crc, buf, len, pos) {\n    var t = crcTable;\n    var end = pos + len;\n    crc ^= -1;\n\n    for (var i = pos; i < end; i++) {\n      crc = crc >>> 8 ^ t[(crc ^ buf[i]) & 0xFF];\n    }\n\n    return crc ^ -1; // >>> 0;\n  };\n\n  var crc32_1 = crc32;\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  var messages = {\n    2: 'need dictionary',\n\n    /* Z_NEED_DICT       2  */\n    1: 'stream end',\n\n    /* Z_STREAM_END      1  */\n    0: '',\n\n    /* Z_OK              0  */\n    '-1': 'file error',\n\n    /* Z_ERRNO         (-1) */\n    '-2': 'stream error',\n\n    /* Z_STREAM_ERROR  (-2) */\n    '-3': 'data error',\n\n    /* Z_DATA_ERROR    (-3) */\n    '-4': 'insufficient memory',\n\n    /* Z_MEM_ERROR     (-4) */\n    '-5': 'buffer error',\n\n    /* Z_BUF_ERROR     (-5) */\n    '-6': 'incompatible version'\n    /* Z_VERSION_ERROR (-6) */\n\n  };\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  var constants$2 = {\n    /* Allowed flush values; see deflate() and inflate() below for details */\n    Z_NO_FLUSH: 0,\n    Z_PARTIAL_FLUSH: 1,\n    Z_SYNC_FLUSH: 2,\n    Z_FULL_FLUSH: 3,\n    Z_FINISH: 4,\n    Z_BLOCK: 5,\n    Z_TREES: 6,\n\n    /* Return codes for the compression/decompression functions. Negative values\n    * are errors, positive values are used for special but normal events.\n    */\n    Z_OK: 0,\n    Z_STREAM_END: 1,\n    Z_NEED_DICT: 2,\n    Z_ERRNO: -1,\n    Z_STREAM_ERROR: -2,\n    Z_DATA_ERROR: -3,\n    Z_MEM_ERROR: -4,\n    Z_BUF_ERROR: -5,\n    //Z_VERSION_ERROR: -6,\n\n    /* compression levels */\n    Z_NO_COMPRESSION: 0,\n    Z_BEST_SPEED: 1,\n    Z_BEST_COMPRESSION: 9,\n    Z_DEFAULT_COMPRESSION: -1,\n    Z_FILTERED: 1,\n    Z_HUFFMAN_ONLY: 2,\n    Z_RLE: 3,\n    Z_FIXED: 4,\n    Z_DEFAULT_STRATEGY: 0,\n\n    /* Possible values of the data_type field (though see inflate()) */\n    Z_BINARY: 0,\n    Z_TEXT: 1,\n    //Z_ASCII:                1, // = Z_TEXT (deprecated)\n    Z_UNKNOWN: 2,\n\n    /* The deflate compression method */\n    Z_DEFLATED: 8 //Z_NULL:                 null // Use -1 or null inline, depending on var type\n\n  };\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n\n  var _tr_init = trees._tr_init,\n      _tr_stored_block = trees._tr_stored_block,\n      _tr_flush_block = trees._tr_flush_block,\n      _tr_tally = trees._tr_tally,\n      _tr_align = trees._tr_align;\n  /* Public constants ==========================================================*/\n\n  /* ===========================================================================*/\n\n  var Z_NO_FLUSH$2 = constants$2.Z_NO_FLUSH,\n      Z_PARTIAL_FLUSH = constants$2.Z_PARTIAL_FLUSH,\n      Z_FULL_FLUSH$1 = constants$2.Z_FULL_FLUSH,\n      Z_FINISH$3 = constants$2.Z_FINISH,\n      Z_BLOCK$1 = constants$2.Z_BLOCK,\n      Z_OK$3 = constants$2.Z_OK,\n      Z_STREAM_END$3 = constants$2.Z_STREAM_END,\n      Z_STREAM_ERROR$2 = constants$2.Z_STREAM_ERROR,\n      Z_DATA_ERROR$2 = constants$2.Z_DATA_ERROR,\n      Z_BUF_ERROR$1 = constants$2.Z_BUF_ERROR,\n      Z_DEFAULT_COMPRESSION$1 = constants$2.Z_DEFAULT_COMPRESSION,\n      Z_FILTERED = constants$2.Z_FILTERED,\n      Z_HUFFMAN_ONLY = constants$2.Z_HUFFMAN_ONLY,\n      Z_RLE = constants$2.Z_RLE,\n      Z_FIXED = constants$2.Z_FIXED,\n      Z_DEFAULT_STRATEGY$1 = constants$2.Z_DEFAULT_STRATEGY,\n      Z_UNKNOWN = constants$2.Z_UNKNOWN,\n      Z_DEFLATED$2 = constants$2.Z_DEFLATED;\n  /*============================================================================*/\n\n  var MAX_MEM_LEVEL = 9;\n  /* Maximum value for memLevel in deflateInit2 */\n\n  var MAX_WBITS$1 = 15;\n  /* 32K LZ77 window */\n\n  var DEF_MEM_LEVEL = 8;\n  var LENGTH_CODES = 29;\n  /* number of length codes, not counting the special END_BLOCK code */\n\n  var LITERALS = 256;\n  /* number of literal bytes 0..255 */\n\n  var L_CODES = LITERALS + 1 + LENGTH_CODES;\n  /* number of Literal or Length codes, including the END_BLOCK code */\n\n  var D_CODES = 30;\n  /* number of distance codes */\n\n  var BL_CODES = 19;\n  /* number of codes used to transfer the bit lengths */\n\n  var HEAP_SIZE = 2 * L_CODES + 1;\n  /* maximum heap size */\n\n  var MAX_BITS = 15;\n  /* All codes must not exceed MAX_BITS bits */\n\n  var MIN_MATCH = 3;\n  var MAX_MATCH = 258;\n  var MIN_LOOKAHEAD = MAX_MATCH + MIN_MATCH + 1;\n  var PRESET_DICT = 0x20;\n  var INIT_STATE = 42;\n  var EXTRA_STATE = 69;\n  var NAME_STATE = 73;\n  var COMMENT_STATE = 91;\n  var HCRC_STATE = 103;\n  var BUSY_STATE = 113;\n  var FINISH_STATE = 666;\n  var BS_NEED_MORE = 1;\n  /* block not completed, need more input or more output */\n\n  var BS_BLOCK_DONE = 2;\n  /* block flush performed */\n\n  var BS_FINISH_STARTED = 3;\n  /* finish started, need only more output at next deflate */\n\n  var BS_FINISH_DONE = 4;\n  /* finish done, accept no more input or output */\n\n  var OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\n  var err = function err(strm, errorCode) {\n    strm.msg = messages[errorCode];\n    return errorCode;\n  };\n\n  var rank = function rank(f) {\n    return (f << 1) - (f > 4 ? 9 : 0);\n  };\n\n  var zero = function zero(buf) {\n    var len = buf.length;\n\n    while (--len >= 0) {\n      buf[len] = 0;\n    }\n  };\n  /* eslint-disable new-cap */\n\n\n  var HASH_ZLIB = function HASH_ZLIB(s, prev, data) {\n    return (prev << s.hash_shift ^ data) & s.hash_mask;\n  }; // This hash causes less collisions, https://github.com/nodeca/pako/issues/135\n  // But breaks binary compatibility\n  //let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;\n\n\n  var HASH = HASH_ZLIB;\n  /* =========================================================================\n   * Flush as much pending output as possible. All deflate() output goes\n   * through this function so some applications may wish to modify it\n   * to avoid allocating a large strm->output buffer and copying into it.\n   * (See also read_buf()).\n   */\n\n  var flush_pending = function flush_pending(strm) {\n    var s = strm.state; //_tr_flush_bits(s);\n\n    var len = s.pending;\n\n    if (len > strm.avail_out) {\n      len = strm.avail_out;\n    }\n\n    if (len === 0) {\n      return;\n    }\n\n    strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);\n    strm.next_out += len;\n    s.pending_out += len;\n    strm.total_out += len;\n    strm.avail_out -= len;\n    s.pending -= len;\n\n    if (s.pending === 0) {\n      s.pending_out = 0;\n    }\n  };\n\n  var flush_block_only = function flush_block_only(s, last) {\n    _tr_flush_block(s, s.block_start >= 0 ? s.block_start : -1, s.strstart - s.block_start, last);\n\n    s.block_start = s.strstart;\n    flush_pending(s.strm);\n  };\n\n  var put_byte = function put_byte(s, b) {\n    s.pending_buf[s.pending++] = b;\n  };\n  /* =========================================================================\n   * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n   * IN assertion: the stream state is correct and there is enough room in\n   * pending_buf.\n   */\n\n\n  var putShortMSB = function putShortMSB(s, b) {\n    //  put_byte(s, (Byte)(b >> 8));\n    //  put_byte(s, (Byte)(b & 0xff));\n    s.pending_buf[s.pending++] = b >>> 8 & 0xff;\n    s.pending_buf[s.pending++] = b & 0xff;\n  };\n  /* ===========================================================================\n   * Read a new buffer from the current input stream, update the adler32\n   * and total number of bytes read.  All deflate() input goes through\n   * this function so some applications may wish to modify it to avoid\n   * allocating a large strm->input buffer and copying from it.\n   * (See also flush_pending()).\n   */\n\n\n  var read_buf = function read_buf(strm, buf, start, size) {\n    var len = strm.avail_in;\n\n    if (len > size) {\n      len = size;\n    }\n\n    if (len === 0) {\n      return 0;\n    }\n\n    strm.avail_in -= len; // zmemcpy(buf, strm->next_in, len);\n\n    buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);\n\n    if (strm.state.wrap === 1) {\n      strm.adler = adler32_1(strm.adler, buf, len, start);\n    } else if (strm.state.wrap === 2) {\n      strm.adler = crc32_1(strm.adler, buf, len, start);\n    }\n\n    strm.next_in += len;\n    strm.total_in += len;\n    return len;\n  };\n  /* ===========================================================================\n   * Set match_start to the longest match starting at the given string and\n   * return its length. Matches shorter or equal to prev_length are discarded,\n   * in which case the result is equal to prev_length and match_start is\n   * garbage.\n   * IN assertions: cur_match is the head of the hash chain for the current\n   *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n   * OUT assertion: the match length is not greater than s->lookahead.\n   */\n\n\n  var longest_match = function longest_match(s, cur_match) {\n    var chain_length = s.max_chain_length;\n    /* max hash chain length */\n\n    var scan = s.strstart;\n    /* current string */\n\n    var match;\n    /* matched string */\n\n    var len;\n    /* length of current match */\n\n    var best_len = s.prev_length;\n    /* best match length so far */\n\n    var nice_match = s.nice_match;\n    /* stop if match long enough */\n\n    var limit = s.strstart > s.w_size - MIN_LOOKAHEAD ? s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0\n    /*NIL*/\n    ;\n    var _win = s.window; // shortcut\n\n    var wmask = s.w_mask;\n    var prev = s.prev;\n    /* Stop when cur_match becomes <= limit. To simplify the code,\n     * we prevent matches with the string of window index 0.\n     */\n\n    var strend = s.strstart + MAX_MATCH;\n    var scan_end1 = _win[scan + best_len - 1];\n    var scan_end = _win[scan + best_len];\n    /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n     * It is easy to get rid of this optimization if necessary.\n     */\n    // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n    /* Do not waste too much time if we already have a good match: */\n\n    if (s.prev_length >= s.good_match) {\n      chain_length >>= 2;\n    }\n    /* Do not look for matches beyond the end of the input. This is necessary\n     * to make deflate deterministic.\n     */\n\n\n    if (nice_match > s.lookahead) {\n      nice_match = s.lookahead;\n    } // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n\n    do {\n      // Assert(cur_match < s->strstart, \"no future\");\n      match = cur_match;\n      /* Skip to next match if the match length cannot increase\n       * or if the match length is less than 2.  Note that the checks below\n       * for insufficient lookahead only occur occasionally for performance\n       * reasons.  Therefore uninitialized memory will be accessed, and\n       * conditional jumps will be made that depend on those values.\n       * However the length of the match is limited to the lookahead, so\n       * the output of deflate is not affected by the uninitialized values.\n       */\n\n      if (_win[match + best_len] !== scan_end || _win[match + best_len - 1] !== scan_end1 || _win[match] !== _win[scan] || _win[++match] !== _win[scan + 1]) {\n        continue;\n      }\n      /* The check at best_len-1 can be removed because it will be made\n       * again later. (This heuristic is not always a win.)\n       * It is not necessary to compare scan[2] and match[2] since they\n       * are always equal when the other bytes match, given that\n       * the hash keys are equal and that HASH_BITS >= 8.\n       */\n\n\n      scan += 2;\n      match++; // Assert(*scan == *match, \"match[2]?\");\n\n      /* We check for insufficient lookahead only every 8th comparison;\n       * the 256th check will be made at strstart+258.\n       */\n\n      do {\n        /*jshint noempty:false*/\n      } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && _win[++scan] === _win[++match] && scan < strend); // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n\n      len = MAX_MATCH - (strend - scan);\n      scan = strend - MAX_MATCH;\n\n      if (len > best_len) {\n        s.match_start = cur_match;\n        best_len = len;\n\n        if (len >= nice_match) {\n          break;\n        }\n\n        scan_end1 = _win[scan + best_len - 1];\n        scan_end = _win[scan + best_len];\n      }\n    } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n    if (best_len <= s.lookahead) {\n      return best_len;\n    }\n\n    return s.lookahead;\n  };\n  /* ===========================================================================\n   * Fill the window when the lookahead becomes insufficient.\n   * Updates strstart and lookahead.\n   *\n   * IN assertion: lookahead < MIN_LOOKAHEAD\n   * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n   *    At least one byte has been read, or avail_in == 0; reads are\n   *    performed for at least two bytes (required for the zip translate_eol\n   *    option -- not supported here).\n   */\n\n\n  var fill_window = function fill_window(s) {\n    var _w_size = s.w_size;\n    var p, n, m, more, str; //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n    do {\n      more = s.window_size - s.lookahead - s.strstart; // JS ints have 32 bit, block below not needed\n\n      /* Deal with !@#$% 64K limit: */\n      //if (sizeof(int) <= 2) {\n      //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n      //        more = wsize;\n      //\n      //  } else if (more == (unsigned)(-1)) {\n      //        /* Very unlikely, but possible on 16 bit machine if\n      //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n      //         */\n      //        more--;\n      //    }\n      //}\n\n      /* If the window is almost full and there is insufficient lookahead,\n       * move the upper half to the lower one to make room in the upper half.\n       */\n\n      if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n        s.window.set(s.window.subarray(_w_size, _w_size + _w_size), 0);\n        s.match_start -= _w_size;\n        s.strstart -= _w_size;\n        /* we now have strstart >= MAX_DIST */\n\n        s.block_start -= _w_size;\n        /* Slide the hash table (could be avoided with 32 bit values\n         at the expense of memory usage). We slide even when level == 0\n         to keep the hash table consistent if we switch back to level > 0\n         later. (Using level 0 permanently is not an optimal usage of\n         zlib, so we don't care about this pathological case.)\n         */\n\n        n = s.hash_size;\n        p = n;\n\n        do {\n          m = s.head[--p];\n          s.head[p] = m >= _w_size ? m - _w_size : 0;\n        } while (--n);\n\n        n = _w_size;\n        p = n;\n\n        do {\n          m = s.prev[--p];\n          s.prev[p] = m >= _w_size ? m - _w_size : 0;\n          /* If n is not on any hash chain, prev[n] is garbage but\n           * its value will never be used.\n           */\n        } while (--n);\n\n        more += _w_size;\n      }\n\n      if (s.strm.avail_in === 0) {\n        break;\n      }\n      /* If there was no sliding:\n       *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n       *    more == window_size - lookahead - strstart\n       * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n       * => more >= window_size - 2*WSIZE + 2\n       * In the BIG_MEM or MMAP case (not yet supported),\n       *   window_size == input_size + MIN_LOOKAHEAD  &&\n       *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n       * Otherwise, window_size == 2*WSIZE so more >= 2.\n       * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n       */\n      //Assert(more >= 2, \"more < 2\");\n\n\n      n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n      s.lookahead += n;\n      /* Initialize the hash value now that we have some input: */\n\n      if (s.lookahead + s.insert >= MIN_MATCH) {\n        str = s.strstart - s.insert;\n        s.ins_h = s.window[str];\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n\n        s.ins_h = HASH(s, s.ins_h, s.window[str + 1]); //#if MIN_MATCH != 3\n        //        Call update_hash() MIN_MATCH-3 more times\n        //#endif\n\n        while (s.insert) {\n          /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n          s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n          s.prev[str & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = str;\n          str++;\n          s.insert--;\n\n          if (s.lookahead + s.insert < MIN_MATCH) {\n            break;\n          }\n        }\n      }\n      /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n       * but this is not important since only literal bytes will be emitted.\n       */\n\n    } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n    /* If the WIN_INIT bytes after the end of the current data have never been\n     * written, then zero those bytes in order to avoid memory check reports of\n     * the use of uninitialized (or uninitialised as Julian writes) bytes by\n     * the longest match routines.  Update the high water mark for the next\n     * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n     * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n     */\n    //  if (s.high_water < s.window_size) {\n    //    const curr = s.strstart + s.lookahead;\n    //    let init = 0;\n    //\n    //    if (s.high_water < curr) {\n    //      /* Previous high water mark below current data -- zero WIN_INIT\n    //       * bytes or up to end of window, whichever is less.\n    //       */\n    //      init = s.window_size - curr;\n    //      if (init > WIN_INIT)\n    //        init = WIN_INIT;\n    //      zmemzero(s->window + curr, (unsigned)init);\n    //      s->high_water = curr + init;\n    //    }\n    //    else if (s->high_water < (ulg)curr + WIN_INIT) {\n    //      /* High water mark at or above current data, but below current data\n    //       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n    //       * to end of window, whichever is less.\n    //       */\n    //      init = (ulg)curr + WIN_INIT - s->high_water;\n    //      if (init > s->window_size - s->high_water)\n    //        init = s->window_size - s->high_water;\n    //      zmemzero(s->window + s->high_water, (unsigned)init);\n    //      s->high_water += init;\n    //    }\n    //  }\n    //\n    //  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n    //    \"not enough room for search\");\n\n  };\n  /* ===========================================================================\n   * Copy without compression as much as possible from the input stream, return\n   * the current block state.\n   * This function does not insert new strings in the dictionary since\n   * uncompressible data is probably not useful. This function is used\n   * only for the level=0 compression option.\n   * NOTE: this function should be optimized to avoid extra copying from\n   * window to pending_buf.\n   */\n\n\n  var deflate_stored = function deflate_stored(s, flush) {\n    /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n     * to pending_buf_size, and each stored block has a 5 byte header:\n     */\n    var max_block_size = 0xffff;\n\n    if (max_block_size > s.pending_buf_size - 5) {\n      max_block_size = s.pending_buf_size - 5;\n    }\n    /* Copy as much as possible from input to output: */\n\n\n    for (;;) {\n      /* Fill the window as much as possible: */\n      if (s.lookahead <= 1) {\n        //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n        //  s->block_start >= (long)s->w_size, \"slide too late\");\n        //      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n        //        s.block_start >= s.w_size)) {\n        //        throw  new Error(\"slide too late\");\n        //      }\n        fill_window(s);\n\n        if (s.lookahead === 0 && flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n\n        if (s.lookahead === 0) {\n          break;\n        }\n        /* flush the current block */\n\n      } //Assert(s->block_start >= 0L, \"block gone\");\n      //    if (s.block_start < 0) throw new Error(\"block gone\");\n\n\n      s.strstart += s.lookahead;\n      s.lookahead = 0;\n      /* Emit a stored block if pending_buf will be full: */\n\n      var max_start = s.block_start + max_block_size;\n\n      if (s.strstart === 0 || s.strstart >= max_start) {\n        /* strstart == 0 is possible when wraparound on 16-bit machine */\n        s.lookahead = s.strstart - max_start;\n        s.strstart = max_start;\n        /*** FLUSH_BLOCK(s, 0); ***/\n\n        flush_block_only(s, false);\n\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n\n      }\n      /* Flush if we may have to slide, otherwise block_start may become\n       * negative and the data will be gone:\n       */\n\n\n      if (s.strstart - s.block_start >= s.w_size - MIN_LOOKAHEAD) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n\n      }\n    }\n\n    s.insert = 0;\n\n    if (flush === Z_FINISH$3) {\n      /*** FLUSH_BLOCK(s, 1); ***/\n      flush_block_only(s, true);\n\n      if (s.strm.avail_out === 0) {\n        return BS_FINISH_STARTED;\n      }\n      /***/\n\n\n      return BS_FINISH_DONE;\n    }\n\n    if (s.strstart > s.block_start) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n    }\n\n    return BS_NEED_MORE;\n  };\n  /* ===========================================================================\n   * Compress as much as possible from the input stream, return the current\n   * block state.\n   * This function does not perform lazy evaluation of matches and inserts\n   * new strings in the dictionary only for unmatched strings or for short\n   * matches. It is used only for the fast compression options.\n   */\n\n\n  var deflate_fast = function deflate_fast(s, flush) {\n    var hash_head;\n    /* head of the hash chain */\n\n    var bflush;\n    /* set if current block must be flushed */\n\n    for (;;) {\n      /* Make sure that we always have enough lookahead, except\n       * at the end of the input file. We need MAX_MATCH bytes\n       * for the next match, plus MIN_MATCH bytes to insert the\n       * string following the next match.\n       */\n      if (s.lookahead < MIN_LOOKAHEAD) {\n        fill_window(s);\n\n        if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n\n        if (s.lookahead === 0) {\n          break;\n          /* flush the current block */\n        }\n      }\n      /* Insert the string window[strstart .. strstart+2] in the\n       * dictionary, and set hash_head to the head of the hash chain:\n       */\n\n\n      hash_head = 0\n      /*NIL*/\n      ;\n\n      if (s.lookahead >= MIN_MATCH) {\n        /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n        hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = s.strstart;\n        /***/\n      }\n      /* Find the longest match, discarding those <= prev_length.\n       * At this point we have always match_length < MIN_MATCH\n       */\n\n\n      if (hash_head !== 0\n      /*NIL*/\n      && s.strstart - hash_head <= s.w_size - MIN_LOOKAHEAD) {\n        /* To simplify the code, we prevent matches with the string\n         * of window index 0 (in particular we have to avoid a match\n         * of the string with itself at the start of the input file).\n         */\n        s.match_length = longest_match(s, hash_head);\n        /* longest_match() sets match_start */\n      }\n\n      if (s.match_length >= MIN_MATCH) {\n        // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n        /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                       s.match_length - MIN_MATCH, bflush); ***/\n        bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n        s.lookahead -= s.match_length;\n        /* Insert new strings in the hash table only if the match length\n         * is not too large. This saves time but degrades compression.\n         */\n\n        if (s.match_length <= s.max_lazy_match\n        /*max_insert_length*/\n        && s.lookahead >= MIN_MATCH) {\n          s.match_length--;\n          /* string at strstart already in table */\n\n          do {\n            s.strstart++;\n            /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n\n            s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n            hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n            s.head[s.ins_h] = s.strstart;\n            /***/\n\n            /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n             * always MIN_MATCH bytes ahead.\n             */\n          } while (--s.match_length !== 0);\n\n          s.strstart++;\n        } else {\n          s.strstart += s.match_length;\n          s.match_length = 0;\n          s.ins_h = s.window[s.strstart];\n          /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n\n          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]); //#if MIN_MATCH != 3\n          //                Call UPDATE_HASH() MIN_MATCH-3 more times\n          //#endif\n\n          /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n           * matter since it will be recomputed at next deflate call.\n           */\n        }\n      } else {\n        /* No match, output a literal byte */\n        //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n\n        /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n        bflush = _tr_tally(s, 0, s.window[s.strstart]);\n        s.lookahead--;\n        s.strstart++;\n      }\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n\n      }\n    }\n\n    s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n\n    if (flush === Z_FINISH$3) {\n      /*** FLUSH_BLOCK(s, 1); ***/\n      flush_block_only(s, true);\n\n      if (s.strm.avail_out === 0) {\n        return BS_FINISH_STARTED;\n      }\n      /***/\n\n\n      return BS_FINISH_DONE;\n    }\n\n    if (s.last_lit) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n    }\n\n    return BS_BLOCK_DONE;\n  };\n  /* ===========================================================================\n   * Same as above, but achieves better compression. We use a lazy\n   * evaluation for matches: a match is finally adopted only if there is\n   * no better match at the next window position.\n   */\n\n\n  var deflate_slow = function deflate_slow(s, flush) {\n    var hash_head;\n    /* head of hash chain */\n\n    var bflush;\n    /* set if current block must be flushed */\n\n    var max_insert;\n    /* Process the input block. */\n\n    for (;;) {\n      /* Make sure that we always have enough lookahead, except\n       * at the end of the input file. We need MAX_MATCH bytes\n       * for the next match, plus MIN_MATCH bytes to insert the\n       * string following the next match.\n       */\n      if (s.lookahead < MIN_LOOKAHEAD) {\n        fill_window(s);\n\n        if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n\n        if (s.lookahead === 0) {\n          break;\n        }\n        /* flush the current block */\n\n      }\n      /* Insert the string window[strstart .. strstart+2] in the\n       * dictionary, and set hash_head to the head of the hash chain:\n       */\n\n\n      hash_head = 0\n      /*NIL*/\n      ;\n\n      if (s.lookahead >= MIN_MATCH) {\n        /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n        hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = s.strstart;\n        /***/\n      }\n      /* Find the longest match, discarding those <= prev_length.\n       */\n\n\n      s.prev_length = s.match_length;\n      s.prev_match = s.match_start;\n      s.match_length = MIN_MATCH - 1;\n\n      if (hash_head !== 0\n      /*NIL*/\n      && s.prev_length < s.max_lazy_match && s.strstart - hash_head <= s.w_size - MIN_LOOKAHEAD\n      /*MAX_DIST(s)*/\n      ) {\n        /* To simplify the code, we prevent matches with the string\n         * of window index 0 (in particular we have to avoid a match\n         * of the string with itself at the start of the input file).\n         */\n        s.match_length = longest_match(s, hash_head);\n        /* longest_match() sets match_start */\n\n        if (s.match_length <= 5 && (s.strategy === Z_FILTERED || s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096\n        /*TOO_FAR*/\n        )) {\n          /* If prev_match is also MIN_MATCH, match_start is garbage\n           * but we will ignore the current match anyway.\n           */\n          s.match_length = MIN_MATCH - 1;\n        }\n      }\n      /* If there was a match at the previous step and the current\n       * match is not better, output the previous match:\n       */\n\n\n      if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n        max_insert = s.strstart + s.lookahead - MIN_MATCH;\n        /* Do not insert strings in hash table beyond this. */\n        //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n        /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                       s.prev_length - MIN_MATCH, bflush);***/\n\n        bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n        /* Insert in hash table all strings up to the end of the match.\n         * strstart-1 and strstart are already inserted. If there is not\n         * enough lookahead, the last two strings are not inserted in\n         * the hash table.\n         */\n\n        s.lookahead -= s.prev_length - 1;\n        s.prev_length -= 2;\n\n        do {\n          if (++s.strstart <= max_insert) {\n            /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n            s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);\n            hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n            s.head[s.ins_h] = s.strstart;\n            /***/\n          }\n        } while (--s.prev_length !== 0);\n\n        s.match_available = 0;\n        s.match_length = MIN_MATCH - 1;\n        s.strstart++;\n\n        if (bflush) {\n          /*** FLUSH_BLOCK(s, 0); ***/\n          flush_block_only(s, false);\n\n          if (s.strm.avail_out === 0) {\n            return BS_NEED_MORE;\n          }\n          /***/\n\n        }\n      } else if (s.match_available) {\n        /* If there was no match at the previous position, output a\n         * single literal. If there was a match but the current match\n         * is longer, truncate the previous match to a single literal.\n         */\n        //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n\n        /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n        bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n\n        if (bflush) {\n          /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n          flush_block_only(s, false);\n          /***/\n        }\n\n        s.strstart++;\n        s.lookahead--;\n\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n      } else {\n        /* There is no previous match to compare with, wait for\n         * the next step to decide.\n         */\n        s.match_available = 1;\n        s.strstart++;\n        s.lookahead--;\n      }\n    } //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n\n\n    if (s.match_available) {\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);\n      s.match_available = 0;\n    }\n\n    s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n\n    if (flush === Z_FINISH$3) {\n      /*** FLUSH_BLOCK(s, 1); ***/\n      flush_block_only(s, true);\n\n      if (s.strm.avail_out === 0) {\n        return BS_FINISH_STARTED;\n      }\n      /***/\n\n\n      return BS_FINISH_DONE;\n    }\n\n    if (s.last_lit) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n    }\n\n    return BS_BLOCK_DONE;\n  };\n  /* ===========================================================================\n   * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n   * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n   * deflate switches away from Z_RLE.)\n   */\n\n\n  var deflate_rle = function deflate_rle(s, flush) {\n    var bflush;\n    /* set if current block must be flushed */\n\n    var prev;\n    /* byte at distance one to match */\n\n    var scan, strend;\n    /* scan goes up to strend for length of run */\n\n    var _win = s.window;\n\n    for (;;) {\n      /* Make sure that we always have enough lookahead, except\n       * at the end of the input file. We need MAX_MATCH bytes\n       * for the longest run, plus one for the unrolled loop.\n       */\n      if (s.lookahead <= MAX_MATCH) {\n        fill_window(s);\n\n        if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {\n          return BS_NEED_MORE;\n        }\n\n        if (s.lookahead === 0) {\n          break;\n        }\n        /* flush the current block */\n\n      }\n      /* See how many times the previous byte repeats */\n\n\n      s.match_length = 0;\n\n      if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n        scan = s.strstart - 1;\n        prev = _win[scan];\n\n        if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n          strend = s.strstart + MAX_MATCH;\n\n          do {\n            /*jshint noempty:false*/\n          } while (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan] && scan < strend);\n\n          s.match_length = MAX_MATCH - (strend - scan);\n\n          if (s.match_length > s.lookahead) {\n            s.match_length = s.lookahead;\n          }\n        } //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n\n      }\n      /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n\n\n      if (s.match_length >= MIN_MATCH) {\n        //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n        /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n        bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);\n        s.lookahead -= s.match_length;\n        s.strstart += s.match_length;\n        s.match_length = 0;\n      } else {\n        /* No match, output a literal byte */\n        //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n\n        /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n        bflush = _tr_tally(s, 0, s.window[s.strstart]);\n        s.lookahead--;\n        s.strstart++;\n      }\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n\n      }\n    }\n\n    s.insert = 0;\n\n    if (flush === Z_FINISH$3) {\n      /*** FLUSH_BLOCK(s, 1); ***/\n      flush_block_only(s, true);\n\n      if (s.strm.avail_out === 0) {\n        return BS_FINISH_STARTED;\n      }\n      /***/\n\n\n      return BS_FINISH_DONE;\n    }\n\n    if (s.last_lit) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n    }\n\n    return BS_BLOCK_DONE;\n  };\n  /* ===========================================================================\n   * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n   * (It will be regenerated if this run of deflate switches away from Huffman.)\n   */\n\n\n  var deflate_huff = function deflate_huff(s, flush) {\n    var bflush;\n    /* set if current block must be flushed */\n\n    for (;;) {\n      /* Make sure that we have a literal to write. */\n      if (s.lookahead === 0) {\n        fill_window(s);\n\n        if (s.lookahead === 0) {\n          if (flush === Z_NO_FLUSH$2) {\n            return BS_NEED_MORE;\n          }\n\n          break;\n          /* flush the current block */\n        }\n      }\n      /* Output a literal byte */\n\n\n      s.match_length = 0; //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n\n      bflush = _tr_tally(s, 0, s.window[s.strstart]);\n      s.lookahead--;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n\n      }\n    }\n\n    s.insert = 0;\n\n    if (flush === Z_FINISH$3) {\n      /*** FLUSH_BLOCK(s, 1); ***/\n      flush_block_only(s, true);\n\n      if (s.strm.avail_out === 0) {\n        return BS_FINISH_STARTED;\n      }\n      /***/\n\n\n      return BS_FINISH_DONE;\n    }\n\n    if (s.last_lit) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n    }\n\n    return BS_BLOCK_DONE;\n  };\n  /* Values for max_lazy_match, good_match and max_chain_length, depending on\n   * the desired pack level (0..9). The values given below have been tuned to\n   * exclude worst case performance for pathological files. Better values may be\n   * found for specific files.\n   */\n\n\n  function Config(good_length, max_lazy, nice_length, max_chain, func) {\n    this.good_length = good_length;\n    this.max_lazy = max_lazy;\n    this.nice_length = nice_length;\n    this.max_chain = max_chain;\n    this.func = func;\n  }\n\n  var configuration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),\n  /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),\n  /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),\n  /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),\n  /* 3 */\n  new Config(4, 4, 16, 16, deflate_slow),\n  /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),\n  /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),\n  /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),\n  /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),\n  /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)\n  /* 9 max compression */\n  ];\n  /* ===========================================================================\n   * Initialize the \"longest match\" routines for a new zlib stream\n   */\n\n  var lm_init = function lm_init(s) {\n    s.window_size = 2 * s.w_size;\n    /*** CLEAR_HASH(s); ***/\n\n    zero(s.head); // Fill with NIL (= 0);\n\n    /* Set the default configuration parameters:\n     */\n\n    s.max_lazy_match = configuration_table[s.level].max_lazy;\n    s.good_match = configuration_table[s.level].good_length;\n    s.nice_match = configuration_table[s.level].nice_length;\n    s.max_chain_length = configuration_table[s.level].max_chain;\n    s.strstart = 0;\n    s.block_start = 0;\n    s.lookahead = 0;\n    s.insert = 0;\n    s.match_length = s.prev_length = MIN_MATCH - 1;\n    s.match_available = 0;\n    s.ins_h = 0;\n  };\n\n  function DeflateState() {\n    this.strm = null;\n    /* pointer back to this zlib stream */\n\n    this.status = 0;\n    /* as the name implies */\n\n    this.pending_buf = null;\n    /* output still pending */\n\n    this.pending_buf_size = 0;\n    /* size of pending_buf */\n\n    this.pending_out = 0;\n    /* next pending byte to output to the stream */\n\n    this.pending = 0;\n    /* nb of bytes in the pending buffer */\n\n    this.wrap = 0;\n    /* bit 0 true for zlib, bit 1 true for gzip */\n\n    this.gzhead = null;\n    /* gzip header information to write */\n\n    this.gzindex = 0;\n    /* where in extra, name, or comment */\n\n    this.method = Z_DEFLATED$2;\n    /* can only be DEFLATED */\n\n    this.last_flush = -1;\n    /* value of flush param for previous deflate call */\n\n    this.w_size = 0;\n    /* LZ77 window size (32K by default) */\n\n    this.w_bits = 0;\n    /* log2(w_size)  (8..16) */\n\n    this.w_mask = 0;\n    /* w_size - 1 */\n\n    this.window = null;\n    /* Sliding window. Input bytes are read into the second half of the window,\n     * and move to the first half later to keep a dictionary of at least wSize\n     * bytes. With this organization, matches are limited to a distance of\n     * wSize-MAX_MATCH bytes, but this ensures that IO is always\n     * performed with a length multiple of the block size.\n     */\n\n    this.window_size = 0;\n    /* Actual size of window: 2*wSize, except when the user input buffer\n     * is directly used as sliding window.\n     */\n\n    this.prev = null;\n    /* Link to older string with same hash index. To limit the size of this\n     * array to 64K, this link is maintained only for the last 32K strings.\n     * An index in this array is thus a window index modulo 32K.\n     */\n\n    this.head = null;\n    /* Heads of the hash chains or NIL. */\n\n    this.ins_h = 0;\n    /* hash index of string to be inserted */\n\n    this.hash_size = 0;\n    /* number of elements in hash table */\n\n    this.hash_bits = 0;\n    /* log2(hash_size) */\n\n    this.hash_mask = 0;\n    /* hash_size-1 */\n\n    this.hash_shift = 0;\n    /* Number of bits by which ins_h must be shifted at each input\n     * step. It must be such that after MIN_MATCH steps, the oldest\n     * byte no longer takes part in the hash key, that is:\n     *   hash_shift * MIN_MATCH >= hash_bits\n     */\n\n    this.block_start = 0;\n    /* Window position at the beginning of the current output block. Gets\n     * negative when the window is moved backwards.\n     */\n\n    this.match_length = 0;\n    /* length of best match */\n\n    this.prev_match = 0;\n    /* previous match */\n\n    this.match_available = 0;\n    /* set if previous match exists */\n\n    this.strstart = 0;\n    /* start of string to insert */\n\n    this.match_start = 0;\n    /* start of matching string */\n\n    this.lookahead = 0;\n    /* number of valid bytes ahead in window */\n\n    this.prev_length = 0;\n    /* Length of the best match at previous step. Matches not greater than this\n     * are discarded. This is used in the lazy match evaluation.\n     */\n\n    this.max_chain_length = 0;\n    /* To speed up deflation, hash chains are never searched beyond this\n     * length.  A higher limit improves compression ratio but degrades the\n     * speed.\n     */\n\n    this.max_lazy_match = 0;\n    /* Attempt to find a better match only when the current match is strictly\n     * smaller than this value. This mechanism is used only for compression\n     * levels >= 4.\n     */\n    // That's alias to max_lazy_match, don't use directly\n    //this.max_insert_length = 0;\n\n    /* Insert new strings in the hash table only if the match length is not\n     * greater than this length. This saves time but degrades compression.\n     * max_insert_length is used only for compression levels <= 3.\n     */\n\n    this.level = 0;\n    /* compression level (1..9) */\n\n    this.strategy = 0;\n    /* favor or force Huffman coding*/\n\n    this.good_match = 0;\n    /* Use a faster search when the previous match is longer than this */\n\n    this.nice_match = 0;\n    /* Stop searching when current match exceeds this */\n\n    /* used by trees.c: */\n\n    /* Didn't use ct_data typedef below to suppress compiler warning */\n    // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n    // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n    // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n    // Use flat array of DOUBLE size, with interleaved fata,\n    // because JS does not support effective\n\n    this.dyn_ltree = new Uint16Array(HEAP_SIZE * 2);\n    this.dyn_dtree = new Uint16Array((2 * D_CODES + 1) * 2);\n    this.bl_tree = new Uint16Array((2 * BL_CODES + 1) * 2);\n    zero(this.dyn_ltree);\n    zero(this.dyn_dtree);\n    zero(this.bl_tree);\n    this.l_desc = null;\n    /* desc. for literal tree */\n\n    this.d_desc = null;\n    /* desc. for distance tree */\n\n    this.bl_desc = null;\n    /* desc. for bit length tree */\n    //ush bl_count[MAX_BITS+1];\n\n    this.bl_count = new Uint16Array(MAX_BITS + 1);\n    /* number of codes at each bit length for an optimal tree */\n    //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n\n    this.heap = new Uint16Array(2 * L_CODES + 1);\n    /* heap used to build the Huffman trees */\n\n    zero(this.heap);\n    this.heap_len = 0;\n    /* number of elements in the heap */\n\n    this.heap_max = 0;\n    /* element of largest frequency */\n\n    /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n     * The same heap array is used to build all trees.\n     */\n\n    this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n\n    zero(this.depth);\n    /* Depth of each subtree used as tie breaker for trees of equal frequency\n     */\n\n    this.l_buf = 0;\n    /* buffer index for literals or lengths */\n\n    this.lit_bufsize = 0;\n    /* Size of match buffer for literals/lengths.  There are 4 reasons for\n     * limiting lit_bufsize to 64K:\n     *   - frequencies can be kept in 16 bit counters\n     *   - if compression is not successful for the first block, all input\n     *     data is still in the window so we can still emit a stored block even\n     *     when input comes from standard input.  (This can also be done for\n     *     all blocks if lit_bufsize is not greater than 32K.)\n     *   - if compression is not successful for a file smaller than 64K, we can\n     *     even emit a stored file instead of a stored block (saving 5 bytes).\n     *     This is applicable only for zip (not gzip or zlib).\n     *   - creating new Huffman trees less frequently may not provide fast\n     *     adaptation to changes in the input data statistics. (Take for\n     *     example a binary file with poorly compressible code followed by\n     *     a highly compressible string table.) Smaller buffer sizes give\n     *     fast adaptation but have of course the overhead of transmitting\n     *     trees more frequently.\n     *   - I can't count above 4\n     */\n\n    this.last_lit = 0;\n    /* running index in l_buf */\n\n    this.d_buf = 0;\n    /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n     * the same number of elements. To use different lengths, an extra flag\n     * array would be necessary.\n     */\n\n    this.opt_len = 0;\n    /* bit length of current block with optimal trees */\n\n    this.static_len = 0;\n    /* bit length of current block with static trees */\n\n    this.matches = 0;\n    /* number of string matches in current block */\n\n    this.insert = 0;\n    /* bytes at end of window left to insert */\n\n    this.bi_buf = 0;\n    /* Output buffer. bits are inserted starting at the bottom (least\n     * significant bits).\n     */\n\n    this.bi_valid = 0;\n    /* Number of valid bits in bi_buf.  All bits above the last valid bit\n     * are always zero.\n     */\n    // Used for window memory init. We safely ignore it for JS. That makes\n    // sense only for pointers and memory check tools.\n    //this.high_water = 0;\n\n    /* High water mark offset in window for initialized bytes -- bytes above\n     * this are set to zero in order to avoid memory check warnings when\n     * longest match routines access bytes past the input.  This is then\n     * updated to the new high water mark.\n     */\n  }\n\n  var deflateResetKeep = function deflateResetKeep(strm) {\n    if (!strm || !strm.state) {\n      return err(strm, Z_STREAM_ERROR$2);\n    }\n\n    strm.total_in = strm.total_out = 0;\n    strm.data_type = Z_UNKNOWN;\n    var s = strm.state;\n    s.pending = 0;\n    s.pending_out = 0;\n\n    if (s.wrap < 0) {\n      s.wrap = -s.wrap;\n      /* was made negative by deflate(..., Z_FINISH); */\n    }\n\n    s.status = s.wrap ? INIT_STATE : BUSY_STATE;\n    strm.adler = s.wrap === 2 ? 0 // crc32(0, Z_NULL, 0)\n    : 1; // adler32(0, Z_NULL, 0)\n\n    s.last_flush = Z_NO_FLUSH$2;\n\n    _tr_init(s);\n\n    return Z_OK$3;\n  };\n\n  var deflateReset = function deflateReset(strm) {\n    var ret = deflateResetKeep(strm);\n\n    if (ret === Z_OK$3) {\n      lm_init(strm.state);\n    }\n\n    return ret;\n  };\n\n  var deflateSetHeader = function deflateSetHeader(strm, head) {\n    if (!strm || !strm.state) {\n      return Z_STREAM_ERROR$2;\n    }\n\n    if (strm.state.wrap !== 2) {\n      return Z_STREAM_ERROR$2;\n    }\n\n    strm.state.gzhead = head;\n    return Z_OK$3;\n  };\n\n  var deflateInit2 = function deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n    if (!strm) {\n      // === Z_NULL\n      return Z_STREAM_ERROR$2;\n    }\n\n    var wrap = 1;\n\n    if (level === Z_DEFAULT_COMPRESSION$1) {\n      level = 6;\n    }\n\n    if (windowBits < 0) {\n      /* suppress zlib wrapper */\n      wrap = 0;\n      windowBits = -windowBits;\n    } else if (windowBits > 15) {\n      wrap = 2;\n      /* write gzip wrapper instead */\n\n      windowBits -= 16;\n    }\n\n    if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 || windowBits < 8 || windowBits > 15 || level < 0 || level > 9 || strategy < 0 || strategy > Z_FIXED) {\n      return err(strm, Z_STREAM_ERROR$2);\n    }\n\n    if (windowBits === 8) {\n      windowBits = 9;\n    }\n    /* until 256-byte window bug fixed */\n\n\n    var s = new DeflateState();\n    strm.state = s;\n    s.strm = strm;\n    s.wrap = wrap;\n    s.gzhead = null;\n    s.w_bits = windowBits;\n    s.w_size = 1 << s.w_bits;\n    s.w_mask = s.w_size - 1;\n    s.hash_bits = memLevel + 7;\n    s.hash_size = 1 << s.hash_bits;\n    s.hash_mask = s.hash_size - 1;\n    s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n    s.window = new Uint8Array(s.w_size * 2);\n    s.head = new Uint16Array(s.hash_size);\n    s.prev = new Uint16Array(s.w_size); // Don't need mem init magic for JS.\n    //s.high_water = 0;  /* nothing written to s->window yet */\n\n    s.lit_bufsize = 1 << memLevel + 6;\n    /* 16K elements by default */\n\n    s.pending_buf_size = s.lit_bufsize * 4; //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n    //s->pending_buf = (uchf *) overlay;\n\n    s.pending_buf = new Uint8Array(s.pending_buf_size); // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n    //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n\n    s.d_buf = 1 * s.lit_bufsize; //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n\n    s.l_buf = (1 + 2) * s.lit_bufsize;\n    s.level = level;\n    s.strategy = strategy;\n    s.method = method;\n    return deflateReset(strm);\n  };\n\n  var deflateInit = function deflateInit(strm, level) {\n    return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);\n  };\n\n  var deflate$2 = function deflate(strm, flush) {\n    var beg, val; // for gzip header write only\n\n    if (!strm || !strm.state || flush > Z_BLOCK$1 || flush < 0) {\n      return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;\n    }\n\n    var s = strm.state;\n\n    if (!strm.output || !strm.input && strm.avail_in !== 0 || s.status === FINISH_STATE && flush !== Z_FINISH$3) {\n      return err(strm, strm.avail_out === 0 ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);\n    }\n\n    s.strm = strm;\n    /* just in case */\n\n    var old_flush = s.last_flush;\n    s.last_flush = flush;\n    /* Write the header */\n\n    if (s.status === INIT_STATE) {\n      if (s.wrap === 2) {\n        // GZIP header\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n\n        put_byte(s, 31);\n        put_byte(s, 139);\n        put_byte(s, 8);\n\n        if (!s.gzhead) {\n          // s->gzhead == Z_NULL\n          put_byte(s, 0);\n          put_byte(s, 0);\n          put_byte(s, 0);\n          put_byte(s, 0);\n          put_byte(s, 0);\n          put_byte(s, s.level === 9 ? 2 : s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ? 4 : 0);\n          put_byte(s, OS_CODE);\n          s.status = BUSY_STATE;\n        } else {\n          put_byte(s, (s.gzhead.text ? 1 : 0) + (s.gzhead.hcrc ? 2 : 0) + (!s.gzhead.extra ? 0 : 4) + (!s.gzhead.name ? 0 : 8) + (!s.gzhead.comment ? 0 : 16));\n          put_byte(s, s.gzhead.time & 0xff);\n          put_byte(s, s.gzhead.time >> 8 & 0xff);\n          put_byte(s, s.gzhead.time >> 16 & 0xff);\n          put_byte(s, s.gzhead.time >> 24 & 0xff);\n          put_byte(s, s.level === 9 ? 2 : s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ? 4 : 0);\n          put_byte(s, s.gzhead.os & 0xff);\n\n          if (s.gzhead.extra && s.gzhead.extra.length) {\n            put_byte(s, s.gzhead.extra.length & 0xff);\n            put_byte(s, s.gzhead.extra.length >> 8 & 0xff);\n          }\n\n          if (s.gzhead.hcrc) {\n            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);\n          }\n\n          s.gzindex = 0;\n          s.status = EXTRA_STATE;\n        }\n      } else // DEFLATE header\n        {\n          var header = Z_DEFLATED$2 + (s.w_bits - 8 << 4) << 8;\n          var level_flags = -1;\n\n          if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n            level_flags = 0;\n          } else if (s.level < 6) {\n            level_flags = 1;\n          } else if (s.level === 6) {\n            level_flags = 2;\n          } else {\n            level_flags = 3;\n          }\n\n          header |= level_flags << 6;\n\n          if (s.strstart !== 0) {\n            header |= PRESET_DICT;\n          }\n\n          header += 31 - header % 31;\n          s.status = BUSY_STATE;\n          putShortMSB(s, header);\n          /* Save the adler32 of the preset dictionary: */\n\n          if (s.strstart !== 0) {\n            putShortMSB(s, strm.adler >>> 16);\n            putShortMSB(s, strm.adler & 0xffff);\n          }\n\n          strm.adler = 1; // adler32(0L, Z_NULL, 0);\n        }\n    } //#ifdef GZIP\n\n\n    if (s.status === EXTRA_STATE) {\n      if (s.gzhead.extra\n      /* != Z_NULL*/\n      ) {\n        beg = s.pending;\n        /* start of bytes to update crc */\n\n        while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n          if (s.pending === s.pending_buf_size) {\n            if (s.gzhead.hcrc && s.pending > beg) {\n              strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n            }\n\n            flush_pending(strm);\n            beg = s.pending;\n\n            if (s.pending === s.pending_buf_size) {\n              break;\n            }\n          }\n\n          put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n          s.gzindex++;\n        }\n\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n\n        if (s.gzindex === s.gzhead.extra.length) {\n          s.gzindex = 0;\n          s.status = NAME_STATE;\n        }\n      } else {\n        s.status = NAME_STATE;\n      }\n    }\n\n    if (s.status === NAME_STATE) {\n      if (s.gzhead.name\n      /* != Z_NULL*/\n      ) {\n        beg = s.pending;\n        /* start of bytes to update crc */\n        //int val;\n\n        do {\n          if (s.pending === s.pending_buf_size) {\n            if (s.gzhead.hcrc && s.pending > beg) {\n              strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n            }\n\n            flush_pending(strm);\n            beg = s.pending;\n\n            if (s.pending === s.pending_buf_size) {\n              val = 1;\n              break;\n            }\n          } // JS specific: little magic to add zero terminator to end of string\n\n\n          if (s.gzindex < s.gzhead.name.length) {\n            val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n          } else {\n            val = 0;\n          }\n\n          put_byte(s, val);\n        } while (val !== 0);\n\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n\n        if (val === 0) {\n          s.gzindex = 0;\n          s.status = COMMENT_STATE;\n        }\n      } else {\n        s.status = COMMENT_STATE;\n      }\n    }\n\n    if (s.status === COMMENT_STATE) {\n      if (s.gzhead.comment\n      /* != Z_NULL*/\n      ) {\n        beg = s.pending;\n        /* start of bytes to update crc */\n        //int val;\n\n        do {\n          if (s.pending === s.pending_buf_size) {\n            if (s.gzhead.hcrc && s.pending > beg) {\n              strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n            }\n\n            flush_pending(strm);\n            beg = s.pending;\n\n            if (s.pending === s.pending_buf_size) {\n              val = 1;\n              break;\n            }\n          } // JS specific: little magic to add zero terminator to end of string\n\n\n          if (s.gzindex < s.gzhead.comment.length) {\n            val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n          } else {\n            val = 0;\n          }\n\n          put_byte(s, val);\n        } while (val !== 0);\n\n        if (s.gzhead.hcrc && s.pending > beg) {\n          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);\n        }\n\n        if (val === 0) {\n          s.status = HCRC_STATE;\n        }\n      } else {\n        s.status = HCRC_STATE;\n      }\n    }\n\n    if (s.status === HCRC_STATE) {\n      if (s.gzhead.hcrc) {\n        if (s.pending + 2 > s.pending_buf_size) {\n          flush_pending(strm);\n        }\n\n        if (s.pending + 2 <= s.pending_buf_size) {\n          put_byte(s, strm.adler & 0xff);\n          put_byte(s, strm.adler >> 8 & 0xff);\n          strm.adler = 0; //crc32(0L, Z_NULL, 0);\n\n          s.status = BUSY_STATE;\n        }\n      } else {\n        s.status = BUSY_STATE;\n      }\n    } //#endif\n\n    /* Flush as much pending output as possible */\n\n\n    if (s.pending !== 0) {\n      flush_pending(strm);\n\n      if (strm.avail_out === 0) {\n        /* Since avail_out is 0, deflate will be called again with\n         * more output space, but possibly with both pending and\n         * avail_in equal to zero. There won't be anything to do,\n         * but this is not an error situation so make sure we\n         * return OK instead of BUF_ERROR at next call of deflate:\n         */\n        s.last_flush = -1;\n        return Z_OK$3;\n      }\n      /* Make sure there is something to do and avoid duplicate consecutive\n       * flushes. For repeated and useless calls with Z_FINISH, we keep\n       * returning Z_STREAM_END instead of Z_BUF_ERROR.\n       */\n\n    } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) && flush !== Z_FINISH$3) {\n      return err(strm, Z_BUF_ERROR$1);\n    }\n    /* User must not provide more input after the first FINISH: */\n\n\n    if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n      return err(strm, Z_BUF_ERROR$1);\n    }\n    /* Start a new block or continue the current one.\n     */\n\n\n    if (strm.avail_in !== 0 || s.lookahead !== 0 || flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE) {\n      var bstate = s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) : s.strategy === Z_RLE ? deflate_rle(s, flush) : configuration_table[s.level].func(s, flush);\n\n      if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n        s.status = FINISH_STATE;\n      }\n\n      if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n        if (strm.avail_out === 0) {\n          s.last_flush = -1;\n          /* avoid BUF_ERROR next call, see above */\n        }\n\n        return Z_OK$3;\n        /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n         * of deflate should use the same flush parameter to make sure\n         * that the flush is complete. So we don't have to output an\n         * empty block here, this will be done at next call. This also\n         * ensures that for a very small output buffer, we emit at most\n         * one empty block.\n         */\n      }\n\n      if (bstate === BS_BLOCK_DONE) {\n        if (flush === Z_PARTIAL_FLUSH) {\n          _tr_align(s);\n        } else if (flush !== Z_BLOCK$1) {\n          /* FULL_FLUSH or SYNC_FLUSH */\n          _tr_stored_block(s, 0, 0, false);\n          /* For a full flush, this empty block will be recognized\n           * as a special marker by inflate_sync().\n           */\n\n\n          if (flush === Z_FULL_FLUSH$1) {\n            /*** CLEAR_HASH(s); ***/\n\n            /* forget history */\n            zero(s.head); // Fill with NIL (= 0);\n\n            if (s.lookahead === 0) {\n              s.strstart = 0;\n              s.block_start = 0;\n              s.insert = 0;\n            }\n          }\n        }\n\n        flush_pending(strm);\n\n        if (strm.avail_out === 0) {\n          s.last_flush = -1;\n          /* avoid BUF_ERROR at next call, see above */\n\n          return Z_OK$3;\n        }\n      }\n    } //Assert(strm->avail_out > 0, \"bug2\");\n    //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n\n    if (flush !== Z_FINISH$3) {\n      return Z_OK$3;\n    }\n\n    if (s.wrap <= 0) {\n      return Z_STREAM_END$3;\n    }\n    /* Write the trailer */\n\n\n    if (s.wrap === 2) {\n      put_byte(s, strm.adler & 0xff);\n      put_byte(s, strm.adler >> 8 & 0xff);\n      put_byte(s, strm.adler >> 16 & 0xff);\n      put_byte(s, strm.adler >> 24 & 0xff);\n      put_byte(s, strm.total_in & 0xff);\n      put_byte(s, strm.total_in >> 8 & 0xff);\n      put_byte(s, strm.total_in >> 16 & 0xff);\n      put_byte(s, strm.total_in >> 24 & 0xff);\n    } else {\n      putShortMSB(s, strm.adler >>> 16);\n      putShortMSB(s, strm.adler & 0xffff);\n    }\n\n    flush_pending(strm);\n    /* If avail_out is zero, the application will call deflate again\n     * to flush the rest.\n     */\n\n    if (s.wrap > 0) {\n      s.wrap = -s.wrap;\n    }\n    /* write the trailer only once! */\n\n\n    return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;\n  };\n\n  var deflateEnd = function deflateEnd(strm) {\n    if (!strm\n    /*== Z_NULL*/\n    || !strm.state\n    /*== Z_NULL*/\n    ) {\n      return Z_STREAM_ERROR$2;\n    }\n\n    var status = strm.state.status;\n\n    if (status !== INIT_STATE && status !== EXTRA_STATE && status !== NAME_STATE && status !== COMMENT_STATE && status !== HCRC_STATE && status !== BUSY_STATE && status !== FINISH_STATE) {\n      return err(strm, Z_STREAM_ERROR$2);\n    }\n\n    strm.state = null;\n    return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;\n  };\n  /* =========================================================================\n   * Initializes the compression dictionary from the given byte\n   * sequence without producing any compressed output.\n   */\n\n\n  var deflateSetDictionary = function deflateSetDictionary(strm, dictionary) {\n    var dictLength = dictionary.length;\n\n    if (!strm\n    /*== Z_NULL*/\n    || !strm.state\n    /*== Z_NULL*/\n    ) {\n      return Z_STREAM_ERROR$2;\n    }\n\n    var s = strm.state;\n    var wrap = s.wrap;\n\n    if (wrap === 2 || wrap === 1 && s.status !== INIT_STATE || s.lookahead) {\n      return Z_STREAM_ERROR$2;\n    }\n    /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n\n\n    if (wrap === 1) {\n      /* adler32(strm->adler, dictionary, dictLength); */\n      strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);\n    }\n\n    s.wrap = 0;\n    /* avoid computing Adler-32 in read_buf */\n\n    /* if dictionary would fill window, just replace the history */\n\n    if (dictLength >= s.w_size) {\n      if (wrap === 0) {\n        /* already empty otherwise */\n\n        /*** CLEAR_HASH(s); ***/\n        zero(s.head); // Fill with NIL (= 0);\n\n        s.strstart = 0;\n        s.block_start = 0;\n        s.insert = 0;\n      }\n      /* use the tail */\n      // dictionary = dictionary.slice(dictLength - s.w_size);\n\n\n      var tmpDict = new Uint8Array(s.w_size);\n      tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);\n      dictionary = tmpDict;\n      dictLength = s.w_size;\n    }\n    /* insert dictionary into window and hash */\n\n\n    var avail = strm.avail_in;\n    var next = strm.next_in;\n    var input = strm.input;\n    strm.avail_in = dictLength;\n    strm.next_in = 0;\n    strm.input = dictionary;\n    fill_window(s);\n\n    while (s.lookahead >= MIN_MATCH) {\n      var str = s.strstart;\n      var n = s.lookahead - (MIN_MATCH - 1);\n\n      do {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n      } while (--n);\n\n      s.strstart = str;\n      s.lookahead = MIN_MATCH - 1;\n      fill_window(s);\n    }\n\n    s.strstart += s.lookahead;\n    s.block_start = s.strstart;\n    s.insert = s.lookahead;\n    s.lookahead = 0;\n    s.match_length = s.prev_length = MIN_MATCH - 1;\n    s.match_available = 0;\n    strm.next_in = next;\n    strm.input = input;\n    strm.avail_in = avail;\n    s.wrap = wrap;\n    return Z_OK$3;\n  };\n\n  var deflateInit_1 = deflateInit;\n  var deflateInit2_1 = deflateInit2;\n  var deflateReset_1 = deflateReset;\n  var deflateResetKeep_1 = deflateResetKeep;\n  var deflateSetHeader_1 = deflateSetHeader;\n  var deflate_2$1 = deflate$2;\n  var deflateEnd_1 = deflateEnd;\n  var deflateSetDictionary_1 = deflateSetDictionary;\n  var deflateInfo = 'pako deflate (from Nodeca project)';\n  /* Not implemented\n  module.exports.deflateBound = deflateBound;\n  module.exports.deflateCopy = deflateCopy;\n  module.exports.deflateParams = deflateParams;\n  module.exports.deflatePending = deflatePending;\n  module.exports.deflatePrime = deflatePrime;\n  module.exports.deflateTune = deflateTune;\n  */\n\n  var deflate_1$2 = {\n    deflateInit: deflateInit_1,\n    deflateInit2: deflateInit2_1,\n    deflateReset: deflateReset_1,\n    deflateResetKeep: deflateResetKeep_1,\n    deflateSetHeader: deflateSetHeader_1,\n    deflate: deflate_2$1,\n    deflateEnd: deflateEnd_1,\n    deflateSetDictionary: deflateSetDictionary_1,\n    deflateInfo: deflateInfo\n  };\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var _has = function _has(obj, key) {\n    return Object.prototype.hasOwnProperty.call(obj, key);\n  };\n\n  var assign = function assign(obj\n  /*from1, from2, from3, ...*/\n  ) {\n    var sources = Array.prototype.slice.call(arguments, 1);\n\n    while (sources.length) {\n      var source = sources.shift();\n\n      if (!source) {\n        continue;\n      }\n\n      if (_typeof(source) !== 'object') {\n        throw new TypeError(source + 'must be non-object');\n      }\n\n      for (var p in source) {\n        if (_has(source, p)) {\n          obj[p] = source[p];\n        }\n      }\n    }\n\n    return obj;\n  }; // Join array of chunks to single array.\n\n\n  var flattenChunks = function flattenChunks(chunks) {\n    // calculate data length\n    var len = 0;\n\n    for (var i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    } // join chunks\n\n\n    var result = new Uint8Array(len);\n\n    for (var _i = 0, pos = 0, _l = chunks.length; _i < _l; _i++) {\n      var chunk = chunks[_i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  };\n\n  var common = {\n    assign: assign,\n    flattenChunks: flattenChunks\n  };\n\n  // String encode/decode helpers\n  //\n  // - apply(Array) can fail on Android 2.2\n  // - apply(Uint8Array) can fail on iOS 5.1 Safari\n  //\n\n  var STR_APPLY_UIA_OK = true;\n\n  try {\n    String.fromCharCode.apply(null, new Uint8Array(1));\n  } catch (__) {\n    STR_APPLY_UIA_OK = false;\n  } // Table with utf8 lengths (calculated by first byte of sequence)\n  // Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n  // because max possible codepoint is 0x10ffff\n\n\n  var _utf8len = new Uint8Array(256);\n\n  for (var q = 0; q < 256; q++) {\n    _utf8len[q] = q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1;\n  }\n\n  _utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n  // convert string to array (typed, when possible)\n\n  var string2buf = function string2buf(str) {\n    if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {\n      return new TextEncoder().encode(str);\n    }\n\n    var buf,\n        c,\n        c2,\n        m_pos,\n        i,\n        str_len = str.length,\n        buf_len = 0; // count binary size\n\n    for (m_pos = 0; m_pos < str_len; m_pos++) {\n      c = str.charCodeAt(m_pos);\n\n      if ((c & 0xfc00) === 0xd800 && m_pos + 1 < str_len) {\n        c2 = str.charCodeAt(m_pos + 1);\n\n        if ((c2 & 0xfc00) === 0xdc00) {\n          c = 0x10000 + (c - 0xd800 << 10) + (c2 - 0xdc00);\n          m_pos++;\n        }\n      }\n\n      buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n    } // allocate buffer\n\n\n    buf = new Uint8Array(buf_len); // convert\n\n    for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n      c = str.charCodeAt(m_pos);\n\n      if ((c & 0xfc00) === 0xd800 && m_pos + 1 < str_len) {\n        c2 = str.charCodeAt(m_pos + 1);\n\n        if ((c2 & 0xfc00) === 0xdc00) {\n          c = 0x10000 + (c - 0xd800 << 10) + (c2 - 0xdc00);\n          m_pos++;\n        }\n      }\n\n      if (c < 0x80) {\n        /* one byte */\n        buf[i++] = c;\n      } else if (c < 0x800) {\n        /* two bytes */\n        buf[i++] = 0xC0 | c >>> 6;\n        buf[i++] = 0x80 | c & 0x3f;\n      } else if (c < 0x10000) {\n        /* three bytes */\n        buf[i++] = 0xE0 | c >>> 12;\n        buf[i++] = 0x80 | c >>> 6 & 0x3f;\n        buf[i++] = 0x80 | c & 0x3f;\n      } else {\n        /* four bytes */\n        buf[i++] = 0xf0 | c >>> 18;\n        buf[i++] = 0x80 | c >>> 12 & 0x3f;\n        buf[i++] = 0x80 | c >>> 6 & 0x3f;\n        buf[i++] = 0x80 | c & 0x3f;\n      }\n    }\n\n    return buf;\n  }; // Helper\n\n\n  var buf2binstring = function buf2binstring(buf, len) {\n    // On Chrome, the arguments in a function call that are allowed is `65534`.\n    // If the length of the buffer is smaller than that, we can use this optimization,\n    // otherwise we will take a slower path.\n    if (len < 65534) {\n      if (buf.subarray && STR_APPLY_UIA_OK) {\n        return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));\n      }\n    }\n\n    var result = '';\n\n    for (var i = 0; i < len; i++) {\n      result += String.fromCharCode(buf[i]);\n    }\n\n    return result;\n  }; // convert array to string\n\n\n  var buf2string = function buf2string(buf, max) {\n    var len = max || buf.length;\n\n    if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {\n      return new TextDecoder().decode(buf.subarray(0, max));\n    }\n\n    var i, out; // Reserve max possible length (2 words per char)\n    // NB: by unknown reasons, Array is significantly faster for\n    //     String.fromCharCode.apply than Uint16Array.\n\n    var utf16buf = new Array(len * 2);\n\n    for (out = 0, i = 0; i < len;) {\n      var c = buf[i++]; // quick process ascii\n\n      if (c < 0x80) {\n        utf16buf[out++] = c;\n        continue;\n      }\n\n      var c_len = _utf8len[c]; // skip 5 & 6 byte codes\n\n      if (c_len > 4) {\n        utf16buf[out++] = 0xfffd;\n        i += c_len - 1;\n        continue;\n      } // apply mask on first byte\n\n\n      c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07; // join the rest\n\n      while (c_len > 1 && i < len) {\n        c = c << 6 | buf[i++] & 0x3f;\n        c_len--;\n      } // terminated by end of string?\n\n\n      if (c_len > 1) {\n        utf16buf[out++] = 0xfffd;\n        continue;\n      }\n\n      if (c < 0x10000) {\n        utf16buf[out++] = c;\n      } else {\n        c -= 0x10000;\n        utf16buf[out++] = 0xd800 | c >> 10 & 0x3ff;\n        utf16buf[out++] = 0xdc00 | c & 0x3ff;\n      }\n    }\n\n    return buf2binstring(utf16buf, out);\n  }; // Calculate max possible position in utf8 buffer,\n  // that will not break sequence. If that's not possible\n  // - (very small limits) return max size as is.\n  //\n  // buf[] - utf8 bytes array\n  // max   - length limit (mandatory);\n\n\n  var utf8border = function utf8border(buf, max) {\n    max = max || buf.length;\n\n    if (max > buf.length) {\n      max = buf.length;\n    } // go back from last position, until start of sequence found\n\n\n    var pos = max - 1;\n\n    while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) {\n      pos--;\n    } // Very small and broken sequence,\n    // return max, because we should return something anyway.\n\n\n    if (pos < 0) {\n      return max;\n    } // If we came to start of buffer - that means buffer is too small,\n    // return max too.\n\n\n    if (pos === 0) {\n      return max;\n    }\n\n    return pos + _utf8len[buf[pos]] > max ? pos : max;\n  };\n\n  var strings = {\n    string2buf: string2buf,\n    buf2string: buf2string,\n    utf8border: utf8border\n  };\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  function ZStream() {\n    /* next input byte */\n    this.input = null; // JS specific, because we have no pointers\n\n    this.next_in = 0;\n    /* number of bytes available at input */\n\n    this.avail_in = 0;\n    /* total number of input bytes read so far */\n\n    this.total_in = 0;\n    /* next output byte should be put there */\n\n    this.output = null; // JS specific, because we have no pointers\n\n    this.next_out = 0;\n    /* remaining free space at output */\n\n    this.avail_out = 0;\n    /* total number of bytes output so far */\n\n    this.total_out = 0;\n    /* last error message, NULL if no error */\n\n    this.msg = ''\n    /*Z_NULL*/\n    ;\n    /* not visible by applications */\n\n    this.state = null;\n    /* best guess about the data type: binary or text */\n\n    this.data_type = 2\n    /*Z_UNKNOWN*/\n    ;\n    /* adler32 value of the uncompressed data */\n\n    this.adler = 0;\n  }\n\n  var zstream = ZStream;\n\n  var toString$1 = Object.prototype.toString;\n  /* Public constants ==========================================================*/\n\n  /* ===========================================================================*/\n\n  var Z_NO_FLUSH$1 = constants$2.Z_NO_FLUSH,\n      Z_SYNC_FLUSH = constants$2.Z_SYNC_FLUSH,\n      Z_FULL_FLUSH = constants$2.Z_FULL_FLUSH,\n      Z_FINISH$2 = constants$2.Z_FINISH,\n      Z_OK$2 = constants$2.Z_OK,\n      Z_STREAM_END$2 = constants$2.Z_STREAM_END,\n      Z_DEFAULT_COMPRESSION = constants$2.Z_DEFAULT_COMPRESSION,\n      Z_DEFAULT_STRATEGY = constants$2.Z_DEFAULT_STRATEGY,\n      Z_DEFLATED$1 = constants$2.Z_DEFLATED;\n  /* ===========================================================================*/\n\n  /**\n   * class Deflate\n   *\n   * Generic JS-style wrapper for zlib calls. If you don't need\n   * streaming behaviour - use more simple functions: [[deflate]],\n   * [[deflateRaw]] and [[gzip]].\n   **/\n\n  /* internal\n   * Deflate.chunks -> Array\n   *\n   * Chunks of output data, if [[Deflate#onData]] not overridden.\n   **/\n\n  /**\n   * Deflate.result -> Uint8Array\n   *\n   * Compressed result, generated by default [[Deflate#onData]]\n   * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n   * (call [[Deflate#push]] with `Z_FINISH` / `true` param).\n   **/\n\n  /**\n   * Deflate.err -> Number\n   *\n   * Error code after deflate finished. 0 (Z_OK) on success.\n   * You will not need it in real life, because deflate errors\n   * are possible only on wrong options or bad `onData` / `onEnd`\n   * custom handlers.\n   **/\n\n  /**\n   * Deflate.msg -> String\n   *\n   * Error message, if [[Deflate.err]] != 0\n   **/\n\n  /**\n   * new Deflate(options)\n   * - options (Object): zlib deflate options.\n   *\n   * Creates new deflator instance with specified params. Throws exception\n   * on bad params. Supported options:\n   *\n   * - `level`\n   * - `windowBits`\n   * - `memLevel`\n   * - `strategy`\n   * - `dictionary`\n   *\n   * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n   * for more information on these.\n   *\n   * Additional options, for internal needs:\n   *\n   * - `chunkSize` - size of generated data chunks (16K by default)\n   * - `raw` (Boolean) - do raw deflate\n   * - `gzip` (Boolean) - create gzip wrapper\n   * - `header` (Object) - custom header for gzip\n   *   - `text` (Boolean) - true if compressed data believed to be text\n   *   - `time` (Number) - modification time, unix timestamp\n   *   - `os` (Number) - operation system code\n   *   - `extra` (Array) - array of bytes with extra data (max 65536)\n   *   - `name` (String) - file name (binary string)\n   *   - `comment` (String) - comment (binary string)\n   *   - `hcrc` (Boolean) - true if header crc should be added\n   *\n   * ##### Example:\n   *\n   * ```javascript\n   * const pako = require('pako')\n   *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n   *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n   *\n   * const deflate = new pako.Deflate({ level: 3});\n   *\n   * deflate.push(chunk1, false);\n   * deflate.push(chunk2, true);  // true -> last chunk\n   *\n   * if (deflate.err) { throw new Error(deflate.err); }\n   *\n   * console.log(deflate.result);\n   * ```\n   **/\n\n  function Deflate$1(options) {\n    this.options = common.assign({\n      level: Z_DEFAULT_COMPRESSION,\n      method: Z_DEFLATED$1,\n      chunkSize: 16384,\n      windowBits: 15,\n      memLevel: 8,\n      strategy: Z_DEFAULT_STRATEGY\n    }, options || {});\n    var opt = this.options;\n\n    if (opt.raw && opt.windowBits > 0) {\n      opt.windowBits = -opt.windowBits;\n    } else if (opt.gzip && opt.windowBits > 0 && opt.windowBits < 16) {\n      opt.windowBits += 16;\n    }\n\n    this.err = 0; // error code, if happens (0 = Z_OK)\n\n    this.msg = ''; // error message\n\n    this.ended = false; // used to avoid multiple onEnd() calls\n\n    this.chunks = []; // chunks of compressed data\n\n    this.strm = new zstream();\n    this.strm.avail_out = 0;\n    var status = deflate_1$2.deflateInit2(this.strm, opt.level, opt.method, opt.windowBits, opt.memLevel, opt.strategy);\n\n    if (status !== Z_OK$2) {\n      throw new Error(messages[status]);\n    }\n\n    if (opt.header) {\n      deflate_1$2.deflateSetHeader(this.strm, opt.header);\n    }\n\n    if (opt.dictionary) {\n      var dict; // Convert data if needed\n\n      if (typeof opt.dictionary === 'string') {\n        // If we need to compress text, change encoding to utf8.\n        dict = strings.string2buf(opt.dictionary);\n      } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {\n        dict = new Uint8Array(opt.dictionary);\n      } else {\n        dict = opt.dictionary;\n      }\n\n      status = deflate_1$2.deflateSetDictionary(this.strm, dict);\n\n      if (status !== Z_OK$2) {\n        throw new Error(messages[status]);\n      }\n\n      this._dict_set = true;\n    }\n  }\n  /**\n   * Deflate#push(data[, flush_mode]) -> Boolean\n   * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be\n   *   converted to utf8 byte sequence.\n   * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n   *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n   *\n   * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n   * new compressed chunks. Returns `true` on success. The last data block must\n   * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending\n   * buffers and call [[Deflate#onEnd]].\n   *\n   * On fail call [[Deflate#onEnd]] with error code and return false.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * push(chunk, false); // push one of data chunks\n   * ...\n   * push(chunk, true);  // push last chunk\n   * ```\n   **/\n\n\n  Deflate$1.prototype.push = function (data, flush_mode) {\n    var strm = this.strm;\n    var chunkSize = this.options.chunkSize;\n\n    var status, _flush_mode;\n\n    if (this.ended) {\n      return false;\n    }\n\n    if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1; // Convert data if needed\n\n    if (typeof data === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      strm.input = strings.string2buf(data);\n    } else if (toString$1.call(data) === '[object ArrayBuffer]') {\n      strm.input = new Uint8Array(data);\n    } else {\n      strm.input = data;\n    }\n\n    strm.next_in = 0;\n    strm.avail_in = strm.input.length;\n\n    for (;;) {\n      if (strm.avail_out === 0) {\n        strm.output = new Uint8Array(chunkSize);\n        strm.next_out = 0;\n        strm.avail_out = chunkSize;\n      } // Make sure avail_out > 6 to avoid repeating markers\n\n\n      if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n        strm.avail_out = 0;\n        continue;\n      }\n\n      status = deflate_1$2.deflate(strm, _flush_mode); // Ended => flush and finish\n\n      if (status === Z_STREAM_END$2) {\n        if (strm.next_out > 0) {\n          this.onData(strm.output.subarray(0, strm.next_out));\n        }\n\n        status = deflate_1$2.deflateEnd(this.strm);\n        this.onEnd(status);\n        this.ended = true;\n        return status === Z_OK$2;\n      } // Flush if out buffer full\n\n\n      if (strm.avail_out === 0) {\n        this.onData(strm.output);\n        continue;\n      } // Flush if requested and has data\n\n\n      if (_flush_mode > 0 && strm.next_out > 0) {\n        this.onData(strm.output.subarray(0, strm.next_out));\n        strm.avail_out = 0;\n        continue;\n      }\n\n      if (strm.avail_in === 0) break;\n    }\n\n    return true;\n  };\n  /**\n   * Deflate#onData(chunk) -> Void\n   * - chunk (Uint8Array): output data.\n   *\n   * By default, stores data blocks in `chunks[]` property and glue\n   * those in `onEnd`. Override this handler, if you need another behaviour.\n   **/\n\n\n  Deflate$1.prototype.onData = function (chunk) {\n    this.chunks.push(chunk);\n  };\n  /**\n   * Deflate#onEnd(status) -> Void\n   * - status (Number): deflate status. 0 (Z_OK) on success,\n   *   other if not.\n   *\n   * Called once after you tell deflate that the input stream is\n   * complete (Z_FINISH). By default - join collected chunks,\n   * free memory and fill `results` / `err` properties.\n   **/\n\n\n  Deflate$1.prototype.onEnd = function (status) {\n    // On success - join\n    if (status === Z_OK$2) {\n      this.result = common.flattenChunks(this.chunks);\n    }\n\n    this.chunks = [];\n    this.err = status;\n    this.msg = this.strm.msg;\n  };\n  /**\n   * deflate(data[, options]) -> Uint8Array\n   * - data (Uint8Array|String): input data to compress.\n   * - options (Object): zlib deflate options.\n   *\n   * Compress `data` with deflate algorithm and `options`.\n   *\n   * Supported options are:\n   *\n   * - level\n   * - windowBits\n   * - memLevel\n   * - strategy\n   * - dictionary\n   *\n   * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n   * for more information on these.\n   *\n   * Sugar (options):\n   *\n   * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n   *   negative windowBits implicitly.\n   *\n   * ##### Example:\n   *\n   * ```javascript\n   * const pako = require('pako')\n   * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);\n   *\n   * console.log(pako.deflate(data));\n   * ```\n   **/\n\n\n  function deflate$1(input, options) {\n    var deflator = new Deflate$1(options);\n    deflator.push(input, true); // That will never happens, if you don't cheat with options :)\n\n    if (deflator.err) {\n      throw deflator.msg || messages[deflator.err];\n    }\n\n    return deflator.result;\n  }\n  /**\n   * deflateRaw(data[, options]) -> Uint8Array\n   * - data (Uint8Array|String): input data to compress.\n   * - options (Object): zlib deflate options.\n   *\n   * The same as [[deflate]], but creates raw data, without wrapper\n   * (header and adler32 crc).\n   **/\n\n\n  function deflateRaw$1(input, options) {\n    options = options || {};\n    options.raw = true;\n    return deflate$1(input, options);\n  }\n  /**\n   * gzip(data[, options]) -> Uint8Array\n   * - data (Uint8Array|String): input data to compress.\n   * - options (Object): zlib deflate options.\n   *\n   * The same as [[deflate]], but create gzip wrapper instead of\n   * deflate one.\n   **/\n\n\n  function gzip$1(input, options) {\n    options = options || {};\n    options.gzip = true;\n    return deflate$1(input, options);\n  }\n\n  var Deflate_1$1 = Deflate$1;\n  var deflate_2 = deflate$1;\n  var deflateRaw_1$1 = deflateRaw$1;\n  var gzip_1$1 = gzip$1;\n  var constants$1 = constants$2;\n  var deflate_1$1 = {\n    Deflate: Deflate_1$1,\n    deflate: deflate_2,\n    deflateRaw: deflateRaw_1$1,\n    gzip: gzip_1$1,\n    constants: constants$1\n  };\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n  // See state defs from inflate.js\n\n  var BAD$1 = 30;\n  /* got a data error -- remain here until reset */\n\n  var TYPE$1 = 12;\n  /* i: waiting for type bits, including last-flag bit */\n\n  /*\n     Decode literal, length, and distance codes and write out the resulting\n     literal and match bytes until either not enough input or output is\n     available, an end-of-block is encountered, or a data error is encountered.\n     When large enough input and output buffers are supplied to inflate(), for\n     example, a 16K input buffer and a 64K output buffer, more than 95% of the\n     inflate execution time is spent in this routine.\n\n     Entry assumptions:\n\n          state.mode === LEN\n          strm.avail_in >= 6\n          strm.avail_out >= 258\n          start >= strm.avail_out\n          state.bits < 8\n\n     On return, state.mode is one of:\n\n          LEN -- ran out of enough output space or enough available input\n          TYPE -- reached end of block code, inflate() to interpret next block\n          BAD -- error in block data\n\n     Notes:\n\n      - The maximum input bits used by a length/distance pair is 15 bits for the\n        length code, 5 bits for the length extra, 15 bits for the distance code,\n        and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n        Therefore if strm.avail_in >= 6, then there is enough input to avoid\n        checking for available input while decoding.\n\n      - The maximum bytes that a single length/distance pair can output is 258\n        bytes, which is the maximum length that can be coded.  inflate_fast()\n        requires strm.avail_out >= 258 for each loop to avoid checking for\n        output space.\n   */\n\n  var inffast = function inflate_fast(strm, start) {\n    var _in;\n    /* local strm.input */\n\n\n    var last;\n    /* have enough input while in < last */\n\n    var _out;\n    /* local strm.output */\n\n\n    var beg;\n    /* inflate()'s initial strm.output */\n\n    var end;\n    /* while out < end, enough space available */\n    //#ifdef INFLATE_STRICT\n\n    var dmax;\n    /* maximum distance from zlib header */\n    //#endif\n\n    var wsize;\n    /* window size or zero if not using window */\n\n    var whave;\n    /* valid bytes in the window */\n\n    var wnext;\n    /* window write index */\n    // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n\n    var s_window;\n    /* allocated sliding window, if wsize != 0 */\n\n    var hold;\n    /* local strm.hold */\n\n    var bits;\n    /* local strm.bits */\n\n    var lcode;\n    /* local strm.lencode */\n\n    var dcode;\n    /* local strm.distcode */\n\n    var lmask;\n    /* mask for first level of length codes */\n\n    var dmask;\n    /* mask for first level of distance codes */\n\n    var here;\n    /* retrieved table entry */\n\n    var op;\n    /* code bits, operation, extra bits, or */\n\n    /*  window position, window bytes to copy */\n\n    var len;\n    /* match length, unused bytes */\n\n    var dist;\n    /* match distance */\n\n    var from;\n    /* where to copy match from */\n\n    var from_source;\n    var input, output; // JS specific, because we have no pointers\n\n    /* copy state to local variables */\n\n    var state = strm.state; //here = state.here;\n\n    _in = strm.next_in;\n    input = strm.input;\n    last = _in + (strm.avail_in - 5);\n    _out = strm.next_out;\n    output = strm.output;\n    beg = _out - (start - strm.avail_out);\n    end = _out + (strm.avail_out - 257); //#ifdef INFLATE_STRICT\n\n    dmax = state.dmax; //#endif\n\n    wsize = state.wsize;\n    whave = state.whave;\n    wnext = state.wnext;\n    s_window = state.window;\n    hold = state.hold;\n    bits = state.bits;\n    lcode = state.lencode;\n    dcode = state.distcode;\n    lmask = (1 << state.lenbits) - 1;\n    dmask = (1 << state.distbits) - 1;\n    /* decode literals and length/distances until end-of-block or not enough\n       input data or output space */\n\n    top: do {\n      if (bits < 15) {\n        hold += input[_in++] << bits;\n        bits += 8;\n        hold += input[_in++] << bits;\n        bits += 8;\n      }\n\n      here = lcode[hold & lmask];\n\n      dolen: for (;;) {\n        // Goto emulation\n        op = here >>> 24\n        /*here.bits*/\n        ;\n        hold >>>= op;\n        bits -= op;\n        op = here >>> 16 & 0xff\n        /*here.op*/\n        ;\n\n        if (op === 0) {\n          /* literal */\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          output[_out++] = here & 0xffff\n          /*here.val*/\n          ;\n        } else if (op & 16) {\n          /* length base */\n          len = here & 0xffff\n          /*here.val*/\n          ;\n          op &= 15;\n          /* number of extra bits */\n\n          if (op) {\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n            }\n\n            len += hold & (1 << op) - 1;\n            hold >>>= op;\n            bits -= op;\n          } //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n\n\n          if (bits < 15) {\n            hold += input[_in++] << bits;\n            bits += 8;\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n\n          here = dcode[hold & dmask];\n\n          dodist: for (;;) {\n            // goto emulation\n            op = here >>> 24\n            /*here.bits*/\n            ;\n            hold >>>= op;\n            bits -= op;\n            op = here >>> 16 & 0xff\n            /*here.op*/\n            ;\n\n            if (op & 16) {\n              /* distance base */\n              dist = here & 0xffff\n              /*here.val*/\n              ;\n              op &= 15;\n              /* number of extra bits */\n\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n\n                if (bits < op) {\n                  hold += input[_in++] << bits;\n                  bits += 8;\n                }\n              }\n\n              dist += hold & (1 << op) - 1; //#ifdef INFLATE_STRICT\n\n              if (dist > dmax) {\n                strm.msg = 'invalid distance too far back';\n                state.mode = BAD$1;\n                break top;\n              } //#endif\n\n\n              hold >>>= op;\n              bits -= op; //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n\n              op = _out - beg;\n              /* max distance in output */\n\n              if (dist > op) {\n                /* see if copy from window */\n                op = dist - op;\n                /* distance back in window */\n\n                if (op > whave) {\n                  if (state.sane) {\n                    strm.msg = 'invalid distance too far back';\n                    state.mode = BAD$1;\n                    break top;\n                  } // (!) This block is disabled in zlib defaults,\n                  // don't enable it for binary compatibility\n                  //#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n                  //                if (len <= op - whave) {\n                  //                  do {\n                  //                    output[_out++] = 0;\n                  //                  } while (--len);\n                  //                  continue top;\n                  //                }\n                  //                len -= op - whave;\n                  //                do {\n                  //                  output[_out++] = 0;\n                  //                } while (--op > whave);\n                  //                if (op === 0) {\n                  //                  from = _out - dist;\n                  //                  do {\n                  //                    output[_out++] = output[from++];\n                  //                  } while (--len);\n                  //                  continue top;\n                  //                }\n                  //#endif\n\n                }\n\n                from = 0; // window index\n\n                from_source = s_window;\n\n                if (wnext === 0) {\n                  /* very common case */\n                  from += wsize - op;\n\n                  if (op < len) {\n                    /* some from window */\n                    len -= op;\n\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n\n                    from = _out - dist;\n                    /* rest from output */\n\n                    from_source = output;\n                  }\n                } else if (wnext < op) {\n                  /* wrap around window */\n                  from += wsize + wnext - op;\n                  op -= wnext;\n\n                  if (op < len) {\n                    /* some from end of window */\n                    len -= op;\n\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n\n                    from = 0;\n\n                    if (wnext < len) {\n                      /* some from start of window */\n                      op = wnext;\n                      len -= op;\n\n                      do {\n                        output[_out++] = s_window[from++];\n                      } while (--op);\n\n                      from = _out - dist;\n                      /* rest from output */\n\n                      from_source = output;\n                    }\n                  }\n                } else {\n                  /* contiguous in window */\n                  from += wnext - op;\n\n                  if (op < len) {\n                    /* some from window */\n                    len -= op;\n\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n\n                    from = _out - dist;\n                    /* rest from output */\n\n                    from_source = output;\n                  }\n                }\n\n                while (len > 2) {\n                  output[_out++] = from_source[from++];\n                  output[_out++] = from_source[from++];\n                  output[_out++] = from_source[from++];\n                  len -= 3;\n                }\n\n                if (len) {\n                  output[_out++] = from_source[from++];\n\n                  if (len > 1) {\n                    output[_out++] = from_source[from++];\n                  }\n                }\n              } else {\n                from = _out - dist;\n                /* copy direct from output */\n\n                do {\n                  /* minimum length is three */\n                  output[_out++] = output[from++];\n                  output[_out++] = output[from++];\n                  output[_out++] = output[from++];\n                  len -= 3;\n                } while (len > 2);\n\n                if (len) {\n                  output[_out++] = output[from++];\n\n                  if (len > 1) {\n                    output[_out++] = output[from++];\n                  }\n                }\n              }\n            } else if ((op & 64) === 0) {\n              /* 2nd level distance code */\n              here = dcode[(here & 0xffff) + (hold & (1 << op) - 1)];\n              continue dodist;\n            } else {\n              strm.msg = 'invalid distance code';\n              state.mode = BAD$1;\n              break top;\n            }\n\n            break; // need to emulate goto via \"continue\"\n          }\n        } else if ((op & 64) === 0) {\n          /* 2nd level length code */\n          here = lcode[(here & 0xffff) + (hold & (1 << op) - 1)];\n          continue dolen;\n        } else if (op & 32) {\n          /* end-of-block */\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.mode = TYPE$1;\n          break top;\n        } else {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD$1;\n          break top;\n        }\n\n        break; // need to emulate goto via \"continue\"\n      }\n    } while (_in < last && _out < end);\n    /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n\n\n    len = bits >> 3;\n    _in -= len;\n    bits -= len << 3;\n    hold &= (1 << bits) - 1;\n    /* update state and return */\n\n    strm.next_in = _in;\n    strm.next_out = _out;\n    strm.avail_in = _in < last ? 5 + (last - _in) : 5 - (_in - last);\n    strm.avail_out = _out < end ? 257 + (end - _out) : 257 - (_out - end);\n    state.hold = hold;\n    state.bits = bits;\n    return;\n  };\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  var MAXBITS = 15;\n  var ENOUGH_LENS$1 = 852;\n  var ENOUGH_DISTS$1 = 592; //const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\n  var CODES$1 = 0;\n  var LENS$1 = 1;\n  var DISTS$1 = 2;\n  var lbase = new Uint16Array([\n  /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]);\n  var lext = new Uint8Array([\n  /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]);\n  var dbase = new Uint16Array([\n  /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]);\n  var dext = new Uint8Array([\n  /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);\n\n  var inflate_table = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts) {\n    var bits = opts.bits; //here = opts.here; /* table entry for duplication */\n\n    var len = 0;\n    /* a code's length in bits */\n\n    var sym = 0;\n    /* index of code symbols */\n\n    var min = 0,\n        max = 0;\n    /* minimum and maximum code lengths */\n\n    var root = 0;\n    /* number of index bits for root table */\n\n    var curr = 0;\n    /* number of index bits for current table */\n\n    var drop = 0;\n    /* code bits to drop for sub-table */\n\n    var left = 0;\n    /* number of prefix codes available */\n\n    var used = 0;\n    /* code entries in table used */\n\n    var huff = 0;\n    /* Huffman code */\n\n    var incr;\n    /* for incrementing code, index */\n\n    var fill;\n    /* index for replicating entries */\n\n    var low;\n    /* low bits for current root entry */\n\n    var mask;\n    /* mask for low root bits */\n\n    var next;\n    /* next available space in table */\n\n    var base = null;\n    /* base value table to use */\n\n    var base_index = 0; //  let shoextra;    /* extra bits table to use */\n\n    var end;\n    /* use base and extra for symbol > end */\n\n    var count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n\n    var offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n\n    var extra = null;\n    var extra_index = 0;\n    var here_bits, here_op, here_val;\n    /*\n     Process a set of code lengths to create a canonical Huffman code.  The\n     code lengths are lens[0..codes-1].  Each length corresponds to the\n     symbols 0..codes-1.  The Huffman code is generated by first sorting the\n     symbols by length from short to long, and retaining the symbol order\n     for codes with equal lengths.  Then the code starts with all zero bits\n     for the first code of the shortest length, and the codes are integer\n     increments for the same length, and zeros are appended as the length\n     increases.  For the deflate format, these bits are stored backwards\n     from their more natural integer increment ordering, and so when the\n     decoding tables are built in the large loop below, the integer codes\n     are incremented backwards.\n      This routine assumes, but does not check, that all of the entries in\n     lens[] are in the range 0..MAXBITS.  The caller must assure this.\n     1..MAXBITS is interpreted as that code length.  zero means that that\n     symbol does not occur in this code.\n      The codes are sorted by computing a count of codes for each length,\n     creating from that a table of starting indices for each length in the\n     sorted table, and then entering the symbols in order in the sorted\n     table.  The sorted table is work[], with that space being provided by\n     the caller.\n      The length counts are used for other purposes as well, i.e. finding\n     the minimum and maximum length codes, determining if there are any\n     codes at all, checking for a valid set of lengths, and looking ahead\n     at length counts to determine sub-table sizes when building the\n     decoding tables.\n     */\n\n    /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n\n    for (len = 0; len <= MAXBITS; len++) {\n      count[len] = 0;\n    }\n\n    for (sym = 0; sym < codes; sym++) {\n      count[lens[lens_index + sym]]++;\n    }\n    /* bound code lengths, force root to be within code lengths */\n\n\n    root = bits;\n\n    for (max = MAXBITS; max >= 1; max--) {\n      if (count[max] !== 0) {\n        break;\n      }\n    }\n\n    if (root > max) {\n      root = max;\n    }\n\n    if (max === 0) {\n      /* no symbols to code at all */\n      //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n      //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n      //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n      table[table_index++] = 1 << 24 | 64 << 16 | 0; //table.op[opts.table_index] = 64;\n      //table.bits[opts.table_index] = 1;\n      //table.val[opts.table_index++] = 0;\n\n      table[table_index++] = 1 << 24 | 64 << 16 | 0;\n      opts.bits = 1;\n      return 0;\n      /* no symbols, but wait for decoding to report error */\n    }\n\n    for (min = 1; min < max; min++) {\n      if (count[min] !== 0) {\n        break;\n      }\n    }\n\n    if (root < min) {\n      root = min;\n    }\n    /* check for an over-subscribed or incomplete set of lengths */\n\n\n    left = 1;\n\n    for (len = 1; len <= MAXBITS; len++) {\n      left <<= 1;\n      left -= count[len];\n\n      if (left < 0) {\n        return -1;\n      }\n      /* over-subscribed */\n\n    }\n\n    if (left > 0 && (type === CODES$1 || max !== 1)) {\n      return -1;\n      /* incomplete set */\n    }\n    /* generate offsets into symbol table for each length for sorting */\n\n\n    offs[1] = 0;\n\n    for (len = 1; len < MAXBITS; len++) {\n      offs[len + 1] = offs[len] + count[len];\n    }\n    /* sort symbols by length, by symbol order within each length */\n\n\n    for (sym = 0; sym < codes; sym++) {\n      if (lens[lens_index + sym] !== 0) {\n        work[offs[lens[lens_index + sym]]++] = sym;\n      }\n    }\n    /*\n     Create and fill in decoding tables.  In this loop, the table being\n     filled is at next and has curr index bits.  The code being used is huff\n     with length len.  That code is converted to an index by dropping drop\n     bits off of the bottom.  For codes where len is less than drop + curr,\n     those top drop + curr - len bits are incremented through all values to\n     fill the table with replicated entries.\n      root is the number of index bits for the root table.  When len exceeds\n     root, sub-tables are created pointed to by the root entry with an index\n     of the low root bits of huff.  This is saved in low to check for when a\n     new sub-table should be started.  drop is zero when the root table is\n     being filled, and drop is root when sub-tables are being filled.\n      When a new sub-table is needed, it is necessary to look ahead in the\n     code lengths to determine what size sub-table is needed.  The length\n     counts are used for this, and so count[] is decremented as codes are\n     entered in the tables.\n      used keeps track of how many table entries have been allocated from the\n     provided *table space.  It is checked for LENS and DIST tables against\n     the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n     the initial root table size constants.  See the comments in inftrees.h\n     for more information.\n      sym increments through all symbols, and the loop terminates when\n     all codes of length max, i.e. all codes, have been processed.  This\n     routine permits incomplete codes, so another loop after this one fills\n     in the rest of the decoding tables with invalid code markers.\n     */\n\n    /* set up for code type */\n    // poor man optimization - use if-else instead of switch,\n    // to avoid deopts in old v8\n\n\n    if (type === CODES$1) {\n      base = extra = work;\n      /* dummy value--not used */\n\n      end = 19;\n    } else if (type === LENS$1) {\n      base = lbase;\n      base_index -= 257;\n      extra = lext;\n      extra_index -= 257;\n      end = 256;\n    } else {\n      /* DISTS */\n      base = dbase;\n      extra = dext;\n      end = -1;\n    }\n    /* initialize opts for loop */\n\n\n    huff = 0;\n    /* starting code */\n\n    sym = 0;\n    /* starting code symbol */\n\n    len = min;\n    /* starting code length */\n\n    next = table_index;\n    /* current table to fill in */\n\n    curr = root;\n    /* current table index bits */\n\n    drop = 0;\n    /* current bits to drop from code for index */\n\n    low = -1;\n    /* trigger new sub-table when len > root */\n\n    used = 1 << root;\n    /* use root table entries */\n\n    mask = used - 1;\n    /* mask for comparing low */\n\n    /* check available table space */\n\n    if (type === LENS$1 && used > ENOUGH_LENS$1 || type === DISTS$1 && used > ENOUGH_DISTS$1) {\n      return 1;\n    }\n    /* process all codes and make table entries */\n\n\n    for (;;) {\n      /* create table entry */\n      here_bits = len - drop;\n\n      if (work[sym] < end) {\n        here_op = 0;\n        here_val = work[sym];\n      } else if (work[sym] > end) {\n        here_op = extra[extra_index + work[sym]];\n        here_val = base[base_index + work[sym]];\n      } else {\n        here_op = 32 + 64;\n        /* end of block */\n\n        here_val = 0;\n      }\n      /* replicate for those indices with low len bits equal to huff */\n\n\n      incr = 1 << len - drop;\n      fill = 1 << curr;\n      min = fill;\n      /* save offset to next table */\n\n      do {\n        fill -= incr;\n        table[next + (huff >> drop) + fill] = here_bits << 24 | here_op << 16 | here_val | 0;\n      } while (fill !== 0);\n      /* backwards increment the len-bit code huff */\n\n\n      incr = 1 << len - 1;\n\n      while (huff & incr) {\n        incr >>= 1;\n      }\n\n      if (incr !== 0) {\n        huff &= incr - 1;\n        huff += incr;\n      } else {\n        huff = 0;\n      }\n      /* go to next symbol, update count, len */\n\n\n      sym++;\n\n      if (--count[len] === 0) {\n        if (len === max) {\n          break;\n        }\n\n        len = lens[lens_index + work[sym]];\n      }\n      /* create new sub-table if needed */\n\n\n      if (len > root && (huff & mask) !== low) {\n        /* if first time, transition to sub-tables */\n        if (drop === 0) {\n          drop = root;\n        }\n        /* increment past last table */\n\n\n        next += min;\n        /* here min is 1 << curr */\n\n        /* determine length of next table */\n\n        curr = len - drop;\n        left = 1 << curr;\n\n        while (curr + drop < max) {\n          left -= count[curr + drop];\n\n          if (left <= 0) {\n            break;\n          }\n\n          curr++;\n          left <<= 1;\n        }\n        /* check for enough space */\n\n\n        used += 1 << curr;\n\n        if (type === LENS$1 && used > ENOUGH_LENS$1 || type === DISTS$1 && used > ENOUGH_DISTS$1) {\n          return 1;\n        }\n        /* point entry in root table to sub-table */\n\n\n        low = huff & mask;\n        /*table.op[low] = curr;\n        table.bits[low] = root;\n        table.val[low] = next - opts.table_index;*/\n\n        table[low] = root << 24 | curr << 16 | next - table_index | 0;\n      }\n    }\n    /* fill in remaining table entry if code is incomplete (guaranteed to have\n     at most one remaining entry, since if the code is incomplete, the\n     maximum code length that was allowed to get this far is one bit) */\n\n\n    if (huff !== 0) {\n      //table.op[next + huff] = 64;            /* invalid code marker */\n      //table.bits[next + huff] = len - drop;\n      //table.val[next + huff] = 0;\n      table[next + huff] = len - drop << 24 | 64 << 16 | 0;\n    }\n    /* set return parameters */\n    //opts.table_index += used;\n\n\n    opts.bits = root;\n    return 0;\n  };\n\n  var inftrees = inflate_table;\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n\n  var CODES = 0;\n  var LENS = 1;\n  var DISTS = 2;\n  /* Public constants ==========================================================*/\n\n  /* ===========================================================================*/\n\n  var Z_FINISH$1 = constants$2.Z_FINISH,\n      Z_BLOCK = constants$2.Z_BLOCK,\n      Z_TREES = constants$2.Z_TREES,\n      Z_OK$1 = constants$2.Z_OK,\n      Z_STREAM_END$1 = constants$2.Z_STREAM_END,\n      Z_NEED_DICT$1 = constants$2.Z_NEED_DICT,\n      Z_STREAM_ERROR$1 = constants$2.Z_STREAM_ERROR,\n      Z_DATA_ERROR$1 = constants$2.Z_DATA_ERROR,\n      Z_MEM_ERROR$1 = constants$2.Z_MEM_ERROR,\n      Z_BUF_ERROR = constants$2.Z_BUF_ERROR,\n      Z_DEFLATED = constants$2.Z_DEFLATED;\n  /* STATES ====================================================================*/\n\n  /* ===========================================================================*/\n\n  var HEAD = 1;\n  /* i: waiting for magic header */\n\n  var FLAGS = 2;\n  /* i: waiting for method and flags (gzip) */\n\n  var TIME = 3;\n  /* i: waiting for modification time (gzip) */\n\n  var OS = 4;\n  /* i: waiting for extra flags and operating system (gzip) */\n\n  var EXLEN = 5;\n  /* i: waiting for extra length (gzip) */\n\n  var EXTRA = 6;\n  /* i: waiting for extra bytes (gzip) */\n\n  var NAME = 7;\n  /* i: waiting for end of file name (gzip) */\n\n  var COMMENT = 8;\n  /* i: waiting for end of comment (gzip) */\n\n  var HCRC = 9;\n  /* i: waiting for header crc (gzip) */\n\n  var DICTID = 10;\n  /* i: waiting for dictionary check value */\n\n  var DICT = 11;\n  /* waiting for inflateSetDictionary() call */\n\n  var TYPE = 12;\n  /* i: waiting for type bits, including last-flag bit */\n\n  var TYPEDO = 13;\n  /* i: same, but skip check to exit inflate on new block */\n\n  var STORED = 14;\n  /* i: waiting for stored size (length and complement) */\n\n  var COPY_ = 15;\n  /* i/o: same as COPY below, but only first time in */\n\n  var COPY = 16;\n  /* i/o: waiting for input or output to copy stored block */\n\n  var TABLE = 17;\n  /* i: waiting for dynamic block table lengths */\n\n  var LENLENS = 18;\n  /* i: waiting for code length code lengths */\n\n  var CODELENS = 19;\n  /* i: waiting for length/lit and distance code lengths */\n\n  var LEN_ = 20;\n  /* i: same as LEN below, but only first time in */\n\n  var LEN = 21;\n  /* i: waiting for length/lit/eob code */\n\n  var LENEXT = 22;\n  /* i: waiting for length extra bits */\n\n  var DIST = 23;\n  /* i: waiting for distance code */\n\n  var DISTEXT = 24;\n  /* i: waiting for distance extra bits */\n\n  var MATCH = 25;\n  /* o: waiting for output space to copy string */\n\n  var LIT = 26;\n  /* o: waiting for output space to write literal */\n\n  var CHECK = 27;\n  /* i: waiting for 32-bit check value */\n\n  var LENGTH = 28;\n  /* i: waiting for 32-bit length (gzip) */\n\n  var DONE = 29;\n  /* finished check, done -- remain here until reset */\n\n  var BAD = 30;\n  /* got a data error -- remain here until reset */\n\n  var MEM = 31;\n  /* got an inflate() memory error -- remain here until reset */\n\n  var SYNC = 32;\n  /* looking for synchronization bytes to restart inflate() */\n\n  /* ===========================================================================*/\n\n  var ENOUGH_LENS = 852;\n  var ENOUGH_DISTS = 592; //const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\n  var MAX_WBITS = 15;\n  /* 32K LZ77 window */\n\n  var DEF_WBITS = MAX_WBITS;\n\n  var zswap32 = function zswap32(q) {\n    return (q >>> 24 & 0xff) + (q >>> 8 & 0xff00) + ((q & 0xff00) << 8) + ((q & 0xff) << 24);\n  };\n\n  function InflateState() {\n    this.mode = 0;\n    /* current inflate mode */\n\n    this.last = false;\n    /* true if processing last block */\n\n    this.wrap = 0;\n    /* bit 0 true for zlib, bit 1 true for gzip */\n\n    this.havedict = false;\n    /* true if dictionary provided */\n\n    this.flags = 0;\n    /* gzip header method and flags (0 if zlib) */\n\n    this.dmax = 0;\n    /* zlib header max distance (INFLATE_STRICT) */\n\n    this.check = 0;\n    /* protected copy of check value */\n\n    this.total = 0;\n    /* protected copy of output count */\n    // TODO: may be {}\n\n    this.head = null;\n    /* where to save gzip header information */\n\n    /* sliding window */\n\n    this.wbits = 0;\n    /* log base 2 of requested window size */\n\n    this.wsize = 0;\n    /* window size or zero if not using window */\n\n    this.whave = 0;\n    /* valid bytes in the window */\n\n    this.wnext = 0;\n    /* window write index */\n\n    this.window = null;\n    /* allocated sliding window, if needed */\n\n    /* bit accumulator */\n\n    this.hold = 0;\n    /* input bit accumulator */\n\n    this.bits = 0;\n    /* number of bits in \"in\" */\n\n    /* for string and stored block copying */\n\n    this.length = 0;\n    /* literal or length of data to copy */\n\n    this.offset = 0;\n    /* distance back to copy string from */\n\n    /* for table and code decoding */\n\n    this.extra = 0;\n    /* extra bits needed */\n\n    /* fixed and dynamic code tables */\n\n    this.lencode = null;\n    /* starting table for length/literal codes */\n\n    this.distcode = null;\n    /* starting table for distance codes */\n\n    this.lenbits = 0;\n    /* index bits for lencode */\n\n    this.distbits = 0;\n    /* index bits for distcode */\n\n    /* dynamic table building */\n\n    this.ncode = 0;\n    /* number of code length code lengths */\n\n    this.nlen = 0;\n    /* number of length code lengths */\n\n    this.ndist = 0;\n    /* number of distance code lengths */\n\n    this.have = 0;\n    /* number of code lengths in lens[] */\n\n    this.next = null;\n    /* next available space in codes[] */\n\n    this.lens = new Uint16Array(320);\n    /* temporary storage for code lengths */\n\n    this.work = new Uint16Array(288);\n    /* work area for code table building */\n\n    /*\n     because we don't have pointers in js, we use lencode and distcode directly\n     as buffers so we don't need codes\n    */\n    //this.codes = new Int32Array(ENOUGH);       /* space for code tables */\n\n    this.lendyn = null;\n    /* dynamic table for length/literal codes (JS specific) */\n\n    this.distdyn = null;\n    /* dynamic table for distance codes (JS specific) */\n\n    this.sane = 0;\n    /* if false, allow invalid distance too far */\n\n    this.back = 0;\n    /* bits back of last unprocessed length/lit */\n\n    this.was = 0;\n    /* initial length of match */\n  }\n\n  var inflateResetKeep = function inflateResetKeep(strm) {\n    if (!strm || !strm.state) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    var state = strm.state;\n    strm.total_in = strm.total_out = state.total = 0;\n    strm.msg = '';\n    /*Z_NULL*/\n\n    if (state.wrap) {\n      /* to support ill-conceived Java test suite */\n      strm.adler = state.wrap & 1;\n    }\n\n    state.mode = HEAD;\n    state.last = 0;\n    state.havedict = 0;\n    state.dmax = 32768;\n    state.head = null\n    /*Z_NULL*/\n    ;\n    state.hold = 0;\n    state.bits = 0; //state.lencode = state.distcode = state.next = state.codes;\n\n    state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);\n    state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);\n    state.sane = 1;\n    state.back = -1; //Tracev((stderr, \"inflate: reset\\n\"));\n\n    return Z_OK$1;\n  };\n\n  var inflateReset = function inflateReset(strm) {\n    if (!strm || !strm.state) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    var state = strm.state;\n    state.wsize = 0;\n    state.whave = 0;\n    state.wnext = 0;\n    return inflateResetKeep(strm);\n  };\n\n  var inflateReset2 = function inflateReset2(strm, windowBits) {\n    var wrap;\n    /* get the state */\n\n    if (!strm || !strm.state) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    var state = strm.state;\n    /* extract wrap request from windowBits parameter */\n\n    if (windowBits < 0) {\n      wrap = 0;\n      windowBits = -windowBits;\n    } else {\n      wrap = (windowBits >> 4) + 1;\n\n      if (windowBits < 48) {\n        windowBits &= 15;\n      }\n    }\n    /* set number of window bits, free window if different */\n\n\n    if (windowBits && (windowBits < 8 || windowBits > 15)) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    if (state.window !== null && state.wbits !== windowBits) {\n      state.window = null;\n    }\n    /* update state and reset the rest of it */\n\n\n    state.wrap = wrap;\n    state.wbits = windowBits;\n    return inflateReset(strm);\n  };\n\n  var inflateInit2 = function inflateInit2(strm, windowBits) {\n    if (!strm) {\n      return Z_STREAM_ERROR$1;\n    } //strm.msg = Z_NULL;                 /* in case we return an error */\n\n\n    var state = new InflateState(); //if (state === Z_NULL) return Z_MEM_ERROR;\n    //Tracev((stderr, \"inflate: allocated\\n\"));\n\n    strm.state = state;\n    state.window = null\n    /*Z_NULL*/\n    ;\n    var ret = inflateReset2(strm, windowBits);\n\n    if (ret !== Z_OK$1) {\n      strm.state = null\n      /*Z_NULL*/\n      ;\n    }\n\n    return ret;\n  };\n\n  var inflateInit = function inflateInit(strm) {\n    return inflateInit2(strm, DEF_WBITS);\n  };\n  /*\n   Return state with length and distance decoding tables and index sizes set to\n   fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n   If BUILDFIXED is defined, then instead this routine builds the tables the\n   first time it's called, and returns those tables the first time and\n   thereafter.  This reduces the size of the code by about 2K bytes, in\n   exchange for a little execution time.  However, BUILDFIXED should not be\n   used for threaded applications, since the rewriting of the tables and virgin\n   may not be thread-safe.\n   */\n\n\n  var virgin = true;\n  var lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\n  var fixedtables = function fixedtables(state) {\n    /* build fixed huffman tables if first call (may not be thread safe) */\n    if (virgin) {\n      lenfix = new Int32Array(512);\n      distfix = new Int32Array(32);\n      /* literal/length table */\n\n      var sym = 0;\n\n      while (sym < 144) {\n        state.lens[sym++] = 8;\n      }\n\n      while (sym < 256) {\n        state.lens[sym++] = 9;\n      }\n\n      while (sym < 280) {\n        state.lens[sym++] = 7;\n      }\n\n      while (sym < 288) {\n        state.lens[sym++] = 8;\n      }\n\n      inftrees(LENS, state.lens, 0, 288, lenfix, 0, state.work, {\n        bits: 9\n      });\n      /* distance table */\n\n      sym = 0;\n\n      while (sym < 32) {\n        state.lens[sym++] = 5;\n      }\n\n      inftrees(DISTS, state.lens, 0, 32, distfix, 0, state.work, {\n        bits: 5\n      });\n      /* do this just once */\n\n      virgin = false;\n    }\n\n    state.lencode = lenfix;\n    state.lenbits = 9;\n    state.distcode = distfix;\n    state.distbits = 5;\n  };\n  /*\n   Update the window with the last wsize (normally 32K) bytes written before\n   returning.  If window does not exist yet, create it.  This is only called\n   when a window is already in use, or when output has been written during this\n   inflate call, but the end of the deflate stream has not been reached yet.\n   It is also called to create a window for dictionary data when a dictionary\n   is loaded.\n\n   Providing output buffers larger than 32K to inflate() should provide a speed\n   advantage, since only the last 32K of output is copied to the sliding window\n   upon return from inflate(), and since all distances after the first 32K of\n   output will fall in the output data, making match copies simpler and faster.\n   The advantage may be dependent on the size of the processor's data caches.\n   */\n\n\n  var updatewindow = function updatewindow(strm, src, end, copy) {\n    var dist;\n    var state = strm.state;\n    /* if it hasn't been done already, allocate space for the window */\n\n    if (state.window === null) {\n      state.wsize = 1 << state.wbits;\n      state.wnext = 0;\n      state.whave = 0;\n      state.window = new Uint8Array(state.wsize);\n    }\n    /* copy state->wsize or less output bytes into the circular window */\n\n\n    if (copy >= state.wsize) {\n      state.window.set(src.subarray(end - state.wsize, end), 0);\n      state.wnext = 0;\n      state.whave = state.wsize;\n    } else {\n      dist = state.wsize - state.wnext;\n\n      if (dist > copy) {\n        dist = copy;\n      } //zmemcpy(state->window + state->wnext, end - copy, dist);\n\n\n      state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);\n      copy -= dist;\n\n      if (copy) {\n        //zmemcpy(state->window, end - copy, copy);\n        state.window.set(src.subarray(end - copy, end), 0);\n        state.wnext = copy;\n        state.whave = state.wsize;\n      } else {\n        state.wnext += dist;\n\n        if (state.wnext === state.wsize) {\n          state.wnext = 0;\n        }\n\n        if (state.whave < state.wsize) {\n          state.whave += dist;\n        }\n      }\n    }\n\n    return 0;\n  };\n\n  var inflate$2 = function inflate(strm, flush) {\n    var state;\n    var input, output; // input/output buffers\n\n    var next;\n    /* next input INDEX */\n\n    var put;\n    /* next output INDEX */\n\n    var have, left;\n    /* available input and output */\n\n    var hold;\n    /* bit buffer */\n\n    var bits;\n    /* bits in bit buffer */\n\n    var _in, _out;\n    /* save starting available input and output */\n\n\n    var copy;\n    /* number of stored or match bytes to copy */\n\n    var from;\n    /* where to copy match bytes from */\n\n    var from_source;\n    var here = 0;\n    /* current decoding table entry */\n\n    var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n    //let last;                   /* parent table entry */\n\n    var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n\n    var len;\n    /* length to copy for repeats, bits to drop */\n\n    var ret;\n    /* return code */\n\n    var hbuf = new Uint8Array(4);\n    /* buffer for gzip header crc calculation */\n\n    var opts;\n    var n; // temporary variable for NEED_BITS\n\n    var order =\n    /* permutation of code lengths */\n    new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n\n    if (!strm || !strm.state || !strm.output || !strm.input && strm.avail_in !== 0) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    state = strm.state;\n\n    if (state.mode === TYPE) {\n      state.mode = TYPEDO;\n    }\n    /* skip check */\n    //--- LOAD() ---\n\n\n    put = strm.next_out;\n    output = strm.output;\n    left = strm.avail_out;\n    next = strm.next_in;\n    input = strm.input;\n    have = strm.avail_in;\n    hold = state.hold;\n    bits = state.bits; //---\n\n    _in = have;\n    _out = left;\n    ret = Z_OK$1;\n\n    inf_leave: // goto emulation\n    for (;;) {\n      switch (state.mode) {\n        case HEAD:\n          if (state.wrap === 0) {\n            state.mode = TYPEDO;\n            break;\n          } //=== NEEDBITS(16);\n\n\n          while (bits < 16) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          if (state.wrap & 2 && hold === 0x8b1f) {\n            /* gzip header */\n            state.check = 0\n            /*crc32(0L, Z_NULL, 0)*/\n            ; //=== CRC2(state.check, hold);\n\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = hold >>> 8 & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0); //===//\n            //=== INITBITS();\n\n            hold = 0;\n            bits = 0; //===//\n\n            state.mode = FLAGS;\n            break;\n          }\n\n          state.flags = 0;\n          /* expect zlib header */\n\n          if (state.head) {\n            state.head.done = false;\n          }\n\n          if (!(state.wrap & 1) ||\n          /* check if zlib header allowed */\n          (((hold & 0xff) << 8) + (hold >> 8)) % 31) {\n            strm.msg = 'incorrect header check';\n            state.mode = BAD;\n            break;\n          }\n\n          if ((hold & 0x0f) !== Z_DEFLATED) {\n            strm.msg = 'unknown compression method';\n            state.mode = BAD;\n            break;\n          } //--- DROPBITS(4) ---//\n\n\n          hold >>>= 4;\n          bits -= 4; //---//\n\n          len = (hold & 0x0f) + 8;\n\n          if (state.wbits === 0) {\n            state.wbits = len;\n          } else if (len > state.wbits) {\n            strm.msg = 'invalid window size';\n            state.mode = BAD;\n            break;\n          } // !!! pako patch. Force use `options.windowBits` if passed.\n          // Required to always use max window size by default.\n\n\n          state.dmax = 1 << state.wbits; //state.dmax = 1 << len;\n          //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n\n          strm.adler = state.check = 1\n          /*adler32(0L, Z_NULL, 0)*/\n          ;\n          state.mode = hold & 0x200 ? DICTID : TYPE; //=== INITBITS();\n\n          hold = 0;\n          bits = 0; //===//\n\n          break;\n\n        case FLAGS:\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          state.flags = hold;\n\n          if ((state.flags & 0xff) !== Z_DEFLATED) {\n            strm.msg = 'unknown compression method';\n            state.mode = BAD;\n            break;\n          }\n\n          if (state.flags & 0xe000) {\n            strm.msg = 'unknown header flags set';\n            state.mode = BAD;\n            break;\n          }\n\n          if (state.head) {\n            state.head.text = hold >> 8 & 1;\n          }\n\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = hold >>> 8 & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0); //===//\n          } //=== INITBITS();\n\n\n          hold = 0;\n          bits = 0; //===//\n\n          state.mode = TIME;\n\n        /* falls through */\n\n        case TIME:\n          //=== NEEDBITS(32); */\n          while (bits < 32) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          if (state.head) {\n            state.head.time = hold;\n          }\n\n          if (state.flags & 0x0200) {\n            //=== CRC4(state.check, hold)\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = hold >>> 8 & 0xff;\n            hbuf[2] = hold >>> 16 & 0xff;\n            hbuf[3] = hold >>> 24 & 0xff;\n            state.check = crc32_1(state.check, hbuf, 4, 0); //===\n          } //=== INITBITS();\n\n\n          hold = 0;\n          bits = 0; //===//\n\n          state.mode = OS;\n\n        /* falls through */\n\n        case OS:\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          if (state.head) {\n            state.head.xflags = hold & 0xff;\n            state.head.os = hold >> 8;\n          }\n\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = hold >>> 8 & 0xff;\n            state.check = crc32_1(state.check, hbuf, 2, 0); //===//\n          } //=== INITBITS();\n\n\n          hold = 0;\n          bits = 0; //===//\n\n          state.mode = EXLEN;\n\n        /* falls through */\n\n        case EXLEN:\n          if (state.flags & 0x0400) {\n            //=== NEEDBITS(16); */\n            while (bits < 16) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            state.length = hold;\n\n            if (state.head) {\n              state.head.extra_len = hold;\n            }\n\n            if (state.flags & 0x0200) {\n              //=== CRC2(state.check, hold);\n              hbuf[0] = hold & 0xff;\n              hbuf[1] = hold >>> 8 & 0xff;\n              state.check = crc32_1(state.check, hbuf, 2, 0); //===//\n            } //=== INITBITS();\n\n\n            hold = 0;\n            bits = 0; //===//\n          } else if (state.head) {\n            state.head.extra = null\n            /*Z_NULL*/\n            ;\n          }\n\n          state.mode = EXTRA;\n\n        /* falls through */\n\n        case EXTRA:\n          if (state.flags & 0x0400) {\n            copy = state.length;\n\n            if (copy > have) {\n              copy = have;\n            }\n\n            if (copy) {\n              if (state.head) {\n                len = state.head.extra_len - state.length;\n\n                if (!state.head.extra) {\n                  // Use untyped array for more convenient processing later\n                  state.head.extra = new Uint8Array(state.head.extra_len);\n                }\n\n                state.head.extra.set(input.subarray(next, // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                next + copy),\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len); //zmemcpy(state.head.extra + len, next,\n                //        len + copy > state.head.extra_max ?\n                //        state.head.extra_max - len : copy);\n              }\n\n              if (state.flags & 0x0200) {\n                state.check = crc32_1(state.check, input, copy, next);\n              }\n\n              have -= copy;\n              next += copy;\n              state.length -= copy;\n            }\n\n            if (state.length) {\n              break inf_leave;\n            }\n          }\n\n          state.length = 0;\n          state.mode = NAME;\n\n        /* falls through */\n\n        case NAME:\n          if (state.flags & 0x0800) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            copy = 0;\n\n            do {\n              // TODO: 2 or 1 bytes?\n              len = input[next + copy++];\n              /* use constant limit because in js we should not preallocate memory */\n\n              if (state.head && len && state.length < 65536\n              /*state.head.name_max*/\n              ) {\n                state.head.name += String.fromCharCode(len);\n              }\n            } while (len && copy < have);\n\n            if (state.flags & 0x0200) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n\n            have -= copy;\n            next += copy;\n\n            if (len) {\n              break inf_leave;\n            }\n          } else if (state.head) {\n            state.head.name = null;\n          }\n\n          state.length = 0;\n          state.mode = COMMENT;\n\n        /* falls through */\n\n        case COMMENT:\n          if (state.flags & 0x1000) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            copy = 0;\n\n            do {\n              len = input[next + copy++];\n              /* use constant limit because in js we should not preallocate memory */\n\n              if (state.head && len && state.length < 65536\n              /*state.head.comm_max*/\n              ) {\n                state.head.comment += String.fromCharCode(len);\n              }\n            } while (len && copy < have);\n\n            if (state.flags & 0x0200) {\n              state.check = crc32_1(state.check, input, copy, next);\n            }\n\n            have -= copy;\n            next += copy;\n\n            if (len) {\n              break inf_leave;\n            }\n          } else if (state.head) {\n            state.head.comment = null;\n          }\n\n          state.mode = HCRC;\n\n        /* falls through */\n\n        case HCRC:\n          if (state.flags & 0x0200) {\n            //=== NEEDBITS(16); */\n            while (bits < 16) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            if (hold !== (state.check & 0xffff)) {\n              strm.msg = 'header crc mismatch';\n              state.mode = BAD;\n              break;\n            } //=== INITBITS();\n\n\n            hold = 0;\n            bits = 0; //===//\n          }\n\n          if (state.head) {\n            state.head.hcrc = state.flags >> 9 & 1;\n            state.head.done = true;\n          }\n\n          strm.adler = state.check = 0;\n          state.mode = TYPE;\n          break;\n\n        case DICTID:\n          //=== NEEDBITS(32); */\n          while (bits < 32) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          strm.adler = state.check = zswap32(hold); //=== INITBITS();\n\n          hold = 0;\n          bits = 0; //===//\n\n          state.mode = DICT;\n\n        /* falls through */\n\n        case DICT:\n          if (state.havedict === 0) {\n            //--- RESTORE() ---\n            strm.next_out = put;\n            strm.avail_out = left;\n            strm.next_in = next;\n            strm.avail_in = have;\n            state.hold = hold;\n            state.bits = bits; //---\n\n            return Z_NEED_DICT$1;\n          }\n\n          strm.adler = state.check = 1\n          /*adler32(0L, Z_NULL, 0)*/\n          ;\n          state.mode = TYPE;\n\n        /* falls through */\n\n        case TYPE:\n          if (flush === Z_BLOCK || flush === Z_TREES) {\n            break inf_leave;\n          }\n\n        /* falls through */\n\n        case TYPEDO:\n          if (state.last) {\n            //--- BYTEBITS() ---//\n            hold >>>= bits & 7;\n            bits -= bits & 7; //---//\n\n            state.mode = CHECK;\n            break;\n          } //=== NEEDBITS(3); */\n\n\n          while (bits < 3) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          state.last = hold & 0x01\n          /*BITS(1)*/\n          ; //--- DROPBITS(1) ---//\n\n          hold >>>= 1;\n          bits -= 1; //---//\n\n          switch (hold & 0x03) {\n            case 0:\n              /* stored block */\n              //Tracev((stderr, \"inflate:     stored block%s\\n\",\n              //        state.last ? \" (last)\" : \"\"));\n              state.mode = STORED;\n              break;\n\n            case 1:\n              /* fixed block */\n              fixedtables(state); //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n              //        state.last ? \" (last)\" : \"\"));\n\n              state.mode = LEN_;\n              /* decode codes */\n\n              if (flush === Z_TREES) {\n                //--- DROPBITS(2) ---//\n                hold >>>= 2;\n                bits -= 2; //---//\n\n                break inf_leave;\n              }\n\n              break;\n\n            case 2:\n              /* dynamic block */\n              //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n              //        state.last ? \" (last)\" : \"\"));\n              state.mode = TABLE;\n              break;\n\n            case 3:\n              strm.msg = 'invalid block type';\n              state.mode = BAD;\n          } //--- DROPBITS(2) ---//\n\n\n          hold >>>= 2;\n          bits -= 2; //---//\n\n          break;\n\n        case STORED:\n          //--- BYTEBITS() ---// /* go to byte boundary */\n          hold >>>= bits & 7;\n          bits -= bits & 7; //---//\n          //=== NEEDBITS(32); */\n\n          while (bits < 32) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          if ((hold & 0xffff) !== (hold >>> 16 ^ 0xffff)) {\n            strm.msg = 'invalid stored block lengths';\n            state.mode = BAD;\n            break;\n          }\n\n          state.length = hold & 0xffff; //Tracev((stderr, \"inflate:       stored length %u\\n\",\n          //        state.length));\n          //=== INITBITS();\n\n          hold = 0;\n          bits = 0; //===//\n\n          state.mode = COPY_;\n\n          if (flush === Z_TREES) {\n            break inf_leave;\n          }\n\n        /* falls through */\n\n        case COPY_:\n          state.mode = COPY;\n\n        /* falls through */\n\n        case COPY:\n          copy = state.length;\n\n          if (copy) {\n            if (copy > have) {\n              copy = have;\n            }\n\n            if (copy > left) {\n              copy = left;\n            }\n\n            if (copy === 0) {\n              break inf_leave;\n            } //--- zmemcpy(put, next, copy); ---\n\n\n            output.set(input.subarray(next, next + copy), put); //---//\n\n            have -= copy;\n            next += copy;\n            left -= copy;\n            put += copy;\n            state.length -= copy;\n            break;\n          } //Tracev((stderr, \"inflate:       stored end\\n\"));\n\n\n          state.mode = TYPE;\n          break;\n\n        case TABLE:\n          //=== NEEDBITS(14); */\n          while (bits < 14) {\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          } //===//\n\n\n          state.nlen = (hold & 0x1f) + 257; //--- DROPBITS(5) ---//\n\n          hold >>>= 5;\n          bits -= 5; //---//\n\n          state.ndist = (hold & 0x1f) + 1; //--- DROPBITS(5) ---//\n\n          hold >>>= 5;\n          bits -= 5; //---//\n\n          state.ncode = (hold & 0x0f) + 4; //--- DROPBITS(4) ---//\n\n          hold >>>= 4;\n          bits -= 4; //---//\n          //#ifndef PKZIP_BUG_WORKAROUND\n\n          if (state.nlen > 286 || state.ndist > 30) {\n            strm.msg = 'too many length or distance symbols';\n            state.mode = BAD;\n            break;\n          } //#endif\n          //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n\n\n          state.have = 0;\n          state.mode = LENLENS;\n\n        /* falls through */\n\n        case LENLENS:\n          while (state.have < state.ncode) {\n            //=== NEEDBITS(3);\n            while (bits < 3) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            state.lens[order[state.have++]] = hold & 0x07; //BITS(3);\n            //--- DROPBITS(3) ---//\n\n            hold >>>= 3;\n            bits -= 3; //---//\n          }\n\n          while (state.have < 19) {\n            state.lens[order[state.have++]] = 0;\n          } // We have separate tables & no pointers. 2 commented lines below not needed.\n          //state.next = state.codes;\n          //state.lencode = state.next;\n          // Switch to use dynamic table\n\n\n          state.lencode = state.lendyn;\n          state.lenbits = 7;\n          opts = {\n            bits: state.lenbits\n          };\n          ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n          state.lenbits = opts.bits;\n\n          if (ret) {\n            strm.msg = 'invalid code lengths set';\n            state.mode = BAD;\n            break;\n          } //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n\n\n          state.have = 0;\n          state.mode = CODELENS;\n\n        /* falls through */\n\n        case CODELENS:\n          while (state.have < state.nlen + state.ndist) {\n            for (;;) {\n              here = state.lencode[hold & (1 << state.lenbits) - 1];\n              /*BITS(state.lenbits)*/\n\n              here_bits = here >>> 24;\n              here_op = here >>> 16 & 0xff;\n              here_val = here & 0xffff;\n\n              if (here_bits <= bits) {\n                break;\n              } //--- PULLBYTE() ---//\n\n\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8; //---//\n            }\n\n            if (here_val < 16) {\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits; //---//\n\n              state.lens[state.have++] = here_val;\n            } else {\n              if (here_val === 16) {\n                //=== NEEDBITS(here.bits + 2);\n                n = here_bits + 2;\n\n                while (bits < n) {\n                  if (have === 0) {\n                    break inf_leave;\n                  }\n\n                  have--;\n                  hold += input[next++] << bits;\n                  bits += 8;\n                } //===//\n                //--- DROPBITS(here.bits) ---//\n\n\n                hold >>>= here_bits;\n                bits -= here_bits; //---//\n\n                if (state.have === 0) {\n                  strm.msg = 'invalid bit length repeat';\n                  state.mode = BAD;\n                  break;\n                }\n\n                len = state.lens[state.have - 1];\n                copy = 3 + (hold & 0x03); //BITS(2);\n                //--- DROPBITS(2) ---//\n\n                hold >>>= 2;\n                bits -= 2; //---//\n              } else if (here_val === 17) {\n                //=== NEEDBITS(here.bits + 3);\n                n = here_bits + 3;\n\n                while (bits < n) {\n                  if (have === 0) {\n                    break inf_leave;\n                  }\n\n                  have--;\n                  hold += input[next++] << bits;\n                  bits += 8;\n                } //===//\n                //--- DROPBITS(here.bits) ---//\n\n\n                hold >>>= here_bits;\n                bits -= here_bits; //---//\n\n                len = 0;\n                copy = 3 + (hold & 0x07); //BITS(3);\n                //--- DROPBITS(3) ---//\n\n                hold >>>= 3;\n                bits -= 3; //---//\n              } else {\n                //=== NEEDBITS(here.bits + 7);\n                n = here_bits + 7;\n\n                while (bits < n) {\n                  if (have === 0) {\n                    break inf_leave;\n                  }\n\n                  have--;\n                  hold += input[next++] << bits;\n                  bits += 8;\n                } //===//\n                //--- DROPBITS(here.bits) ---//\n\n\n                hold >>>= here_bits;\n                bits -= here_bits; //---//\n\n                len = 0;\n                copy = 11 + (hold & 0x7f); //BITS(7);\n                //--- DROPBITS(7) ---//\n\n                hold >>>= 7;\n                bits -= 7; //---//\n              }\n\n              if (state.have + copy > state.nlen + state.ndist) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n\n              while (copy--) {\n                state.lens[state.have++] = len;\n              }\n            }\n          }\n          /* handle error breaks in while */\n\n\n          if (state.mode === BAD) {\n            break;\n          }\n          /* check for end-of-block code (better have one) */\n\n\n          if (state.lens[256] === 0) {\n            strm.msg = 'invalid code -- missing end-of-block';\n            state.mode = BAD;\n            break;\n          }\n          /* build code tables -- note: do not change the lenbits or distbits\n             values here (9 and 6) without reading the comments in inftrees.h\n             concerning the ENOUGH constants, which depend on those values */\n\n\n          state.lenbits = 9;\n          opts = {\n            bits: state.lenbits\n          };\n          ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts); // We have separate tables & no pointers. 2 commented lines below not needed.\n          // state.next_index = opts.table_index;\n\n          state.lenbits = opts.bits; // state.lencode = state.next;\n\n          if (ret) {\n            strm.msg = 'invalid literal/lengths set';\n            state.mode = BAD;\n            break;\n          }\n\n          state.distbits = 6; //state.distcode.copy(state.codes);\n          // Switch to use dynamic table\n\n          state.distcode = state.distdyn;\n          opts = {\n            bits: state.distbits\n          };\n          ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts); // We have separate tables & no pointers. 2 commented lines below not needed.\n          // state.next_index = opts.table_index;\n\n          state.distbits = opts.bits; // state.distcode = state.next;\n\n          if (ret) {\n            strm.msg = 'invalid distances set';\n            state.mode = BAD;\n            break;\n          } //Tracev((stderr, 'inflate:       codes ok\\n'));\n\n\n          state.mode = LEN_;\n\n          if (flush === Z_TREES) {\n            break inf_leave;\n          }\n\n        /* falls through */\n\n        case LEN_:\n          state.mode = LEN;\n\n        /* falls through */\n\n        case LEN:\n          if (have >= 6 && left >= 258) {\n            //--- RESTORE() ---\n            strm.next_out = put;\n            strm.avail_out = left;\n            strm.next_in = next;\n            strm.avail_in = have;\n            state.hold = hold;\n            state.bits = bits; //---\n\n            inffast(strm, _out); //--- LOAD() ---\n\n            put = strm.next_out;\n            output = strm.output;\n            left = strm.avail_out;\n            next = strm.next_in;\n            input = strm.input;\n            have = strm.avail_in;\n            hold = state.hold;\n            bits = state.bits; //---\n\n            if (state.mode === TYPE) {\n              state.back = -1;\n            }\n\n            break;\n          }\n\n          state.back = 0;\n\n          for (;;) {\n            here = state.lencode[hold & (1 << state.lenbits) - 1];\n            /*BITS(state.lenbits)*/\n\n            here_bits = here >>> 24;\n            here_op = here >>> 16 & 0xff;\n            here_val = here & 0xffff;\n\n            if (here_bits <= bits) {\n              break;\n            } //--- PULLBYTE() ---//\n\n\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8; //---//\n          }\n\n          if (here_op && (here_op & 0xf0) === 0) {\n            last_bits = here_bits;\n            last_op = here_op;\n            last_val = here_val;\n\n            for (;;) {\n              here = state.lencode[last_val + ((hold & (1 << last_bits + last_op) - 1) >> last_bits)];\n              here_bits = here >>> 24;\n              here_op = here >>> 16 & 0xff;\n              here_val = here & 0xffff;\n\n              if (last_bits + here_bits <= bits) {\n                break;\n              } //--- PULLBYTE() ---//\n\n\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8; //---//\n            } //--- DROPBITS(last.bits) ---//\n\n\n            hold >>>= last_bits;\n            bits -= last_bits; //---//\n\n            state.back += last_bits;\n          } //--- DROPBITS(here.bits) ---//\n\n\n          hold >>>= here_bits;\n          bits -= here_bits; //---//\n\n          state.back += here_bits;\n          state.length = here_val;\n\n          if (here_op === 0) {\n            //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n            //        \"inflate:         literal '%c'\\n\" :\n            //        \"inflate:         literal 0x%02x\\n\", here.val));\n            state.mode = LIT;\n            break;\n          }\n\n          if (here_op & 32) {\n            //Tracevv((stderr, \"inflate:         end of block\\n\"));\n            state.back = -1;\n            state.mode = TYPE;\n            break;\n          }\n\n          if (here_op & 64) {\n            strm.msg = 'invalid literal/length code';\n            state.mode = BAD;\n            break;\n          }\n\n          state.extra = here_op & 15;\n          state.mode = LENEXT;\n\n        /* falls through */\n\n        case LENEXT:\n          if (state.extra) {\n            //=== NEEDBITS(state.extra);\n            n = state.extra;\n\n            while (bits < n) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            state.length += hold & (1 << state.extra) - 1\n            /*BITS(state.extra)*/\n            ; //--- DROPBITS(state.extra) ---//\n\n            hold >>>= state.extra;\n            bits -= state.extra; //---//\n\n            state.back += state.extra;\n          } //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n\n\n          state.was = state.length;\n          state.mode = DIST;\n\n        /* falls through */\n\n        case DIST:\n          for (;;) {\n            here = state.distcode[hold & (1 << state.distbits) - 1];\n            /*BITS(state.distbits)*/\n\n            here_bits = here >>> 24;\n            here_op = here >>> 16 & 0xff;\n            here_val = here & 0xffff;\n\n            if (here_bits <= bits) {\n              break;\n            } //--- PULLBYTE() ---//\n\n\n            if (have === 0) {\n              break inf_leave;\n            }\n\n            have--;\n            hold += input[next++] << bits;\n            bits += 8; //---//\n          }\n\n          if ((here_op & 0xf0) === 0) {\n            last_bits = here_bits;\n            last_op = here_op;\n            last_val = here_val;\n\n            for (;;) {\n              here = state.distcode[last_val + ((hold & (1 << last_bits + last_op) - 1) >> last_bits)];\n              here_bits = here >>> 24;\n              here_op = here >>> 16 & 0xff;\n              here_val = here & 0xffff;\n\n              if (last_bits + here_bits <= bits) {\n                break;\n              } //--- PULLBYTE() ---//\n\n\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8; //---//\n            } //--- DROPBITS(last.bits) ---//\n\n\n            hold >>>= last_bits;\n            bits -= last_bits; //---//\n\n            state.back += last_bits;\n          } //--- DROPBITS(here.bits) ---//\n\n\n          hold >>>= here_bits;\n          bits -= here_bits; //---//\n\n          state.back += here_bits;\n\n          if (here_op & 64) {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break;\n          }\n\n          state.offset = here_val;\n          state.extra = here_op & 15;\n          state.mode = DISTEXT;\n\n        /* falls through */\n\n        case DISTEXT:\n          if (state.extra) {\n            //=== NEEDBITS(state.extra);\n            n = state.extra;\n\n            while (bits < n) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            state.offset += hold & (1 << state.extra) - 1\n            /*BITS(state.extra)*/\n            ; //--- DROPBITS(state.extra) ---//\n\n            hold >>>= state.extra;\n            bits -= state.extra; //---//\n\n            state.back += state.extra;\n          } //#ifdef INFLATE_STRICT\n\n\n          if (state.offset > state.dmax) {\n            strm.msg = 'invalid distance too far back';\n            state.mode = BAD;\n            break;\n          } //#endif\n          //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n\n\n          state.mode = MATCH;\n\n        /* falls through */\n\n        case MATCH:\n          if (left === 0) {\n            break inf_leave;\n          }\n\n          copy = _out - left;\n\n          if (state.offset > copy) {\n            /* copy from window */\n            copy = state.offset - copy;\n\n            if (copy > state.whave) {\n              if (state.sane) {\n                strm.msg = 'invalid distance too far back';\n                state.mode = BAD;\n                break;\n              } // (!) This block is disabled in zlib defaults,\n              // don't enable it for binary compatibility\n              //#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n              //          Trace((stderr, \"inflate.c too far\\n\"));\n              //          copy -= state.whave;\n              //          if (copy > state.length) { copy = state.length; }\n              //          if (copy > left) { copy = left; }\n              //          left -= copy;\n              //          state.length -= copy;\n              //          do {\n              //            output[put++] = 0;\n              //          } while (--copy);\n              //          if (state.length === 0) { state.mode = LEN; }\n              //          break;\n              //#endif\n\n            }\n\n            if (copy > state.wnext) {\n              copy -= state.wnext;\n              from = state.wsize - copy;\n            } else {\n              from = state.wnext - copy;\n            }\n\n            if (copy > state.length) {\n              copy = state.length;\n            }\n\n            from_source = state.window;\n          } else {\n            /* copy from output */\n            from_source = output;\n            from = put - state.offset;\n            copy = state.length;\n          }\n\n          if (copy > left) {\n            copy = left;\n          }\n\n          left -= copy;\n          state.length -= copy;\n\n          do {\n            output[put++] = from_source[from++];\n          } while (--copy);\n\n          if (state.length === 0) {\n            state.mode = LEN;\n          }\n\n          break;\n\n        case LIT:\n          if (left === 0) {\n            break inf_leave;\n          }\n\n          output[put++] = state.length;\n          left--;\n          state.mode = LEN;\n          break;\n\n        case CHECK:\n          if (state.wrap) {\n            //=== NEEDBITS(32);\n            while (bits < 32) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--; // Use '|' instead of '+' to make sure that result is signed\n\n              hold |= input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            _out -= left;\n            strm.total_out += _out;\n            state.total += _out;\n\n            if (_out) {\n              strm.adler = state.check = state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out);\n            }\n\n            _out = left; // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n\n            if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n              strm.msg = 'incorrect data check';\n              state.mode = BAD;\n              break;\n            } //=== INITBITS();\n\n\n            hold = 0;\n            bits = 0; //===//\n            //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n          }\n\n          state.mode = LENGTH;\n\n        /* falls through */\n\n        case LENGTH:\n          if (state.wrap && state.flags) {\n            //=== NEEDBITS(32);\n            while (bits < 32) {\n              if (have === 0) {\n                break inf_leave;\n              }\n\n              have--;\n              hold += input[next++] << bits;\n              bits += 8;\n            } //===//\n\n\n            if (hold !== (state.total & 0xffffffff)) {\n              strm.msg = 'incorrect length check';\n              state.mode = BAD;\n              break;\n            } //=== INITBITS();\n\n\n            hold = 0;\n            bits = 0; //===//\n            //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n          }\n\n          state.mode = DONE;\n\n        /* falls through */\n\n        case DONE:\n          ret = Z_STREAM_END$1;\n          break inf_leave;\n\n        case BAD:\n          ret = Z_DATA_ERROR$1;\n          break inf_leave;\n\n        case MEM:\n          return Z_MEM_ERROR$1;\n\n        case SYNC:\n        /* falls through */\n\n        default:\n          return Z_STREAM_ERROR$1;\n      }\n    } // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n    /*\n       Return from inflate(), updating the total counts and the check value.\n       If there was no progress during the inflate() call, return a buffer\n       error.  Call updatewindow() to create and/or update the window state.\n       Note: a memory error from inflate() is non-recoverable.\n     */\n    //--- RESTORE() ---\n\n\n    strm.next_out = put;\n    strm.avail_out = left;\n    strm.next_in = next;\n    strm.avail_in = have;\n    state.hold = hold;\n    state.bits = bits; //---\n\n    if (state.wsize || _out !== strm.avail_out && state.mode < BAD && (state.mode < CHECK || flush !== Z_FINISH$1)) {\n      if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;\n    }\n\n    _in -= strm.avail_in;\n    _out -= strm.avail_out;\n    strm.total_in += _in;\n    strm.total_out += _out;\n    state.total += _out;\n\n    if (state.wrap && _out) {\n      strm.adler = state.check = state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out);\n    }\n\n    strm.data_type = state.bits + (state.last ? 64 : 0) + (state.mode === TYPE ? 128 : 0) + (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n\n    if ((_in === 0 && _out === 0 || flush === Z_FINISH$1) && ret === Z_OK$1) {\n      ret = Z_BUF_ERROR;\n    }\n\n    return ret;\n  };\n\n  var inflateEnd = function inflateEnd(strm) {\n    if (!strm || !strm.state\n    /*|| strm->zfree == (free_func)0*/\n    ) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    var state = strm.state;\n\n    if (state.window) {\n      state.window = null;\n    }\n\n    strm.state = null;\n    return Z_OK$1;\n  };\n\n  var inflateGetHeader = function inflateGetHeader(strm, head) {\n    /* check state */\n    if (!strm || !strm.state) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    var state = strm.state;\n\n    if ((state.wrap & 2) === 0) {\n      return Z_STREAM_ERROR$1;\n    }\n    /* save header structure */\n\n\n    state.head = head;\n    head.done = false;\n    return Z_OK$1;\n  };\n\n  var inflateSetDictionary = function inflateSetDictionary(strm, dictionary) {\n    var dictLength = dictionary.length;\n    var state;\n    var dictid;\n    var ret;\n    /* check state */\n\n    if (!strm\n    /* == Z_NULL */\n    || !strm.state\n    /* == Z_NULL */\n    ) {\n      return Z_STREAM_ERROR$1;\n    }\n\n    state = strm.state;\n\n    if (state.wrap !== 0 && state.mode !== DICT) {\n      return Z_STREAM_ERROR$1;\n    }\n    /* check for correct dictionary identifier */\n\n\n    if (state.mode === DICT) {\n      dictid = 1;\n      /* adler32(0, null, 0)*/\n\n      /* dictid = adler32(dictid, dictionary, dictLength); */\n\n      dictid = adler32_1(dictid, dictionary, dictLength, 0);\n\n      if (dictid !== state.check) {\n        return Z_DATA_ERROR$1;\n      }\n    }\n    /* copy dictionary to window using updatewindow(), which will amend the\n     existing dictionary if appropriate */\n\n\n    ret = updatewindow(strm, dictionary, dictLength, dictLength);\n\n    if (ret) {\n      state.mode = MEM;\n      return Z_MEM_ERROR$1;\n    }\n\n    state.havedict = 1; // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n\n    return Z_OK$1;\n  };\n\n  var inflateReset_1 = inflateReset;\n  var inflateReset2_1 = inflateReset2;\n  var inflateResetKeep_1 = inflateResetKeep;\n  var inflateInit_1 = inflateInit;\n  var inflateInit2_1 = inflateInit2;\n  var inflate_2$1 = inflate$2;\n  var inflateEnd_1 = inflateEnd;\n  var inflateGetHeader_1 = inflateGetHeader;\n  var inflateSetDictionary_1 = inflateSetDictionary;\n  var inflateInfo = 'pako inflate (from Nodeca project)';\n  /* Not implemented\n  module.exports.inflateCopy = inflateCopy;\n  module.exports.inflateGetDictionary = inflateGetDictionary;\n  module.exports.inflateMark = inflateMark;\n  module.exports.inflatePrime = inflatePrime;\n  module.exports.inflateSync = inflateSync;\n  module.exports.inflateSyncPoint = inflateSyncPoint;\n  module.exports.inflateUndermine = inflateUndermine;\n  */\n\n  var inflate_1$2 = {\n    inflateReset: inflateReset_1,\n    inflateReset2: inflateReset2_1,\n    inflateResetKeep: inflateResetKeep_1,\n    inflateInit: inflateInit_1,\n    inflateInit2: inflateInit2_1,\n    inflate: inflate_2$1,\n    inflateEnd: inflateEnd_1,\n    inflateGetHeader: inflateGetHeader_1,\n    inflateSetDictionary: inflateSetDictionary_1,\n    inflateInfo: inflateInfo\n  };\n\n  // (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n  //\n  // This software is provided 'as-is', without any express or implied\n  // warranty. In no event will the authors be held liable for any damages\n  // arising from the use of this software.\n  //\n  // Permission is granted to anyone to use this software for any purpose,\n  // including commercial applications, and to alter it and redistribute it\n  // freely, subject to the following restrictions:\n  //\n  // 1. The origin of this software must not be misrepresented; you must not\n  //   claim that you wrote the original software. If you use this software\n  //   in a product, an acknowledgment in the product documentation would be\n  //   appreciated but is not required.\n  // 2. Altered source versions must be plainly marked as such, and must not be\n  //   misrepresented as being the original software.\n  // 3. This notice may not be removed or altered from any source distribution.\n\n  function GZheader() {\n    /* true if compressed data believed to be text */\n    this.text = 0;\n    /* modification time */\n\n    this.time = 0;\n    /* extra flags (not used when writing a gzip file) */\n\n    this.xflags = 0;\n    /* operating system */\n\n    this.os = 0;\n    /* pointer to extra field or Z_NULL if none */\n\n    this.extra = null;\n    /* extra field length (valid if extra != Z_NULL) */\n\n    this.extra_len = 0; // Actually, we don't need it in JS,\n    // but leave for few code modifications\n    //\n    // Setup limits is not necessary because in js we should not preallocate memory\n    // for inflate use constant limit in 65536 bytes\n    //\n\n    /* space at extra (only when reading header) */\n    // this.extra_max  = 0;\n\n    /* pointer to zero-terminated file name or Z_NULL */\n\n    this.name = '';\n    /* space at name (only when reading header) */\n    // this.name_max   = 0;\n\n    /* pointer to zero-terminated comment or Z_NULL */\n\n    this.comment = '';\n    /* space at comment (only when reading header) */\n    // this.comm_max   = 0;\n\n    /* true if there was or will be a header crc */\n\n    this.hcrc = 0;\n    /* true when done reading gzip header (not used when writing a gzip file) */\n\n    this.done = false;\n  }\n\n  var gzheader = GZheader;\n\n  var toString = Object.prototype.toString;\n  /* Public constants ==========================================================*/\n\n  /* ===========================================================================*/\n\n  var Z_NO_FLUSH = constants$2.Z_NO_FLUSH,\n      Z_FINISH = constants$2.Z_FINISH,\n      Z_OK = constants$2.Z_OK,\n      Z_STREAM_END = constants$2.Z_STREAM_END,\n      Z_NEED_DICT = constants$2.Z_NEED_DICT,\n      Z_STREAM_ERROR = constants$2.Z_STREAM_ERROR,\n      Z_DATA_ERROR = constants$2.Z_DATA_ERROR,\n      Z_MEM_ERROR = constants$2.Z_MEM_ERROR;\n  /* ===========================================================================*/\n\n  /**\n   * class Inflate\n   *\n   * Generic JS-style wrapper for zlib calls. If you don't need\n   * streaming behaviour - use more simple functions: [[inflate]]\n   * and [[inflateRaw]].\n   **/\n\n  /* internal\n   * inflate.chunks -> Array\n   *\n   * Chunks of output data, if [[Inflate#onData]] not overridden.\n   **/\n\n  /**\n   * Inflate.result -> Uint8Array|String\n   *\n   * Uncompressed result, generated by default [[Inflate#onData]]\n   * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n   * (call [[Inflate#push]] with `Z_FINISH` / `true` param).\n   **/\n\n  /**\n   * Inflate.err -> Number\n   *\n   * Error code after inflate finished. 0 (Z_OK) on success.\n   * Should be checked if broken data possible.\n   **/\n\n  /**\n   * Inflate.msg -> String\n   *\n   * Error message, if [[Inflate.err]] != 0\n   **/\n\n  /**\n   * new Inflate(options)\n   * - options (Object): zlib inflate options.\n   *\n   * Creates new inflator instance with specified params. Throws exception\n   * on bad params. Supported options:\n   *\n   * - `windowBits`\n   * - `dictionary`\n   *\n   * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n   * for more information on these.\n   *\n   * Additional options, for internal needs:\n   *\n   * - `chunkSize` - size of generated data chunks (16K by default)\n   * - `raw` (Boolean) - do raw inflate\n   * - `to` (String) - if equal to 'string', then result will be converted\n   *   from utf8 to utf16 (javascript) string. When string output requested,\n   *   chunk length can differ from `chunkSize`, depending on content.\n   *\n   * By default, when no options set, autodetect deflate/gzip data format via\n   * wrapper header.\n   *\n   * ##### Example:\n   *\n   * ```javascript\n   * const pako = require('pako')\n   * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])\n   * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n   *\n   * const inflate = new pako.Inflate({ level: 3});\n   *\n   * inflate.push(chunk1, false);\n   * inflate.push(chunk2, true);  // true -> last chunk\n   *\n   * if (inflate.err) { throw new Error(inflate.err); }\n   *\n   * console.log(inflate.result);\n   * ```\n   **/\n\n  function Inflate$1(options) {\n    this.options = common.assign({\n      chunkSize: 1024 * 64,\n      windowBits: 15,\n      to: ''\n    }, options || {});\n    var opt = this.options; // Force window size for `raw` data, if not set directly,\n    // because we have no header for autodetect.\n\n    if (opt.raw && opt.windowBits >= 0 && opt.windowBits < 16) {\n      opt.windowBits = -opt.windowBits;\n\n      if (opt.windowBits === 0) {\n        opt.windowBits = -15;\n      }\n    } // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n\n\n    if (opt.windowBits >= 0 && opt.windowBits < 16 && !(options && options.windowBits)) {\n      opt.windowBits += 32;\n    } // Gzip header has no info about windows size, we can do autodetect only\n    // for deflate. So, if window size not set, force it to max when gzip possible\n\n\n    if (opt.windowBits > 15 && opt.windowBits < 48) {\n      // bit 3 (16) -> gzipped data\n      // bit 4 (32) -> autodetect gzip/deflate\n      if ((opt.windowBits & 15) === 0) {\n        opt.windowBits |= 15;\n      }\n    }\n\n    this.err = 0; // error code, if happens (0 = Z_OK)\n\n    this.msg = ''; // error message\n\n    this.ended = false; // used to avoid multiple onEnd() calls\n\n    this.chunks = []; // chunks of compressed data\n\n    this.strm = new zstream();\n    this.strm.avail_out = 0;\n    var status = inflate_1$2.inflateInit2(this.strm, opt.windowBits);\n\n    if (status !== Z_OK) {\n      throw new Error(messages[status]);\n    }\n\n    this.header = new gzheader();\n    inflate_1$2.inflateGetHeader(this.strm, this.header); // Setup dictionary\n\n    if (opt.dictionary) {\n      // Convert data if needed\n      if (typeof opt.dictionary === 'string') {\n        opt.dictionary = strings.string2buf(opt.dictionary);\n      } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n        opt.dictionary = new Uint8Array(opt.dictionary);\n      }\n\n      if (opt.raw) {\n        //In raw mode we need to set the dictionary early\n        status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);\n\n        if (status !== Z_OK) {\n          throw new Error(messages[status]);\n        }\n      }\n    }\n  }\n  /**\n   * Inflate#push(data[, flush_mode]) -> Boolean\n   * - data (Uint8Array|ArrayBuffer): input data\n   * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE\n   *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,\n   *   `true` means Z_FINISH.\n   *\n   * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n   * new output chunks. Returns `true` on success. If end of stream detected,\n   * [[Inflate#onEnd]] will be called.\n   *\n   * `flush_mode` is not needed for normal operation, because end of stream\n   * detected automatically. You may try to use it for advanced things, but\n   * this functionality was not tested.\n   *\n   * On fail call [[Inflate#onEnd]] with error code and return false.\n   *\n   * ##### Example\n   *\n   * ```javascript\n   * push(chunk, false); // push one of data chunks\n   * ...\n   * push(chunk, true);  // push last chunk\n   * ```\n   **/\n\n\n  Inflate$1.prototype.push = function (data, flush_mode) {\n    var strm = this.strm;\n    var chunkSize = this.options.chunkSize;\n    var dictionary = this.options.dictionary;\n\n    var status, _flush_mode, last_avail_out;\n\n    if (this.ended) return false;\n    if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH; // Convert data if needed\n\n    if (toString.call(data) === '[object ArrayBuffer]') {\n      strm.input = new Uint8Array(data);\n    } else {\n      strm.input = data;\n    }\n\n    strm.next_in = 0;\n    strm.avail_in = strm.input.length;\n\n    for (;;) {\n      if (strm.avail_out === 0) {\n        strm.output = new Uint8Array(chunkSize);\n        strm.next_out = 0;\n        strm.avail_out = chunkSize;\n      }\n\n      status = inflate_1$2.inflate(strm, _flush_mode);\n\n      if (status === Z_NEED_DICT && dictionary) {\n        status = inflate_1$2.inflateSetDictionary(strm, dictionary);\n\n        if (status === Z_OK) {\n          status = inflate_1$2.inflate(strm, _flush_mode);\n        } else if (status === Z_DATA_ERROR) {\n          // Replace code with more verbose\n          status = Z_NEED_DICT;\n        }\n      } // Skip snyc markers if more data follows and not raw mode\n\n\n      while (strm.avail_in > 0 && status === Z_STREAM_END && strm.state.wrap > 0 && data[strm.next_in] !== 0) {\n        inflate_1$2.inflateReset(strm);\n        status = inflate_1$2.inflate(strm, _flush_mode);\n      }\n\n      switch (status) {\n        case Z_STREAM_ERROR:\n        case Z_DATA_ERROR:\n        case Z_NEED_DICT:\n        case Z_MEM_ERROR:\n          this.onEnd(status);\n          this.ended = true;\n          return false;\n      } // Remember real `avail_out` value, because we may patch out buffer content\n      // to align utf8 strings boundaries.\n\n\n      last_avail_out = strm.avail_out;\n\n      if (strm.next_out) {\n        if (strm.avail_out === 0 || status === Z_STREAM_END) {\n          if (this.options.to === 'string') {\n            var next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n            var tail = strm.next_out - next_out_utf8;\n            var utf8str = strings.buf2string(strm.output, next_out_utf8); // move tail & realign counters\n\n            strm.next_out = tail;\n            strm.avail_out = chunkSize - tail;\n            if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);\n            this.onData(utf8str);\n          } else {\n            this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));\n          }\n        }\n      } // Must repeat iteration if out buffer is full\n\n\n      if (status === Z_OK && last_avail_out === 0) continue; // Finalize if end of stream reached.\n\n      if (status === Z_STREAM_END) {\n        status = inflate_1$2.inflateEnd(this.strm);\n        this.onEnd(status);\n        this.ended = true;\n        return true;\n      }\n\n      if (strm.avail_in === 0) break;\n    }\n\n    return true;\n  };\n  /**\n   * Inflate#onData(chunk) -> Void\n   * - chunk (Uint8Array|String): output data. When string output requested,\n   *   each chunk will be string.\n   *\n   * By default, stores data blocks in `chunks[]` property and glue\n   * those in `onEnd`. Override this handler, if you need another behaviour.\n   **/\n\n\n  Inflate$1.prototype.onData = function (chunk) {\n    this.chunks.push(chunk);\n  };\n  /**\n   * Inflate#onEnd(status) -> Void\n   * - status (Number): inflate status. 0 (Z_OK) on success,\n   *   other if not.\n   *\n   * Called either after you tell inflate that the input stream is\n   * complete (Z_FINISH). By default - join collected chunks,\n   * free memory and fill `results` / `err` properties.\n   **/\n\n\n  Inflate$1.prototype.onEnd = function (status) {\n    // On success - join\n    if (status === Z_OK) {\n      if (this.options.to === 'string') {\n        this.result = this.chunks.join('');\n      } else {\n        this.result = common.flattenChunks(this.chunks);\n      }\n    }\n\n    this.chunks = [];\n    this.err = status;\n    this.msg = this.strm.msg;\n  };\n  /**\n   * inflate(data[, options]) -> Uint8Array|String\n   * - data (Uint8Array): input data to decompress.\n   * - options (Object): zlib inflate options.\n   *\n   * Decompress `data` with inflate/ungzip and `options`. Autodetect\n   * format via wrapper header by default. That's why we don't provide\n   * separate `ungzip` method.\n   *\n   * Supported options are:\n   *\n   * - windowBits\n   *\n   * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n   * for more information.\n   *\n   * Sugar (options):\n   *\n   * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n   *   negative windowBits implicitly.\n   * - `to` (String) - if equal to 'string', then result will be converted\n   *   from utf8 to utf16 (javascript) string. When string output requested,\n   *   chunk length can differ from `chunkSize`, depending on content.\n   *\n   *\n   * ##### Example:\n   *\n   * ```javascript\n   * const pako = require('pako');\n   * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));\n   * let output;\n   *\n   * try {\n   *   output = pako.inflate(input);\n   * } catch (err) {\n   *   console.log(err);\n   * }\n   * ```\n   **/\n\n\n  function inflate$1(input, options) {\n    var inflator = new Inflate$1(options);\n    inflator.push(input); // That will never happens, if you don't cheat with options :)\n\n    if (inflator.err) throw inflator.msg || messages[inflator.err];\n    return inflator.result;\n  }\n  /**\n   * inflateRaw(data[, options]) -> Uint8Array|String\n   * - data (Uint8Array): input data to decompress.\n   * - options (Object): zlib inflate options.\n   *\n   * The same as [[inflate]], but creates raw data, without wrapper\n   * (header and adler32 crc).\n   **/\n\n\n  function inflateRaw$1(input, options) {\n    options = options || {};\n    options.raw = true;\n    return inflate$1(input, options);\n  }\n  /**\n   * ungzip(data[, options]) -> Uint8Array|String\n   * - data (Uint8Array): input data to decompress.\n   * - options (Object): zlib inflate options.\n   *\n   * Just shortcut to [[inflate]], because it autodetects format\n   * by header.content. Done for convenience.\n   **/\n\n\n  var Inflate_1$1 = Inflate$1;\n  var inflate_2 = inflate$1;\n  var inflateRaw_1$1 = inflateRaw$1;\n  var ungzip$1 = inflate$1;\n  var constants = constants$2;\n  var inflate_1$1 = {\n    Inflate: Inflate_1$1,\n    inflate: inflate_2,\n    inflateRaw: inflateRaw_1$1,\n    ungzip: ungzip$1,\n    constants: constants\n  };\n\n  var Deflate = deflate_1$1.Deflate,\n      deflate = deflate_1$1.deflate,\n      deflateRaw = deflate_1$1.deflateRaw,\n      gzip = deflate_1$1.gzip;\n  var Inflate = inflate_1$1.Inflate,\n      inflate = inflate_1$1.inflate,\n      inflateRaw = inflate_1$1.inflateRaw,\n      ungzip = inflate_1$1.ungzip;\n  var Deflate_1 = Deflate;\n  var deflate_1 = deflate;\n  var deflateRaw_1 = deflateRaw;\n  var gzip_1 = gzip;\n  var Inflate_1 = Inflate;\n  var inflate_1 = inflate;\n  var inflateRaw_1 = inflateRaw;\n  var ungzip_1 = ungzip;\n  var constants_1 = constants$2;\n  var pako = {\n    Deflate: Deflate_1,\n    deflate: deflate_1,\n    deflateRaw: deflateRaw_1,\n    gzip: gzip_1,\n    Inflate: Inflate_1,\n    inflate: inflate_1,\n    inflateRaw: inflateRaw_1,\n    ungzip: ungzip_1,\n    constants: constants_1\n  };\n\n  exports.Deflate = Deflate_1;\n  exports.Inflate = Inflate_1;\n  exports.constants = constants_1;\n  exports['default'] = pako;\n  exports.deflate = deflate_1;\n  exports.deflateRaw = deflateRaw_1;\n  exports.gzip = gzip_1;\n  exports.inflate = inflate_1;\n  exports.inflateRaw = inflateRaw_1;\n  exports.ungzip = ungzip_1;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"html, body {\\n    margin: 0;\\n    height: 100%;\\n} \\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var app = require('app').app;\nvar expand = require('lib/util').expand;\n\nmodule.exports = function (interactivity, baseURL) {\n    var json = interactivity.json;\n\n    var getMetadata = require('interactivity.metadata.js');\n\n    var m_ipcInteractivityMap = {\n        dpl: [],\n        def: [],\n        preferredViews: [],\n        sheets: {},\n        options: {},\n        metadata: {},\n        info: []\n    };\n\n    /*\n        dplid: ['itemid', ...],\n\n        catalog: {\n            options: {\n                'name': 'value',\n                ...\n            },\n            metadata: {\n                'decl-id': 'value',\n                ...\n            },\n            dpl: ['csn', ...],\n            def: [['DEF_name', ...], ...],\n            preferredViews: ['viewId', ...],\n            children: [[row, ....], ...] // children for row\n            parent: [row, ...] // parent for row\n            \n            sheets: { \n                'viewId': { // sheet/view\n                    id: 'viewId',\n                    description: '',\n                    drawing: 'url',\n                    items: [row, ...]\n                }, \n                ...\n            }\n        },\n    */\n\n    var dplid = json.$('ipc/figure/dplist/item').map(function (item) {\n        return item.$attr('id');\n    });\n\n    var sheetsMap = {};\n    var doc = app.modelInfo || {\n        sheets: json.$('ipc/figure/views/view')\n            .filter(function (view) {\n                return +view.$attr('hidden') === 0;\n            })\n            .map(function (view) {\n                return {\n                    id: view.$attr('id')\n                };\n            })\n    };\n\n    doc.sheets.forEach(function (sheet) {\n        var view = json.$('ipc/figure/views/view').filter(function (view) {\n            return view.$attr('id') === sheet.id;\n        })[0];\n\n        var sh = expand(sheet, {\n            changed: !!+view.$attr('changed'),\n            items: view.$('refItem').map(function (refItem) {\n                return dplid.indexOf(refItem.$attr('ref'));\n            }).sort(function (a, b) {\n                return a - b;\n            })\n        });\n\n        var refmedias = view.$('refmedia').filter(function (refmedia) {\n            return refmedia.$attr('ref') != 1;\n        });\n\n        if (refmedias.length > 0) {\n            var mediaId = refmedias[0].$attr('ref');\n            var src = json.$('ipc/figure/media').filter(function (media) {\n                return media.$attr('id') == mediaId;\n            })[0].$attr('src');\n            sh.drawing = baseURL + src;\n        }\n\n        sheetsMap[sheet.id] = sh;\n    });\n\n    var options = require('interactivity.options.js')(json);\n    var metadata = getMetadata(json.$('ipc/figure/metadata/value'));\n\n    var parent = json.$('ipc/figure/dplist/item').map(function (item, row, items) {\n        var indent = getIndent(item) - 1;\n        var parent = -1;\n        for (var i = row - 1; i >= 0; i--) {\n            var asp = +getMeta(items[i], 'ASP') || 0;\n            var attach = +getMeta(items[i], '_301F121F8EF84EC0B9979C8D10D19A79') || 0;\n            if (asp !== 1 && attach === 0) { // not attaching part\n                if (getIndent(items[i]) === indent) break;\n            }\n        }\n        for (; i >= 0; i--) {\n            if (getIndent(items[i]) === indent) {\n                if (!+getMeta(items[i], 'NIL')) {\n                    parent = i;\n                    break;\n                }\n            }\n        }\n        return parent;\n    });\n\n    var itemInfo = json.$('ipc/figure/dplist/item').map(function (item, row) {\n        var info = {\n            row: row\n        };\n        var itemMetaValues = item.$('metadata/value');\n        info.id = item.$attr('id');\n        info.metadata = getMetadata(itemMetaValues);\n        info.part = {};\n        info.part.id = item.$attr('refPart');\n        var part = json.$('ipc/parts/part').reduce(function (acc, part) {\n            return part.$attr('id') == info.part.id ? part : acc;\n        });\n        var partMetaValues = part.$('metadata/value');\n        info.part.metadata = getMetadata(partMetaValues);\n\n        info.roles = new Array(8);\n\n        itemMetaValues.concat(partMetaValues).forEach(function (value) {\n            var role = +value.$attr('role');\n            if (role) {\n                info.roles[role] = value.$text();\n            }\n        });\n\n        info.sheetId = item.refview ? item.refview.$attr('ref') : '';\n        info.screentip = item.tooltip ? item.$text('tooltip') : '';\n        info.callout = item.callout ? item.$text('callout') : '';\n\n        info.objectNames = item.$('refmedia').filter(function (refmedia) {\n            return refmedia.$attr('ref') == 1;\n        }).map(function (refmedia) {\n            return refmedia.$text();\n        });\n\n        info.commands = item.$('commands/command').map(function (command) {\n            var values = {};\n            command.$('value').forEach(function (value) {\n                values[value.$attr('name')] = value.$text();\n            });\n            return {\n                id: command.$attr('id'),\n                type: command.$attr('type'),\n                args: command.$('value').map(function (value) {\n                    return value.$text();\n                }),\n                values: values\n            };\n        });\n\n        return info;\n    });\n\n    function normalizeCSN(s) {\n        return String(s).replace(/(^\\s+|\\s+$)/g, '').replace(/^0+(\\d)/, '$1');\n    }\n\n    function initializeDPLItemMap(interactivity) {\n        if (!m_ipcInteractivityMap.dpl) {\n            m_ipcInteractivityMap.dpl = json.$('ipc/figure/dplist/item').map(function (item, row) {\n                var csn;\n                if (typeof interactivity.willGetCSNString == 'function') {\n                    csn = interactivity.willGetCSNString(itemInfo[row], row);\n                } else if (itemInfo[row].callout) {\n                    csn = itemInfo[row].callout;\n                } else {\n                    csn = itemInfo[row].roles[3] || ''; // Item number\n                    csn += itemInfo[row].roles[4] || ''; // Item number variant\n                }\n                return csn;\n            });\n        }\n    }\n\n    m_ipcInteractivityMap = {\n        info: itemInfo,\n        def: json.$('ipc/figure/dplist/item').map(function (item, row) {\n            return itemInfo[row].objectNames;\n        }),\n        preferredViews: json.$('ipc/figure/dplist/item').map(function (item, row) {\n            return itemInfo[row].sheetId;\n        }),\n        sheets: sheetsMap,\n        options: options,\n        metadata: metadata,\n        parent: parent,\n        children: parent.map(function (row, index, array) {\n            return array.reduce(function (acc, value, i, array) {\n                return (value === index) ? acc.concat(i) : acc;\n            }, []);\n        })\n    };\n\n    // getMeta\n    function getMeta(item, declId) {\n        var metadataValues = item.$('metadata/value');\n        return metadataValues.filter(function (value) {\n            return value.$attr('decl-id') == declId;\n        }).reduce(function (acc, value) {\n            return acc + value.$text();\n        }, '');\n    }\n\n    // getIndent\n    function getIndent(item) {\n        var indent = item.$('metadata/value').filter(function (value) {\n            return value.$attr('role') == 5; // Indent\n        });\n        if (indent.length > 0) {\n            indent = +indent[0].$text() || 0;\n        }\n        return indent;\n    }\n\n    var appExports = {\n        ipc: {\n            /**\n             * The namespace represents an interface to access the information from the companion file for interactive parts catalog (IPC).\n             * \n             * @namespace\n             * @memberof module:solo.app.ipc\n             */\n            interactivity: {\n                /**\n                 * JavaScript representation of the companion file *.interactivity.xml*\n                 * \n                 * @name json\n                 * @memberof module:solo.app.ipc.interactivity\n                 * @property {XMLNodeData} json JavaScript representation of the XML file\n                 * *XML:*\n                 * ```\n                 * <node att1=\"att1-value\" att2=\"att2-value\">\n                 *      <foo>Foo</foo>\n                 *      <bar>\n                 *          <![CDATA[  Bar]]>\n                 *      </bar>\n                 *      <items>\n                 *          <item>i1</item>\n                 *          <item>i2</item>\n                 *          <item>i3</item>\n                 *          <item>i4</item>\n                 *      </items>\n                 * </node>\n                 * ```\n                 * *JSON:*\n                 * ```\n                 * {\n                 *  \"node\": {\n                 *      \"@attributes\": {\n                 *          \"att1\": \"att1-value\",\n                 *          \"att2\": \"att2-value\"\n                 *      },\n                 *      \"foo\": { \"#text\": \"Foo\" },\n                 *      \"bar\": { \"#text\": \"  Bar\" },\n                 *      \"items\": {\n                 *          \"item\": [\n                 *              { \"#text\": \"i1\" },\n                 *              { \"#text\": \"i2\" },\n                 *              { \"#text\": \"i3\" },\n                 *              { \"#text\": \"i4\" }\n                 *          ]\n                 *      }\n                 *  }\n                 * }\n                 * ```\n                 */\n                //json: json,\n\n                /**\n                 * Gets the DPL line number by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {number} DPL line number\n                 */\n                getRowByIndex: function (index) {\n                    var currentSheetId = app.ipc.getCurrentSheet().id;\n                    return m_ipcInteractivityMap.sheets[currentSheetId].items[index]; //-> number\n                },\n\n                /**\n                 * Gets the row number on the current IPC sheet by the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {number} The row number on the current IPC sheet\n                 */\n                getIndexByRow: function (row) {\n                    var currentSheetId = app.ipc.getCurrentSheet().id;\n                    return m_ipcInteractivityMap.sheets[currentSheetId].items.indexOf(row); //-> number\n                },\n\n                /**\n                 * Gets the DPL line number by the catalog sequence item number (CSN).\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} item CSN\n                 * @returns {number} DPL line number\n                 */\n                getRowByItem: function (item) {\n                    initializeDPLItemMap(this);\n                    var csn = normalizeCSN(item),\n                        i;\n                    for (i = m_ipcInteractivityMap.dpl.length - 1; i >= 0; i--) {\n                        if (normalizeCSN(m_ipcInteractivityMap.dpl[i]) === csn) {\n                            break;\n                        }\n                    }\n                    return i; //-> number\n                },\n\n                /**\n                 * Gets CSN by the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {string} CSN\n                 */\n                getItemByRow: function (row) {\n                    initializeDPLItemMap(this);\n                    return m_ipcInteractivityMap.dpl[row]; //-> string\n                },\n\n                /**\n                 *  Gets the row number on the current IPC sheet by CSN.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} item CSN\n                 * @returns {number} The row number on the current IPC sheet\n                 */\n                getIndexByItem: function (item) {\n                    return this.getIndexByRow(this.getRowByItem(item)); //-> number\n                },\n\n                /**\n                 * Gets CSN by the row number on the current IPC sheet\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} CSN\n                 */\n                getItemByIndex: function (index) {\n                    return this.getItemByRow(this.getRowByIndex(index)); //-> string\n                },\n\n                /**\n                 * Gets DPL line number for the 3D object name.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {any} name The name of 3D object\n                 * @returns {number} DPL line number\n                 */\n                getRowByObjectName: function (name) {\n                    var i,\n                        a = m_ipcInteractivityMap.def;\n                    for (i = a.length - 1; i >= 0 ; i--) {\n                        if (a[i].indexOf(name) >= 0) {\n                            break;\n                        }\n                    }\n                    return i; //-> number\n                },\n\n                /**\n                 * Gets the names of 3D objects for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {any} row DPL line number\n                 * @returns {string[]} An array of 3D object names\n                 */\n                getObjectsNamesByRow: function (row) {\n                    return m_ipcInteractivityMap.def[row]; //-> [name, ...]\n                },\n\n                /**\n                 * Returns the URL to the 2D illustration of the IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} [id] IPC sheet identifier\n                 * @returns {string} URL to the 2D illustration\n                 */\n                getDrawingForIPCView: function (id) {\n                    id = id || app.ipc.currentSheetInfo.id;\n                    var sheetInfo = m_ipcInteractivityMap.sheets[id];\n                    return (sheetInfo && sheetInfo.drawing) || '';\n                },\n\n                /**\n                 * Returns the IPC sheet information.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {string} [id] IPC sheet identifier\n                 * @returns {CatalogSheetInfo} The object represents IPC sheet information.\n                 */\n                getSheetInfo: function (id) {\n                    id = id || app.ipc.currentSheetInfo.id;\n                    return m_ipcInteractivityMap.sheets[id];\n                },\n\n                /**\n                 * Returns publication options from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @returns {KeyValuePairs} \n                 */\n                getOptions: function () {\n                    return m_ipcInteractivityMap.options;\n                },\n\n                /**\n                 * Returns project metadata from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @returns {KeyValuePairs} \n                 */\n                getProjectMetadata: function () {\n                    return m_ipcInteractivityMap.metadata;\n                },\n\n                /**\n                 * Gets screen tip for the object by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} Screen tip for the object\n                 */\n                getScreenTip: function (index) {\n                    var row = this.getRowByIndex(index);\n                    return this.getItemInfo(row).screentip;\n                },\n\n                /**\n                 * Gets preferred sheet for the object by the row number on the current IPC sheet.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} index The row number on the current IPC sheet\n                 * @returns {string} Preferred IPC sheet identifier\n                 */\n                getPrefferedSheetId: function (index) {\n                    var row = this.getRowByIndex(index);\n                    return this.getItemInfo(row).sheetId;\n                },\n\n                /**\n                 * Returns the IPC item information.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {CatalogItemInfo} The object represents IPC item information\n                 * @since 1.4.0\n                 */\n                getItemInfo: function (row) {\n                    return m_ipcInteractivityMap.info[row];\n                },\n\n                /**\n                 * Gets the parent for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @returns {number} DPL line number or -1\n                 * @since 1.4.0\n                 */\n                getParent: function (row) {\n                    return m_ipcInteractivityMap.parent[row];\n                },\n\n                /**\n                 * Gets children for the DPL line number.\n                 * \n                 * @memberof module:solo.app.ipc.interactivity\n                 * @param {number} row DPL line number\n                 * @param {boolean} [deep] Recursive\n                 * @returns {number[]} Array of the DPL line number \n                 * @since 1.4.0\n                 */\n                getChildren: function (row, deep) {\n                    var res = [];\n                    var ch = m_ipcInteractivityMap.children[row];\n                    var self = this;\n                    if (deep) {\n                        ch.forEach(function (child) {\n                            res.push(child);\n                            res = res.concat(self.getChildren(child, deep));\n                        });\n                    } else {\n                        res = ch;\n                    }\n                    return res;\n                }\n            }\n        }\n    };\n\n    return appExports.ipc;\n};\n\n\n/**\n * The hook method is invoked to get the CSN string for DPL row presented by argument.\n * Must return the CSN string for DPL row.\n * Default returns the concatenation of metadata values \"Item number\" and \"Item number variant\".\n * \n * @memberof module:solo.app.ipc.interactivity\n * @abstract \n * @method willGetCSNString\n * @param {CatalogItemInfo} itemInfo The object represents IPC item information\n * @param {number} row DPL line number\n * @returns {string} Returns the CSN string\n */\n\n/**\n * The object represents the catalog item information, for example:\n * ```\n * {\n *      id: \"2dc27be52b0\",\n *      row: 1,\n *      metadata: {\n *          IND: \"2\",\n *          ITEM: \"10\",\n *          QNA: \"1\",\n *          _470D3AF1C4C540EA8EF895E86D7C147D: \"2\",\n *          _B479653540A9423B8170B31E38783811: \"\"\n *      },\n *      objectNames: [ \"PM005301_1\" ],\n *      part: { ... },\n *      roles: [ , \"PM005301\", \"Back Plate Assy\", \"10\", , \"2\", \"1\", ],\n *      screentip: \"Item:10\",\n *      callout: \"10\",\n *      sheetId: \"view_2\",\n *      commands: [ ... ]\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {number} row The number of DPL row.\n * @prop {KeyValuePairs} metadata Metadata of the catalog item.\n * @prop {string[]} objectNames An array of 3D object names associated with the catalog item.\n * @prop {CatalogPartInfo} part The object represents the part information.\n * @prop {string[]} roles The array of the metadata values by {@link MetadataRoleCode role number}:\n * - `0` - Undefined\n * - `1` - Part number\n * - `2` - Description for part\n * - `3` - Item number\n * - `4` - Item number variant\n * - `5` - Indent\n * - `6` - Item quantity per next higher assembly\n * - `7` - Item total quantity\n * @prop {string} screentip A string contains a brief note or label pertaining to the catalog item.\n * @prop {string} callout A string contains the CSN string for the catalog item. This is also the name of a 2D hotspot.\n * @prop {string} sheetId The identifier of the preferred catalog sheet for the catalog item.\n * @prop {DPLCommandInfo[]} commands\n * @typedef {object} CatalogItemInfo\n * @see {@link module:solo.app.ipc.interactivity.getItemInfo app.ipc.interactivity.getItemInfo()}\n */\n\n/**\n * The object represents the command information, for example:\n * ```\n * {\n *      id: \"233f0c80570\",\n *      type: \"MODAPPLY\",\n *      args: [ \"A B\" ],\n *      values: { \n *          \"MODEL APPLY CODES\": \"A B\"\n *      }\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {string} type The name of the command.\n * @prop {string[]} args Array of arguments of the command.\n * @prop {KeyValuePairs} Arguments of the command by name.\n * @typedef {object} DPLCommandInfo\n * @see CatalogItemInfo\n */\n\n\n/**\n * The object represents the part information, for example:\n * ```\n * {\n *      id: \"2dc27a27920\",\n *      metadata: {\n *          DFP: \"Back Plate Assy\",\n *          PNR, \"PM005301\"\n *      }\n * }\n * ```\n * @prop {string} id The unique identifier of the object in the companion xml file.\n * @prop {KeyValuePairs} metadata Metadata of the catalog part.\n * @typedef {object} CatalogPartInfo\n * @see CatalogItemInfo\n */\n\n/**\n * The object represents the IPC sheet information, for example:\n * ```\n * {\n *      id: \"view_0\",\n *      description: \"Assembled View\",\n *      drawing: \"http://.../pump-catalog-1.svg\",\n *      indentationLevel: 0,\n *      items: [0,1,13,28]\n * }\n * ```\n * @prop {string} id - IPC sheet ID. \n * @prop {string} description - IPC sheet description.\n * @prop {string} drawing - The name of the file for 2D illustration.\n * @prop {number} indentationLevel - The indentation level that indicates IPC sheets relationships.\n * @prop {number[]} items - An array of row numbers of the DPL table active on this sheet.\n * @prop {boolean} changed\n * @typedef {object} CatalogSheetInfo\n * @see DocumentCatalogInfo\n * @see {@link module:solo.app.ipc.interactivity.getSheetInfo app.ipc.interactivity.getSheetInfo()}\n */","var app = require('app').app;\n\nmodule.exports = function (interactivity, baseURL) {\n    var json = interactivity.json;\n    var getMetadata = require('interactivity.metadata.js');\n\n    var m_prcInteractivityMap = {\n        defs: {},\n        docitems: {},\n        procedureItems: {},\n        options: {},\n        metadata: {}\n    };\n\n    /*\n        procedure: {\n            options: {\n                'name': 'value',\n                ...\n            },\n            metadata: {\n                'decl-id': 'value',\n                ...\n            },\n            defs: {\n                'def': {\n                    'DocID': '',\n                    'name': 'value',\n                    '{decl-id}': 'value',\n                },\n                ...\n            },\n            docitems: {\n                'DocID': {\n                    id: DocID,\n                    metadata: {\n                        'decl-id': 'value',\n                        ...\n                    },\n                    objectNames: ['def', ...],\n                    screentip: ''\n                }\n                ...\n            }\n            pictures: [\n                {\n                    drawing: '',\n                    description: '',\n                    flags: 0\n                }\n            ],\n            procedureItems: {\n                'id': {\n                    type: 'procedure|step|action|event'\n                    comment: '',\n                    description: '',\n                    parent: 'id',\n                    parentStep: 'id',\n                    eventType: '',\n                    children: ['id', ...],\n                    actions: ['id', ...],\n                    events: ['id', ...]\n                }\n            }\n            procedureId: 'id'\n        }\n\n    */\n\n    json.$('SimulationInteractivity/DocItems/DocItem').forEach(function (DocItem) {\n        var def = DocItem.$attr('id'),\n            defInfo = {},\n            metadata = {};\n\n        DocItem.$('metadata/value').forEach(function (value) {\n            var text = value.$text();\n            defInfo[value.$attr(\"name\")] = text;\n            defInfo['{' + value.$attr(\"decl-id\") + '}'] = text;\n            metadata[value.$attr(\"decl-id\")] = text;\n        });\n\n        m_prcInteractivityMap.defs[def] = defInfo;\n\n        var docid = defInfo['{DocID}'];\n        if (!m_prcInteractivityMap.docitems[docid]) {\n            m_prcInteractivityMap.docitems[docid] = {\n                id: docid,\n                objectNames: [],\n                metadata: metadata,\n                screentip: DocItem.$text('tooltip')\n            };\n        }\n        m_prcInteractivityMap.docitems[docid].objectNames.push(def);\n    });\n\n    m_prcInteractivityMap.pictures = json.$('SimulationInteractivity/Resources/Picture').map(function (Picture) {\n        return {\n            description: Picture.$attr('descr'),\n            drawing: baseURL + Picture.$text(),\n            flags: Picture.$attr('flags') || 0\n        };\n    });\n\n    m_prcInteractivityMap.options = require('interactivity.options.js')(json);\n    m_prcInteractivityMap.metadata = getMetadata(json.$('SimulationInteractivity/SimulationInformation/metadata/value'));\n\n    m_prcInteractivityMap.procedureId = json.SimulationInteractivity.Simulation && (json.SimulationInteractivity.Simulation.$attr('id') || generateId(json.SimulationInteractivity.Simulation));\n\n    var m_count = 1;\n\n    function generateId(node) {\n        var id = '_generic_id-' + m_count;\n        m_count++;\n        if (!node['@attributes']) {\n            node['@attributes'] = {};\n        }\n        node['@attributes']['id'] = id;\n        return id;\n    }\n\n    function findDescription(id, node) {\n        node = node || json.SimulationInteractivity.Simulation;\n        var i,\n            description = \"\";\n        if (node.$attr('id') != id) {\n            if (node.Step) {\n                for (i = 0; i < node.Step.length && !description; i++) {\n                    description = findDescription(id, node.Step[i]);\n                }\n            } else if (node.Substep) {\n                for (i = 0; i < node.Substep.length && !description; i++) {\n                    description = findDescription(id, node.Substep[i]);\n                }\n            }\n        } else {\n            description = node.$text('Description');\n        }\n        return description;\n    }\n\n    function processEvent(node, parentId) {\n        var id = node.$attr('id') || generateId(node);\n        m_prcInteractivityMap.procedureItems[id] = {\n            id: id,\n            type: 'event',\n            description: node.$text('Description'),\n            eventType: node.$text('Type').toUpperCase(),\n            parent: parentId\n        };\n    }\n\n    function processItem(node, parentId) {\n        var i,\n            id = node.$attr('id') || generateId(node),\n            itemInfo = {\n                id: id,\n                comment: node.$text('Comment'),\n                description: findDescription(id),\n                children: node.$('Item').map(function (node) {\n                    return node.$attr('id') || generateId(node);\n                }),\n                actions: node.$('Action').map(function (node) {\n                    return node.$attr('id') || generateId(node);\n                }),\n                metadata: node.$('metadata/value').reduce(function (metadata, value) {\n                    metadata[value.$attr('decl-id')] = value.$text();\n                    return metadata;\n                }, {}),\n                raw: node\n            };\n        itemInfo.type = ((itemInfo.children.length + itemInfo.actions.length) > 0 || node['@name'] !== 'Action') ? 'step' : 'action';\n\n        if (parentId) {\n            itemInfo.parent = parentId;\n        }\n\n        if (itemInfo.type == 'action') {\n            delete itemInfo.children;\n            delete itemInfo.actions;\n            var steps = json.$('SimulationInteractivity/Simulation/Step');\n            for (i = 0; i < steps.length; i++) {\n                var step = steps[i];\n                var substep = step.$('Substep').filter(function (substep) {\n                    return substep.$attr('id') == id;\n                });\n                if (substep.length > 0) {\n                    itemInfo.parentStep = step.$attr('id');\n                    itemInfo.events = substep[0].$('Event').map(function (node) {\n                        processEvent(node, id);\n                        return node.$attr('id');\n                    });\n                    break;\n                }\n            }\n        }\n\n        m_prcInteractivityMap.procedureItems[id] = itemInfo;\n\n        node.$('Action').forEach(function (action) {\n            processItem(action, id);\n        });\n\n        node.$('Item').forEach(function (item) {\n            processItem(item, id);\n        });\n    }\n\n    if (json.SimulationInteractivity.Procedure) {\n        if (!json.SimulationInteractivity.Procedure['@attributes']) {\n            json.SimulationInteractivity.Procedure['@attributes'] = {};\n        }\n        json.SimulationInteractivity.Procedure['@attributes']['id'] = m_prcInteractivityMap.procedureId;\n        processItem(json.SimulationInteractivity.Procedure);\n        m_prcInteractivityMap.procedureItems[m_prcInteractivityMap.procedureId].type = 'procedure';\n        m_prcInteractivityMap.procedureItems[m_prcInteractivityMap.procedureId].comment = json.$text('SimulationInteractivity/Simulation/Comment');\n    }\n\n    var appExports = {\n        procedure: {\n            /**\n             * The namespace represents an interface to access the information from the companion file for the interactive procedure.\n             * \n             * @namespace\n             * @memberof module:solo.app.procedure\n             */\n            interactivity: {\n                /**\n                 * JavaScript representation of the companion file *.interactivity.xml*\n                 * \n                 * @name json\n                 * @memberof module:solo.app.procedure.interactivity\n                 * @property {XMLNodeData} json JavaScript representation of the XML file\n                 * \n                 * *XML:*\n                 * ```\n                 * <node att1=\"att1-value\" att2=\"att2-value\">\n                 *      <foo>Foo</foo>\n                 *      <bar>\n                 *          <![CDATA[  Bar]]>\n                 *      </bar>\n                 *      <items>\n                 *          <item>i1</item>\n                 *          <item>i2</item>\n                 *          <item>i3</item>\n                 *          <item>i4</item>\n                 *      </items>\n                 * </node>\n                 * ```\n                 * *JSON:*\n                 * ```\n                 * {\n                 *  \"node\": {\n                 *      \"@attributes\": {\n                 *          \"att1\": \"att1-value\",\n                 *          \"att2\": \"att2-value\"\n                 *      },\n                 *      \"foo\": { \"#text\": \"Foo\" },\n                 *      \"bar\": { \"#text\": \"  Bar\" },\n                 *      \"items\": {\n                 *          \"item\": [\n                 *              { \"#text\": \"i1\" },\n                 *              { \"#text\": \"i2\" },\n                 *              { \"#text\": \"i3\" },\n                 *              { \"#text\": \"i4\" }\n                 *          ]\n                 *      }\n                 *  }\n                 * }\n                 * ```\n                 */\n                //json: json,\n\n                /**\n                 * Returns the 3D procedure ID\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {string} 3D procedure ID\n                 */\n                getProcedureId: function () {\n                    return m_prcInteractivityMap.procedureId;\n                },\n\n                /**\n                 * Returns an array of the 2D illustration from the companion file.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {ProcedureDrawingInfo[]} Array of 2D illustrations in the procedure\n                 */\n                getDrawings: function () {\n                    return m_prcInteractivityMap.pictures;\n                },\n\n                /**\n                 * Returns an DocID for the name of 3D object.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} name The name of 3D object\n                 * @returns {DocID} DocID value\n                 */\n                getDocIdByObjectName: function (name) {\n                    var defInfo = m_prcInteractivityMap.defs[name];\n                    if (defInfo) {\n                        return defInfo['{DocID}'];\n                    }\n                    return null;\n                },\n\n                /**\n                 * Returns an array of the name of 3D object by DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {DocID} docId DocID value\n                 * @returns {string[]} An array of the names of 3D objects\n                 */\n                getObjectNamesByDocId: function (docId) {\n                    var docItemInfo = m_prcInteractivityMap.docitems[docId];\n                    return docItemInfo ? docItemInfo.objectNames : [];\n                },\n\n                /**\n                 * Returns information about the 3D item by DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {DocID} docId DocID value\n                 * @returns {DocItemInfo} The object represents an information about the 3D item\n                 * @since 1.5.2\n                 */\n                getDocItemInfo: function (docId) {\n                    return m_prcInteractivityMap.docitems[docId];\n                },\n\n                /**\n                 * Returns information about the 3D item.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} name The name of 3D object\n                 * @returns {DocItemMetadata} The object represents the metadata value of the 3D object by name and id\n                 * @since 1.4.0\n                 */\n                getDocItemMetadata: function (name) {\n                    return m_prcInteractivityMap.defs[name];\n                },\n\n                /**\n                 * Returns an array of all DocID.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {DocID[]} An array of DocID\n                 */\n                getDocItems: function () {\n                    var res = [];\n                    for (var docId in m_prcInteractivityMap.docitems) res.push(docId);\n                    return res;\n                },\n\n                /**\n                 * Returns information about the procedure item.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @param {string} id Procedure item ID\n                 * @returns {ProcedureElementInfo} The object represents an information about the procedure item\n                 */\n                getProcedureItemInfo: function (id) {\n                    return m_prcInteractivityMap.procedureItems[id];\n                },\n\n                /**\n                 * Returns the publication options from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {KeyValuePairs} Key-value array\n                 */\n                getOptions: function () {\n                    return m_prcInteractivityMap.options;\n                },\n\n                /**\n                 * Returns the project metadata from the companion file in form of key-value array.\n                 * \n                 * @memberof module:solo.app.procedure.interactivity\n                 * @returns {KeyValuePairs} Key-value array\n                 */\n                getProjectMetadata: function () {\n                    return m_prcInteractivityMap.metadata;\n                }\n            }\n        }\n    };\n\n    return appExports.procedure;\n};\n\n/**\n * The identifier of the 3D object used to link to the document.\n * @typedef {string} DocID\n */\n\n/**\n * The object represents the metadata value of the 3D object by name and id, for example:\n * ```\n *   {\n *      {DocID}: \"SH40400\", // by metadata id in form: {decl-id}\n *      {_F0CF006A8AC54725A80D5DC19077CD1D}: \"SH40400\",\n *      {_F519A19D050D45A68584453C44EA85DC}: \"1\",\n *      DocID: \"SH40400\",   // by metadata name\n *      \"Part Number\": \"SH40400\",\n *      Qty: \"1\"\n *   }\n * ```\n * @typedef {KeyValuePairs} DocItemMetadata\n * @see {@link module:solo.app.procedure.interactivity.getDocItemMetadata app.procedure.interactivity.getDocItemMetadata()}\n */\n\n/**\n * Information about the element of the procedure, for example:\n * ```\n *   {\n *       type: \"procedure\",\n *       id: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *       description: \"Pump Disassembly Procedure\",\n *       raw: [ ... ],\n *       ...\n *   }\n * ```\n * @typedef {ProcedureRootInfo|ProcedureStepInfo|ProcedureActionInfo|ProcedureAlertInfo} ProcedureElementInfo\n * @prop {string} type The type of the procedure element:\n * - `\"procedure\"`\n * - `\"step\"`\n * - `\"action\"`\n * - `\"event\"`\n * @prop {string} id The identifier of the procedure element.\n * @prop {string} description Description of the procedure element.\n * @prop {XMLNodeData} raw An XMLNodeData instance that represents an element in the companion file.\n * @see {@link module:solo.app.procedure.interactivity.getProcedureItemInfo app.procedure.interactivity.getProcedureItemInfo()}\n */\n\n/**\n * Information about the procedure, for example:\n * ```\n *   {\n *       type: \"procedure\",\n *       id: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *       description: \"Pump Disassembly Procedure\",\n *       comment: \"<p><b><span style=\\\"font-size: 117%;\\\">Pump Disassembly Procedure</span></b></p>\",\n *       children: [\n *          \"R94679328-76C1-46FC-B49E-C23070C14A16\",\n *          \"R14F8C444-4ADF-4930-B685-4B1E9E613550\",\n *          \"R6F5017B0-FD12-4636-A638-D77CF6193B65\",\n *          \"D767D5C6-0D78-4F52-AB27-404E22EB43E0\",\n *          ...\n *       ],\n *       actions: [],\n *       metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureRootInfo\n * @prop {string} type=procedure See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string[]} children Array of identifiers for children elements.\n * @prop {string[]} actions Array of identifiers for actions of the element.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the step of the procedure, for example:\n * ```\n *  {\n *      type: \"step\",\n *      id: \"R94679328-76C1-46FC-B49E-C23070C14A16\",\n *      description\t\"1\",\n *      comment\t\"<p>Remove the bolts securing the faceplate to the the casing. Remove the faceplate.</p>\",\n *      parent: \"R84E4929F-26B0-4848-9375-4A1D42DF4F6F\",\n *      children: [],\n *      actions\t[\n *          \"D6C54479-3203-4473-85E2-637875CA4F18\"\n *      ],\n *      metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureStepInfo\n * @prop {string} type=step See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string} parent The identifier of the parent element in the procedure.\n * @prop {string[]} children Array of identifiers for children elements.\n * @prop {string[]} actions Array of identifiers for actions of the element. See {@link ProcedureActionInfo}.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the action in the procedure, for example:\n * ```\n *  {\n *      type: \"action\",\n *      id: \"5124CF6D-621B-46EC-9EF9-B9EDB0FDD496\",\n *      description\t\"\",\n *      comment: \"<p>Visually inspect all parts. Replace all worn or damaged parts before reassembling pump. It is recommended that new gaskets be installed each time the pump is disassembled and reassembled<span style=\\\"font-size: 117%;\\\">.</span></p>\",\n *      parent: \"R1712E390-60A4-45CC-ACEC-63ED166989EE\",\n *      parentStep: \"R1712E390-60A4-45CC-ACEC-63ED166989EE\",\n *      events: [\n *          \"NOTE-694FE061-2655-4CF1-A567-D78212E2FF87\"\n *      ],\n *      metadata: {}\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureActionInfo\n * @prop {string} type=action See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} comment The comment to the element of the procedure in the form of an HTML string.\n * @prop {string} parent The identifier of the parent element in the procedure.\n * @prop {string} parentStep The identifier of the parent step corresponding to the step of the VRML procedure.\n * @prop {string[]} Array of identifiers for procedure elements of type `\"event\"`. See {@link ProcedureAlertInfo}.\n * @prop {KeyValuePairs} metadata Metadata of the item.\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the alert in the procedure, for example:\n * ```\n *  {\n *      type: \"event\",\n *      id: \"NOTE-694FE061-2655-4CF1-A567-D78212E2FF87\",\n *      description: \"note001\",\n *      parent: \"5124CF6D-621B-46EC-9EF9-B9EDB0FDD496\",\n *      eventType: \"\"\n *   }\n * ```\n * @typedef {ProcedureElementInfo} ProcedureAlertInfo\n * @prop {string} type=event See {@link ProcedureElementInfo}.\n * @prop {string} id See {@link ProcedureElementInfo}.\n * @prop {string} description See {@link ProcedureElementInfo}.\n * @prop {string} parent The identifier of the parent action in the procedure.\n * @prop {string} eventType The type of alert:\n * - `\"WARNING\"`\n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom type\n * @see ProcedureElementInfo\n */\n\n/**\n * Information about the 3D item that is referenced by the document, for example:\n * ```\n * { \n *      id: \"id02\",\n *      objectNames: [ \"PM005301_2\" ],\n *      metadata: {\n *          DocID: \"id01\",\n *          _6A7337C8022746BA8C02F29B0FC2257F: \"Back Plate Assy\",\n *          _F0CF006A8AC54725A80D5DC19077CD1D: \"PM005302\",\n *          _F519A19D050D45A68584453C44EA85DC: \"1\"\n *      },\n *      screentip: \"Back Plate Assy\\nP/N: PM005302\"\n * }\n * ```\n * @typedef {object} DocItemInfo\n * @prop {DocID} id The unique ID of the 3D item used to link to the document.\n * @prop {string[]} objectNames An array of the names of 3D objects.\n * @prop {KeyValuePairs} metadata Metadata of the 3D item.\n * @prop {string} screentip A string contains a brief note or label pertaining to the 3D item.\n * @see {@link module:solo.app.procedure.interactivity.getDrawings app.procedure.interactivity.getDrawings()}\n */\n\n /**\n * Information about the 2D drawing in the procedure, for example:\n * ```\n * { \n *     drawing: \"http://.../pump-procedure-1.svg\", \n *     description: \"Pump Cross-Section\",\n *     flags: 0\n * }\n * ```\n * @typedef {object} ProcedureDrawingInfo\n * @prop {string} drawing The filename or URL of the 2D illustration.\n * @prop {string} description Description of 2D illustration.\n * @prop {number} flags Flags for the 2D illustration.\n * @see {@link module:solo.app.procedure.interactivity.getDrawings app.procedure.interactivity.getDrawings()}\n */","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".tiramisu-panel-group {\\n\\tposition: absolute;\\n\\tleft: 0;\\n\\ttop: 0;\\n\\twidth: 100%;\\n\\theight: 100%; \\n\\toverflow: hidden;\\n\\tvisibility: hidden;\\n}\\n.tiramisu-panel {\\n\\tposition: absolute; \\n\\tbox-sizing: border-box;\\n\\toverflow: hidden; \\n\\tpointer-events: none;\\n\\tfont-family: serif;\\n\\tfont-size: 10pt;\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tborder-style: solid;\\n\\ttransform-style: preserve-3d;\\n}\\n.tiramisu-panel > div {\\n\\tposition: relative;\\n\\ttop: 50%;\\n\\ttransform: translateY(-50%);\\n}\\n.tiramisu-panel > div > img {\\n\\tdisplay: block;\\n\\theight: auto;\\n\\tmax-height: 100%;\\n\\tmax-width: 100%;\\n\\tmargin: auto;\\n\\tposition: relative;\\n\\ttop: 50%;\\n\\ttransform: translateY(-50%);\\n}\\n.tiramisu-panel > div > canvas {\\n\\tdisplay: block;\\n\\tmax-height: 100%;\\n\\tmax-width: 100%;\\n\\tmargin: auto;\\n\\tposition: relative;\\n\\ttop: 50%;\\n\\ttransform: translateY(-50%) scale(1, -1);\\n}\\n.tiramisu-panel p {\\n\\tmargin: 0;\\n\\tpadding: 0;\\n}\\n.tiramisu-panel-measure {\\n\\tposition: absolute; \\n\\tfont-family: serif;\\n\\tfont-size: 10pt;\\n\\tvisibility: hidden;\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tleft: 0;\\n\\ttop: 0;\\n}\\n\\n.tiramisu-banner {\\n\\tposition: absolute;\\n\\tright: 8px;\\n\\tbottom: 8px;\\n\\toverflow: hidden;\\n\\tvisibility: visible;\\n\\tpointer-events: none;\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tz-index: 10;\\n}\\n\\n.tiramisu-speaker {\\n\\tposition: absolute;\\n\\tvisibility: visible;\\n\\tdisplay: block-inline;\\n\\tz-index: 100;\\n\\tbackground-color: rgba(240,240,240,0.5);\\n\\tborder-radius: 50%;\\n\\tpadding: 6px;\\n\\tbottom: 8px; \\n\\tleft: 8px;\\n\\twidth: 26px;\\n\\theight: 26px;\\n\\tpointer-events: none;\\t\\n\\topacity: 0;\\n\\ttransition: opacity 0.3s ease-in-out;\\n}\\n.tiramisu-speaker div {\\n\\twidth: 0;\\n\\theight: 0;\\n\\tborder: 6px solid transparent;\\n\\tborder-right-color: inherit;\\n\\tborder-left: none;\\n\\tbox-shadow: inset 10px 0;\\n\\tdisplay: inline-block;\\n\\tpadding: 5px 3px;\\n\\tmargin: 2px;\\n}\\n.tiramisu-speaker span {\\n\\tposition: absolute;\\n\\tdisplay: inline-block;\\n\\tborder: 1px solid transparent;\\n\\tborder-right: 1px solid #444;\\n\\tborder-radius: 50%;\\n\\tmargin: auto;\\n\\ttop: 0;\\n\\tbottom: 0;\\n\\tright: 0;\\n\\t-webkit-animation: tiramisu-wave-animation 1s linear 0s infinite alternate;\\n\\t        animation: tiramisu-wave-animation 1s linear 0s infinite alternate;\\n}\\n.tiramisu-speaker span:nth-child(2) {\\n\\twidth: 13px;\\n\\theight: 13px;\\n\\tleft: 1px;\\n}\\n.tiramisu-speaker span:nth-child(3) {\\n\\twidth: 19px;\\n\\theight: 19px;\\n\\tleft: 1px;\\n\\t-webkit-animation-delay: 300ms;\\n\\t        animation-delay: 300ms;\\n}\\n.tiramisu-speaker span:last-child {\\n\\twidth: 25px;\\n\\theight: 25px;\\n\\tleft: 0;\\n\\t-webkit-animation-delay: 600ms;\\n\\t        animation-delay: 600ms;\\n}\\n@-webkit-keyframes tiramisu-wave-animation {\\n\\tfrom { opacity: 1; }\\n\\tto { opacity: 0.1; }\\n}\\n@keyframes tiramisu-wave-animation {\\n\\tfrom { opacity: 1; }\\n\\tto { opacity: 0.1; }\\n}\\n\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/postcss-loader/src/index.js??postcss!./tiramisu.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".cortona3dsolo-canvas {\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    display: block;\\n}\\n\\n.cortona3dsolo-popover {\\n    touch-action: none;\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n            user-select: none;\\n}\\n\\n.tiramisu-speaker {\\n    display: inline-block;\\n    box-sizing: content-box;\\n}\\n\\n.tiramisu-panel {\\n    white-space: normal;\\n    word-wrap: break-word;\\n}\\n\\n.dpl-table {\\n    -webkit-touch-callout: none !important;\\n    -webkit-user-select: none;\\n       -moz-user-select: none;\\n            user-select: none;\\n}\\n\\n/* IPC */\\n.dpl-table {width: 100%; padding: 0; border-spacing: 0; border-collapse: collapse; cursor: default; border: 1px solid grey;}\\n.dpl-table td {padding: 4px; vertical-align: top; border-right: 1px solid grey;}\\n.dpl-table thead {font-size: 10pt;}\\n.dpl-table tbody {margin: 0; padding: 0; font-size: 10pt;}\\n.dpl-table thead td {border-bottom: 1px solid grey; \\n\\tbackground: linear-gradient(to bottom, #FFFFFF 0%, #F8F8F8 100%);}\\n.dpl-table tbody td {}\\n.dpl-table tbody tr.selected {\\n\\tbackground: linear-gradient(to bottom, #abd3ee 0%,#89c3eb 100%);\\n}\\n.dpl-table tbody td.hover {background-color: #C8E8FF;}\\n.dpl-table tbody tr.hidden {display: none;}\\n.dpl-table thead pre {font-family: sans; padding: 0; margin: 0;}\\n.dpl-table td.strut {padding: 0 4px;}\\n.dpl-table td.strut div {height: 1px; overflow: hidden; white-space: nowrap;}\\n.dpl-table tr {transition: all 0.3s;}\\n.dpl-table tr:hover, .dpl-table tr.hover {background-color: #C8E8FF;}\\n.dpl-table td:last-of-type {border-right: 0;}\\n.dpl-table tr:last-child td {border-bottom: 1px solid grey;}\\n.dpl-table pre, pre.dpl-table-measure {margin-top:0; margin-bottom:0;}\\n\\n.dpl-checkbox {padding: 0; margin: 0 0.4em 0 0; display: inline;}\\n.dpl-checkbox:hover {color: #367ebd;}\\n\\n/* PROCEDURE */\\n.tiramisu-proc-title {display: block; padding: 4px; margin-bottom: 2px; font-weight: bold; cursor: default;}\\n.tiramisu-proc-item {display: block; padding: 4px; margin-bottom: 2px; border-radius: 10px; border: 1px solid transparent;\\n\\ttransition: background-color .3s ease-out, border-color .3s ease-out; cursor: default;}\\n.tiramisu-proc-item.highlighted {background-color: #E5F4FF; border: 1px solid #C8E8FF;}\\n.tiramisu-proc-item.selected {background-color: #C8E8FF; border: 1px solid #80A2BC;}\\n.tiramisu-proc-item:hover {background-color: #E5F4FF; border: 1px solid #C8E8FF;}\\n.tiramisu-proc-item.selected:hover {background-color: #A3DAFF; border: 1px solid #80A2BC;}\\n.tiramisu-proc-item-number {display: table-cell; width: 24px; padding-right: 6pt; cursor: default;}\\n.tiramisu-proc-item-content {display: table-cell; width: 100%; cursor: default;}\\n.thumbnail {max-width:100%; max-height:100%; margin-top: 3pt;}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var Cortona3DSolo = require('solo');\nvar Tiramisu = Module.Tiramisu;\nvar app = require('app').app;\nvar expand = require('lib/util').expand;\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    procedure: {\n        didFireEvent: function (type, id, title, info) {\n            Cortona3DSolo.dispatch('app.procedure.didFireEvent', type, id, title, info);\n        },\n        didChangePlayerState: function (position, state) {\n            Cortona3DSolo.dispatch('app.procedure.didChangePlayerState', position, state);\n        },\n        didEnterSubstep: function (substepPath) {\n            Cortona3DSolo.dispatch('app.procedure.didEnterSubstep', substepPath);\n        },\n        didEnterSubstepWithName: function (substepId) {\n            Cortona3DSolo.dispatch('app.procedure.didEnterSubstepWithName', substepId);\n        }\n    },\n});\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage interactive procedure.\n     *  \n     * @namespace\n     * @memberof module:solo.app\n     */\n    procedure: {\n        /**\n         * The duration of the interactive procedure in seconds.\n         * \n         * @static\n         * @member {number} duration\n         * @memberof module:solo.app.procedure\n         * @since 1.4.3\n         */\n\n        /**\n         * Gets or sets default seek mode.\n         * \n         * @static\n         * @member {ProcedureSeekMode} defaultSeekMode\n         * @memberof module:solo.app.procedure\n         * @since 1.5.3\n         */\n\n        /**\n         * Moves the playback marker of the procedure to the start of the specified step/substep.\n         * \n         * @param {string} id - Step/Substep ID\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        seekToSubstep: function (id, seekMode) {\n            Module.ccall('procedure_seekToSubstep', 'null', ['string', 'number'], [id, typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Sets the playback speed ratio.\n         * \n         * @param {number} playbackSpeed - The playback speed ratio\n         */\n        setPlaybackSpeed: function (playbackSpeed) {\n            Module.ccall('procedure_setPlaybackSpeed', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Specifies whether the camera position is changed during the playback of the procedure. \n         * \n         * @param {boolean} freezeCamera\n         * - `true` - the camera does not change\n         * - `false` - the camera position is changed in accordance with the procedure \n         */\n        freezeCamera: function (freezeCamera) {\n            Module.ccall('procedure_freezeCamera', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Sets a new playback position of the procedure.\n         * \n         * @param {number} playPosition - The playback marker position, in seconds\n         * @param {boolean} requestState - \n         * - `true` - request {@link module:solo.app.procedure.didEnterSubstep didEnterSubstep()} callbak after position is changed\n         * - `false` - a callback is not required\n         */\n        setPlayPosition: function (playPosition, requestState) {\n            Module.ccall('procedure_setPlayPosition', 'null', ['number', 'number'], arguments);\n        },\n\n        /**\n         * Move the playback marker position to the previous step.\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        backward: function (seekMode) {\n            Module.ccall('procedure_backward', 'null', ['number'], [typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Move the playback marker position to the next step.\n         * @param {ProcedureSeekMode} [seekMode=SEEK_DEFAULT]\n         */\n        forward: function (seekMode) {\n            Module.ccall('procedure_forward', 'null', ['number'], [typeof(seekMode) === 'number' ? seekMode : -1]);\n        },\n\n        /**\n         * Stops the playback of the procedure.\n         */\n        stop: function () {\n            Module.ccall('procedure_stop', 'null');\n        },\n\n        /**\n         * Starts the playback of the procedure.\n         * \n         * @param {boolean} [doNotAutoRewind=false] -\n         * - `true` - do not set the playback marker at the beginning of the procedure when the procedure is finished running\n         * - `false` - reset the playback to the beginning\n         */\n        play: function (doNotAutoRewind) {\n            Module.ccall('procedure_play', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Pauses the playback of the procedure.\n         */\n        pause: function () {\n            Module.ccall('procedure_pause', 'null');\n        },\n\n        /**\n         * Sets the playback range of the procedure on the timeline.\n         * \n         * @param {string|ProcedureRangeKeyword} firstPlayable - Step/substep ID or the keyword of the range\n         * @param {string|ProcedureRangeKeyword} lastPlayable - Step/substep ID or the keyword of the range\n         * @param {ProcedureRangeFlags} [flags=0] - Flags bitmask\n         * @see Properties in the {@link module:solo.app.procedure app.procedure} namespace\n         * @fires \"app.procedure.didChangePlayRange\"\n         */\n        setPlayRange: function (firstPlayable, lastPlayable, flags) {\n            Module.ccall('procedure_setPlayRange', 'null', ['string', 'string', 'number'], [firstPlayable, lastPlayable || firstPlayable, flags || 0]);\n            Cortona3DSolo.dispatch('app.procedure.didChangePlayRange', Module._procedure_getPlayableRangeStartTime(), Module._procedure_getPlayableRangeStopTime());\n        },\n\n        /**\n         * Returns the playable range start time. \n         * \n         * @returns {number} seconds  \n         */\n        getPlayableRangeStartTime: function () {\n            return Module.ccall('procedure_getPlayableRangeStartTime', 'number');\n        },\n\n        /**\n         * Returns the playable range stop time. \n         * \n         * @returns {number} seconds  \n         */\n        getPlayableRangeStopTime: function () {\n            return Module.ccall('procedure_getPlayableRangeStopTime', 'number');\n        },\n\n        /**\n         * Query the state of the procedure playback and its current step.\n         */\n        requestPlayerState: function () {\n            Module.ccall('procedure_requestPlayerState', 'null');\n        },\n\n        /**\n         * Returns the procedure options from the companion file *.interactivity.xml* in the form of an object with key/value pairs.\n         * \n         * @deprecated Use {@link module:solo.app.getOptions app.getOptions()} istead.\n         * @returns {KeyValuePairs}\n         */\n        getOptions: function () {\n            return app.getOptions();\n        },\n\n        /**\n         * Returns the value of the procedure option.\n         * \n         * @deprecated Use {@link module:solo.app.getOption app.getOption()} istead.\n         * @param {string} name - Option name\n         * @returns {string} Option value\n         */\n        getOption: function (name) {\n            return app.getOption(name);\n        },\n\n        /**\n         * Sets the new animation sequence (procedure) from the array of identifiers step/substep.\n         * \n         * @param {string[]} [items] Array of identifiers step/substep. Leave empty to restore the procedure to its original sequence.\n         * @returns {boolean} Success flag\n         * @since 1.4.3\n         * @fires \"app.procedure.didChangePlayableItemList\"\n         */\n        setPlayableItemList: function (items) {\n            var count = items ? items.length : 0,\n                itemArray = 0,\n                i,\n                sp = stackSave(),\n                res;\n            if (count) {\n                itemArray = stackAlloc(count * 4);\n                for (i = 0; i < count; ++i)\n                    setValue(itemArray + i * 4, allocate(intArrayFromString(items[i]), 'i8', ALLOC_STACK), '*');\n            }\n            res = Module._procedure_setPlayableItemList(itemArray, count);\n            stackRestore(sp);\n            if (res) {\n                Cortona3DSolo.dispatch('app.procedure.didChangePlayableItemList', Module._procedure_getDuration(), items);\n            }\n            return res !== 0;\n        }\n    }\n};\n\nObject.defineProperty(appExports.procedure, 'defaultSeekMode', {\n    get: function () {\n        return Module._procedure_getDefaultSeekMode();\n    },\n    set: function (mode) {\n        Module._procedure_setDefaultSeekMode(mode);\n    },\n    enumerable: true,\n    configurable: true\n});\n\nObject.defineProperty(appExports.procedure, 'duration', {\n    get: function () {\n        return Module._procedure_getDuration();\n    },\n    enumerable: true,\n    configurable: true\n});\n\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_SEEK_TO_START', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_SEEK_TO_END', {\n    value: 2,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_REQUEST_NOTIFICATION', {\n    value: 4,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_FLAGS_DO_NOT_RECALCULATE_POSITION', {\n    value: 8,\n    writable: false\n});\n\nObject.defineProperty(appExports.procedure, 'SEEK_DEFAULT', {\n    value: -1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_BEGIN', {\n    value: 0,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_CUE_POINT', {\n    value: 1,\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'SEEK_TO_END', {\n    value: 2,\n    writable: false\n});\n\n\nObject.defineProperty(appExports.procedure, 'RANGE_VALUE_CURRENT_STEP', {\n    value: '%%CURRENT_STEP%%',\n    writable: false\n});\nObject.defineProperty(appExports.procedure, 'RANGE_VALUE_CURRENT_SUBSTEP', {\n    value: '%%CURRENT_SUBSTEP%%',\n    writable: false\n});\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The hook method is invoked when the alert message is fired in the procedure.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didFireEvent\n * @param {string} type - Type of alert:\n * - `\"WARNING\"` \n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom alert type\n * @param {string} id - Alert message ID from interactivity.xml\n * @param {string} title - Alert message title\n * @param {string} info - Alert message text\n * @see The corresponding event {@link event:\"app.procedure.didFireEvent\" \"app.procedure.didFireEvent\"}\n */\n/**\n * @event \"app.procedure.didFireEvent\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didFireEvent app.procedure.didFireEvent()}\n */\n\n/**\n * The hook method is invoked when the alert message is fired in the procedure.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function willShowNotification\n * @param {string} type - Type of alert:\n * - `\"WARNING\"` \n * - `\"CAUTION\"`\n * - `\"NOTE\"`\n * - custom alert type\n * @param {string} text - Alert message text\n * @see The corresponding event {@link event:\"app.procedure.willShowNotification\" \"app.procedure.willShowNotification\"}\n */\n/**\n * @event \"app.procedure.willShowNotification\"\n * @see The corresponding hook method {@link module:solo.app.procedure.willShowNotification app.procedure.willShowNotification()}\n */\n\n/**\n * The hook method is invoked when the state of the procedure is changed.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didChangePlayerState\n * @param {number} position - Current playback position on the timeline (seconds)\n * @param {number} state - Current procedure state as a bitmask\n * \n * Flags bitmask:\n * - `0x001` - procedure is played\n * - `0x100` - fast forward is available\n * - `0x200` - rewind is available\n * - `0x400` - sound is played in the 3D procedure\n * @see The corresponding event {@link event:\"app.procedure.didChangePlayerState\" \"app.procedure.didChangePlayerState\"}\n */\n/**\n * @event \"app.procedure.didChangePlayerState\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didChangePlayerState app.procedure.didChangePlayerState()}\n */\n\n/**\n * The hook method is invoked when the playback of the next substep starts.\n * \n * > #### __NOTE__\n * >\n * > This method is called only for the steps/substeps with a non-empty comment field.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didEnterSubstep\n * @param {string[]} substepPath - An array of step/substep ID contains current substep and its ancestors\n * @see The corresponding event {@link event:\"app.procedure.didEnterSubstep\" \"app.procedure.didEnterSubstep\"}\n */\n/**\n * @event \"app.procedure.didEnterSubstep\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didEnterSubstep app.procedure.didEnterSubstep()}\n */\n\n/**\n * The hook method is invoked when the playback of the substep with substepId is starting.    \n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didEnterSubstepWithName\n * @param {string} substepId - Substep ID\n * @see The corresponding event {@link event:\"app.procedure.didEnterSubstepWithName\" \"app.procedure.didEnterSubstepWithName\"}\n */\n/**\n * @event \"app.procedure.didEnterSubstepWithName\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didEnterSubstepWithName app.procedure.didEnterSubstepWithName()}\n */\n\n /**\n * The hook method is invoked when the list of playable items in the procedure is changed successfully.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didChangePlayableItemList\n * @param {number} duration - The duration of the new procedure\n * @param {string[]} [items] Array of identifiers step/substep\n * @see The corresponding event {@link event:\"app.procedure.didChangePlayableItemList\" \"app.procedure.didChangePlayableItemList\"}\n * @see {@link module:solo.app.procedure.setPlayableItemList app.procedure.setPlayableItemList()}\n * @since 1.7.0\n */\n/**\n * @event \"app.procedure.didChangePlayableItemList\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didChangePlayableItemList app.procedure.didChangePlayableItemList()}\n */\n\n/**\n * The hook method is invoked when the play range of the procedure is changed.\n * \n * @memberof module:solo.app.procedure\n * @abstract \n * @function didChangePlayRange\n * @param {number} startPosition - The start time of the play range\n * @param {number} endPosition - The end time of the play range\n * @see The corresponding event {@link event:\"app.procedure.didChangePlayRange\" \"app.procedure.didChangePlayRange\"}\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n * @since 1.7.0\n */\n/**\n * @event \"app.procedure.didChangePlayRange\"\n * @see The corresponding hook method {@link module:solo.app.procedure.didChangePlayRange app.procedure.didChangePlayRange()}\n */\n\n\n/**\n * Procedure playback range flags.\n * @prop {number} app.procedure.RANGE_FLAGS_SEEK_TO_START=1\n * @prop {number} app.procedure.RANGE_FLAGS_SEEK_TO_END=2\n * @prop {number} app.procedure.RANGE_FLAGS_REQUEST_NOTIFICATION=4\n * @prop {number} app.procedure.RANGE_FLAGS_DO_NOT_RECALCULATE_POSITION=8\n * @typedef {number} ProcedureRangeFlags\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n */\n\n/**\n * Procedure playback range constants.\n * @prop {string} app.procedure.RANGE_VALUE_CURRENT_STEP=%%CURRENT_STEP%%\n * @prop {string} app.procedure.RANGE_VALUE_CURRENT_SUBSTEP=%%CURRENT_SUBSTEP%%\n * @typedef {number} ProcedureRangeKeyword\n * @see {@link module:solo.app.procedure.setPlayRange app.procedure.setPlayRange()}\n */\n\n/**\n * Seek mode constants.\n * @prop {number} app.procedure.SEEK_DEFAULT=-1\n * @prop {number} app.procedure.SEEK_TO_BEGIN=0\n * @prop {number} app.procedure.SEEK_TO_CUE_POINT=1 The __setViewpoint__ command is skipped (if any) at the beginning of the substep when calculating seek position.\n * @prop {number} app.procedure.SEEK_TO_END=2\n * @typedef {number} ProcedureSeekMode\n * @see {@link module:solo.app.procedure.forward app.procedure.forward()}\n * @see {@link module:solo.app.procedure.backward app.procedure.backward()}\n * @see {@link module:solo.app.procedure.seekToSubstep app.procedure.seekToSubstep()}\n * @since 1.5.3\n */","var Cortona3DSolo = require('solo');\nvar Tiramisu = Module.Tiramisu;\nvar app = require('app').app;\nvar expand = require('lib/util').expand;\nvar checkConfigureOptions = require('app').checkConfigureOptions;\nvar usedModules = require('app').usedModules;\n\nvar m_currentSheet = {};\nvar m_sheets = [];\n\nfunction unmarshalIndexArray(indexArray) {\n    var itemCount = getValue(indexArray, 'i32'),\n        i,\n        res = new Array(itemCount);\n    for (i = 1; i <= itemCount; ++i) {\n        res[i - 1] = getValue(indexArray + i * 4, 'i32');\n    }\n    return res;\n}\n\n// Cortona3DSolo hooks\nCortona3DSolo.once(\"app.didAttachDocument\", function (doc) {\n    if (doc.type == 'ipc') {\n        m_sheets = doc.sheets;\n        m_currentSheet = expand({}, doc.sheet);\n        delete m_currentSheet.drawing;\n        Cortona3DSolo.once(\"app.firstFrameDidArrive\", function () {\n            Tiramisu.ipc.didSelectSheet(m_currentSheet);\n        });\n        if (usedModules.core.config.ipcHoverColor) {\n            app.hoverColor = usedModules.core.config.ipcHoverColor;\n        }\n        if (usedModules.core.config.ipcSelectionColor) {\n            app.selectionColor = usedModules.core.config.ipcSelectionColor;\n        }\n    }\n});\n\n// Tiramisu hooks\nexpand(Tiramisu, {\n    ipc: {\n        didSelectSheet: function (sheet) {\n            if (app.ipc.interactivity) {\n                sheet.drawing = app.ipc.interactivity.getDrawingForIPCView(sheet.id);\n            }\n            if (app.drawing) {\n                app.drawing.load(sheet.drawing)\n                    .catch(function () {\n                        if (checkConfigureOptions(app.ENABLE_AUTO_SWITCHING_DISPLAY_MODE)) {\n                            if (app.ui.isDrawingDisplayMode()) {\n                                app.ipc.toggleDrawingDisplayMode();\n                            }\n                        }\n                    });\n            }\n            m_currentSheet = sheet;\n            Cortona3DSolo.dispatch('app.ipc.didSelectSheet', sheet);\n        },\n        didHoverItem: function (index, items) {\n            Cortona3DSolo.dispatch('app.ipc.didHoverItem', index, unmarshalIndexArray(items));\n        },\n        didSelectItem: function (index, items) {\n            Cortona3DSolo.dispatch('app.ipc.didSelectItem', index, unmarshalIndexArray(items));\n        },\n        didChangeItemVisibility: function (isHidden, items, itemCount) {\n            var rows = new Array(itemCount),\n                row, i;\n            for (i = 0; i < itemCount; ++i) {\n                rows[i] = getValue(items + i * 4, 'i32');\n            }\n            Cortona3DSolo.dispatch('app.ipc.didChangeItemVisibility', isHidden, rows);\n        },\n        willStartSheetTransitionAnimation: function (sheet) {\n            Cortona3DSolo.dispatch('app.ipc.willStartSheetTransitionAnimation', sheet.id);\n        },\n        didStopSheetTransitionAnimation: function (sheet) {\n            Cortona3DSolo.dispatch('app.ipc.didStopSheetTransitionAnimation', sheet.id);\n        }\n    },\n});\n\nvar appExports = {\n    /**\n     * The namespace represents an application interface to manage the interactive parts catalog (IPC).\n     * \n     * @namespace\n     * @memberof module:solo.app\n     * @prop {number} DEFAULT_TRANSITION_STEP_DURATION=1 Default value of transition rate between of IPC sheets.\n     */\n    ipc: {\n        /**\n         * Activates IPC sheet by ID.\n         * \n         * @param {string} sheetId - IPC sheet ID\n         * @param {AnimatedMode} animated\n         */\n        setCurrentSheet: function (sheetId, animated) {\n            Module.ccall('ipc_setCurrentSheet', 'null', ['string', 'number'], [sheetId, app.ui.isDrawingDisplayMode() ? false : animated]);\n        },\n\n        /**\n         * Toggles 3D IPC item visibility.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         */\n        toggleItemVisibility: function (index) {\n            Module.ccall('ipc_toggleItemVisibility', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Select 3D IPC item.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         * @param {AnimatedMode} [animated=true]\n         * @returns {number[]} indices - An array of selected row numbers excluding attaching parts\n         */\n        selectItem: function (index, animated) {\n            return unmarshalIndexArray(Module.ccall('ipc_selectItem', 'number', ['number'], [index, typeof animated === 'undefined' ? true : animated]));\n        },\n\n        /**\n         * Highlight 3D IPC item.\n         * \n         * @param {number} index - The row number on the current IPC sheet\n         * @param {AnimatedMode} [animated=true]\n         * @returns {number[]} indices - An array of highlighted row numbers excluding attaching parts\n         */\n        hoverItem: function (index, animated) {\n            return unmarshalIndexArray(Module.ccall('ipc_hoverItem', 'null', ['number'], [index, typeof animated === 'undefined' ? true : animated]));\n        },\n\n        /**\n         * Restore view of the current IPC sheet by default.\n         * \n         * @param {AnimatedMode} animated\n         */\n        resetCurrentSheet: function (animated) {\n            if (app.drawing) {\n                require('app.drawing').getSVGViewer().reset(animated);\n            }\n            Module.ccall('ipc_resetCurrentSheet', 'null', ['number'], arguments);\n        },\n\n        /**\n         * Get current IPC sheet items.\n         * @private\n         * @returns {object[]} An array of items\n         */\n        /*\n        getCurrentSheetItems: function () {\n            var items = Module.ccall('ipc_getCurrentSheetItems', 'number');\n            return Tiramisu.util.unmarshalItemList(items);\n        },\n        */\n\n        /**\n         * Get an item with the hotspot name.\n         * \n         * @param {string} hotspotName - The name of the hospot\n         * @returns {number} The row number on the current IPC sheet\n         */\n        getItemWithHotspot: function (hotspotName) {\n            return Module.ccall('ipc_getItemWithHotspot', 'number', ['string'], arguments);\n        },\n\n        /**\n         * Returns an object that represents information about the current IPC sheet.\n         * \n         * @returns {CatalogCurrentSheetInfo} The object represents IPC sheet information\n         * @deprecated since version 1.5.0, use {@link module:solo.app.ipc.currentSheetInfo app.currentSheetInfo} instead\n         */\n        getCurrentSheet: function () {\n            return m_currentSheet;\n        },\n\n        /**\n         * Toggles display between 2D and 3D views.\n         * \n         * @param {boolean} [forceVisible2D] - Forced display of the 2D window\n         * @returns {boolean} \n         * @fires \"app.ipc.didDrawingDisplayMode\"\n         */\n        toggleDrawingDisplayMode: function (drawingMode) {\n            if (!app.drawing) return false;\n            drawingMode = (typeof drawingMode === 'undefined') ? !app.drawing.isVisible() : drawingMode;\n            app.drawing.show(drawingMode);\n            app.ui.showCanvas(!drawingMode);\n            Cortona3DSolo.dispatch(\"app.ipc.didDrawingDisplayMode\", drawingMode);\n            return drawingMode;\n        },\n    }\n};\n\n\n/**\n * Gets a description of the current IPC sheet.\n * \n * @static\n * @member {CatalogCurrentSheetInfo} currentSheetInfo\n * @memberof module:solo.app.ipc\n * @since 1.5.0\n */\n\nObject.defineProperty(appExports.ipc, 'currentSheetInfo', {\n    get: function () {\n        return m_currentSheet;\n    },\n    enumerable: true\n});\n\n/**\n * Gets or sets transition rate between of IPC sheets.\n * \n * @static\n * @member {number} sheetTransitionRate\n * @memberof module:solo.app.ipc\n * @since 1.5.9\n */\n\nObject.defineProperties(appExports.ipc, {\n    'sheetTransitionRate': {\n        get: function () {\n            return 1 / getValue(Module._ipc_getSheetTransitionAnimationDurations() + 4, 'float');\n        },\n        set: function (value) {\n            if (value > 0) Module._ipc_setSheetTransitionAnimationDurations(1 / value, 1 / value);\n        },\n        enumerable: true\n    },\n    'DEFAULT_TRANSITION_STEP_DURATION': {\n        value: 1,\n        enumerable: true\n    },\n});\n\nappExports.ipc.dpl = require('app.ipc.dpl');\n\nmodule.exports = {\n    app: appExports\n};\n\n/**\n * The hook method is invoked when the IPC sheet is activated.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didSelectSheet\n * @param {CatalogCurrentSheetInfo} sheet - The object represents the IPC sheet information\n * @see The corresponding event {@link event:\"app.ipc.didSelectSheet\" \"app.ipc.didSelectSheet\"}\n */\n/**\n * @event \"app.ipc.didSelectSheet\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didSelectSheet app.ipc.didSelectSheet()}\n */\n\n/**\n * The hook method is invoked when the 3D IPC item is hovered.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didHoverItem\n * @param {number} index The row number on the current IPC sheet \n * @param {number[]} indices An array of highlighted row numbers excluding attaching parts\n * @see The corresponding event {@link event:\"app.ipc.didHoverItem\" \"app.ipc.didHoverItem\"}\n */\n/**\n * @event \"app.ipc.didHoverItem\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didHoverItem app.ipc.didHoverItem()}\n */\n\n/**\n * The hook method is invoked when the 3D IPC item is selected.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didSelectItem\n * @param {number} index The row number on the current IPC sheet\n * @param {number[]} indices An array of highlighted row numbers excluding attaching parts\n * @see The corresponding event {@link event:\"app.ipc.didSelectItem\" \"app.ipc.didSelectItem\"}\n */\n/**\n * @event \"app.ipc.didSelectItem\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didSelectItem app.ipc.didSelectItem()}\n */\n\n/**\n * The hook method is invoked when the visibility state of the 3D IPC item is toggled.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didChangeItemVisibility\n * @param {boolean} isHidden - \n * - true - hidden\n * - false - visible\n * @param {number[]} indices - Array of index numbers on the current IPC sheet\n * @see The corresponding event {@link event:\"app.ipc.didChangeItemVisibility\" \"app.ipc.didChangeItemVisibility\"}\n */\n/**\n * @event \"app.ipc.didChangeItemVisibility\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didChangeItemVisibility app.ipc.didChangeItemVisibility()}\n */\n\n/**\n * The hook method is invoked when the display mode of the catalog is changed.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didDrawingDisplayMode\n * @param {boolean} drawingMode - \n * - true - 2D display mode\n * - false - 3D display mode\n * @see The corresponding event {@link event:\"app.ipc.didDrawingDisplayMode\" \"app.ipc.didDrawingDisplayMode\"}\n * @since 1.4.0\n */\n/**\n * @event \"app.ipc.didDrawingDisplayMode\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didDrawingDisplayMode app.ipc.didDrawingDisplayMode()}\n */\n\n/**\n * The hook method is invoked when the transition animation to the IPC sheet is started.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function willStartSheetTransitionAnimation\n * @param {string} sheetId - IPC sheet ID\n * @see The corresponding event {@link event:\"app.ipc.willStartSheetTransitionAnimation\" \"app.ipc.willStartSheetTransitionAnimation\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.ipc.willStartSheetTransitionAnimation\"\n * @see The corresponding hook method {@link module:solo.app.ipc.willStartSheetTransitionAnimation app.ipc.willStartSheetTransitionAnimation()}\n */\n\n/**\n * The hook method is invoked when the transition animation to the IPC sheet is finished.\n * \n * @memberof module:solo.app.ipc\n * @abstract \n * @function didStopSheetTransitionAnimation\n * @param {string} sheetId - IPC sheet ID\n * @see The corresponding event {@link event:\"app.ipc.didStopSheetTransitionAnimation\" \"app.ipc.didStopSheetTransitionAnimation\"}\n * @since 1.6.4\n */\n/**\n * @event \"app.ipc.didStopSheetTransitionAnimation\"\n * @see The corresponding hook method {@link module:solo.app.ipc.didStopSheetTransitionAnimation app.ipc.didStopSheetTransitionAnimation()}\n */\n\n/**\n * The object represents information about the current IPC sheet, for example:\n * ```\n * {\n *      id: \"view_2\",\n *      description: \"Backplate Assy View\",\n *      drawing: \"http://.../pump-catalog-2.svg\",\n *      dplTableWidth: 69,\n *      dplTable: \"<table id=\\\"dpl-table\\\" class=\\\"dpl-table\\\">...</table>\"\n * }\n * ```\n * @prop {string} id - IPC sheet ID. \n * @prop {string} description - IPC sheet description.\n * @prop {string} drawing - The name of the file for 2D illustration.\n * @prop {number} dplTableWidth - DPL table width.\n * @prop {string} dplTable - The HTML string is a detailed parts list (DPL) in the form of an HTML table.\n * @typedef {object} CatalogCurrentSheetInfo\n * @see {@link module:solo.app.ipc.didSelectSheet app.ipc.didSelectSheet()}\n * @see {@link module:solo.app.ipc.getCurrentSheet app.ipc.getCurrentSheet()}\n */","var Cortona3DSolo = require('solo');\r\nvar app = require('app').app;\r\nvar util = require('lib/util');\r\n\r\nvar m_hoverRow = -1;\r\n\r\nvar DOUBLE_TAP_TIME = 250;\r\nvar PRESS_TIME = 750;\r\n\r\nvar ipcExports = {\r\n    /**\r\n     * The namespace represents an application interface to manage DPL table in the interactive parts catalog.\r\n     * \r\n     * @namespace\r\n     * @memberof module:solo.app.ipc\r\n     */\r\n    dpl: {\r\n\r\n        /**\r\n         * Setup the DPL table for the current IPC sheet.\r\n         * \r\n         * @param {HTMLTableElement} dplTableElement An HTML table representing the current IPC sheet\r\n         * @see external:HTMLTableElement\r\n         * @fires \"app.ipc.dpl.didSetupRow\"\r\n         * @fires \"app.ipc.dpl.willSetupTable\"\r\n         * @fires \"app.ipc.dpl.didSetupTable\"\r\n         */\r\n        setupTable: function (dplTableElement) {\r\n            Cortona3DSolo.dispatch('app.ipc.dpl.willSetupTable', dplTableElement);\r\n            if (dplTableElement) {\r\n                m_hoverRow = -1;\r\n\r\n                // TO-DO: touch devices\r\n                // TO-DO: keyboard accelerators\r\n\r\n                var timeoutOut,\r\n                    indexOut;\r\n\r\n                var contextMenuHandler = function (e) {\r\n                    var index = +this.getAttribute('data-index');\r\n                    var target = dplTableElement,\r\n                        rect = target.getBoundingClientRect(),\r\n                        offsetX = e.clientX - rect.left,\r\n                        offsetY = e.clientY - rect.top;\r\n                    Cortona3DSolo.dispatch(\"app.ipc.dpl.didCallContextMenu\", index, offsetX, offsetY, target);\r\n                };\r\n\r\n                Array.prototype.slice.call(dplTableElement.rows).forEach(function (row) {\r\n                    if (row.id) {\r\n                        var index = +row.id.substring(3);\r\n                        row.setAttribute('data-index', index);\r\n                        row.onmouseover = function (e) {\r\n                            clearTimeout(timeoutOut);\r\n                            var index = +this.getAttribute('data-index');\r\n                            if (indexOut !== index) {\r\n                                indexOut = null;\r\n                                Cortona3DSolo.dispatch(\"app.ipc.dpl.didHoverRow\", index);\r\n                            }\r\n                        };\r\n                        row.onmouseout = function (e) {\r\n                            indexOut = +this.getAttribute('data-index');\r\n                            clearTimeout(timeoutOut);\r\n                            timeoutOut = setTimeout(function () {\r\n                                Cortona3DSolo.dispatch(\"app.ipc.dpl.didHoverRow\", -1);\r\n                                indexOut = null;\r\n                            }, 10);\r\n                        };\r\n                        row.onclick = function (e) {\r\n                            var index = +this.getAttribute('data-index');\r\n                            var keys = +(e.shiftKey && 1) | +(e.ctrlKey && 2) | +(e.altKey && 4);\r\n                            var self = this;\r\n                            if (!this.__debounceTimeout) {\r\n                                this.__debounceTimeout = setTimeout(function () {\r\n                                        delete self.__debounceTimeout;\r\n                                        Cortona3DSolo.dispatch(\"app.ipc.dpl.didSelectRow\", index, keys);\r\n                                    },\r\n                                    DOUBLE_TAP_TIME);\r\n                            } else {\r\n                                clearTimeout(this.__debounceTimeout);\r\n                                delete this.__debounceTimeout;\r\n                            }\r\n                        };\r\n                        row.oncontextmenu = function (e) {\r\n                            if (e.preventDefault) e.preventDefault();\r\n                            if (e.stopPropagation) e.stopPropagation();\r\n                            if (this.__pointerDown) return;\r\n                            contextMenuHandler.call(this, e);\r\n                        };\r\n                        row.onpointerdown = function (e) { \r\n                            if (e.pointerType == 'mouse' || !e.isPrimary) return;\r\n                            this.__pointerDown = true;\r\n                            this.__pressTimeout = setTimeout((function () {\r\n                                delete this.__pressTimeout;\r\n                                contextMenuHandler.call(this, e);\r\n                            }).bind(this), PRESS_TIME);\r\n                        }\r\n                        row.onpointerout = function (e) { \r\n                            if (e.pointerType == 'mouse' || !e.isPrimary) return;\r\n                            clearTimeout(this.__pressTimeout);\r\n                            delete this.__pressTimeout;\r\n                            setTimeout((function () {\r\n                                delete this.__pointerDown;\r\n                            }).bind(this), 100);\r\n                        }\r\n                        Cortona3DSolo.dispatch(\"app.ipc.dpl.didSetupRow\", row, index);\r\n                    }\r\n                });\r\n            }\r\n            Cortona3DSolo.dispatch('app.ipc.dpl.didSetupTable', dplTableElement);\r\n        },\r\n        /**\r\n         * Highlight the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         */\r\n        hoverRow: function (index) {\r\n            var el;\r\n            if (m_hoverRow >= 0) {\r\n                el = document.getElementById('row' + m_hoverRow);\r\n                if (el) el.classList.remove('hover');\r\n            }\r\n            if (index >= 0) {\r\n                el = document.getElementById('row' + index);\r\n                if (el) el.classList.add('hover');\r\n            }\r\n            m_hoverRow = index;\r\n        },\r\n        /**\r\n         * Highlight the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag=true] -\r\n         * - true - highlight the DPL table row\r\n         * - false - clear selection\r\n         */\r\n        highlightRow: function (index, flag) {\r\n            flag = (typeof flag == 'undefined') ? true : flag;\r\n            util.toggleClass(document.getElementById('row' + index), 'hover', flag);\r\n        },\r\n        /**\r\n         * Select the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag=true] -\r\n         * - true - select the DPL table row\r\n         * - false - clear selection\r\n         */\r\n        selectRow: function (index, flag) {\r\n            flag = (typeof flag == 'undefined') ? true : flag;\r\n            util.toggleClass(document.getElementById('row' + index), 'selected', flag);\r\n        },\r\n        /**\r\n         * Toggles the line in the DPL table.\r\n         * \r\n         * @param {number} index The row number on the current IPC sheet\r\n         * @param {boolean} [flag] -\r\n         * - true - make the DPL table row visible\r\n         * - false - make the DPL table row hidden\r\n         * @since 1.4.3\r\n         */\r\n        toggleRow: function (index, flag) {\r\n            var el = document.getElementById('row' + index);\r\n            if (el) {\r\n                flag = (typeof flag == 'undefined') ? el.classList.contains('hidden') : flag;\r\n                util.toggleClass(el, 'hidden', !flag);\r\n            }\r\n        },\r\n    }\r\n};\r\n\r\nmodule.exports = ipcExports.dpl;\r\n\r\n/**\r\n * The hook method is invoked before the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function willSetupTable\r\n * @param {HTMLTableElement} tableElement The table element\r\n * @see external:HTMLTableElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.willSetupTable\" \"app.ipc.dpl.willSetupTable\"}\r\n * @since 1.5.0\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.willSetupTable\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.willSetupTable app.ipc.dpl.willSetupTable()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked after the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSetupTable\r\n * @param {HTMLTableElement} tableElement The table element\r\n * @see external:HTMLTableElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSetupTable\" \"app.ipc.dpl.didSetupTable\"}\r\n * @since 1.5.0\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSetupTable\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSetupTable app.ipc.dpl.didSetupTable()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is initialized.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSetupRow\r\n * @param {HTMLTableRowElement} rowElement The row element\r\n * @param {number} index The row number in the DPL table\r\n * @see external:HTMLTableRowElement\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSetupRow\" \"app.ipc.dpl.didSetupRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSetupRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSetupRow app.ipc.dpl.didSetupRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is selected.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didSelectRow\r\n * @param {number} index The row number on the current IPC sheet\r\n * @param {number} keys Flags bitmask that corresponds to the state of the SHIFT, CTRL, and ALT keys:\r\n * - 0x01 - SHIFT key\r\n * - 0x02 - CTRL key\r\n * - 0x04 - ALT key\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didSelectRow\" \"app.ipc.dpl.didSelectRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didSelectRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didSelectRow app.ipc.dpl.didSelectRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the line of the DPL table is hovered.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didHoverRow\r\n * @param {number} index The row number on the current IPC sheet\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didHoverRow\" \"app.ipc.dpl.didHoverRow\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didHoverRow\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didHoverRow app.ipc.dpl.didHoverRow()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the context menu is called in the DPL table. \r\n * The mouse uses secondary button click. The touch device uses long tap.\r\n * \r\n * @memberof module:solo.app.ipc.dpl\r\n * @abstract \r\n * @function didCallContextMenu\r\n * @param {number} index The row number on the current IPC sheet\r\n * @param {number} offsetX The X coordinate relative to the target element\r\n * @param {number} offsetY The Y coordinate relative to the target element \r\n * @param {HTMLElement} target Target element (`<table>`)\r\n * @see The corresponding event {@link event:\"app.ipc.dpl.didCallContextMenu\" \"app.ipc.dpl.didCallContextMenu\"}\r\n */\r\n/**\r\n * @event \"app.ipc.dpl.didCallContextMenu\"\r\n * @see The corresponding hook method {@link module:solo.app.ipc.dpl.didCallContextMenu app.ipc.dpl.didCallContextMenu()}\r\n */","var Vec3f = require('./vec3f');\r\n\r\n/**\r\n * Construct a new Rotation object.<br><br>\r\n * \r\n * #### new Rotation(x, y, z, angle)\r\n * #### new Rotation([x, y, z, angle])\r\n * \r\n * where \r\n * - _x_, _y_, and _z_ are the axis of the rotation; \r\n * - _angle_ is the angle of the rotation (in radians).<br><br>\r\n * \r\n * #### new Rotation(<{@link Vec3f}> axis, angle)\r\n * \r\n * where \r\n * - _axis_ is the axis of rotation;\r\n * - _angle_ is the angle of the rotation (in radians).<br><br>\r\n * \r\n * #### new Rotation(<{@link Vec3f}> fromVector, <{@link Vec3f}> toVector)\r\n * \r\n * where\r\n * - _fromVector_ and _toVector_ are normalized and the rotation value that would rotate from the _fromVector_ to the _toVector_ is stored in the object.\r\n * \r\n * @class The Rotation object corresponds to a VRML SFRotation field. It has four numeric properties: x, y, z (the axis of rotation) and angle.\r\n */\r\nfunction Rotation( /*oVec3f, angle | oVec3f, oVec3f | x, y, z, angle*/ ) {\r\n    if (arguments.length == 4) {\r\n        /**\r\n         * First value of the axis vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.x = arguments[0];\r\n        /**\r\n         * Second value of the axis vector.\r\n         * @type number\r\n         * @default 1\r\n         */\r\n        this.y = arguments[1];\r\n        /**\r\n         * Third value of the axis vector.\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.z = arguments[2];\r\n        /**\r\n         * The angle of the rotation (in radians).\r\n         * @type number\r\n         * @default 0\r\n         */\r\n        this.angle = arguments[3];\r\n    } else if (arguments.length == 2) {\r\n        if (typeof (arguments[1]) == 'number') {\r\n            this.setAxis(arguments[0]);\r\n            this.angle = arguments[1];\r\n        } else {\r\n            var FLT_EPSILON = 1.192092896e-07;\r\n            var v = arguments[0].normalize();\r\n            var v1 = arguments[1].normalize();\r\n            var axis = v.cross(v1);\r\n            var len = axis.length();\r\n            if (len <= FLT_EPSILON) {\r\n                if (v.dot(v1) < 0.0) {\r\n                    axis = v.cross(new Vec3f(1, 0, 0));\r\n                    this.angle = Math.PI;\r\n                    len = axis.length();\r\n                    if (len <= FLT_EPSILON)\r\n                        axis = v.cross(new Vec3f(0, 1, 0));\r\n                    axis = axis.normalize();\r\n\r\n                } else {\r\n                    axis = new Vec3f(0, 1, 0);\r\n                    this.angle = 0.0;\r\n                }\r\n            } else {\r\n                this.angle = Math.atan2(len, v.dot(v1));\r\n                axis = axis.normalize();\r\n            }\r\n            this.setAxis(axis);\r\n        }\r\n    } else if (arguments.length == 1 && typeof arguments[0] == \"object\" && arguments[0] !== null && arguments[0].length === 4) {\r\n        this.x = arguments[0][0];\r\n        this.y = arguments[0][1];\r\n        this.z = arguments[0][2];\r\n        this.angle = arguments[0][3];\r\n    } else {\r\n        this.x = 0;\r\n        this.y = 1;\r\n        this.z = 0;\r\n        this.angle = 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Returns array represents rotations fields [x, y, z, angle].\r\n * @returns {number[]} Array of four floats.\r\n */\r\nRotation.prototype.toArray =\r\n    function () {\r\n        return [this.x, this.y, this.z, this.angle];\r\n    };\r\n\r\n/**\r\n * Returns the value of oVec3f multiplied by the matrix corresponding to this object's rotation.\r\n * @param {Vec3f} oVec3f The Vec3f object.\r\n * @returns {Vec3f}\r\n */\r\nRotation.prototype.multVec =\r\n    function (oVec3f) {\r\n        var e = -this.angle;\r\n        var s = Math.sin(e);\r\n        var c = Math.cos(e);\r\n\r\n        var f = this.x;\r\n        var g = this.y;\r\n        var h = this.z;\r\n\r\n        var x = oVec3f.x;\r\n        var y = oVec3f.y;\r\n        var z = oVec3f.z;\r\n\r\n        var p = (f * x + g * y + h * z) * (1 - c);\r\n\r\n        var px = f * p + c * x + s * (h * y - g * z);\r\n        var py = g * p + c * y + s * (f * z - h * x);\r\n        var pz = h * p + c * z + s * (g * x - f * y);\r\n        return new Vec3f(px, py, pz);\r\n    };\r\n\r\n/**\r\n * Returns the inverse of this object's rotation.\r\n * @returns {Rotation}\r\n */\r\nRotation.prototype.inverse =\r\n    function () {\r\n        return new Rotation(this.x, this.y, this.z, -this.angle);\r\n    };\r\n\r\n/**\r\n * Returns the object multiplied by the passed value.\r\n * @param {Rotation} oRotation The Rotation object.\r\n * @returns {Rotation}\r\n */\r\nRotation.prototype.multiply =\r\n    function (oRotation) {\r\n        var angle = oRotation.angle;\r\n        var Sa = Math.sin(angle / 2);\r\n        var Ca = Math.cos(angle / 2);\r\n        var As = oRotation.getAxis().multiply(Sa);\r\n\r\n        var Sb = Math.sin(this.angle / 2);\r\n        var Cb = Math.cos(this.angle / 2);\r\n        var Bs = this.getAxis().multiply(Sb);\r\n\r\n        var Cab = Ca * Cb - As.dot(Bs);\r\n\r\n        var ABs = As.multiply(Cb).add(Bs.multiply(Ca)).add(Bs.cross(As));\r\n\r\n        var msq = ABs.x * ABs.x + ABs.y * ABs.y + ABs.z * ABs.z;\r\n\r\n        var result = new Rotation(0, 0, 1, 0);\r\n        if (msq !== 0) {\r\n            var Sab = Math.sqrt(msq);\r\n            result.setAxis(ABs.divide(Sab));\r\n            result.angle = 2 * Math.atan2(Sab, Cab);\r\n        }\r\n        return result;\r\n    };\r\n\r\n/**\r\n * Sets the axis of rotation to the value passed in oVec3f.\r\n * @param {Vec3f} oVec3f The Vec3f object.\r\n */\r\nRotation.prototype.setAxis =\r\n    function (oVec3f) {\r\n        this.x = oVec3f.x;\r\n        this.y = oVec3f.y;\r\n        this.z = oVec3f.z;\r\n    };\r\n\r\n/**\r\n * Returns the axis of rotation.\r\n * @returns {Vec3f}\r\n */\r\nRotation.prototype.getAxis =\r\n    function () {\r\n        return new Vec3f(this.x, this.y, this.z);\r\n    };\r\n\r\n/**\r\n * Returns a string containing the value of x, y, z, and angle separated by spaces.\r\n * @returns {string}\r\n */\r\nRotation.prototype.toString =\r\n    function () {\r\n        return this.toArray().join(' ');\r\n    };\r\n\r\nmodule.exports = Rotation;","// Require pointer events polyfill\r\nrequire('pepjs');\r\n\r\nvar Cortona3DSolo = require('solo');\r\nvar util = require('lib/util');\r\n\r\nvar options = {\r\n    MOUSE_CLICK_THRESHOLD: 3,\r\n    FEATURE_PICK_TOPMOST: true\r\n};\r\n\r\nvar DOUBLE_TAP_TIME = 250;\r\nvar PRESS_TIME = 750;\r\n\r\nvar debounceTimeout = {};\r\n\r\nvar whichToButtons = [0, 1, 4, 2];\r\nvar buttonToButtons = [1, 4, 2, 8, 16];\r\n\r\nvar now = function () {\r\n    return new Date().valueOf();\r\n};\r\n\r\nvar getMouseEventArguments = function (event, isMove) {\r\n    var keys = +(event.shiftKey && 1) | +(event.ctrlKey && 2) | +(event.altKey && 4);\r\n    //var buttons = (event.which !== undefined) ? whichToButton[event.which] : event.button;\r\n    var buttons;\r\n    if (isMove) {\r\n        buttons = (event.buttons !== undefined) ? event.buttons : ((event.which !== undefined) ? whichToButtons[event.which] : buttonToButtons[event.button]);\r\n    } else {\r\n        buttons = (event.which !== undefined) ? whichToButtons[event.which] : buttonToButtons[event.button];\r\n    }\r\n\r\n    var target = event.target || event.srcElement,\r\n        rect = target.getBoundingClientRect(),\r\n        offsetX = event.clientX - rect.left,\r\n        offsetY = event.clientY - rect.top;\r\n\r\n    return [offsetX, offsetY, buttons, keys, event];\r\n};\r\n\r\nvar distance = function (aVec1, aVec2) {\r\n    var dx = aVec1[0] - aVec2[0],\r\n        dy = aVec1[1] - aVec2[1];\r\n    return Math.sqrt(dx * dx + dy * dy);\r\n};\r\n\r\nvar args;\r\n\r\nvar isMouseMoved = function (mouseArgs1, mouseArgs2) {\r\n    if (!mouseArgs1 || !mouseArgs2) return false;\r\n    return distance(mouseArgs1, mouseArgs2) > options.MOUSE_CLICK_THRESHOLD;\r\n};\r\n\r\nvar isPress = function (timestamp) {\r\n    return (now() - timestamp) > PRESS_TIME;\r\n}\r\n\r\nvar overObject = null;\r\nvar lastMouseArguments = null;\r\nvar lastMouseMove = null;\r\nvar pointerdownTime = 0;\r\n\r\nvar FEATURE_PICK_TOPMOST = true;\r\n\r\n/* Firefox title changes issue */\r\nvar stealthyLayer = null;\r\nvar isFF = navigator.userAgent.lastIndexOf(\"Firefox\") > 0;\r\nvar createStealthyLayer = function () {\r\n    if (isFF) {\r\n        stealthyLayer = document.createElement('div');\r\n        stealthyLayer.style.position = 'absolute';\r\n        stealthyLayer.style.top = '0';\r\n        stealthyLayer.style.bottom = '0';\r\n        stealthyLayer.style.left = '0';\r\n        stealthyLayer.style.right = '0';\r\n        stealthyLayer.style.zIndex = 10000;\r\n        stealthyLayer.onmousemove = function (e) {\r\n            e = e || window.event;\r\n            document.body.removeChild(e.target);\r\n            stealthyLayer = null;\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            return false;\r\n        };\r\n        setTimeout(function () {\r\n            if (stealthyLayer) {\r\n                document.body.removeChild(stealthyLayer);\r\n                stealthyLayer = null;\r\n            }\r\n        }, 100);\r\n        document.body.appendChild(stealthyLayer);\r\n    }\r\n};\r\n\r\nvar m_lastPickInfo;\r\n\r\nvar eventHandlers = {\r\n    pointermove: function (event) {\r\n        var target = event.target || event.srcElement,\r\n            rect = target.getBoundingClientRect(),\r\n            offsetX = event.clientX - rect.left,\r\n            offsetY = event.clientY - rect.top,\r\n            mouseArguments = getMouseEventArguments(event, true);\r\n\r\n        var handleOld = overObject ? overObject.handle : null;\r\n\r\n        if (lastMouseMove && !isMouseMoved(lastMouseMove, mouseArguments)) return;\r\n\r\n        lastMouseMove = mouseArguments;\r\n\r\n        if (!mouseArguments[2]) { // buttons === 0\r\n\r\n            m_lastPickInfo = pickObjectChain(offsetX, offsetY, options.FEATURE_PICK_TOPMOST);\r\n\r\n            var obj = m_lastPickInfo.picked;\r\n\r\n            if (obj) {\r\n                Cortona3DSolo.dispatch('touch.didObjectMove', obj.handle, obj.name);\r\n            }\r\n\r\n            var handleNew = obj ? obj.handle : null;\r\n\r\n            if (handleOld !== handleNew) {\r\n                if (overObject) {\r\n                    createStealthyLayer();\r\n                    Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n                }\r\n                if (obj) {\r\n                    Cortona3DSolo.dispatch('touch.didObjectEnter', handleNew, obj.name);\r\n                }\r\n            }\r\n\r\n            overObject = obj;\r\n        } else {\r\n            if (overObject) {\r\n                createStealthyLayer();\r\n                Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n                overObject = null;\r\n            }\r\n        }\r\n        args = ['touch.didPointerMove'].concat(mouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n    },\r\n    pointerenter: function (event) {\r\n        if (stealthyLayer) return;\r\n        Cortona3DSolo.dispatch('touch.didPointerEnter');\r\n        lastMouseMove = null;\r\n    },\r\n    pointerout: function (event) {\r\n        if (stealthyLayer) return;\r\n        if (overObject) {\r\n            Cortona3DSolo.dispatch('touch.didObjectOut', overObject.handle, overObject.name);\r\n            overObject = null;\r\n            createStealthyLayer();\r\n        }\r\n        Cortona3DSolo.dispatch('touch.didPointerOut');\r\n        lastMouseMove = null;\r\n    },\r\n    pointerdown: function (event) {\r\n        pointerdownTime = now();\r\n        lastMouseArguments = getMouseEventArguments(event);\r\n        args = ['touch.didPointerDown'].concat(lastMouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n    },\r\n    pointerup: function (event) {\r\n        var target = event.target || event.srcElement,\r\n            rect = target.getBoundingClientRect(),\r\n            offsetX = event.clientX - rect.left,\r\n            offsetY = event.clientY - rect.top,\r\n            mouseArguments = getMouseEventArguments(event);\r\n\r\n        m_lastPickInfo = pickObjectChain(offsetX, offsetY, options.FEATURE_PICK_TOPMOST);\r\n\r\n        var obj = m_lastPickInfo.picked;\r\n\r\n        if (!isMouseMoved(lastMouseArguments, mouseArguments) && !isPress(pointerdownTime)) {\r\n            if (!obj) obj = {\r\n                handle: 0,\r\n                name: ''\r\n            };\r\n            if (!debounceTimeout[obj.name]) {\r\n                debounceTimeout[obj.name] = {\r\n                    lpi: m_lastPickInfo,\r\n                    t: setTimeout(function () {\r\n                        var currentLastPickInfo = m_lastPickInfo;\r\n                        m_lastPickInfo = debounceTimeout[obj.name].lpi;\r\n                        delete debounceTimeout[obj.name];\r\n                        args = ['touch.didObjectClick', obj.handle, obj.name].concat(mouseArguments);\r\n                        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n                        m_lastPickInfo = currentLastPickInfo;\r\n                    }, DOUBLE_TAP_TIME)\r\n                };\r\n            } else {\r\n                clearTimeout(debounceTimeout[obj.name].t);\r\n                delete debounceTimeout[obj.name];\r\n            }\r\n        }\r\n\r\n        var handleOld = overObject ? overObject.handle : null,\r\n            handleNew = obj ? obj.handle : null;\r\n\r\n        if (handleOld !== handleNew) {\r\n            if (overObject) {\r\n                createStealthyLayer();\r\n                Cortona3DSolo.dispatch('touch.didObjectOut', handleOld, overObject.name);\r\n            }\r\n            if (obj) {\r\n                Cortona3DSolo.dispatch('touch.didObjectEnter', handleNew, obj.name);\r\n            }\r\n        }\r\n\r\n        overObject = obj;\r\n\r\n        args = ['touch.didPointerUp'].concat(mouseArguments);\r\n        Cortona3DSolo.dispatch.apply(Cortona3DSolo, args);\r\n\r\n        lastMouseArguments = null;\r\n    }\r\n};\r\n\r\nif (navigator.pointerEnabled === false) {\r\n    for (var eventName in eventHandlers) {\r\n        if (eventName.indexOf('pointer') === 0) {\r\n            eventHandlers[eventName.replace(/^pointer/, 'mouse')] = eventHandlers[eventName];\r\n            delete eventHandlers[eventName];\r\n        }\r\n    }\r\n}\r\n\r\nfunction attach() {\r\n    if (Cortona3DSolo.core && Cortona3DSolo.core.runtimeReady && Cortona3DSolo.core.canvas) {\r\n        var canvas = Cortona3DSolo.core.canvas;\r\n        for (eventName in eventHandlers) {\r\n            canvas.addEventListener(eventName, eventHandlers[eventName], false);\r\n        }\r\n    } else {\r\n        Cortona3DSolo.on('app.firstFrameDidArrive', attach);\r\n    }\r\n}\r\n\r\nattach();\r\n\r\n/**\r\n * Search for all 3D objects through which the beam passes from a given point on the 3D window in the direction of the camera.\r\n * \r\n * @function pickObjectsRightThrough\r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate relative to the element `<canvas>`\r\n * @param {number} y - The Y coordinate relative to the element `<canvas>`\r\n * @returns {Handle[]} An array of all found 3D objects\r\n */\r\nfunction pickObjectsRightThrough(x, y) {\r\n    var chain = [],\r\n        obj;\r\n\r\n    obj = Cortona3DSolo.app.pickObject(x, y, false);\r\n\r\n    while (obj) {\r\n        chain.push(obj.handle);\r\n        Cortona3DSolo.app.setObjectIgnorableByPicker(obj.handle, true);\r\n        obj = Cortona3DSolo.app.pickObject(x, y, false);\r\n    }\r\n\r\n    chain.forEach(function (handle) {\r\n        Cortona3DSolo.app.setObjectIgnorableByPicker(handle, false);\r\n    });\r\n\r\n    return chain;\r\n}\r\n\r\nfunction pickObjectChain(x, y, topMost) {\r\n    var chain = [],\r\n        handle,\r\n        obj = Cortona3DSolo.app.pickObject(x, y, !!topMost);\r\n\r\n    if (obj) {\r\n        for (handle = obj.handle; handle; handle = Cortona3DSolo.app.getParentObject(handle)) {\r\n            chain.push(handle);\r\n        }\r\n    }\r\n    return {\r\n        x: x,\r\n        y: y,\r\n        picked: obj,\r\n        chain: chain\r\n    };\r\n}\r\n\r\n\r\nvar soloExports = {\r\n    /**\r\n     * The namespace to work with pointer-events in the 3D window.\r\n     * \r\n     * Requires the use of internal modules `\"touch\"` and `\"core\"`.\r\n     * \r\n     * @requires touch\r\n     * @requires core\r\n     * @namespace\r\n     * @memberof module:solo\r\n     * @since 1.5.6\r\n     * @example\r\nCortona3DSolo.use('core');\r\nCortona3DSolo.use('touch');\r\nCortona3DSolo.on('touch.didObjectClick', function () {\r\n    Cortona3DSolo.app.procedure.play();\r\n});\r\nCortona3DSolo.initialize('procedure.wrl');\r\n     */\r\n    touch: {\r\n        /**\r\n         * @static\r\n         * @member {object} options\r\n         * @property {number} options.MOUSE_CLICK_THRESHOLD=3 \r\n         * @property {boolean} options.FEATURE_PICK_TOPMOST=true You must use `false` in case of an interactive procedure.\r\n         * @memberof module:solo.touch\r\n         */\r\n        options: options,\r\n        pickObjectsRightThrough: pickObjectsRightThrough,\r\n        pickObjectChain: pickObjectChain\r\n\r\n        //didObjectEnter\r\n        //didObjectOut\r\n        //didObjectMove\r\n        //didObjectClick\r\n\r\n        //didPointerMove\r\n        //didPointerEnter\r\n        //didPointerDown\r\n        //didPointerUp\r\n    }\r\n};\r\n\r\n/**\r\n * Gets the information about the process of the last selection of a 3D object when pointer-events occur.\r\n * \r\n * @static\r\n * @member {PickInfo} lastPickInfo\r\n * @memberof module:solo.touch\r\n */\r\n\r\nObject.defineProperty(soloExports.touch, 'lastPickInfo', {\r\n    get: function () {\r\n        return m_lastPickInfo;\r\n    },\r\n    enumerable: true\r\n});\r\n\r\nmodule.exports = {\r\n    configure: function (options) {\r\n        util.expand(soloExports.touch.options, options);\r\n        return soloExports;\r\n    }\r\n};\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved over the object in the 3D window.\r\n * \r\n * @function didObjectEnter\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectEnter\" \"touch.didObjectEnter\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectEnter\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectEnter touch.didObjectEnter()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved off the object in the 3D window.\r\n * \r\n * @function didObjectOut\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectOut\" \"touch.didObjectOut\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectOut\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectOut touch.didObjectOut()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved while over an object in the 3D window.\r\n * \r\n * @function didObjectMove\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @see The corresponding event {@link event:\"touch.didObjectMove\" \"touch.didObjectMove\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectMove\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectMove touch.didObjectMove()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when the pointer was in a pressed and then released state on an object in the 3D window.\r\n * \r\n * @function didObjectClick\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {Handle} handle - Handle of the object in the 3D window\r\n * @param {string} name - Name of the object in the 3D window\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired: \r\n * - Left=1 \r\n * - Right=2 \r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired: \r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didObjectClick\" \"touch.didObjectClick\"}\r\n */\r\n/**\r\n * @event \"touch.didObjectClick\"\r\n * @see The corresponding hook method {@link module:solo.touch.didObjectClick touch.didObjectClick()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved in the 3D window.\r\n * \r\n * @function didPointerMove\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired:\r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired: \r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerMove\" \"touch.didPointerMove\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerMove\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerMove touch.didPointerMove()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved over the 3D window.\r\n * \r\n * @function didPointerEnter\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @see The corresponding event {@link event:\"touch.didPointerEnter\" \"touch.didPointerEnter\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerEnter\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerEnter touch.didPointerEnter()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointer is moved off the 3D window.\r\n * \r\n * @function didPointerOut\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @see The corresponding event {@link event:\"touch.didPointerOut\" \"touch.didPointerOut\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerOut\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerOut touch.didPointerOut()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointing device button is pressed on the 3D window.\r\n * \r\n * @function didPointerDown\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - The button number that was pressed when the event was fired: \r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4\r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired:\r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerDown\" \"touch.didPointerDown\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerDown\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerDown touch.didPointerDown()}\r\n */\r\n\r\n/**\r\n * The hook method is invoked when a pointing device button is released over the 3D window.\r\n * \r\n * @function didPointerUp\r\n * @abstract \r\n * @memberof module:solo.touch\r\n * @param {number} x - The X coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} y - The Y coordinate of the pointer in local (canvas) coordinates\r\n * @param {number} buttons - Bitwise flags of the buttons depressed when the event was fired:\r\n * - Left=1\r\n * - Right=2\r\n * - Middle (wheel)=4 \r\n * @param {number} keys - Bitwise control key flags that were pressed when the event was fired:\r\n * - Shift=1\r\n * - Ctrl=2\r\n * - Alt=4\r\n * @param {object} event - Source PointerEvent or MouseEvent object\r\n * @see The corresponding event {@link event:\"touch.didPointerUp\" \"touch.didPointerUp\"}\r\n */\r\n/**\r\n * @event \"touch.didPointerUp\"\r\n * @see The corresponding hook method {@link module:solo.touch.didPointerUp touch.didPointerUp()}\r\n */\r\n\r\n/**\r\n * Information about the pick process of a 3D object, for example:\r\n * ```\r\n * { \r\n *     x: 153,\r\n *     y: 27,\r\n *     picked: 5698800,\r\n *     chain: [5698800,6100248,6100664,6101200,6101848]\r\n * }\r\n * ```\r\n * @typedef {object} PickInfo\r\n * @param {number} x - The X coordinate of 3D window\r\n * @param {number} y - The Y coordinate of 3D window\r\n * @prop {Handle} picked A handle of the picked 3D object\r\n * @prop {Handle[]} chain The picked 3D object and its ancestors. The ancestors of the picked 3D object consist of the parent of the picked 3D object and the parent's parent and so on. The root element is last.\r\n * @see {@link module:solo.touch.lastPickInfo touch.lastPickInfo}\r\n */","/*!\n * PEP v0.5.1 | https://github.com/jquery/PEP\n * Copyright jQuery Foundation and other contributors | http://jquery.org/license\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.PointerEventsPolyfill = factory());\n}(this, function () { 'use strict';\n\n  /**\n   * This is the constructor for new PointerEvents.\n   *\n   * New Pointer Events must be given a type, and an optional dictionary of\n   * initialization properties.\n   *\n   * Due to certain platform requirements, events returned from the constructor\n   * identify as MouseEvents.\n   *\n   * @constructor\n   * @param {String} inType The type of the event to create.\n   * @param {Object} [inDict] An optional dictionary of initial event properties.\n   * @return {Event} A new PointerEvent of type `inType`, initialized with properties from `inDict`.\n   */\n  var MOUSE_PROPS = [\n    'bubbles',\n    'cancelable',\n    'view',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n    'pageX',\n    'pageY'\n  ];\n\n  var MOUSE_DEFAULTS = [\n    false,\n    false,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n    0,\n    0\n  ];\n\n  function PointerEvent(inType, inDict) {\n    inDict = inDict || Object.create(null);\n\n    var e = document.createEvent('Event');\n    e.initEvent(inType, inDict.bubbles || false, inDict.cancelable || false);\n\n    // define inherited MouseEvent properties\n    // skip bubbles and cancelable since they're set above in initEvent()\n    for (var i = 2, p; i < MOUSE_PROPS.length; i++) {\n      p = MOUSE_PROPS[i];\n      e[p] = inDict[p] || MOUSE_DEFAULTS[i];\n    }\n    e.buttons = inDict.buttons || 0;\n\n    // Spec requires that pointers without pressure specified use 0.5 for down\n    // state and 0 for up state.\n    var pressure = 0;\n\n    if (inDict.pressure !== undefined && e.buttons) {\n      pressure = inDict.pressure;\n    } else {\n      pressure = e.buttons ? 0.5 : 0;\n    }\n\n    // add x/y properties aliased to clientX/Y\n    e.x = e.clientX;\n    e.y = e.clientY;\n\n    // define the properties of the PointerEvent interface\n    e.pointerId = inDict.pointerId || 0;\n    e.width = inDict.width || 1;\n    e.height = inDict.height || 1;\n    e.pressure = pressure;\n    e.tiltX = inDict.tiltX || 0;\n    e.tiltY = inDict.tiltY || 0;\n    e.twist = inDict.twist || 0;\n    e.tangentialPressure = inDict.tangentialPressure || 0;\n    e.pointerType = inDict.pointerType || '';\n    e.hwTimestamp = inDict.hwTimestamp || 0;\n    e.isPrimary = inDict.isPrimary || false;\n    e.detail = 0;\n    return e;\n  }\n\n  /**\n   * This module implements a map of pointer states\n   */\n  var USE_MAP = window.Map && window.Map.prototype.forEach;\n  var PointerMap = USE_MAP ? Map : SparseArrayMap;\n\n  function SparseArrayMap() {\n    this.array = [];\n    this.size = 0;\n  }\n\n  SparseArrayMap.prototype = {\n    set: function(k, v) {\n      if (v === undefined) {\n        return this.delete(k);\n      }\n      if (!this.has(k)) {\n        this.size++;\n      }\n      this.array[k] = v;\n    },\n    has: function(k) {\n      return this.array[k] !== undefined;\n    },\n    delete: function(k) {\n      if (this.has(k)) {\n        delete this.array[k];\n        this.size--;\n      }\n    },\n    get: function(k) {\n      return this.array[k];\n    },\n    clear: function() {\n      this.array.length = 0;\n      this.size = 0;\n    },\n\n    // return value, key, map\n    forEach: function(callback, thisArg) {\n      return this.array.forEach(function(v, k) {\n        callback.call(thisArg, v, k, this);\n      }, this);\n    }\n  };\n\n  var CLONE_PROPS = [\n\n    // MouseEvent\n    'bubbles',\n    'cancelable',\n    'view',\n    'detail',\n    'screenX',\n    'screenY',\n    'clientX',\n    'clientY',\n    'ctrlKey',\n    'altKey',\n    'shiftKey',\n    'metaKey',\n    'button',\n    'relatedTarget',\n\n    // DOM Level 3\n    'buttons',\n\n    // PointerEvent\n    'pointerId',\n    'width',\n    'height',\n    'pressure',\n    'tiltX',\n    'tiltY',\n    'pointerType',\n    'hwTimestamp',\n    'isPrimary',\n\n    // event instance\n    'type',\n    'target',\n    'currentTarget',\n    'which',\n    'pageX',\n    'pageY',\n    'timeStamp'\n  ];\n\n  var CLONE_DEFAULTS = [\n\n    // MouseEvent\n    false,\n    false,\n    null,\n    null,\n    0,\n    0,\n    0,\n    0,\n    false,\n    false,\n    false,\n    false,\n    0,\n    null,\n\n    // DOM Level 3\n    0,\n\n    // PointerEvent\n    0,\n    0,\n    0,\n    0,\n    0,\n    0,\n    '',\n    0,\n    false,\n\n    // event instance\n    '',\n    null,\n    null,\n    0,\n    0,\n    0,\n    0\n  ];\n\n  var BOUNDARY_EVENTS = {\n    'pointerover': 1,\n    'pointerout': 1,\n    'pointerenter': 1,\n    'pointerleave': 1\n  };\n\n  var HAS_SVG_INSTANCE = (typeof SVGElementInstance !== 'undefined');\n\n  /**\n   * This module is for normalizing events. Mouse and Touch events will be\n   * collected here, and fire PointerEvents that have the same semantics, no\n   * matter the source.\n   * Events fired:\n   *   - pointerdown: a pointing is added\n   *   - pointerup: a pointer is removed\n   *   - pointermove: a pointer is moved\n   *   - pointerover: a pointer crosses into an element\n   *   - pointerout: a pointer leaves an element\n   *   - pointercancel: a pointer will no longer generate events\n   */\n  var dispatcher = {\n    pointermap: new PointerMap(),\n    eventMap: Object.create(null),\n    captureInfo: Object.create(null),\n\n    // Scope objects for native events.\n    // This exists for ease of testing.\n    eventSources: Object.create(null),\n    eventSourceList: [],\n    /**\n     * Add a new event source that will generate pointer events.\n     *\n     * `inSource` must contain an array of event names named `events`, and\n     * functions with the names specified in the `events` array.\n     * @param {string} name A name for the event source\n     * @param {Object} source A new source of platform events.\n     */\n    registerSource: function(name, source) {\n      var s = source;\n      var newEvents = s.events;\n      if (newEvents) {\n        newEvents.forEach(function(e) {\n          if (s[e]) {\n            this.eventMap[e] = s[e].bind(s);\n          }\n        }, this);\n        this.eventSources[name] = s;\n        this.eventSourceList.push(s);\n      }\n    },\n    register: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.register.call(es, element);\n      }\n    },\n    unregister: function(element) {\n      var l = this.eventSourceList.length;\n      for (var i = 0, es; (i < l) && (es = this.eventSourceList[i]); i++) {\n\n        // call eventsource register\n        es.unregister.call(es, element);\n      }\n    },\n    contains: /*scope.external.contains || */function(container, contained) {\n      try {\n        return container.contains(contained);\n      } catch (ex) {\n\n        // most likely: https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return false;\n      }\n    },\n\n    // EVENTS\n    down: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerdown', inEvent);\n    },\n    move: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointermove', inEvent);\n    },\n    up: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerup', inEvent);\n    },\n    enter: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerenter', inEvent);\n    },\n    leave: function(inEvent) {\n      inEvent.bubbles = false;\n      this.fireEvent('pointerleave', inEvent);\n    },\n    over: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerover', inEvent);\n    },\n    out: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointerout', inEvent);\n    },\n    cancel: function(inEvent) {\n      inEvent.bubbles = true;\n      this.fireEvent('pointercancel', inEvent);\n    },\n    leaveOut: function(event) {\n      this.out(event);\n      this.propagate(event, this.leave, false);\n    },\n    enterOver: function(event) {\n      this.over(event);\n      this.propagate(event, this.enter, true);\n    },\n\n    // LISTENER LOGIC\n    eventHandler: function(inEvent) {\n\n      // This is used to prevent multiple dispatch of pointerevents from\n      // platform events. This can happen when two elements in different scopes\n      // are set up to create pointer events, which is relevant to Shadow DOM.\n      if (inEvent._handledByPE) {\n        return;\n      }\n      var type = inEvent.type;\n      var fn = this.eventMap && this.eventMap[type];\n      if (fn) {\n        fn(inEvent);\n      }\n      inEvent._handledByPE = true;\n    },\n\n    // set up event listeners\n    listen: function(target, events) {\n      events.forEach(function(e) {\n        this.addEvent(target, e);\n      }, this);\n    },\n\n    // remove event listeners\n    unlisten: function(target, events) {\n      events.forEach(function(e) {\n        this.removeEvent(target, e);\n      }, this);\n    },\n    addEvent: /*scope.external.addEvent || */function(target, eventName) {\n      target.addEventListener(eventName, this.boundHandler);\n    },\n    removeEvent: /*scope.external.removeEvent || */function(target, eventName) {\n      target.removeEventListener(eventName, this.boundHandler);\n    },\n\n    // EVENT CREATION AND TRACKING\n    /**\n     * Creates a new Event of type `inType`, based on the information in\n     * `inEvent`.\n     *\n     * @param {string} inType A string representing the type of event to create\n     * @param {Event} inEvent A platform event with a target\n     * @return {Event} A PointerEvent of type `inType`\n     */\n    makeEvent: function(inType, inEvent) {\n\n      // relatedTarget must be null if pointer is captured\n      if (this.captureInfo[inEvent.pointerId]) {\n        inEvent.relatedTarget = null;\n      }\n      var e = new PointerEvent(inType, inEvent);\n      if (inEvent.preventDefault) {\n        e.preventDefault = inEvent.preventDefault;\n      }\n      e._target = e._target || inEvent.target;\n      return e;\n    },\n\n    // make and dispatch an event in one call\n    fireEvent: function(inType, inEvent) {\n      var e = this.makeEvent(inType, inEvent);\n      return this.dispatchEvent(e);\n    },\n    /**\n     * Returns a snapshot of inEvent, with writable properties.\n     *\n     * @param {Event} inEvent An event that contains properties to copy.\n     * @return {Object} An object containing shallow copies of `inEvent`'s\n     *    properties.\n     */\n    cloneEvent: function(inEvent) {\n      var eventCopy = Object.create(null);\n      var p;\n      for (var i = 0; i < CLONE_PROPS.length; i++) {\n        p = CLONE_PROPS[i];\n        eventCopy[p] = inEvent[p] || CLONE_DEFAULTS[i];\n\n        // Work around SVGInstanceElement shadow tree\n        // Return the <use> element that is represented by the instance for Safari, Chrome, IE.\n        // This is the behavior implemented by Firefox.\n        if (HAS_SVG_INSTANCE && (p === 'target' || p === 'relatedTarget')) {\n          if (eventCopy[p] instanceof SVGElementInstance) {\n            eventCopy[p] = eventCopy[p].correspondingUseElement;\n          }\n        }\n      }\n\n      // keep the semantics of preventDefault\n      if (inEvent.preventDefault) {\n        eventCopy.preventDefault = function() {\n          inEvent.preventDefault();\n        };\n      }\n      return eventCopy;\n    },\n    getTarget: function(inEvent) {\n      var capture = this.captureInfo[inEvent.pointerId];\n      if (!capture) {\n        return inEvent._target;\n      }\n      if (inEvent._target === capture || !(inEvent.type in BOUNDARY_EVENTS)) {\n        return capture;\n      }\n    },\n    propagate: function(event, fn, propagateDown) {\n      var target = event.target;\n      var targets = [];\n\n      // Order of conditions due to document.contains() missing in IE.\n      while (target != null && target !== document && !target.contains(event.relatedTarget)) {\n        targets.push(target);\n        target = target.parentNode;\n\n        // Touch: Do not propagate if node is detached.\n        if (!target) {\n          return;\n        }\n      }\n      if (propagateDown) {\n        targets.reverse();\n      }\n      targets.forEach(function(target) {\n        event.target = target;\n        fn.call(this, event);\n      }, this);\n    },\n    setCapture: function(inPointerId, inTarget, skipDispatch) {\n      if (this.captureInfo[inPointerId]) {\n        this.releaseCapture(inPointerId, skipDispatch);\n      }\n\n      this.captureInfo[inPointerId] = inTarget;\n      this.implicitRelease = this.releaseCapture.bind(this, inPointerId, skipDispatch);\n      document.addEventListener('pointerup', this.implicitRelease);\n      document.addEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('gotpointercapture', { bubbles: true });\n      e.pointerId = inPointerId;\n      e._target = inTarget;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    releaseCapture: function(inPointerId, skipDispatch) {\n      var t = this.captureInfo[inPointerId];\n      if (!t) {\n        return;\n      }\n\n      this.captureInfo[inPointerId] = undefined;\n      document.removeEventListener('pointerup', this.implicitRelease);\n      document.removeEventListener('pointercancel', this.implicitRelease);\n\n      var e = new PointerEvent('lostpointercapture', { bubbles: true });\n      e.pointerId = inPointerId;\n      e._target = t;\n\n      if (!skipDispatch) {\n        this.asyncDispatchEvent(e);\n      }\n    },\n    /**\n     * Dispatches the event to its target.\n     *\n     * @param {Event} inEvent The event to be dispatched.\n     * @return {Boolean} True if an event handler returns true, false otherwise.\n     */\n    dispatchEvent: /*scope.external.dispatchEvent || */function(inEvent) {\n      var t = this.getTarget(inEvent);\n      if (t) {\n        return t.dispatchEvent(inEvent);\n      }\n    },\n    asyncDispatchEvent: function(inEvent) {\n      requestAnimationFrame(this.dispatchEvent.bind(this, inEvent));\n    }\n  };\n  dispatcher.boundHandler = dispatcher.eventHandler.bind(dispatcher);\n\n  var targeting = {\n    shadow: function(inEl) {\n      if (inEl) {\n        return inEl.shadowRoot || inEl.webkitShadowRoot;\n      }\n    },\n    canTarget: function(shadow) {\n      return shadow && Boolean(shadow.elementFromPoint);\n    },\n    targetingShadow: function(inEl) {\n      var s = this.shadow(inEl);\n      if (this.canTarget(s)) {\n        return s;\n      }\n    },\n    olderShadow: function(shadow) {\n      var os = shadow.olderShadowRoot;\n      if (!os) {\n        var se = shadow.querySelector('shadow');\n        if (se) {\n          os = se.olderShadowRoot;\n        }\n      }\n      return os;\n    },\n    allShadows: function(element) {\n      var shadows = [];\n      var s = this.shadow(element);\n      while (s) {\n        shadows.push(s);\n        s = this.olderShadow(s);\n      }\n      return shadows;\n    },\n    searchRoot: function(inRoot, x, y) {\n      if (inRoot) {\n        var t = inRoot.elementFromPoint(x, y);\n        var st, sr;\n\n        // is element a shadow host?\n        sr = this.targetingShadow(t);\n        while (sr) {\n\n          // find the the element inside the shadow root\n          st = sr.elementFromPoint(x, y);\n          if (!st) {\n\n            // check for older shadows\n            sr = this.olderShadow(sr);\n          } else {\n\n            // shadowed element may contain a shadow root\n            var ssr = this.targetingShadow(st);\n            return this.searchRoot(ssr, x, y) || st;\n          }\n        }\n\n        // light dom element is the target\n        return t;\n      }\n    },\n    owner: function(element) {\n      var s = element;\n\n      // walk up until you hit the shadow root or document\n      while (s.parentNode) {\n        s = s.parentNode;\n      }\n\n      // the owner element is expected to be a Document or ShadowRoot\n      if (s.nodeType !== Node.DOCUMENT_NODE && s.nodeType !== Node.DOCUMENT_FRAGMENT_NODE) {\n        s = document;\n      }\n      return s;\n    },\n    findTarget: function(inEvent) {\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n\n      // if the listener is in the shadow root, it is much faster to start there\n      var s = this.owner(inEvent.target);\n\n      // if x, y is not in this root, fall back to document search\n      if (!s.elementFromPoint(x, y)) {\n        s = document;\n      }\n      return this.searchRoot(s, x, y);\n    }\n  };\n\n  var forEach = Array.prototype.forEach.call.bind(Array.prototype.forEach);\n  var map = Array.prototype.map.call.bind(Array.prototype.map);\n  var toArray = Array.prototype.slice.call.bind(Array.prototype.slice);\n  var filter = Array.prototype.filter.call.bind(Array.prototype.filter);\n  var MO = window.MutationObserver || window.WebKitMutationObserver;\n  var SELECTOR = '[touch-action]';\n  var OBSERVER_INIT = {\n    subtree: true,\n    childList: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: ['touch-action']\n  };\n\n  function Installer(add, remove, changed, binder) {\n    this.addCallback = add.bind(binder);\n    this.removeCallback = remove.bind(binder);\n    this.changedCallback = changed.bind(binder);\n    if (MO) {\n      this.observer = new MO(this.mutationWatcher.bind(this));\n    }\n  }\n\n  Installer.prototype = {\n    watchSubtree: function(target) {\n\n      // Only watch scopes that can target find, as these are top-level.\n      // Otherwise we can see duplicate additions and removals that add noise.\n      //\n      // TODO(dfreedman): For some instances with ShadowDOMPolyfill, we can see\n      // a removal without an insertion when a node is redistributed among\n      // shadows. Since it all ends up correct in the document, watching only\n      // the document will yield the correct mutations to watch.\n      if (this.observer && targeting.canTarget(target)) {\n        this.observer.observe(target, OBSERVER_INIT);\n      }\n    },\n    enableOnSubtree: function(target) {\n      this.watchSubtree(target);\n      if (target === document && document.readyState !== 'complete') {\n        this.installOnLoad();\n      } else {\n        this.installNewSubtree(target);\n      }\n    },\n    installNewSubtree: function(target) {\n      forEach(this.findElements(target), this.addElement, this);\n    },\n    findElements: function(target) {\n      if (target.querySelectorAll) {\n        return target.querySelectorAll(SELECTOR);\n      }\n      return [];\n    },\n    removeElement: function(el) {\n      this.removeCallback(el);\n    },\n    addElement: function(el) {\n      this.addCallback(el);\n    },\n    elementChanged: function(el, oldValue) {\n      this.changedCallback(el, oldValue);\n    },\n    concatLists: function(accum, list) {\n      return accum.concat(toArray(list));\n    },\n\n    // register all touch-action = none nodes on document load\n    installOnLoad: function() {\n      document.addEventListener('readystatechange', function() {\n        if (document.readyState === 'complete') {\n          this.installNewSubtree(document);\n        }\n      }.bind(this));\n    },\n    isElement: function(n) {\n      return n.nodeType === Node.ELEMENT_NODE;\n    },\n    flattenMutationTree: function(inNodes) {\n\n      // find children with touch-action\n      var tree = map(inNodes, this.findElements, this);\n\n      // make sure the added nodes are accounted for\n      tree.push(filter(inNodes, this.isElement));\n\n      // flatten the list\n      return tree.reduce(this.concatLists, []);\n    },\n    mutationWatcher: function(mutations) {\n      mutations.forEach(this.mutationHandler, this);\n    },\n    mutationHandler: function(m) {\n      if (m.type === 'childList') {\n        var added = this.flattenMutationTree(m.addedNodes);\n        added.forEach(this.addElement, this);\n        var removed = this.flattenMutationTree(m.removedNodes);\n        removed.forEach(this.removeElement, this);\n      } else if (m.type === 'attributes') {\n        this.elementChanged(m.target, m.oldValue);\n      }\n    }\n  };\n\n  function shadowSelector(s) {\n    return 'body /shadow-deep/ ' + s;\n  }\n  function rule(v) {\n    return '{ -ms-touch-action: ' + v + '; touch-action: ' + v + '; }';\n  }\n  var attrib2css = [\n    { selector: '[touch-action=\"none\"]', value: 'none' },\n    { selector: '[touch-action=\"auto\"]', value: 'auto' },\n    { selector: '[touch-action~=\"pan-x\"]', value: 'pan-x' },\n    { selector: '[touch-action~=\"pan-y\"]', value: 'pan-y' },\n    { selector: '[touch-action~=\"pan-up\"]', value: 'pan-up' },\n    { selector: '[touch-action~=\"pan-down\"]', value: 'pan-down' },\n    { selector: '[touch-action~=\"pan-left\"]', value: 'pan-left' },\n    { selector: '[touch-action~=\"pan-right\"]', value: 'pan-right' }\n  ];\n  var styles = '';\n\n  // only install stylesheet if the browser has touch action support\n  var hasNativePE = window.PointerEvent || window.MSPointerEvent;\n\n  // only add shadow selectors if shadowdom is supported\n  var hasShadowRoot = !window.ShadowDOMPolyfill && document.head.createShadowRoot;\n\n  function applyAttributeStyles() {\n    if (hasNativePE) {\n      attrib2css.forEach(function(r) {\n        styles += r.selector + rule(r.value) + '\\n';\n        if (hasShadowRoot) {\n          styles += shadowSelector(r.selector) + rule(r.value) + '\\n';\n        }\n      });\n\n      var el = document.createElement('style');\n      el.textContent = styles;\n      document.head.appendChild(el);\n    }\n  }\n\n  var pointermap = dispatcher.pointermap;\n\n  // radius around touchend that swallows mouse events\n  var DEDUP_DIST = 25;\n\n  // left, middle, right, back, forward\n  var BUTTON_TO_BUTTONS = [1, 4, 2, 8, 16];\n\n  var HAS_BUTTONS = false;\n  try {\n    HAS_BUTTONS = new MouseEvent('test', { buttons: 1 }).buttons === 1;\n  } catch (e) {}\n\n  // handler block for native mouse events\n  var mouseEvents = {\n    POINTER_ID: 1,\n    POINTER_TYPE: 'mouse',\n    events: [\n      'mousedown',\n      'webkitmouseforcechanged',\n      'mousemove',\n      'mouseup',\n      'mouseover',\n      'mouseout'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    lastTouches: [],\n\n    // collide with the global mouse listener\n    isEventSimulatedFromTouch: function(inEvent) {\n      var lts = this.lastTouches;\n      var x = inEvent.clientX;\n      var y = inEvent.clientY;\n      for (var i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n\n        // simulated mouse events will be swallowed near a primary touchend\n        var dx = Math.abs(x - t.x);\n        var dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n          return true;\n        }\n      }\n    },\n    prepareEvent: function(inEvent) {\n      var e = dispatcher.cloneEvent(inEvent);\n\n      // forward mouse preventDefault\n      var pd = e.preventDefault;\n      e.preventDefault = function() {\n        inEvent.preventDefault();\n        pd();\n      };\n      e.pointerId = this.POINTER_ID;\n      e.isPrimary = true;\n      e.pointerType = this.POINTER_TYPE;\n      if ('webkitForce' in inEvent) {\n        e.pressure = inEvent.webkitForce - MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN;\n      }\n      return e;\n    },\n    prepareButtonsForMove: function(e, inEvent) {\n      var p = pointermap.get(this.POINTER_ID);\n\n      // Update buttons state after possible out-of-document mouseup.\n      if (inEvent.which === 0 || !p) {\n        e.buttons = 0;\n      } else {\n        e.buttons = p.buttons;\n      }\n      inEvent.buttons = e.buttons;\n    },\n    mousedown: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          e.buttons = BUTTON_TO_BUTTONS[e.button];\n          if (p) { e.buttons |= p.buttons; }\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n        if (!p || p.buttons === 0) {\n          dispatcher.down(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n\n    // This is called when the user force presses without moving x/y\n    webkitmouseforcechanged: function(inEvent) {\n      this.mousemove(inEvent);\n    },\n    mousemove: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.move(e);\n      }\n    },\n    mouseup: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var p = pointermap.get(this.POINTER_ID);\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) {\n          var up = BUTTON_TO_BUTTONS[e.button];\n\n          // Produces wrong state of buttons in Browsers without `buttons` support\n          // when a mouse button that was pressed outside the document is released\n          // inside and other buttons are still pressed down.\n          e.buttons = p ? p.buttons & ~up : 0;\n          inEvent.buttons = e.buttons;\n        }\n        pointermap.set(this.POINTER_ID, inEvent);\n\n        // Support: Firefox <=44 only\n        // FF Ubuntu includes the lifted button in the `buttons` property on\n        // mouseup.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=1223366\n        e.buttons &= ~BUTTON_TO_BUTTONS[e.button];\n        if (e.buttons === 0) {\n          dispatcher.up(e);\n        } else {\n          dispatcher.move(e);\n        }\n      }\n    },\n    mouseover: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        pointermap.set(this.POINTER_ID, inEvent);\n        dispatcher.enterOver(e);\n      }\n    },\n    mouseout: function(inEvent) {\n      if (!this.isEventSimulatedFromTouch(inEvent)) {\n        var e = this.prepareEvent(inEvent);\n        if (!HAS_BUTTONS) { this.prepareButtonsForMove(e, inEvent); }\n        e.button = -1;\n        dispatcher.leaveOut(e);\n      }\n    },\n    cancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.deactivateMouse();\n    },\n    deactivateMouse: function() {\n      pointermap.delete(this.POINTER_ID);\n    }\n  };\n\n  var captureInfo = dispatcher.captureInfo;\n  var findTarget = targeting.findTarget.bind(targeting);\n  var allShadows = targeting.allShadows.bind(targeting);\n  var pointermap$1 = dispatcher.pointermap;\n\n  // this should be long enough to ignore compat mouse events made by touch\n  var DEDUP_TIMEOUT = 2500;\n  var ATTRIB = 'touch-action';\n  var INSTALLER;\n\n  // bitmask for _scrollType\n  var UP = 1;\n  var DOWN = 2;\n  var LEFT = 4;\n  var RIGHT = 8;\n  var AUTO = UP | DOWN | LEFT | RIGHT;\n\n  // handler block for native touch events\n  var touchEvents = {\n    events: [\n      'touchstart',\n      'touchmove',\n      'touchforcechange',\n      'touchend',\n      'touchcancel'\n    ],\n    register: function(target) {\n      INSTALLER.enableOnSubtree(target);\n    },\n    unregister: function() {\n\n      // TODO(dfreedman): is it worth it to disconnect the MO?\n    },\n    elementAdded: function(el) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      if (typeof st === \"number\") {\n        el._scrollType = st;\n        dispatcher.listen(el, this.events);\n\n        // set touch-action on shadows as well\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n          dispatcher.listen(s, this.events);\n        }, this);\n      }\n    },\n    elementRemoved: function(el) {\n\n      // In some cases, an element is removed before a touchend.\n      // When this is the case, we should wait for the touchend before unlistening,\n      // because we still want pointer events to bubble up after removing from DOM.\n      if (pointermap$1.size > 0) {\n        var evts = this.events;\n        el.addEventListener('touchend', function() {\n          el._scrollType = undefined;\n          dispatcher.unlisten(el, evts);\n        });\n      } else {\n        el._scrollType = undefined;\n        dispatcher.unlisten(el, this.events);\n      }\n\n      // remove touch-action from shadow\n      allShadows(el).forEach(function(s) {\n        s._scrollType = undefined;\n        dispatcher.unlisten(s, this.events);\n      }, this);\n    },\n    elementChanged: function(el, oldValue) {\n      var a = el.getAttribute(ATTRIB);\n      var st = this.touchActionToScrollType(a);\n      var oldSt = this.touchActionToScrollType(oldValue);\n\n      // simply update scrollType if listeners are already established\n      if (typeof st === \"number\" && typeof oldSt === \"number\") {\n        el._scrollType = st;\n        allShadows(el).forEach(function(s) {\n          s._scrollType = st;\n        }, this);\n      } else if (typeof oldSt === \"number\") {\n        this.elementRemoved(el);\n      } else if (typeof st === \"number\") {\n        this.elementAdded(el);\n      }\n    },\n    scrollTypes: {\n      UP: function(s) {\n        return s.includes('pan-y') || s.includes('pan-up') ? UP : 0;\n      },\n      DOWN: function(s) {\n        return s.includes('pan-y') || s.includes('pan-down') ? DOWN : 0;\n      },\n      LEFT: function(s) {\n        return s.includes('pan-x') || s.includes('pan-left') ? LEFT : 0;\n      },\n      RIGHT: function(s) {\n        return s.includes('pan-x') || s.includes('pan-right') ? RIGHT : 0;\n      }\n    },\n    touchActionToScrollType: function(touchAction) {\n      if (!touchAction) {\n        return;\n      }\n\n      if (touchAction === \"auto\") {\n        return AUTO;\n      }\n\n      if (touchAction === \"none\") {\n        return 0;\n      }\n\n      var s = touchAction.split(' ');\n      var st = this.scrollTypes;\n\n      // construct a bitmask of allowed scroll directions\n      return st.UP(s) | st.DOWN(s) | st.LEFT(s) | st.RIGHT(s);\n    },\n    POINTER_TYPE: 'touch',\n    firstTouch: null,\n    isPrimaryTouch: function(inTouch) {\n      return this.firstTouch === inTouch.identifier;\n    },\n    setPrimaryTouch: function(inTouch) {\n\n      // set primary touch if there no pointers, or the only pointer is the mouse\n      if (pointermap$1.size === 0 || (pointermap$1.size === 1 && pointermap$1.has(1))) {\n        this.firstTouch = inTouch.identifier;\n        this.firstXY = { X: inTouch.clientX, Y: inTouch.clientY };\n        this.scrolling = false;\n      }\n    },\n    removePrimaryPointer: function(inPointer) {\n      if (inPointer.isPrimary) {\n        this.firstTouch = null;\n        this.firstXY = null;\n      }\n    },\n    typeToButtons: function(type) {\n      var ret = 0;\n      if (type === 'touchstart' || type === 'touchmove' || type === 'touchforcechange') {\n        ret = 1;\n      }\n      return ret;\n    },\n    touchToPointer: function(inTouch) {\n      var cte = this.currentTouchEvent;\n      var e = dispatcher.cloneEvent(inTouch);\n\n      // We reserve pointerId 1 for Mouse.\n      // Touch identifiers can start at 0.\n      // Add 2 to the touch identifier for compatibility.\n      var id = e.pointerId = inTouch.identifier + 2;\n      e.target = captureInfo[id] || findTarget(e);\n      e.bubbles = true;\n      e.cancelable = true;\n      e.button = 0;\n      e.buttons = this.typeToButtons(cte.type);\n      e.width = (inTouch.radiusX || inTouch.webkitRadiusX || 0) * 2;\n      e.height = (inTouch.radiusY || inTouch.webkitRadiusY || 0) * 2;\n      e.pressure = inTouch.force !== undefined ?\n        inTouch.force :\n        inTouch.webkitForce !== undefined ?\n          inTouch.webkitForce : undefined;\n      e.isPrimary = this.isPrimaryTouch(inTouch);\n      if (inTouch.altitudeAngle) {\n        var tan = Math.tan(inTouch.altitudeAngle);\n        var radToDeg = 180 / Math.PI;\n        e.tiltX = Math.atan(Math.cos(inTouch.azimuthAngle) / tan) * radToDeg;\n        e.tiltY = Math.atan(Math.sin(inTouch.azimuthAngle) / tan) * radToDeg;\n      } else {\n        e.tiltX = 0;\n        e.tiltY = 0;\n      }\n      if (inTouch.touchType === 'stylus') {\n        e.pointerType = 'pen';\n      } else {\n        e.pointerType = this.POINTER_TYPE;\n      }\n\n      // forward modifier keys\n      e.altKey = cte.altKey;\n      e.ctrlKey = cte.ctrlKey;\n      e.metaKey = cte.metaKey;\n      e.shiftKey = cte.shiftKey;\n\n      // forward touch preventDefaults\n      var self = this;\n      e.preventDefault = function() {\n        self.scrolling = false;\n        self.firstXY = null;\n        cte.preventDefault();\n      };\n      return e;\n    },\n    processTouches: function(inEvent, inFunction) {\n      var tl = inEvent.changedTouches;\n      this.currentTouchEvent = inEvent;\n      for (var i = 0, t; i < tl.length; i++) {\n        t = tl[i];\n        inFunction.call(this, this.touchToPointer(t));\n      }\n    },\n\n    // For single axis scrollers, determines whether the element should emit\n    // pointer events or behave as a scroller\n    shouldScroll: function(inEvent) {\n      if (this.firstXY) {\n        var ret;\n        var st = inEvent.currentTarget._scrollType;\n        if (st === 0) {\n\n          // this element is a `touch-action: none`, should never scroll\n          ret = false;\n        } else if (st === AUTO) {\n\n          // this element is a `touch-action: auto`, should always scroll\n          ret = true;\n        } else {\n          var t = inEvent.changedTouches[0];\n\n          var dy = t.clientY - this.firstXY.Y;\n          var dya = Math.abs(dy);\n          var dx = t.clientX - this.firstXY.X;\n          var dxa = Math.abs(dx);\n\n          var up = st & UP;\n          var down = st & DOWN;\n          var left = st & LEFT;\n          var right = st & RIGHT;\n\n          if (left && right) {\n\n            // should scroll on the x axis\n            ret = dxa > dya;\n          } else if (left) {\n\n            // should scroll left\n            ret = dxa > dya && dx > 0;\n          } else if (right) {\n\n            // should scroll right\n            ret = dxa > dya && dx < 0;\n          }\n\n          if (!ret) {\n            if (up && down) {\n\n              // should scroll on the y axis\n              ret = dxa < dya;\n            } else if (up) {\n\n              // should scroll up\n              ret = dxa < dya && dy > 0;\n            } else if (down) {\n\n              // should scroll down\n              ret = dxa < dya && dy < 0;\n            }\n          }\n\n        }\n        this.firstXY = null;\n        return ret;\n      }\n    },\n    findTouch: function(inTL, inId) {\n      for (var i = 0, l = inTL.length, t; i < l && (t = inTL[i]); i++) {\n        if (t.identifier === inId) {\n          return true;\n        }\n      }\n    },\n\n    // In some instances, a touchstart can happen without a touchend. This\n    // leaves the pointermap in a broken state.\n    // Therefore, on every touchstart, we remove the touches that did not fire a\n    // touchend event.\n    // To keep state globally consistent, we fire a\n    // pointercancel for this \"abandoned\" touch\n    vacuumTouches: function(inEvent) {\n      var tl = inEvent.touches;\n\n      // pointermap.size should be < tl.length here, as the touchstart has not\n      // been processed yet.\n      if (pointermap$1.size >= tl.length) {\n        var d = [];\n        pointermap$1.forEach(function(value, key) {\n\n          // Never remove pointerId == 1, which is mouse.\n          // Touch identifiers are 2 smaller than their pointerId, which is the\n          // index in pointermap.\n          if (key !== 1 && !this.findTouch(tl, key - 2)) {\n            var p = value.out;\n            d.push(p);\n          }\n        }, this);\n        d.forEach(this.cancelOut, this);\n      }\n    },\n    touchstart: function(inEvent) {\n      this.vacuumTouches(inEvent);\n      this.setPrimaryTouch(inEvent.changedTouches[0]);\n      this.dedupSynthMouse(inEvent);\n      if (!this.scrolling) {\n        this.processTouches(inEvent, this.overDown);\n      }\n    },\n    overDown: function(inPointer) {\n      pointermap$1.set(inPointer.pointerId, {\n        target: inPointer.target,\n        out: inPointer,\n        outTarget: inPointer.target\n      });\n      dispatcher.enterOver(inPointer);\n      dispatcher.down(inPointer);\n    },\n\n    // Called when pressure or tilt changes without the x/y changing\n    touchforcechange: function(inEvent) {\n      this.touchmove(inEvent);\n    },\n    touchmove: function(inEvent) {\n      if (!this.scrolling) {\n        if (this.shouldScroll(inEvent)) {\n          this.scrolling = true;\n          this.touchcancel(inEvent);\n        } else {\n          if (inEvent.type !== 'touchforcechange') {\n            inEvent.preventDefault();\n          }\n          this.processTouches(inEvent, this.moveOverOut);\n        }\n      }\n    },\n    moveOverOut: function(inPointer) {\n      var event = inPointer;\n      var pointer = pointermap$1.get(event.pointerId);\n\n      // a finger drifted off the screen, ignore it\n      if (!pointer) {\n        return;\n      }\n      var outEvent = pointer.out;\n      var outTarget = pointer.outTarget;\n      dispatcher.move(event);\n      if (outEvent && outTarget !== event.target) {\n        outEvent.relatedTarget = event.target;\n        event.relatedTarget = outTarget;\n\n        // recover from retargeting by shadow\n        outEvent.target = outTarget;\n        if (event.target) {\n          dispatcher.leaveOut(outEvent);\n          dispatcher.enterOver(event);\n        } else {\n\n          // clean up case when finger leaves the screen\n          event.target = outTarget;\n          event.relatedTarget = null;\n          this.cancelOut(event);\n        }\n      }\n      pointer.out = event;\n      pointer.outTarget = event.target;\n    },\n    touchend: function(inEvent) {\n      this.dedupSynthMouse(inEvent);\n      this.processTouches(inEvent, this.upOut);\n    },\n    upOut: function(inPointer) {\n      if (!this.scrolling) {\n        dispatcher.up(inPointer);\n        dispatcher.leaveOut(inPointer);\n      }\n      this.cleanUpPointer(inPointer);\n    },\n    touchcancel: function(inEvent) {\n      this.processTouches(inEvent, this.cancelOut);\n    },\n    cancelOut: function(inPointer) {\n      dispatcher.cancel(inPointer);\n      dispatcher.leaveOut(inPointer);\n      this.cleanUpPointer(inPointer);\n    },\n    cleanUpPointer: function(inPointer) {\n      pointermap$1.delete(inPointer.pointerId);\n      this.removePrimaryPointer(inPointer);\n    },\n\n    // prevent synth mouse events from creating pointer events\n    dedupSynthMouse: function(inEvent) {\n      var lts = mouseEvents.lastTouches;\n      var t = inEvent.changedTouches[0];\n\n      // only the primary finger will synth mouse events\n      if (this.isPrimaryTouch(t)) {\n\n        // remember x/y of last touch\n        var lt = { x: t.clientX, y: t.clientY };\n        lts.push(lt);\n        var fn = (function(lts, lt) {\n          var i = lts.indexOf(lt);\n          if (i > -1) {\n            lts.splice(i, 1);\n          }\n        }).bind(null, lts, lt);\n        setTimeout(fn, DEDUP_TIMEOUT);\n      }\n    }\n  };\n\n  INSTALLER = new Installer(touchEvents.elementAdded, touchEvents.elementRemoved,\n    touchEvents.elementChanged, touchEvents);\n\n  var pointermap$2 = dispatcher.pointermap;\n  var HAS_BITMAP_TYPE = window.MSPointerEvent &&\n    typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE === 'number';\n  var msEvents = {\n    events: [\n      'MSPointerDown',\n      'MSPointerMove',\n      'MSPointerUp',\n      'MSPointerOut',\n      'MSPointerOver',\n      'MSPointerCancel',\n      'MSGotPointerCapture',\n      'MSLostPointerCapture'\n    ],\n    register: function(target) {\n      dispatcher.listen(target, this.events);\n    },\n    unregister: function(target) {\n      dispatcher.unlisten(target, this.events);\n    },\n    POINTER_TYPES: [\n      '',\n      'unavailable',\n      'touch',\n      'pen',\n      'mouse'\n    ],\n    prepareEvent: function(inEvent) {\n      var e = inEvent;\n      if (HAS_BITMAP_TYPE) {\n        e = dispatcher.cloneEvent(inEvent);\n        e.pointerType = this.POINTER_TYPES[inEvent.pointerType];\n      }\n      return e;\n    },\n    cleanup: function(id) {\n      pointermap$2.delete(id);\n    },\n    MSPointerDown: function(inEvent) {\n      pointermap$2.set(inEvent.pointerId, inEvent);\n      var e = this.prepareEvent(inEvent);\n      dispatcher.down(e);\n    },\n    MSPointerMove: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.move(e);\n    },\n    MSPointerUp: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.up(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSPointerOut: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.leaveOut(e);\n    },\n    MSPointerOver: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.enterOver(e);\n    },\n    MSPointerCancel: function(inEvent) {\n      var e = this.prepareEvent(inEvent);\n      dispatcher.cancel(e);\n      this.cleanup(inEvent.pointerId);\n    },\n    MSLostPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('lostpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    },\n    MSGotPointerCapture: function(inEvent) {\n      var e = dispatcher.makeEvent('gotpointercapture', inEvent);\n      dispatcher.dispatchEvent(e);\n    }\n  };\n\n  function applyPolyfill() {\n\n    // only activate if this platform does not have pointer events\n    if (!window.PointerEvent) {\n      window.PointerEvent = PointerEvent;\n\n      if (window.navigator.msPointerEnabled) {\n        var tp = window.navigator.msMaxTouchPoints;\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: tp,\n          enumerable: true\n        });\n        dispatcher.registerSource('ms', msEvents);\n      } else {\n        Object.defineProperty(window.navigator, 'maxTouchPoints', {\n          value: 0,\n          enumerable: true\n        });\n        dispatcher.registerSource('mouse', mouseEvents);\n        if (window.ontouchstart !== undefined) {\n          dispatcher.registerSource('touch', touchEvents);\n        }\n      }\n\n      dispatcher.register(document);\n    }\n  }\n\n  var n = window.navigator;\n  var s;\n  var r;\n  var h;\n  function assertActive(id) {\n    if (!dispatcher.pointermap.has(id)) {\n      var error = new Error('NotFoundError');\n      error.name = 'NotFoundError';\n      throw error;\n    }\n  }\n  function assertConnected(elem) {\n    var parent = elem.parentNode;\n    while (parent && parent !== elem.ownerDocument) {\n      parent = parent.parentNode;\n    }\n    if (!parent) {\n      var error = new Error('InvalidStateError');\n      error.name = 'InvalidStateError';\n      throw error;\n    }\n  }\n  function inActiveButtonState(id) {\n    var p = dispatcher.pointermap.get(id);\n    return p.buttons !== 0;\n  }\n  if (n.msPointerEnabled) {\n    s = function(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this, true);\n        this.msSetPointerCapture(pointerId);\n      }\n    };\n    r = function(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId, true);\n      this.msReleasePointerCapture(pointerId);\n    };\n  } else {\n    s = function setPointerCapture(pointerId) {\n      assertActive(pointerId);\n      assertConnected(this);\n      if (inActiveButtonState(pointerId)) {\n        dispatcher.setCapture(pointerId, this);\n      }\n    };\n    r = function releasePointerCapture(pointerId) {\n      assertActive(pointerId);\n      dispatcher.releaseCapture(pointerId);\n    };\n  }\n  h = function hasPointerCapture(pointerId) {\n    return !!dispatcher.captureInfo[pointerId];\n  };\n\n  function applyPolyfill$1() {\n    if (window.Element && !window.Element.prototype.setPointerCapture) {\n      Object.defineProperties(window.Element.prototype, {\n        'setPointerCapture': {\n          value: s\n        },\n        'releasePointerCapture': {\n          value: r\n        },\n        'hasPointerCapture': {\n          value: h\n        }\n      });\n    }\n  }\n\n  applyAttributeStyles();\n  applyPolyfill();\n  applyPolyfill$1();\n\n  var pointerevents = {\n    dispatcher: dispatcher,\n    Installer: Installer,\n    PointerEvent: PointerEvent,\n    PointerMap: PointerMap,\n    targetFinding: targeting\n  };\n\n  return pointerevents;\n\n}));","require('./skin/skin.less');\n\nvar Cortona3DSolo = require('solo');\n\nvar usedSkins = {},\n    UISkinController = require('./skin/UISkinController'),\n    util = require('lib/util');\n\nvar m_options = {};\n\n\n/**\n * A simple User Interface (UI) helper object.\n * \n * Requires the use of the internal module `\"skin\"`.\n * \n * @namespace\n * @memberof module:solo\n * @since 1.6.0\n * @example\nCortona3DSolo.use('skin', {\n    baseUrl: 'uniview/'\n});\nCortona3DSolo.skin.create('app').use('solo-uniview', {\n    src: 'procedure.interactivity.xml'\n});\n */\nvar skin = {\n    /**\n     * @class The constructor creates an instance of {@link UISkinController} object.\n     * @see UISkinController\n     */\n    UISkinController: UISkinController,\n\n    /**\n     * Creates a new skin area with given name in the coordinates of the base element.\n     * \n     * @param {string} name\n     * @param {HTMLElement|CSSSelector} [baseElement=document.body] HTML node or CSS selector\n     * @returns {UISkinController}\n     */\n    create: function (name, baseElement) {\n        if (!usedSkins[name]) {\n            usedSkins[name] = new skin.UISkinController(name, (typeof baseElement === 'string' ? document.querySelector(baseElement) : baseElement));\n        }\n        return usedSkins[name];\n    },\n\n    /**\n     * Removes the skin area with the given name.\n     * \n     * @param {string} name\n     */\n    remove: function (name) {\n        if (usedSkins[name]) {\n            // detach?\n            delete usedSkins[name];\n        }\n    },\n\n    /**\n     * Gets the skin area controller with the given name.\n     * \n     * @param {string} name\n     * @returns {UISkinController}\n     */\n    get: function (name) {\n        return usedSkins[name];\n    },\n\n    /**\n     * Loads the component module using `requirejs` configured with the `\"skin\"` module options and returns the factory function of the component.\n     * \n     * @async\n     * @param {string} name\n     * @returns {Promise.<UISkinComponentFactory>} The Promise object whose fulfillment handler receives the factory function when the requested external component file has successfully been loaded.\n     */\n    require: function (name) {\n        return Cortona3DSolo.app.util.requirePromise(name, window.requirejs.config(m_options));\n    }\n};\n\nmodule.exports = {\n    configure: function (options) {\n        m_options = util.expand({}, options || {});\n        return {\n            skin: skin\n        };\n    }\n};","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/less-loader/dist/cjs.js!./skin.less\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".skin-holder {\\n  position: absolute;\\n  height: 100%;\\n  width: 100%;\\n  overflow: hidden;\\n  pointer-events: none;\\n  display: flex;\\n  flex-direction: column;\\n  touch-action: none;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n          user-select: none;\\n  /*\\n    font-family: Verdana, Geneva, Tahoma, sans-serif;\\n    font-size: 12px;\\n    color: white;\\n    .skin-control {\\n        background-color: rgba(100, 120, 140, .7);\\n    }\\n    */\\n}\\n.skin-holder > * {\\n  pointer-events: auto;\\n}\\n.skin-holder button,\\n.skin-holder select,\\n.skin-holder input[type=button],\\n.skin-holder input[type=checkbox] {\\n  display: inline-block;\\n  border: none;\\n  padding: 0.4em;\\n  cursor: pointer;\\n  font-family: inherit;\\n  font-size: inherit;\\n  color: inherit;\\n}\\n.skin-holder button,\\n.skin-holder input[type=button] {\\n  min-width: 4em;\\n}\\n.skin-holder input[type=range] {\\n  width: 100%;\\n  margin: 0;\\n  padding: 0;\\n}\\n.skin-holder label {\\n  font-weight: bold;\\n  margin-right: 0.5em;\\n}\\n.skin-holder label > * {\\n  margin-left: 0.5em;\\n}\\n.skin-holder .skin-container {\\n  display: flex;\\n}\\n.skin-holder .skin-container.row {\\n  flex-direction: row;\\n}\\n.skin-holder .skin-container.col {\\n  flex-direction: column;\\n}\\n.skin-holder .skin-toolbar {\\n  z-index: 100;\\n  display: flex;\\n  justify-content: space-between;\\n  align-items: center;\\n  white-space: nowrap;\\n  padding: 0 0.5em;\\n  height: 3em;\\n  min-height: 3em;\\n  flex: 0 0 auto;\\n}\\n.skin-holder .skin-toolbar .skin-container {\\n  align-items: center;\\n  flex-grow: 1;\\n  margin: 0 0.5em;\\n}\\n.skin-holder .skin-toolbar .skin-container.left {\\n  justify-content: flex-start;\\n  order: -1;\\n  flex-grow: 0;\\n  margin-left: 0;\\n}\\n.skin-holder .skin-toolbar .skin-container.right {\\n  justify-content: flex-end;\\n  order: 1;\\n  flex-grow: 0;\\n  margin-right: 0;\\n}\\n.skin-holder .skin-toolbar .skin-control {\\n  margin-right: 0.5em;\\n}\\n.skin-holder .skin-panel {\\n  display: flex;\\n  flex-direction: column;\\n  padding: 0 1em;\\n}\\n.skin-holder .skin-img-button {\\n  background-repeat: no-repeat;\\n  margin: 0;\\n  display: inline-block;\\n  vertical-align: top;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","var util = require('lib/util');\r\n\r\nvar EventEmitter = require('events').EventEmitter;\r\n\r\nvar createElement = require('lib/create-element').createElement,\r\n    html = require('lib/create-element').createElementsFromHTML,\r\n    css = require('lib/css-object'),\r\n    millicolor = require('lib/color-object');\r\n\r\nfunction toUISkinKey(name) {\r\n    return name.toLowerCase().replace(/\\W/g, '');\r\n}\r\n\r\nfunction toArray(arg, from) {\r\n    if (util.isNumber(from)) {\r\n        return Array.prototype.slice.call(arg, from);\r\n    }\r\n    return Array.prototype.slice.call(arg);\r\n}\r\n\r\nfunction createTag(tag, options, content) {\r\n    var attr = options;\r\n\r\n    if (util.isString(options)) {\r\n        tag += options;\r\n        attr = {};\r\n    }\r\n    return createElement(tag, attr, toArray(arguments, 2));\r\n}\r\n\r\nfunction isUISkinComponent(obj) {\r\n    return util.isObject(obj) && obj.hasOwnProperty('$el');\r\n}\r\n\r\nvar UISkinElement = util.defineClass(EventEmitter,\r\n    /**\r\n     * @classdesc The class that provides the base interface for all UI objects.\r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {external:EventEmitter}\r\n     */\r\n    function () {\r\n        this.setMaxListeners(0); // Infinity\r\n    },\r\n    /** \r\n     * @lends UISkinElement.prototype \r\n     */\r\n    {\r\n        /**\r\n         * The root node of the object.\r\n         * \r\n         * @abstract\r\n         * @member {HTMLElement} $el \r\n         * @memberof UISkinElement\r\n         */\r\n        emit: function (name) {\r\n            if (!PRODUCTION) {\r\n                console.log('EVENT: ', Array.prototype.slice.call(arguments), this);\r\n            }\r\n            EventEmitter.prototype.emit.apply(this, arguments);\r\n        },\r\n        /**\r\n         * Inserts a set of {@link UISkinComponent} objects, `Node` objects or `DOMString` objects \r\n         * after the last child of the root node of the object.\r\n         * \r\n         * @param {...(UISkinComponent|HTMLElement|string)} child\r\n         */\r\n        append: function () {\r\n            if (this.$el) {\r\n                Element.prototype.append.apply(this.$el,\r\n                    Array.prototype.slice.call(arguments).map(function (arg) {\r\n                        if (isUISkinComponent(arg)) {\r\n                            return arg.$el || '';\r\n                        }\r\n                        return arg || '';\r\n                    })\r\n                );\r\n            }\r\n        },\r\n        /**\r\n         * Removes a set of {@link UISkinComponent} objects or `Node` objects from the DOM.\r\n         * The string argument is treated as a CSS selector that defines the nodes to be removed from the DOM. \r\n         * \r\n         * If the argument is omitted, the root node of the object itself is removed from the DOM.\r\n         * \r\n         * @param {...(UISkinComponent|HTMLElement|CSSSelector)} [child]\r\n         */\r\n        remove: function () {\r\n            if (!arguments.length) {\r\n                if (isUISkinComponent(this)) {\r\n                    if (this.$el) {\r\n                        this.$el.parentNode.removeChild(this.$el);\r\n                    }\r\n                }\r\n            } else {\r\n                Array.prototype.slice.call(arguments).forEach(function (el) {\r\n                    if (typeof el === 'string' && this.$el) {\r\n                        el = this.$el.querySelectorAll(el);\r\n                        this.remove.apply(this, Array.prototype.slice.call(el));\r\n                        return;\r\n                    } else if (isUISkinComponent(el)) {\r\n                        el = el.$el;\r\n                    }\r\n                    if (el && el.parentNode) {\r\n                        el.parentNode.removeChild(el);\r\n                    }\r\n                }, this);\r\n            }\r\n        }\r\n    }\r\n);\r\n\r\nvar UISkinComponent = util.defineClass(UISkinElement,\r\n    /**\r\n     * @classdesc The class that provides an interface for the UI component object.\r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {UISkinElement}\r\n     */\r\n    function () {\r\n        UISkinElement.call(this);\r\n    },\r\n    /** \r\n     * @lends UISkinComponent.prototype \r\n     */\r\n    {\r\n        /**\r\n         * Assigns a DOM node to the component instance.\r\n         * \r\n         * @memberof UISkinComponent.prototype \r\n         * @method\r\n         * @param {HTMLElement} element\r\n         * @returns {UISkinComponent} This object itself\r\n         * @example \r\ndefine(function (require, exports, module) {\r\n    module.exports = function (skin, options, solo) {\r\n        var element = skin.createElement('span', options.text);\r\n        // \"this\" is UISkinComponent instance \r\n        return this.exports(element); \r\n    }\r\n});\r\n         */\r\n        exports: function (element, props) {\r\n            Object.defineProperties(this, {\r\n                /**\r\n                 * The root node of the component.\r\n                 * \r\n                 * @member {HTMLElement} $el\r\n                 * @readonly\r\n                 * @memberof UISkinComponent\r\n                 */\r\n                '$el': {\r\n                    value: element\r\n                },\r\n                'element': {\r\n                    value: element\r\n                }\r\n            });\r\n            if (element) {\r\n                if (element.classList) {\r\n                    /**\r\n                     * Reference to the `classList` property of the root node.\r\n                     * \r\n                     * @member {DOMTokenList} classList\r\n                     * @readonly\r\n                     * @memberof UISkinComponent\r\n                     */\r\n                    Object.defineProperty(this, 'classList', {\r\n                        value: element.classList\r\n                    });\r\n                }\r\n            }\r\n            if (props) {\r\n                for (var key in props) {\r\n                    if (props.hasOwnProperty(key)) {\r\n                        switch (typeof props[key]) {\r\n                            case 'function':\r\n                                Object.defineProperty(this, key, {\r\n                                    configurable: true,\r\n                                    enumerable: true,\r\n                                    writable: true,\r\n                                    value: props[key]\r\n                                });\r\n                                break;\r\n                            default:\r\n                                Object.defineProperty(this, key, props[key]);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n    }\r\n);\r\n\r\nvar UISkinController = util.defineClass(UISkinElement,\r\n    /**\r\n     * @classdesc The class that provides an interface for the UI controller object.\r\n     * \r\n     * The UI controller object is linked to a box area in the HTML layout where UI elements will be added, which is called the skin area.\r\n     * \r\n     * @hideconstructor\r\n     * @constructs\r\n     * @implements {UISkinElement}\r\n     */\r\n    function (name, baseElement) {\r\n        UISkinElement.call(this);\r\n\r\n        this.name = name;\r\n\r\n        var rootNode = document.body;\r\n        if (baseElement) {\r\n            rootNode = baseElement;\r\n        } else if (Cortona3DSolo.core && Cortona3DSolo.core.canvas) {\r\n            rootNode = Cortona3DSolo.core.canvas.parentNode;\r\n        } else if (Cortona3DSolo.drawing && Cortona3DSolo.drawing.svg) {\r\n            rootNode = Cortona3DSolo.drawing.svg.parentNode;\r\n        }\r\n\r\n        var element = rootNode.querySelector('.skin-holder');\r\n\r\n        if (!element || element.parentNode !== rootNode) {\r\n            element = (function (div) {\r\n                rootNode.insertBefore(div, rootNode.firstChild).className = 'skin-holder';\r\n                return div;\r\n            })(document.createElement('div'));\r\n        }\r\n\r\n        element.classList.add('skin-holder-' + toUISkinKey(this.name));\r\n\r\n        Object.defineProperties(this, {\r\n            /**\r\n             * The root node of the skin area.\r\n             * \r\n             * @member {HTMLElement} $el\r\n             * @readonly\r\n             * @memberof UISkinController\r\n             */\r\n            '$el': {\r\n                value: element\r\n            },\r\n            'element': {\r\n                value: element\r\n            },\r\n            /**\r\n             * Reference to the `classList` property of the root node.\r\n             * \r\n             * @member {DOMTokenList} classList\r\n             * @readonly\r\n             * @memberof UISkinController\r\n             */\r\n            'classList': {\r\n                value: element.classList\r\n            }\r\n        });\r\n    },\r\n    /** \r\n     * @lends UISkinController.prototype \r\n     */\r\n    {\r\n        /**\r\n         * Creates an instance of the component as needed and appends it to the skin area root node if the component is an object of type {@link UISkinComponent} or HTMLElement.\r\n         * \r\n         * The argument can be:\r\n         * - a factory function of the component - {@link UISkinComponentFactory}\r\n         * - the instance of the component - {@link UISkinComponent}\r\n         * - an HTML node\r\n         * - a string with the module name of the component\r\n         * - an object with two properties `component` and `option`\r\n         * - a Promise object that returns any object of the types listed here\r\n         * - an array containing any object of the types listed here\r\n         * \r\n         * If an array is used as an argument, the return value is an array of created components.\r\n         * \r\n         * If an asynchronous load is required when creating a component instance, \r\n         * i.e. a string with the name of the component module or a Promise object is used, \r\n         * the Promise object is returned with the result.\r\n         * \r\n         * @param {(UISkinComponent|UISkinComponentFactory|HTMLElement|string|object|Promise|Array)} components \r\n         * @param {object} [options] An options object that apply to factory \r\n         * @returns {UISkinComponent|Promise.<UISkinComponent>|HTMLElement|Array}\r\n         * @example <caption>HTML element</caption>\r\nvar skin = solo.skin.create('app');\r\nskin.render(skin.create('span', 'A message')); // -> HTMLElement\r\n         * @example <caption>Component module</caption>\r\nskin.render('components/wait', { type: 'win8' }); // -> Promise.<UISkinComponent>\r\n         * @example <caption>Component factory function</caption>\r\nskin.render(function (skin, options, solo) {\r\n    return this.exports(skin.create('span', options.message || ''));\r\n}); // -> UISkinComponent\r\n         * @example <caption>A Promise object that returns the component factory function</caption>\r\nskin.render(solo.skin.require('components/wait'), { type: 'win8' }); // -> Promise.<UISkinComponent>\r\n         * @example <caption>A Promise object that returns the component instance</caption>\r\nskin.render(skin.use('components/wait', { type: 'win8' })); // -> Promise.<UISkinComponent>\r\n         * @example <caption>An object</caption>\r\nskin.render({\r\n    component: require('components/wait'),\r\n    options: {\r\n        type: 'win8'\r\n    }\r\n}, options); // -> UISkinComponent\r\n         * @example <caption>An array</caption>\r\nskin.render([ ... ], options); // -> UISkinComponent[]\r\n         * @example <caption>An array with the asynchronous loading of elements</caption>\r\nskin.render([\r\n    skin.create('h3', 'Component sample'), \r\n    'components/wait'\r\n], { type: 'win8' }); // -> Promise.<[HTMLElement, UISkinComponent]>\r\n         */\r\n        render: function (components, options) {\r\n            var self = this,\r\n                component;\r\n            if (components) {\r\n                if (util.isString(components)) {\r\n                    return this.render(this.use(components, options), options);\r\n                } else if (util.isFunction(components)) {\r\n                    component = this.create(components, options);\r\n                    return this.render(component, options);\r\n                } else if (util.isObject(components)) {\r\n                    if (isUISkinComponent(components) || util.isHTMLNode(components)) {\r\n                        this.append(components);\r\n                        return components;\r\n                    } else if (util.isPromise(components)) {\r\n                        return components.then(function (component) {\r\n                            return self.render(component, options);\r\n                        });\r\n                    } else if (components.forEach) {\r\n                        res = components.map(function (item) {\r\n                            return this.render(item, options);\r\n                        }, this);\r\n                        return res.some(function (component) {\r\n                            return util.isPromise(component);\r\n                        }) ? Promise.all(res) : res;\r\n                    } else if (util.isObject(components.rules) && util.isFunction(components.render)) {\r\n                        components.render();\r\n                        return components;\r\n                    } else if (components.component) {\r\n                        return this.render(components.component, Cortona3DSolo.expand(components.options || {}, options || {}));\r\n                    }\r\n                }\r\n            }\r\n            return components;\r\n        },\r\n        /**\r\n         * @private\r\n         */\r\n        register: function (factory, options) {\r\n            return this.create(factory, options);\r\n        },\r\n        /**\r\n         * Creates an instance of the component.\r\n         * \r\n         * Loads the module with the factory function, if necessary, \r\n         * performs the factory function of the component and returns the result.\r\n         * \r\n         * @async\r\n         * @param {string|UISkinComponentFactory} name \r\n         * - a string with the module name of the component\r\n         * - factory function of the component - {@link UISkinComponentFactory}\r\n         * @param {*} options \r\n         * @returns {Promise.<UISkinComponent>} `Promise` whose fulfillment handler receives an {@link UISkinComponent} instance of the requested component.\r\n         */\r\n        use: function (name, options) {\r\n            var self = this;\r\n\r\n            if (util.isString(name)) {\r\n                return Cortona3DSolo.skin.require(name)\r\n                    .then(function (factory) {\r\n                        return self.create(factory, options);\r\n                    });\r\n            }\r\n\r\n            if (util.isFunction(name)) {\r\n                // use(factory, options)\r\n                return Promise.resolve(this.create(name, options));\r\n            }\r\n\r\n            return Promise.reject(new Error('The first argument in use() must be string or factory function.'));\r\n        },\r\n        /**\r\n         * Shows the HTML element.\r\n         * If the argument is omitted, shows the contents of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         */\r\n        show: function (el) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                el.style.visibility = 'visible';\r\n                el.style.display = '';\r\n            }\r\n            return el;\r\n        },\r\n        /**\r\n         * Hides the HTML element.\r\n         * If the argument is omitted, hides the contents of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         * @param {boolean} [force=false] \r\n         * - `false` - `style.visibility='hidden'` is used\r\n         * - `true` - `style.dispaly='none'` is used\r\n         */\r\n        hide: function (el, force) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n                force = true;\r\n            }\r\n            if (el) {\r\n                el.style.visibility = 'hidden';\r\n                if (force) {\r\n                    el.style.display = 'none';\r\n                }\r\n            }\r\n            return el;\r\n        },\r\n        /**\r\n         * Toggles visibility of the HTML element.\r\n         * If the argument is omitted, toggles visibility of the skin area itself.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         * @param {boolean} [visibility] \r\n         * @returns {boolean}\r\n         */\r\n        toggle: function (el, visibility) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (typeof el === \"boolean\") {\r\n                el = this.$el;\r\n                visibility = el;\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                if (util.isUndefined(visibility)) visibility = el.style.display === 'none';\r\n                el.style.display = visibility ? '' : 'none';\r\n                el.style.visibility = visibility ? 'visible' : 'hidden';\r\n            }\r\n            return visibility;\r\n        },\r\n        /**\r\n         * Clears contents of the HTML element.\r\n         * If the argument is omitted, the contents of the skin root node are cleared.\r\n         * \r\n         * @param {HTMLElement|CSSSelector} [el] HTML node or CSS selector\r\n         */\r\n        clear: function (el) {\r\n            if (util.isString(el)) {\r\n                el = document.querySelector(el);\r\n            } else if (util.isUndefined(el)) {\r\n                el = this.$el;\r\n            }\r\n            if (el) {\r\n                el.innerHTML = '';\r\n            }\r\n        },\r\n        /**\r\n         * Creates an HTML element or instance of a component.\r\n         * \r\n         * @param {string|UISkinComponentFactory} factory\r\n         * @param {object} [options] Contains properties needed to create a new HTML element or UISkinComponent object.\r\n         * @param {...*} [content] The contents of the new HTML element.\r\n         * @returns {HTMLElement|UISkinComponent}\r\n         * @see {@link module:solo.app.ui.createElement app.ui.createElement()}\r\n         * @example\r\nskin.create('span#msg', 'A message'); // -> HTMLElement\r\nskin.create(require('components/wait'), { type: 'win8' }); // -> UISkinComponent\r\n         */\r\n        create: function (factory, options) {\r\n            function resolveUISkinComponent(child) {\r\n                if (Array.isArray(child)) {\r\n                    return child.map(resolveUISkinComponent);\r\n                } else if (isUISkinComponent(child)) {\r\n                    return child.$el || '';\r\n                } else {\r\n                    return child;\r\n                }\r\n            }\r\n            if (util.isFunction(factory)) {\r\n                var component = new UISkinComponent(),\r\n                    res = factory.call(component, this, options || {}, Cortona3DSolo);\r\n                if (!util.isUndefined(res)) {\r\n                    component = res;\r\n                }\r\n                return component || {};\r\n            } else {\r\n                return createElement.apply(this, Array.prototype.slice.call(arguments).map(resolveUISkinComponent));\r\n            }\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        toolbar: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-toolbar');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        container: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-container');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        panel: function (options, content) {\r\n            var el = this.div.apply(this, arguments);\r\n            el.classList.add('skin-panel');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        button: function (options, content) {\r\n            var el = createTag.apply(this, ['button'].concat(toArray(arguments)));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        buttonImg: function (options, content) {\r\n            var el = this.span.apply(this, arguments);\r\n            el.classList.add('skin-img-button');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        input: function (options, content) {\r\n            var el = createTag.apply(this, ['input'].concat(toArray(arguments)));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * Creates an HTML element `<select>`\r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects with the contents of `<select>` items.\r\n         * The object must contains properties:\r\n         * - `description` - the `<option>` contents\r\n         * - `value` - value of the attribute of the same name\r\n         * - `selected` - value of the attribute of the same name\r\n         * A string can be used as the content of an element `<option>` instead of an object.\r\n         */\r\n        select: function (options, items) {\r\n            var el = createTag.apply(this, ['select', options].concat(\r\n                items.map(function (option) {\r\n                    var o = option;\r\n                    if (util.isString(option)) {\r\n                        o = {\r\n                            description: option\r\n                        };\r\n                    }\r\n                    return this.create('option', {\r\n                        selected: o.selected,\r\n                        value: o.value\r\n                    }, o.description);\r\n                }, this)\r\n            ));\r\n            el.classList.add('skin-control');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {string} type \"ul\" or \"ol\"\r\n         * @param {object} options\r\n         * @param {object[]} items\r\n         */\r\n        list: function (type, options, items) {\r\n            if (type !== 'ul' && type !== 'ol') {\r\n                console.error('Type of list must be \"ol\" or \"ul\" only.');\r\n            }\r\n            var el = createTag.apply(this, [type, options].concat(\r\n                items.map(function (item) {\r\n                    return this.create('li', {}, item);\r\n                }, this)\r\n            ));\r\n            return el;\r\n        },\r\n        /**\r\n         * Creates the HTML `<ul>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects to create the content of `<li>` elements. This can be a string or HTML element.\r\n         */\r\n        ul: function (options, items) {\r\n            return this.list('ul', options, items);\r\n        },\r\n        /**\r\n         * Creates the HTML `<ol>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects to create the content of `<li>` elements. This can be a string or HTML element.\r\n         */\r\n        ol: function (options, items) {\r\n            return this.list('ol', options, items);\r\n        },\r\n        /**\r\n         * Creates the HTML `<dl>` element\r\n         * \r\n         * @param {object} options The properties of the new element.\r\n         * @param {object[]} items An array of objects with the contents of `<dl>` items.\r\n         * The object must contains properties:\r\n         * - `term` - the `<dt>` contents\r\n         * - `def` - the `<dd>` contents\r\n         */\r\n        dl: function (options, items) {\r\n            var self = this;\r\n            var el = createTag.apply(this, ['dl', options].concat(\r\n                items.reduce(function (a, item) {\r\n                    return a.concat(\r\n                        self.create('dt', {}, item.term),\r\n                        self.create('dd', {}, item.def)\r\n                    );\r\n                }, [])\r\n            ));\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        text: function (options, content) {\r\n            var el = this.span.apply(this, arguments);\r\n            el.classList.add('skin-text');\r\n            return el;\r\n        },\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        label: createTag.bind(this, 'label'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        p: createTag.bind(this, 'p'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        a: createTag.bind(this, 'a'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        span: createTag.bind(this, 'span'),\r\n        /**\r\n         * @private\r\n         * @param {object} options\r\n         * @param {...*} [content]\r\n         */\r\n        div: createTag.bind(this, 'div'),\r\n        /**\r\n         * Checks if the HTML element is hidden.\r\n         * \r\n         * @param {HTMLElement} node\r\n         * @returns {boolean}\r\n         */\r\n        isHidden: function (node) {\r\n            return !node.offsetWidth && !node.offsetHeight;\r\n        },\r\n        /**\r\n         * Checks if the HTML element is visible in the scroll area on the screen.\r\n         * \r\n         * @param {HTMLElement} node\r\n         * @param {boolean} [checkHorizontal=false] Checks also the offset on the horizontal axis.\r\n         * @returns {boolean}\r\n         */\r\n        isVisible: function (node, checkHorizontal) {\r\n            var nodeRect = node.getBoundingClientRect(),\r\n                thisRect = (this.$el || this.element).getBoundingClientRect();\r\n            return (nodeRect.top >= thisRect.top && nodeRect.bottom <= thisRect.bottom) &&\r\n                (!checkHorizontal || (nodeRect.left >= thisRect.left && nodeRect.right <= thisRect.right));\r\n        },\r\n        createElement: createElement,\r\n        html: html,\r\n        css: css,\r\n        color: millicolor\r\n    }\r\n);\r\n\r\nmodule.exports = UISkinController;\r\n\r\n/**\r\n * A function that creates a new instance of a user interface component.\r\n * \r\n * @param {UISkinController} skin\r\n * @param {object} options\r\n * @param {Cortona3DSolo} solo\r\n * @typedef {function} UISkinComponentFactory\r\n * @this UISkinComponent\r\n * @example\r\nfunction (skin, options, solo) {\r\n    return this.exports(skin.create('#message', options.message | ''));\r\n}\r\n */\r\n\r\n/**\r\n * A CSS selector that directly match one element in a document, based on the type of element, class, or id.\r\n * \r\n * @typedef {string} CSSSelector\r\n * @example \r\nspan#ident.class-one.class-two\r\n */","var deepmerge = require('lib/deepmerge');\r\nvar isFunction = require('lib/util').isFunction;\r\n\r\n// https://github.com/just-boris/require-mini\r\n\r\nfunction safeGet(global, value) {\r\n    return value.split('.').reduce(function (obj, prop) {\r\n        return obj && obj[prop];\r\n    }, global);\r\n}\r\n\r\nfunction defer() {\r\n    var result = {};\r\n    result.promise = new Promise(function (resolve, reject) {\r\n        result.resolve = resolve;\r\n        result.reject = reject;\r\n    });\r\n    return result;\r\n}\r\n\r\nfunction invokeLater(context, fn) {\r\n    lastTask = lastTask.then(function () {\r\n        pendingModule = context;\r\n        return fn();\r\n    }).then(cleanup, cleanup);\r\n\r\n    function cleanup() {\r\n        pendingModule = null;\r\n    }\r\n}\r\n\r\nfunction appendJs(name) {\r\n    return /^\\/|:|\\?|\\.js$/.test(name) ? name : name + '.js';\r\n}\r\n\r\nfunction pathName(name, path) {\r\n    var pathname = name,\r\n        re = /^\\.+\\//,\r\n        a = path.slice(0, path.length - 1),\r\n        component;\r\n    while (a.length && re.test(pathname)) {\r\n        component = a.pop();\r\n        component = component.substr(component.lastIndexOf('!') + 1);\r\n        pathname = component.substr(0, component.lastIndexOf('/') + 1).replace(/^!+/, '') + pathname;\r\n    }\r\n    return pathname;\r\n}\r\n\r\nvar contexts = {},\r\n    lastTask = Promise.resolve(),\r\n    pendingModule = null;\r\n\r\nfunction createContext(contextName, contextOptions) {\r\n\r\n    contextOptions = contextOptions || {};\r\n\r\n    if (!contexts[contextName]) {\r\n\r\n        function loadDep(name, path) {\r\n            if (config.shim[name]) {\r\n                return loadByShim(name, path);\r\n            } else {\r\n                var deferred = defer();\r\n                deferred.name = name;\r\n                deferred.path = path;\r\n                deferred.context = contextName;\r\n                invokeLater(deferred, function () {\r\n                    return loadScript(name, path).catch(function () {\r\n                        deferred.reject(new Error('Error while loading module \"' + name + '\"'));\r\n                    });\r\n                });\r\n                return deferred.promise;\r\n            }\r\n        }\r\n\r\n        function loadByShim(name, path) {\r\n            var shim = config.shim[name];\r\n            return _require(shim.deps || [], function () {\r\n                return loadScript(name, path).then(shim.exportsFn || function () {\r\n                    return (shim.init && shim.init()) || safeGet(window, shim.exports);\r\n                });\r\n            }, null, path);\r\n        }\r\n\r\n        function loadScript(name, path) {\r\n            return new Promise(function (resolve, reject) {\r\n                var el = requirejs.load(null, name, toUrl(name, path, true));\r\n                el.onerror = reject;\r\n                el.onload = resolve;\r\n            });\r\n        }\r\n\r\n        function loadWithPlugin(dependency, path) {\r\n            var index = dependency.lastIndexOf('!'),\r\n                plugin = dependency.substr(0, index).replace(/^!+/, ''),\r\n                context = createContext(null).getContext();\r\n            dependency = dependency.substr(index + 1);\r\n            return context._require([plugin], function (plugin) {\r\n                return new Promise(function (resolve, reject) {\r\n                    function localRequire() {\r\n                        if (!resolved) {\r\n                            return requirejs.apply(null, arguments);\r\n                        }\r\n                    }\r\n                    Object.keys(requirejs).forEach(function (key) {\r\n                        localRequire[key] = requirejs[key];\r\n                    });\r\n                    var resolved = false;\r\n                    resolve.error = reject;\r\n                    resolve.fromText = function (name, text) {\r\n                        if (!text) {\r\n                            text = name;\r\n                        }\r\n                        var previousModule = pendingModule;\r\n                        pendingModule = {\r\n                            name: name,\r\n                            resolve: resolve,\r\n                            reject: reject,\r\n                            path: path\r\n                        };\r\n                        /* jshint -W054 */\r\n                        (new Function(text))();\r\n                        /* jshint +W054 */\r\n                        pendingModule = previousModule;\r\n                        resolved = true;\r\n                    };\r\n                    plugin.load(pathName(dependency, path), localRequire, resolve, config);\r\n                });\r\n            }, null, path);\r\n        }\r\n\r\n        var commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\r\n            cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]*)[\"']\\s*\\)/g;\r\n\r\n        function wrapCommonJS(name, factory, path) {\r\n            var deps = [];\r\n            factory.toString()\r\n                .replace(commentRegExp, '')\r\n                .replace(cjsRequireRegExp, function (match, dep) {\r\n                    deps.push(dep);\r\n                });\r\n\r\n            return {\r\n                deps: deps,\r\n                factory: function () {\r\n                    var args = arguments,\r\n                        modules = deps.reduce(function (modules, name, index) {\r\n                            modules[name] = args[index];\r\n                            return modules;\r\n                        }, {});\r\n\r\n                    function localRequire(name) {\r\n                        if (!modules[name]) {\r\n                            throw new Error('Module \"' + deps + '\" has not been loaded yet');\r\n                        }\r\n                        return modules[name];\r\n                    }\r\n\r\n                    localRequire.toUrl = function (name) {\r\n                        return toUrl(name, path);\r\n                    };\r\n\r\n                    return factory(\r\n                        localRequire,\r\n                        locals.exports(name),\r\n                        locals.module(name)\r\n                    );\r\n                }\r\n            };\r\n        }\r\n\r\n\r\n        function _require(deps, factory, errback, path) {\r\n            var currentModule = path.slice(-1)[0];\r\n            return new Promise(function (resolve, reject) {\r\n                Promise.all(deps.map(function (dependency) {\r\n                    if (path.indexOf(dependency) > -1) {\r\n                        return Promise.reject(new Error('Circular dependency: ' + path.concat(dependency).join(' -> ')));\r\n                    }\r\n                    var newPath = path.concat(dependency);\r\n                    if (locals[dependency]) {\r\n                        return locals[dependency](currentModule);\r\n                    }\r\n                    if (dependency.indexOf('!') > -1) {\r\n                        modules[dependency] = loadWithPlugin(dependency, newPath);\r\n                    }\r\n                    if (predefines[dependency]) {\r\n                        modules[dependency] = Promise.resolve().then(function () {\r\n                            return _require.apply(null, predefines[dependency].concat([newPath]));\r\n                        });\r\n                    } else if (!modules[dependency]) {\r\n                        modules[dependency] = loadDep(dependency, newPath);\r\n                    }\r\n                    return modules[dependency];\r\n                })).then(resolve, reject);\r\n            }).then(function (instances) {\r\n                if (isFunction(factory)) {\r\n                    var result = factory.apply(null, instances);\r\n                    return currentModule && safeGet(modules[currentModule], 'module.exports') || result;\r\n                } else {\r\n                    return factory;\r\n                }\r\n            }, function (reason) {\r\n                if (isFunction(errback)) {\r\n                    errback(reason);\r\n                }\r\n                requirejs.onError(reason);\r\n                return Promise.reject(reason);\r\n            });\r\n        }\r\n\r\n        function requirejs(deps, factory, errback) {\r\n            return _require(deps, factory, errback, []);\r\n        }\r\n\r\n        var modules,\r\n            predefines,\r\n            config,\r\n            locals = {\r\n                require: function (moduleName) {\r\n                    return requirejs;\r\n                },\r\n                module: function (moduleName) {\r\n                    var module = modules[moduleName];\r\n                    if (!module) {\r\n                        throw new Error('Module \"module\" should be required only by modules');\r\n                    }\r\n                    return (module.module = module.module || {\r\n                        id: moduleName,\r\n                        config: function () {\r\n                            return config.config[moduleName] || {};\r\n                        }\r\n                    });\r\n                },\r\n                exports: function (moduleName) {\r\n                    return (locals.module(moduleName).exports = {});\r\n                }\r\n            };\r\n\r\n        requirejs.resetContext = function () {\r\n            config = {\r\n                urlArgs: '',\r\n                baseUrl: './',\r\n                paths: {},\r\n                shim: {},\r\n                bundles: {},\r\n                config: {}\r\n            };\r\n            modules = {};\r\n            predefines = {};\r\n        };\r\n\r\n        requirejs.config = function (options) {\r\n            if (!options.context) {\r\n                config = deepmerge(config, options);\r\n            } else {\r\n                return createContext(options.context, options);\r\n            }\r\n        };\r\n\r\n        requirejs.load = function (context, name, url) {\r\n            var el = document.createElement(\"script\");\r\n            el.src = url;\r\n            el.async = true;\r\n            document.getElementsByTagName('body')[0].appendChild(el);\r\n            return el;\r\n        };\r\n\r\n        function toUrl(name, path, appendJS) {\r\n            var bundle = Object.keys(config.bundles).filter(function (bundle) {\r\n                return config.bundles[bundle].indexOf(name) > -1;\r\n            })[0];\r\n            if (bundle) {\r\n                return requirejs.toUrl(bundle);\r\n            }\r\n            if (config.paths[name]) {\r\n                name = config.paths[name];\r\n                if (appendJS) {\r\n                    name += '.js';\r\n                }\r\n            } else {\r\n                if (appendJS) {\r\n                    name = appendJs(name);\r\n                }\r\n                if (path) {\r\n                    name = pathName(name, path);\r\n                }\r\n            }\r\n            if (!/^([\\w\\+\\.\\-]+:)?\\//.test(name)) {\r\n                name = config.baseUrl + name;\r\n            }\r\n            if (config.urlArgs) {\r\n                name += '?' + config.urlArgs;\r\n            }\r\n            return name;\r\n        }\r\n\r\n        requirejs.toUrl = function (name) {\r\n            return toUrl(name);\r\n        };\r\n\r\n        requirejs.specified = function (name) {\r\n            return modules.hasOwnProperty(name);\r\n        };\r\n\r\n        requirejs.onError = function (reason) {\r\n            console.error(reason);\r\n        };\r\n\r\n        requirejs.resetContext();\r\n\r\n        requirejs.getContext = function () {\r\n            return {\r\n                config: config,\r\n                modules: modules,\r\n                predefines: predefines,\r\n                wrapCommonJS: wrapCommonJS,\r\n                _require: _require\r\n            };\r\n\r\n        };\r\n\r\n        contexts[contextName] = requirejs;\r\n    }\r\n\r\n    var options = deepmerge({}, contextOptions);\r\n    delete options.context;\r\n    contexts[contextName].config(options);\r\n\r\n    return contexts[contextName];\r\n}\r\n\r\nfunction define(name, deps, factory) {\r\n    if (typeof name !== 'string') {\r\n        factory = deps;\r\n        deps = name;\r\n        name = null;\r\n    }\r\n    if (!Array.isArray(deps)) {\r\n        factory = deps;\r\n        deps = [];\r\n    }\r\n\r\n    var deferred = pendingModule,\r\n        context = createContext(name ? null : (deferred && deferred.context)).getContext();\r\n\r\n    if (name === null && !deferred) {\r\n        throw new Error('Unexpected define!');\r\n    }\r\n\r\n    if (deps.length === 0 && factory.length > 0) {\r\n        var wrapped = context.wrapCommonJS(name || deferred.name, factory, [].concat(deferred.path, ''));\r\n        deps = wrapped.deps;\r\n        factory = wrapped.factory;\r\n    }\r\n\r\n    if (name === null || deferred && deferred.name === name) {\r\n        var module = context._require(deps, factory, deferred.reject, deferred.path);\r\n        deferred.resolve(module);\r\n    } else {\r\n        context.predefines[name] = [deps, factory, null];\r\n    }\r\n}\r\n\r\ndefine.amd = {};\r\n\r\nvar requirejs = createContext(null);\r\n\r\nmodule.exports = {\r\n    define: define,\r\n    require: requirejs,\r\n    requirejs: requirejs\r\n};","/* brought from https://github.com/KyleAMathews/deepmerge and unwrapped from UMD */\nfunction deepmerge(target, src) {\n    var array = Array.isArray(src);\n    var dst = array && [] || {};\n\n    if (array) {\n        target = target || [];\n        dst = dst.concat(target);\n        src.forEach(function(e, i) {\n            if (typeof dst[i] === 'undefined') {\n                dst[i] = e;\n            } else if (typeof e === 'object') {\n                dst[i] = deepmerge(target[i], e);\n            } else {\n                if (target.indexOf(e) === -1) {\n                    dst.push(e);\n                }\n            }\n        });\n    } else {\n        if (target && typeof target === 'object') {\n            Object.keys(target).forEach(function (key) {\n                dst[key] = target[key];\n            });\n        }\n        Object.keys(src).forEach(function (key) {\n            if (typeof src[key] !== 'object' || !src[key]) {\n                dst[key] = src[key];\n            }\n            else {\n                if (!target[key]) {\n                    dst[key] = src[key];\n                } else {\n                    dst[key] = deepmerge(target[key], src[key]);\n                }\n            }\n        });\n    }\n\n    return dst;\n}\n\nmodule.exports = deepmerge;\n","define('res', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            onload(require.toUrl(name));\r\n        }\r\n    };\r\n});\r\n","define('file', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            onload(require.toUrl(name));\r\n        }\r\n    };\r\n});\r\n","define('css', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            var linkElement = document.createElement('link');\r\n            linkElement.href = require.toUrl(name);\r\n\r\n            var isLoaded = Array.prototype.slice.call(\r\n                document.getElementsByTagName('head')[0].querySelectorAll('link[rel=stylesheet]')\r\n            ).some(function (link) {\r\n                return link.href === linkElement.href;\r\n            });\r\n\r\n            if (!isLoaded) {\r\n                linkElement.rel = 'stylesheet';\r\n                linkElement.type = 'text/css';\r\n                linkElement.onload = onload;\r\n                linkElement.onerror = onload.error;\r\n                document.getElementsByTagName('head')[0].appendChild(linkElement);\r\n            } else {\r\n                onload({});\r\n            }\r\n        }\r\n    };\r\n});","define('json', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'application/json', 'json')\r\n                .then(function (xhr) {\r\n                    if (xhr.response === null) {\r\n                        throw new Error('Failed parsing JSON file \"' + name + '\"');\r\n                    } else if (typeof xhr.response === 'string') {\r\n                        var json = JSON.parse(xhr.response);\r\n                        if (json) {\r\n                            onload(json);\r\n                        } else {\r\n                            throw new Error('Failed parsing JSON file \"' + name + '\"');\r\n                        }\r\n                    } else {\r\n                        onload(xhr.response);\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});","define('xml', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'text/xml')\r\n                .then(function (xhr) {\r\n                    if (xhr.responseXML) {\r\n                        onload(xhr.responseXML);\r\n                    } else {\r\n                        throw new Error(url + \" empty content\");\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});","define('raw', function () {\r\n    return {\r\n        load: function (name, require, onload, config) {\r\n            Cortona3DSolo.app.util.loadResource(require.toUrl(name), 'text/plain')\r\n                .then(function (xhr) {\r\n                    if (xhr.response) {\r\n                        onload(xhr.response);\r\n                    } else {\r\n                        throw new Error(url + \" empty content\");\r\n                    }\r\n                })\r\n                .catch(onload.error);\r\n        }\r\n    };\r\n});"],"sourceRoot":""}